var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===0||t===1&&e[2]===".."||e[t-1]==="..")continue;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,g=t&&t.split("/"),y=o.map,b=y&&y["*"];e&&(e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e[0].charAt(0)==="."&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),m(e),e=e.join("/"));if(n&&y&&(g||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(g)for(a=g.length;a>0;a-=1){i=getOwn(y,g.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=e.indexOf("!")===-1?g(e,l,i):e:(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];typeof t=="string"&&(r.defQueueMap[t]=!0),l.push(e)}),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}r.defQueueMap={}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)hasProp(r.defQueueMap,n)||this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){try{s=r.execCb(n,o,i,s)}catch(u){e=u}this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e);typeof console!="undefined"&&console.error?console.error(e):req.onError(e)}}else s=o;this.exports=s;if(this.map.isDefine&&!this.ignore){c[n]=s;if(req.onResourceLoad){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(r,this.map,a)}}C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.map.normalizedMap=s,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){if(this.undefed)return;this.defineDep(t,e),this.check()})),this.errback?x(e,"error",bind(this,this.errback)):this.events.error&&x(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,defQueueMap:{},Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t,null,!0))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),i=getOwn(u,e);i.undefed=!0,y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),delete r.defQueueMap[e],i&&(i.events.defined&&(f[e]=i.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,i,s=getOwn(o.shim,e)||{},a=s.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r.defQueueMap={},i=getOwn(u,e);if(!t&&!hasProp(c,e)&&i&&!i.inited){if(o.enforceDefine&&(!a||!getGlobal(a))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,s.deps||[],s.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id)){var n=[];return eachProp(u,function(e,r){r.indexOf("_@r")!==0&&each(e.depMaps,function(e){return e.id===t.id&&n.push(r),!0})}),T(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.22",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),r.onNodeCreated&&r.onNodeCreated(i,r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),function(e,t,n){"use strict";function r(e,t){return t=t||Error,function(){var n=2,r=arguments,i=r[0],s="["+(e?e+":":"")+i+"] ",o=r[1],u,a;s+=o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),i=t+n;return i<r.length?tn(r[i]):e}),s+="\nhttp://errors.angularjs.org/1.4.9/"+(e?e+"/":"")+i;for(a=n,u="?";a<r.length;a++,u="&")s+=u+"p"+(a-n)+"="+encodeURIComponent(tn(r[a]));return new t(s)}}function x(e){if(e==null||J(e))return!1;if(X(e)||U(e)||h&&e instanceof h)return!0;var t="length"in Object(e)&&e.length;return z(t)&&(t>=0&&(t-1 in e||e instanceof Array)||typeof e.item=="function")}function T(e,t,n){var r,i;if(e)if(V(e))for(r in e)r!="prototype"&&r!="length"&&r!="name"&&(!e.hasOwnProperty||e.hasOwnProperty(r))&&t.call(n,e[r],r,e);else if(X(e)||x(e)){var s=typeof e!="object";for(r=0,i=e.length;r<i;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==T)e.forEach(t,n,e);else if(R(e))for(r in e)t.call(n,e[r],r,e);else if(typeof e.hasOwnProperty=="function")for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)u.call(e,r)&&t.call(n,e[r],r,e);return e}function N(e,t,n){var r=Object.keys(e).sort();for(var i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function C(e){return function(t,n){e(n,t)}}function k(){return++S}function L(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function A(e,t,n){var r=e.$$hashKey;for(var i=0,s=t.length;i<s;++i){var o=t[i];if(!q(o)&&!V(o))continue;var u=Object.keys(o);for(var a=0,f=u.length;a<f;a++){var l=u[a],c=o[l];n&&q(c)?W(c)?e[l]=new Date(c.valueOf()):$(c)?e[l]=new RegExp(c):c.nodeName?e[l]=c.cloneNode(!0):st(c)?e[l]=c.clone():(q(e[l])||(e[l]=X(c)?[]:{}),A(e[l],[c],!0)):e[l]=c}}return L(e,r),e}function O(e){return A(e,d.call(arguments,1),!1)}function M(e){return A(e,d.call(arguments,1),!0)}function _(e){return parseInt(e,10)}function D(e,t){return O(Object.create(e),t)}function P(){}function H(e){return e}function B(e){return function(){return e}}function j(e){return V(e.toString)&&e.toString!==g}function F(e){return typeof e=="undefined"}function I(e){return typeof e!="undefined"}function q(e){return e!==null&&typeof e=="object"}function R(e){return e!==null&&typeof e=="object"&&!y(e)}function U(e){return typeof e=="string"}function z(e){return typeof e=="number"}function W(e){return g.call(e)==="[object Date]"}function V(e){return typeof e=="function"}function $(e){return g.call(e)==="[object RegExp]"}function J(e){return e&&e.window===e}function K(e){return e&&e.$evalAsync&&e.$watch}function Q(e){return g.call(e)==="[object File]"}function G(e){return g.call(e)==="[object FormData]"}function Y(e){return g.call(e)==="[object Blob]"}function Z(e){return typeof e=="boolean"}function et(e){return e&&V(e.then)}function nt(e){return e&&z(e.length)&&tt.test(g.call(e))}function st(e){return!!e&&!!(e.nodeName||e.prop&&e.attr&&e.find)}function ot(e){var t={},n=e.split(","),r;for(r=0;r<n.length;r++)t[n[r]]=!0;return t}function ut(e){return o(e.nodeName||e[0]&&e[0].nodeName)}function at(e,t){return Array.prototype.indexOf.call(e,t)!=-1}function ft(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function lt(e,t){function i(e,t){var n=t.$$hashKey,r,i;if(X(e))for(var o=0,a=e.length;o<a;o++)t.push(s(e[o]));else if(R(e))for(i in e)t[i]=s(e[i]);else if(e&&typeof e.hasOwnProperty=="function")for(i in e)e.hasOwnProperty(i)&&(t[i]=s(e[i]));else for(i in e)u.call(e,i)&&(t[i]=s(e[i]));return L(t,n),t}function s(e){if(!q(e))return e;var t=n.indexOf(e);if(t!==-1)return r[t];if(J(e)||K(e))throw b("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var s=!1,o;return X(e)?(o=[],s=!0):nt(e)?o=new e.constructor(e):W(e)?o=new Date(e.getTime()):$(e)?(o=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),o.lastIndex=e.lastIndex):V(e.cloneNode)?o=e.cloneNode(!0):(o=Object.create(y(e)),s=!0),n.push(e),r.push(o),s?i(e,o):o}var n=[],r=[];if(t){if(nt(t))throw b("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw b("cpi","Can't copy! Source and destination are identical.");return X(t)?t.length=0:T(t,function(e,n){n!=="$$hashKey"&&delete t[n]}),n.push(e),r.push(t),i(e,t)}return s(e)}function ct(e,t){if(X(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(q(e)){t=t||{};for(var i in e)if(i.charAt(0)!=="$"||i.charAt(1)!=="$")t[i]=e[i]}return t||e}function ht(e,t){if(e===t)return!0;if(e===null||t===null)return!1;if(e!==e&&t!==t)return!0;var n=typeof e,r=typeof t,i,s,o;if(n==r&&n=="object"){if(!X(e)){if(W(e))return W(t)?ht(e.getTime(),t.getTime()):!1;if($(e))return $(t)?e.toString()==t.toString():!1;if(K(e)||K(t)||J(e)||J(t)||X(t)||W(t)||$(t))return!1;o=Vt();for(s in e){if(s.charAt(0)==="$"||V(e[s]))continue;if(!ht(e[s],t[s]))return!1;o[s]=!0}for(s in t)if(!(s in o)&&s.charAt(0)!=="$"&&I(t[s])&&!V(t[s]))return!1;return!0}if(!X(t))return!1;if((i=e.length)==t.length){for(s=0;s<i;s++)if(!ht(e[s],t[s]))return!1;return!0}}return!1}function vt(e,t,n){return e.concat(d.call(t,n))}function mt(e,t){return d.call(e,t||0)}function gt(e,t){var n=arguments.length>2?mt(arguments,2):[];return!V(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,vt(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function yt(e,r){var i=r;return typeof e=="string"&&e.charAt(0)==="$"&&e.charAt(1)==="$"?i=n:J(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":K(r)&&(i="$SCOPE"),i}function bt(e,t){return typeof e=="undefined"?n:(z(t)||(t=t?2:null),JSON.stringify(e,yt,t))}function wt(e){return U(e)?JSON.parse(e):e}function Et(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function St(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function xt(e,t,n){n=n?-1:1;var r=Et(t,e.getTimezoneOffset());return St(e,n*(r-e.getTimezoneOffset()))}function Tt(e){e=h(e).clone();try{e.empty()}catch(t){}var n=h("<div>").append(e).html();try{return e[0].nodeType===Kt?o(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+o(t)})}catch(t){return o(n)}}function Nt(e){try{return decodeURIComponent(e)}catch(t){}}function Ct(e){var t={};return T((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),n!==-1&&(r=e.substring(0,n),i=e.substring(n+1)),r=Nt(r),I(r)&&(i=I(i)?Nt(i):!0,u.call(t,r)?X(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function kt(e){var t=[];return T(e,function(e,n){X(e)?T(e,function(e){t.push(At(n,!0)+(e===!0?"":"="+At(e,!0)))}):t.push(At(n,!0)+(e===!0?"":"="+At(e,!0)))}),t.length?t.join("&"):""}function Lt(e){return At(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function At(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function Mt(e,t){var n,r,i=Ot.length;for(r=0;r<i;++r){n=Ot[r]+t;if(U(n=e.getAttribute(n)))return n}return null}function _t(e,t){var n,r,i={};T(Ot,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),T(Ot,function(t){var i=t+"app",s;!n&&(s=e.querySelector("["+i.replace(":","\\:")+"]"))&&(n=s,r=s.getAttribute(i))}),n&&(i.strictDi=Mt(n,"strict-di")!==null,t(n,r?[r]:[],i))}function Dt(n,r,i){q(i)||(i={});var s={strictDi:!1};i=O(s,i);var o=function(){n=h(n);if(n.injector()){var e=n[0]===t?"document":Tt(n);throw b("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var s=ar(r,i.strictDi);return s.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,n,r,i){t.$apply(function(){n.data("$injector",i),r(n)(t)})}]),s},u=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;e&&u.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(u,""));if(e&&!a.test(e.name))return o();e.name=e.name.replace(a,""),w.resumeBootstrap=function(e){return T(e,function(e){r.push(e)}),o()},V(w.resumeDeferredBootstrap)&&w.resumeDeferredBootstrap()}function Pt(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Ht(e){var t=w.element(e).injector();if(!t)throw b("test","no injector found for element argument to getTestability");return t.get("$$testability")}function jt(e,t){return t=t||"_",e.replace(Bt,function(e,n){return(n?t:"")+e.toLowerCase()})}function qt(){var t;if(Ft)return;var r=dt();p=F(r)?e.jQuery:r?e[r]:n,p&&p.fn.on?(h=p,O(p.fn,{scope:Un.scope,isolateScope:Un.isolateScope,controller:Un.controller,injector:Un.injector,inheritedData:Un.inheritedData}),t=p.cleanData,p.cleanData=function(e){var n;if(!It)for(var r=0,i;(i=e[r])!=null;r++)n=p._data(i,"events"),n&&n.$destroy&&p(i).triggerHandler("$destroy");else It=!1;t(e)}):h=Cn,w.element=h,Ft=!0}function Rt(e,t,n){if(!e)throw b("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function Ut(e,t,n){return n&&X(e)&&(e=e[e.length-1]),Rt(V(e),t,"not a function, got "+(e&&typeof e=="object"?e.constructor.name||"Object":typeof e)),e}function zt(e,t){if(e==="hasOwnProperty")throw b("badname","hasOwnProperty is not a valid {0} name",t)}function Wt(e,t,n){if(!t)return e;var r=t.split("."),i,s=e,o=r.length;for(var u=0;u<o;u++)i=r[u],e&&(e=(s=e)[i]);return!n&&V(e)?gt(s,e):e}function Xt(e){var t=e[0],n=e[e.length-1],r;for(var i=1;t!==n&&(t=t.nextSibling);i++)if(r||e[i]!==t)r||(r=h(d.call(e,0,i))),r.push(t);return r||e}function Vt(){return Object.create(null)}function Zt(e){function i(e,t,n){return e[t]||(e[t]=n())}var t=r("$injector"),n=r("ng"),s=i(e,"angular",Object);return s.$$minErr=s.$$minErr||r,i(s,"module",function(){var e={};return function(s,o,u){var a=function(e,t){if(e==="hasOwnProperty")throw n("badname","hasOwnProperty is not a valid {0} name",t)};return a(s,"module"),o&&e.hasOwnProperty(s)&&(e[s]=null),i(e,s,function(){function f(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),a}}function l(t,n){return function(r,i){return i&&V(i)&&(i.$$moduleName=s),e.push([t,n,arguments]),a}}if(!o)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",s);var e=[],n=[],r=[],i=f("$injector","invoke","push",n),a={_invokeQueue:e,_configBlocks:n,_runBlocks:r,requires:o,name:s,provider:l("$provide","provider"),factory:l("$provide","factory"),service:l("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:l("$provide","decorator"),animation:l("$animateProvider","register"),filter:l("$filterProvider","register"),controller:l("$controllerProvider","register"),directive:l("$compileProvider","directive"),config:i,run:function(e){return r.push(e),this}};return u&&i(u),a})}})}function en(e){var t=[];return JSON.stringify(e,function(e,n){n=yt(e,n);if(q(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function tn(e){return typeof e=="function"?e.toString().replace(/ \{[\s\S]*$/,""):F(e)?"undefined":typeof e!="string"?en(e):e}function rn(t){O(t,{bootstrap:Dt,copy:lt,extend:O,merge:M,equals:ht,element:h,forEach:T,injector:ar,noop:P,bind:gt,toJson:bt,fromJson:wt,identity:H,isUndefined:F,isDefined:I,isString:U,isFunction:V,isObject:q,isNumber:z,isElement:st,isArray:X,version:nn,isDate:W,lowercase:o,uppercase:a,callbacks:{counter:0},getTestability:Ht,$$minErr:r,$$csp:pt,reloadWithDebugInfo:Pt}),E=Zt(e),E("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:ls}),t.provider("$compile",Lr).directive({a:uo,input:qo,textarea:qo,form:vo,script:Hu,select:Iu,style:Ru,option:qu,ngBind:zo,ngBindHtml:Xo,ngBindTemplate:Wo,ngClass:Jo,ngClassEven:Qo,ngClassOdd:Ko,ngCloak:Go,ngController:Yo,ngForm:mo,ngHide:Au,ngIf:tu,ngInclude:nu,ngInit:iu,ngNonBindable:wu,ngPluralize:Tu,ngRepeat:Nu,ngShow:Lu,ngStyle:Ou,ngSwitch:Mu,ngSwitchWhen:_u,ngSwitchDefault:Du,ngOptions:xu,ngTransclude:Pu,ngModel:vu,ngList:su,ngChange:Vo,pattern:zu,ngPattern:zu,required:Uu,ngRequired:Uu,minlength:Xu,ngMinlength:Xu,maxlength:Wu,ngMaxlength:Wu,ngValue:Uo,ngModelOptions:gu}).directive({ngInclude:ru}).directive(ao).directive(Zo),t.provider({$anchorScroll:fr,$animate:br,$animateCss:Sr,$$animateJs:gr,$$animateQueue:yr,$$AnimateRunner:Er,$$animateAsyncRun:wr,$browser:Tr,$cacheFactory:Nr,$controller:Fr,$document:Ir,$exceptionHandler:qr,$filter:Ls,$$forceReflow:Rr,$interpolate:fi,$interval:li,$http:ii,$httpParamSerializer:Qr,$httpParamSerializerJQLike:Gr,$httpBackend:oi,$xhrFactory:si,$location:Li,$log:Ai,$parse:is,$rootScope:fs,$q:ss,$$q:os,$sce:ms,$sceDelegate:vs,$sniffer:gs,$templateCache:Cr,$templateRequest:ys,$$testability:bs,$timeout:ws,$window:Ns,$$rAF:as,$$jqLite:Gn,$$HashMap:er,$$cookieReader:ks})}])}function fn(){return++on}function dn(e){return e.replace(ln,function(e,t,n,r){return r?n.toUpperCase():n}).replace(cn,"Moz$1")}function wn(e){return!mn.test(e)}function En(e){var t=e.nodeType;return t===$t||!t||t===Gt}function Sn(e){for(var t in sn[e.ng339])return!0;return!1}function xn(e,t){var n,r,i,s=t.createDocumentFragment(),o=[],u;if(wn(e))o.push(t.createTextNode(e));else{n=n||s.appendChild(t.createElement("div")),r=(gn.exec(e)||["",""])[1].toLowerCase(),i=bn[r]||bn._default,n.innerHTML=i[1]+e.replace(yn,"<$1></$2>")+i[2],u=i[0];while(u--)n=n.lastChild;o=vt(o,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",T(o,function(e){s.appendChild(e)}),s}function Tn(e,n){n=n||t;var r;return(r=vn.exec(e))?[n.createElement(r[1])]:(r=xn(e,n))?r.childNodes:[]}function Cn(e){if(e instanceof Cn)return e;var t;U(e)&&(e=rt(e),t=!0);if(!(this instanceof Cn)){if(t&&e.charAt(0)!="<")throw pn("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Cn(e)}t?Bn(this,Tn(e)):Bn(this,e)}function kn(e){return e.cloneNode(!0)}function Ln(e,t){t||On(e);if(e.querySelectorAll){var n=e.querySelectorAll("*");for(var r=0,i=n.length;r<i;r++)On(n[r])}}function An(e,t,n,r){if(I(r))throw pn("offargs","jqLite#off() does not support the `selector` argument");var i=Mn(e),s=i&&i.events,o=i&&i.handle;if(!o)return;if(!t)for(t in s)t!=="$destroy"&&an(e,t,o),delete s[t];else{var u=function(t){var r=s[t];I(n)&&ft(r||[],n),I(n)&&r&&r.length>0||(an(e,t,o),delete s[t])};T(t.split(" "),function(e){u(e),hn[e]&&u(hn[e])})}}function On(e,t){var r=e.ng339,i=r&&sn[r];if(i){if(t){delete i.data[t];return}i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),An(e)),delete sn[r],e.ng339=n}}function Mn(e,t){var r=e.ng339,i=r&&sn[r];return t&&!i&&(e.ng339=r=fn(),i=sn[r]={events:{},data:{},handle:n}),i}function _n(e,t,n){if(En(e)){var r=I(n),i=!r&&t&&!q(t),s=!t,o=Mn(e,!i),u=o&&o.data;if(r)u[t]=n;else{if(s)return u;if(i)return u&&u[t];O(u,t)}}}function Dn(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Pn(e,t){t&&e.setAttribute&&T(t.split(" "),function(t){e.setAttribute("class",rt((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+rt(t)+" "," ")))})}function Hn(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");T(t.split(" "),function(e){e=rt(e),n.indexOf(" "+e+" ")===-1&&(n+=e+" ")}),e.setAttribute("class",rt(n))}}function Bn(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if(typeof n=="number"&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function jn(e,t){return Fn(e,"$"+(t||"ngController")+"Controller")}function Fn(e,t,n){e.nodeType==Gt&&(e=e.documentElement);var r=X(t)?t:[t];while(e){for(var i=0,s=r.length;i<s;i++)if(I(n=h.data(e,r[i])))return n;e=e.parentNode||e.nodeType===Yt&&e.host}}function In(e){Ln(e,!0);while(e.firstChild)e.removeChild(e.firstChild)}function qn(e,t){t||Ln(e);var n=e.parentNode;n&&n.removeChild(e)}function Rn(t,n){n=n||e,n.document.readyState==="complete"?n.setTimeout(t):h(n).on("load",t)}function Vn(e,t){var n=zn[t.toLowerCase()];return n&&Wn[ut(e)]&&n}function $n(e){return Xn[e]}function Jn(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],s=i?i.length:0;if(!s)return;if(F(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var u=i.specialHandlerWrapper||Kn;s>1&&(i=ct(i));for(var a=0;a<s;a++)n.isImmediatePropagationStopped()||u(e,n,i[a])};return n.elem=e,n}function Kn(e,t,n){n.call(e,t)}function Qn(e,t,n){var r=t.relatedTarget;(!r||r!==e&&!Nn.call(e,r))&&n.call(e,t)}function Gn(){this.$get=function(){return O(Cn,{hasClass:function(e,t){return e.attr&&(e=e[0]),Dn(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Hn(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Pn(e,t)}})}}function Yn(e,t){var n=e&&e.$$hashKey;if(n)return typeof n=="function"&&(n=e.$$hashKey()),n;var r=typeof e;return r=="function"||r=="object"&&e!==null?n=e.$$hashKey=r+":"+(t||k)():n=r+":"+e,n}function Zn(e,t){if(t){var n=0;this.nextUid=function(){return++n}}T(e,this.put,this)}function or(e){var t=e.toString().replace(ir,""),n=t.match(tr);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ur(e,t,n){var r,i,s,o;if(typeof e=="function"){if(!(r=e.$inject)){r=[];if(e.length){if(t){if(!U(n)||!n)n=e.name||or(e);throw sr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n)}i=e.toString().replace(ir,""),s=i.match(tr),T(s[1].split(nr),function(e){e.replace(rr,function(e,t,n){r.push(n)})})}e.$inject=r}}else X(e)?(o=e.length-1,Ut(e[o],"fn"),r=e.slice(0,o)):Ut(e,"fn",!0);return r}function ar(e,t){function c(e){return function(t,n){if(!q(t))return e(t,n);T(t,C(e))}}function h(e,t){zt(e,"service");if(V(t)||X(t))t=a.instantiate(t);if(!t.$get)throw sr("pget","Provider '{0}' must define $get factory method.",e);return u[e+i]=t}function p(e,t){return function(){var r=l.invoke(t,this);if(F(r))throw sr("undef","Provider '{0}' must return a value from $get factory method.",e);return r}}function d(e,t,n){return h(e,{$get:n!==!1?p(e,t):t})}function v(e,t){return d(e,["$injector",function(e){return e.instantiate(t)}])}function m(e,t){return d(e,B(t),!1)}function g(e,t){zt(e,"constant"),u[e]=t,f[e]=t}function y(e,t){var n=a.get(e+i),r=n.$get;n.$get=function(){var e=l.invoke(r,n);return l.invoke(t,null,{$delegate:e})}}function b(e){Rt(F(e)||X(e),"modulesToLoad","not an array");var t=[],n;return T(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=a.get(r[0]);i[r[1]].apply(i,r[2])}}if(o.get(e))return;o.put(e,!0);try{U(e)?(n=E(e),t=t.concat(b(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):V(e)?t.push(a.invoke(e)):X(e)?t.push(a.invoke(e)):Ut(e,"module")}catch(i){throw X(e)&&(e=e[e.length-1]),i.message&&i.stack&&i.stack.indexOf(i.message)==-1&&(i=i.message+"\n"+i.stack),sr("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}),t}function S(e,n){function o(t,i){if(e.hasOwnProperty(t)){if(e[t]===r)throw sr("cdep","Circular dependency found: {0}",t+" <- "+s.join(" <- "));return e[t]}try{return s.unshift(t),e[t]=r,e[t]=n(t,i)}catch(o){throw e[t]===r&&delete e[t],o}finally{s.shift()}}function a(e,n,r,i){typeof r=="string"&&(i=r,r=null);var s=[],u=ar.$$annotate(e,t,i),a,f,l;for(f=0,a=u.length;f<a;f++){l=u[f];if(typeof l!="string")throw sr("itkn","Incorrect injection token! Expected service name as string, got {0}",l);s.push(r&&r.hasOwnProperty(l)?r[l]:o(l,i))}return X(e)&&(e=e[a]),e.apply(n,s)}function f(e,t,n){var r=Object.create((X(e)?e[e.length-1]:e).prototype||null),i=a(e,r,t,n);return q(i)||V(i)?i:r}return{invoke:a,instantiate:f,get:o,annotate:ar.$$annotate,has:function(t){return u.hasOwnProperty(t+i)||e.hasOwnProperty(t)}}}t=t===!0;var r={},i="Provider",s=[],o=new Zn([],!0),u={$provide:{provider:c(h),factory:c(d),service:c(v),value:c(m),constant:c(g),decorator:y}},a=u.$injector=S(u,function(e,t){throw w.isString(t)&&s.push(t),sr("unpr","Unknown provider: {0}",s.join(" <- "))}),f={},l=f.$injector=S(f,function(e,t){var r=a.get(e+i,t);return l.invoke(r.$get,r,n,e)});return T(b(e),function(e){e&&l.invoke(e)}),l}function fr(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function s(e){var t=null;return Array.prototype.some.call(e,function(e){if(ut(e)==="a")return t=e,!0}),t}function o(){var e=a.yOffset;if(V(e))e=e();else if(st(e)){var n=e[0],r=t.getComputedStyle(n);r.position!=="fixed"?e=0:e=n.getBoundingClientRect().bottom}else z(e)||(e=0);return e}function u(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function a(e){e=U(e)?e:n.hash();var t;e?(t=i.getElementById(e))?u(t):(t=s(i.getElementsByName(e)))?u(t):e==="top"&&u(null):u(null)}var i=t.document;return e&&r.$watch(function(){return n.hash()},function(t,n){if(t===n&&t==="")return;Rn(function(){r.$evalAsync(a)})}),a}]}function pr(e,t){return!e&&!t?"":e?t?(X(e)&&(e=e.join(" ")),X(t)&&(t=t.join(" ")),e+" "+t):e:t}function dr(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===cr)return n}}function vr(e){U(e)&&(e=e.split(" "));var t=Vt();return T(e,function(e){e.length&&(t[e]=!0)}),t}function mr(e){return q(e)?e:{}}function xr(e,t,n,r){function d(e){try{e.apply(null,mt(arguments,1))}finally{c--;if(c===0)while(p.length)try{p.pop()()}catch(t){n.error(t)}}}function v(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}function x(){w=null,k(),L()}function N(){try{return u.state}catch(e){}}function k(){m=N(),m=F(m)?null:m,ht(m,C)&&(m=C),C=m}function L(){if(y===i.url()&&g===m)return;y=i.url(),g=m,T(E,function(e){e(i.url(),m)})}var i=this,s=t[0],o=e.location,u=e.history,a=e.setTimeout,f=e.clearTimeout,l={};i.isMock=!1;var c=0,p=[];i.$$completeOutstandingRequest=d,i.$$incOutstandingRequestCount=function(){c++},i.notifyWhenNoOutstandingRequests=function(e){c===0?e():p.push(e)};var m,g,y=o.href,b=t.find("base"),w=null;k(),g=m,i.url=function(t,n,s){F(s)&&(s=null),o!==e.location&&(o=e.location),u!==e.history&&(u=e.history);if(t){var a=g===s;if(y===t&&(!r.history||a))return i;var f=y&&yi(y)===yi(t);y=t,g=s;if(r.history&&(!f||!a))u[n?"replaceState":"pushState"](s,"",t),k(),g=m;else{if(!f||w)w=t;n?o.replace(t):f?o.hash=v(t):o.href=t,o.href!==t&&(w=t)}return i}return w||o.href.replace(/%27/g,"'")},i.state=function(){return m};var E=[],S=!1,C=null;i.onUrlChange=function(t){return S||(r.history&&h(e).on("popstate",x),h(e).on("hashchange",x),S=!0),E.push(t),t},i.$$applicationDestroyed=function(){h(e).off("hashchange popstate",x)},i.$$checkUrlChange=L,i.baseHref=function(){var e=b.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},i.defer=function(e,t){var n;return c++,n=a(function(){delete l[n],d(e)},t||0),l[n]=!0,n},i.defer.cancel=function(e){return l[e]?(delete l[e],f(e),d(P),!0):!1}}function Tr(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new xr(e,r,t,n)}]}function Nr(){this.$get=function(){function t(t,n){function c(e){e!=f&&(l?l==e&&(l=e.n):l=e,h(e.n,e.p),h(e,f),f=e,f.n=null)}function h(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var i=0,s=O({},n,{id:t}),o=Vt(),u=n&&n.capacity||Number.MAX_VALUE,a=Vt(),f=null,l=null;return e[t]={put:function(e,t){if(F(t))return;if(u<Number.MAX_VALUE){var n=a[e]||(a[e]={key:e});c(n)}return e in o||i++,o[e]=t,i>u&&this.remove(l.key),t},get:function(e){if(u<Number.MAX_VALUE){var t=a[e];if(!t)return;c(t)}return o[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=a[e];if(!t)return;t==f&&(f=t.p),t==l&&(l=t.n),h(t.n,t.p),delete a[e]}if(!(e in o))return;delete o[e],i--},removeAll:function(){o=Vt(),i=0,a=Vt(),f=l=null},destroy:function(){o=null,s=null,a=null,delete e[t]},info:function(){return O({},s,{size:i})}}}var e={};return t.info=function(){var t={};return T(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function Cr(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Lr(e,r){function m(e,t,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return T(e,function(e,s){var o=e.match(r);if(!o)throw kr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,s,e,n?"controller bindings definition":"isolate scope definition");i[s]={mode:o[1][0],collection:o[2]==="*",optional:o[3]==="?",attrName:o[4]||s}}),i}function g(e,t){var n={isolateScope:null,bindToController:null};q(e.scope)&&(e.bindToController===!0?(n.bindToController=m(e.scope,t,!0),n.isolateScope={}):n.isolateScope=m(e.scope,t,!1)),q(e.bindToController)&&(n.bindToController=m(e.bindToController,t,!0));if(q(n.bindToController)){var r=e.controller,i=e.controllerAs;if(!r)throw kr("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!jr(r,i))throw kr("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function y(e){var t=e.charAt(0);if(!t||t!==o(t))throw kr("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw kr("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}var i={},s="Directive",a=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,f=/(([\w\-]+)(?:\:([^;]+))?;?)/,l=ot("ngSrc,ngSrcset,src,srcset"),d=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/;this.directive=function w(t,n){return zt(t,"directive"),U(t)?(y(t),Rt(n,"directiveFactory"),i.hasOwnProperty(t)||(i[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var r=[];return T(i[t],function(i,s){try{var o=e.invoke(i);V(o)?o={compile:B(o)}:!o.compile&&o.link&&(o.compile=B(o.link)),o.priority=o.priority||0,o.index=s,o.name=o.name||t,o.require=o.require||o.controller&&o.name,o.restrict=o.restrict||"EA";var u=o.$$bindings=g(o,o.name);q(u.isolateScope)&&(o.$$isolateBindings=u.isolateScope),o.$$moduleName=i.$$moduleName,r.push(o)}catch(a){n(a)}}),r}])),i[t].push(n)):T(t,C(w)),this},this.aHrefSanitizationWhitelist=function(e){return I(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return I(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var b=!0;this.debugInfoEnabled=function(e){return I(e)?(b=e,this):b},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,r,m,g,y,w,E,S,x,N){function k(e,t){try{e.addClass(t)}catch(n){}}function j(e,t,n,r,i){e instanceof h||(e=h(e)),T(e,function(t,n){t.nodeType==Kt&&t.nodeValue.match(/\S+/)&&(e[n]=h(t).wrap("<span></span>").parent()[0])});var s=R(e,t,e,n,r,i);j.$$addScopeClass(e);var o=null;return function(n,r,u){Rt(n,"scope"),i&&i.needsNewScope&&(n=n.$parent.$new()),u=u||{};var a=u.parentBoundTranscludeFn,f=u.transcludeControllers,l=u.futureParentElement;a&&a.$$boundTransclude&&(a=a.$$boundTransclude),o||(o=I(l));var c;o!=="html"?c=h(ot(o,h("<div>").append(e).html())):r?c=Un.clone.call(e):c=e;if(f)for(var p in f)c.data("$"+p+"Controller",f[p].instance);return j.$$addScopeInfo(c,n),r&&r(c,n),s&&s(n,c,c,a),c}}function I(e){var t=e&&e[0];return t?ut(t)!=="foreignobject"&&t.toString().match(/SVG/)?"svg":"html":"html"}function R(e,t,r,i,s,o){function g(e,r,i,s){var o,a,f,l,c,p,d,m,g;if(v){var y=r.length;g=new Array(y);for(c=0;c<u.length;c+=3)d=u[c],g[d]=r[d]}else g=r;for(c=0,p=u.length;c<p;)f=g[u[c++]],o=u[c++],a=u[c++],o?(o.scope?(l=e.$new(),j.$$addScopeInfo(h(f),l)):l=e,o.transcludeOnThisElement?m=z(e,o.transclude,s):!o.templateOnThisElement&&s?m=s:!s&&t?m=z(e,t):m=null,o(a,l,f,i,m)):a&&a(e,f.childNodes,n,s)}var u=[],a,f,l,c,p,d,v;for(var m=0;m<e.length;m++){a=new C,f=W(e[m],[],a,m===0?i:n,s),l=f.length?Q(f,e[m],a,t,r,null,[],[],o):null,l&&l.scope&&j.$$addScopeClass(a.$$element),p=l&&l.terminal||!(c=e[m].childNodes)||!c.length?null:R(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t);if(l||p)u.push(m,l,p),d=!0,v=v||l;o=null}return d?g:null}function z(e,t,n){var r=function(r,i,s,o,u){return r||(r=e.$new(!1,u),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:s,futureParentElement:o})};return r}function W(e,t,n,r,i){var s=e.nodeType,o=n.$attr,u,l;switch(s){case $t:Y(t,Or(ut(e)),"E",r,i);for(var h,p,d,v,m,g,y=e.attributes,b=0,w=y&&y.length;b<w;b++){var E=!1,S=!1;h=y[b],p=h.name,m=rt(h.value),v=Or(p);if(g=_.test(v))p=p.replace(Ar,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()});var x=v.match(B);x&&Z(x[1])&&(E=p,S=p.substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),d=Or(p.toLowerCase()),o[d]=p;if(g||!n.hasOwnProperty(d))n[d]=m,Vn(e,d)&&(n[d]=!0);lt(e,t,m,d,g),Y(t,d,"A",r,i,E,S)}l=e.className,q(l)&&(l=l.animVal);if(U(l)&&l!=="")while(u=f.exec(l))d=Or(u[2]),Y(t,d,"C",r,i)&&(n[d]=rt(u[3])),l=l.substr(u.index+u[0].length);break;case Kt:if(c===11)while(e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===Kt)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);st(t,e.nodeValue);break;case Qt:try{u=a.exec(e.nodeValue),u&&(d=Or(u[1]),Y(t,d,"M",r,i)&&(n[d]=rt(u[2])))}catch(T){}}return t.sort(nt),t}function $(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw kr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==$t&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return h(r)}function J(e,t,n){return function(r,i,s,o,u){return i=$(i[0],t,n),e(r,i,s,o,u)}}function Q(e,r,i,s,o,u,a,f,l){function Y(e,t,n,r){if(e){n&&(e=J(e,n,r)),e.require=N.require,e.directiveName=k;if(g===N||N.$$isolateScope)e=pt(e,{isolateScope:!0});a.push(e)}if(t){n&&(t=J(t,n,r)),t.require=N.require,t.directiveName=k;if(g===N||N.$$isolateScope)t=pt(t,{isolateScope:!0});f.push(t)}}function Z(e,t,n,r){var i;if(U(t)){var s=t.match(d),o=t.substring(s[0].length),u=s[1]||s[3],a=s[2]==="?";u==="^^"?n=n.parent():(i=r&&r[o],i=i&&i.instance);if(!i){var f="$"+o+"Controller";i=u?n.inheritedData(f):n.data(f)}if(!i&&!a)throw kr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,e)}else if(X(t)){i=[];for(var l=0,c=t.length;l<c;l++)i[l]=Z(e,t[l],n,r)}return i||null}function nt(e,t,n,r,i,s){var o=Vt();for(var u in r){var a=r[u],f={$scope:a===g||a.$$isolateScope?i:s,$element:e,$attrs:t,$transclude:n},l=a.controller;l=="@"&&(l=t[a.name]);var c=w(l,f,!0,a.controllerAs);o[a.name]=c,x||e.data("$"+a.name+"Controller",c.instance)}return o}function st(e,t,s,o,u){function _(e,t,r){var i;return K(e)||(r=t,t=e,e=n),x&&(i=m),r||(r=x?w.parent():w),u(e,t,i,r,M)}var l,c,d,m,b,w,E,S,T;r===s?(E=i,w=i.$$element):(w=h(s),E=new C(w,i)),d=t,g?c=t.$new(!0):p&&(d=t.$parent),u&&(b=_,b.$$boundTransclude=u),v&&(m=nt(w,E,b,v,c,t)),g&&(j.$$addScopeInfo(w,c,!0,!y||y!==g&&y!==g.$$originalDirective),j.$$addScopeClass(w,!0),c.$$isolateBindings=g.$$isolateBindings,S=vt(t,E,c,c.$$isolateBindings,g),S&&c.$on("$destroy",S));for(var N in m){var k=v[N],L=m[N],A=k.$$bindings.bindToController;L.identifier&&A&&(T=vt(d,E,L.instance,A,k));var O=L();O!==L.instance&&(L.instance=O,w.data("$"+k.name+"Controller",O),T&&T(),T=vt(d,E,L.instance,A,k))}for(P=0,H=a.length;P<H;P++)l=a[P],dt(l,l.isolateScope?c:t,w,E,l.require&&Z(l.directiveName,l.require,w,m),b);var M=t;g&&(g.template||g.templateUrl===null)&&(M=c),e&&e(M,s.childNodes,n,u);for(P=f.length-1;P>=0;P--)l=f[P],dt(l,l.isolateScope?c:t,w,E,l.require&&Z(l.directiveName,l.require,w,m),b)}l=l||{};var c=-Number.MAX_VALUE,p=l.newScopeDirective,v=l.controllerDirectives,g=l.newIsolateScopeDirective,y=l.templateDirective,b=l.nonTlbTranscludeDirective,E=!1,S=!1,x=l.hasElementTranscludeDirective,T=i.$$element=h(r),N,k,L,A=u,O=s,_,D;for(var P=0,H=e.length;P<H;P++){N=e[P];var B=N.$$start,F=N.$$end;B&&(T=$(r,B,F)),L=n;if(c>N.priority)break;if(D=N.scope)N.templateUrl||(q(D)?(it("new/isolated scope",g||p,N,T),g=N):it("new/isolated scope",g,N,T)),p=p||N;k=N.name,!N.templateUrl&&N.controller&&(D=N.controller,v=v||Vt(),it("'"+k+"' controller",v[k],N,T),v[k]=N);if(D=N.transclude)E=!0,N.$$tlb||(it("transclusion",b,N,T),b=N),D=="element"?(x=!0,c=N.priority,L=T,T=i.$$element=h(t.createComment(" "+k+": "+i[k]+" ")),r=T[0],ct(o,mt(L),r),O=j(L,s,c,A&&A.name,{nonTlbTranscludeDirective:b})):(L=h(kn(r)).contents(),T.empty(),O=j(L,s,n,n,{needsNewScope:N.$$isolateScope||N.$$newScope}));if(N.template){S=!0,it("template",y,N,T),y=N,D=V(N.template)?N.template(T,i):N.template,D=M(D);if(N.replace){A=N,wn(D)?L=[]:L=Pr(ot(N.templateNamespace,rt(D))),r=L[0];if(L.length!=1||r.nodeType!==$t)throw kr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",k,"");ct(o,T,r);var I={$attr:{}},R=W(r,[],I),z=e.splice(P+1,e.length-(P+1));(g||p)&&G(R,g,p),e=e.concat(R).concat(z),et(i,I),H=e.length}else T.html(D)}if(N.templateUrl)S=!0,it("template",y,N,T),y=N,N.replace&&(A=N),st=tt(e.splice(P,e.length-P),T,i,o,E&&O,a,f,{controllerDirectives:v,newScopeDirective:p!==N&&p,newIsolateScopeDirective:g,templateDirective:y,nonTlbTranscludeDirective:b}),H=e.length;else if(N.compile)try{_=N.compile(T,i,O),V(_)?Y(null,_,B,F):_&&Y(_.pre,_.post,B,F)}catch(Q){m(Q,Tt(T))}N.terminal&&(st.terminal=!0,c=Math.max(c,N.priority))}return st.scope=p&&p.scope===!0,st.transcludeOnThisElement=E,st.templateOnThisElement=S,st.transclude=O,l.hasElementTranscludeDirective=x,st}function G(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=D(e[r],{$$isolateScope:t,$$newScope:n})}function Y(t,n,r,o,u,a,f){if(n===u)return null;var l=null;if(i.hasOwnProperty(n))for(var c,h=e.get(n+s),p=0,d=h.length;p<d;p++)try{c=h[p],(F(o)||o>c.priority)&&c.restrict.indexOf(r)!=-1&&(a&&(c=D(c,{$$start:a,$$end:f})),t.push(c),l=c)}catch(v){m(v)}return l}function Z(t){if(i.hasOwnProperty(t))for(var n,r=e.get(t+s),o=0,u=r.length;o<u;o++){n=r[o];if(n.multiElement)return!0}return!1}function et(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;T(e,function(r,i){i.charAt(0)!="$"&&(t[i]&&t[i]!==r&&(r+=(i==="style"?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),T(t,function(t,s){s=="class"?(k(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):s=="style"?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):s.charAt(0)!="$"&&!e.hasOwnProperty(s)&&(e[s]=t,r[s]=n[s])})}function tt(e,t,n,r,i,s,o,u){var a=[],f,l,c=t[0],p=e.shift(),d=D(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),v=V(p.templateUrl)?p.templateUrl(t,n):p.templateUrl,m=p.templateNamespace;return t.empty(),g(v).then(function(g){var y,b,w,E;g=M(g);if(p.replace){wn(g)?w=[]:w=Pr(ot(m,rt(g))),y=w[0];if(w.length!=1||y.nodeType!==$t)throw kr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,v);b={$attr:{}},ct(r,t,y);var S=W(y,[],b);q(p.scope)&&G(S,!0),e=S.concat(e),et(n,b)}else y=c,t.html(g);e.unshift(d),f=Q(e,y,n,i,t,p,s,o,u),T(r,function(e,n){e==y&&(r[n]=t[0])}),l=R(t[0].childNodes,i);while(a.length){var x=a.shift(),N=a.shift(),C=a.shift(),L=a.shift(),A=t[0];if(x.$$destroyed)continue;if(N!==c){var O=N.className;if(!u.hasElementTranscludeDirective||!p.replace)A=kn(y);ct(C,h(N),A),k(h(A),O)}f.transcludeOnThisElement?E=z(x,f.transclude,L):E=L,f(l,x,A,r,E)}a=null}),function(t,n,r,i,s){var o=s;if(n.$$destroyed)return;a?a.push(n,r,i,o):(f.transcludeOnThisElement&&(o=z(n,f.transclude,s)),f(l,n,r,i,o))}}function nt(e,t){var n=t.priority-e.priority;return n!==0?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function it(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw kr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Tt(r))}function st(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(t){var r=t.parent(),i=!!r.length;return i&&j.$$addBindingClass(r),function(t,r){var s=r.parent();i||j.$$addBindingClass(s),j.$$addBindingInfo(s,n.expressions),t.$watch(n,function(t){r[0].nodeValue=t})}}})}function ot(e,n){e=o(e||"html");switch(e){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function at(e,t){if(t=="srcdoc")return S.HTML;var n=ut(e);if(t=="xlinkHref"||n=="form"&&t=="action"||n!="img"&&(t=="src"||t=="ngSrc"))return S.RESOURCE_URL}function lt(e,t,n,i,s){var o=at(e,i);s=l[i]||s;var u=r(n,!0,o,s);if(!u)return;if(i==="multiple"&&ut(e)==="select")throw kr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Tt(e));t.push({priority:100,compile:function(){return{pre:function(t,a,f){var l=f.$$observers||(f.$$observers=Vt());if(v.test(i))throw kr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=f[i];c!==n&&(u=c&&r(c,!0,o,s),n=c);if(!u)return;f[i]=u(t),(l[i]||(l[i]=[])).$$inter=!0,(f.$$observers&&f.$$observers[i].$$scope||t).$watch(u,function(t,n){i==="class"&&t!=n?f.$updateClass(t,n):f.$set(i,t)})}}}})}function ct(e,n,r){var i=n[0],s=n.length,o=i.parentNode,u,a;if(e)for(u=0,a=e.length;u<a;u++)if(e[u]==i){e[u++]=r;for(var f=u,l=f+s-1,c=e.length;f<c;f++,l++)l<c?e[f]=e[l]:delete e[f];e.length-=s-1,e.context===i&&(e.context=r);break}o&&o.replaceChild(r,i);var d=t.createDocumentFragment();d.appendChild(i),h.hasData(i)&&(h.data(r,h.data(i)),p?(It=!0,p.cleanData([i])):delete h.cache[i[h.expando]]);for(var v=1,m=n.length;v<m;v++){var g=n[v];h(g).remove(),d.appendChild(g),delete n[v]}n[0]=r,n.length=1}function pt(e,t){return O(function(){return e.apply(null,arguments)},e,t)}function dt(e,t,n,r,i,s){try{e(t,n,r,i,s)}catch(o){m(o,Tt(n))}}function vt(e,t,n,i,s){var o=[];return T(i,function(i,a){var f=i.attrName,l=i.optional,c=i.mode,h,p,d,v;switch(c){case"@":!l&&!u.call(t,f)&&(n[a]=t[f]=void 0),t.$observe(f,function(e){U(e)&&(n[a]=e)}),t.$$observers[f].$$scope=e,U(t[f])&&(n[a]=r(t[f])(e));break;case"=":if(!u.call(t,f)){if(l)break;t[f]=void 0}if(l&&!t[f])break;p=y(t[f]),p.literal?v=ht:v=function(e,t){return e===t||e!==e&&t!==t},d=p.assign||function(){throw h=n[a]=p(e),kr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",t[f],s.name)},h=n[a]=p(e);var m=function(r){return v(r,n[a])||(v(r,h)?d(e,r=n[a]):n[a]=r),h=r};m.$stateful=!0;var g;i.collection?g=e.$watchCollection(t[f],m):g=e.$watch(y(t[f],m),null,p.literal),o.push(g);break;case"&":p=t.hasOwnProperty(f)?y(t[f]):P;if(p===P&&l)break;n[a]=function(t){return p(e,t)}}}),o.length&&function(){for(var t=0,n=o.length;t<n;++t)o[t]()}}var C=function(e,t){if(t){var n=Object.keys(t),r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r],this[s]=t[s]}else this.$attr={};this.$$element=e};C.prototype={$normalize:Or,$addClass:function(e){e&&e.length>0&&x.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&x.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Dr(e,t);n&&n.length&&x.addClass(this.$$element,n);var r=Dr(t,e);r&&r.length&&x.removeClass(this.$$element,r)},$set:function(e,t,n,r){var i=this.$$element[0],s=Vn(i,e),o=$n(e),u=e,a;s?(this.$$element.prop(e,t),r=s):o&&(this[o]=t,u=o),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e],r||(this.$attr[e]=r=jt(e,"-"))),a=ut(this.$$element);if(a==="a"&&e==="href"||a==="img"&&e==="src")this[e]=t=N(t,e==="src");else if(a==="img"&&e==="srcset"){var f="",l=rt(t),c=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,h=/\s/.test(l)?c:/(,)/,p=l.split(h),d=Math.floor(p.length/2);for(var v=0;v<d;v++){var g=v*2;f+=N(rt(p[g]),!0),f+=" "+rt(p[g+1])}var y=rt(p[v*2]).split(/\s/);f+=N(rt(y[0]),!0),y.length===2&&(f+=" "+rt(y[1])),this[e]=t=f}n!==!1&&(t===null||F(t)?this.$$element.removeAttr(r):this.$$element.attr(r,t));var b=this.$$observers;b&&T(b[u],function(e){try{e(t)}catch(n){m(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=Vt()),i=r[e]||(r[e]=[]);return i.push(t),E.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(e)&&!F(n[e])&&t(n[e])}),function(){ft(i,t)}}};var L=r.startSymbol(),A=r.endSymbol(),M=L=="{{"||A=="}}"?H:function(t){return t.replace(/\{\{/g,L).replace(/}}/g,A)},_=/^ngAttr[A-Z]/,B=/^(.+)Start$/;return j.$$addBindingInfo=b?function(t,n){var r=t.data("$binding")||[];X(n)?r=r.concat(n):r.push(n),t.data("$binding",r)}:P,j.$$addBindingClass=b?function(t){k(t,"ng-binding")}:P,j.$$addScopeInfo=b?function(t,n,r,i){var s=r?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(s,n)}:P,j.$$addScopeClass=b?function(t,n){k(t,n?"ng-isolate-scope":"ng-scope")}:P,j}]}function Or(e){return dn(e.replace(Ar,""))}function Mr(e,t,n,r){}function _r(e,t,n,r,i){}function Dr(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var s=0;s<r.length;s++){var o=r[s];for(var u=0;u<i.length;u++)if(o==i[u])continue e;n+=(n.length>0?" ":"")+o}return n}function Pr(e){e=h(e);var t=e.length;if(t<=1)return e;while(t--){var n=e[t];n.nodeType===Qt&&v.call(e,t,1)}return e}function jr(e,t){if(t&&U(t))return t;if(U(e)){var n=Br.exec(e);if(n)return n[3]}}function Fr(){var e={},t=!1;this.register=function(t,n){zt(t,"controller"),q(t)?O(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(i,s){function o(e,t,n,i){if(!e||!q(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,u,a,f){var l,c,h,p;a=a===!0,f&&U(f)&&(p=f);if(U(r)){c=r.match(Br);if(!c)throw Hr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);h=c[1],p=p||c[3],r=e.hasOwnProperty(h)?e[h]:Wt(u.$scope,h,!0)||(t?Wt(s,h,!0):n),Ut(r,h,!0)}if(a){var d=(X(r)?r[r.length-1]:r).prototype;l=Object.create(d||null),p&&o(u,p,l,h||r.name);var v;return v=O(function(){var e=i.invoke(r,l,u,h);return e!==l&&(q(e)||V(e))&&(l=e,p&&o(u,p,l,h||r.name)),l},{instance:l,identifier:p})}return l=i.instantiate(r,u,h),p&&o(u,p,l,h||r.name),l}}]}function Ir(){this.$get=["$window",function(e){return h(e.document)}]}function qr(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Kr(e){return q(e)?W(e)?e.toISOString():bt(e):e}function Qr(){this.$get=function(){return function(t){if(!t)return"";var n=[];return N(t,function(e,t){if(e===null||F(e))return;X(e)?T(e,function(e,r){n.push(At(t)+"="+At(Kr(e)))}):n.push(At(t)+"="+At(Kr(e)))}),n.join("&")}}}function Gr(){this.$get=function(){return function(t){function r(e,t,i){if(e===null||F(e))return;X(e)?T(e,function(e,n){r(e,t+"["+(q(e)?n:"")+"]")}):q(e)&&!W(e)?N(e,function(e,n){r(e,t+(i?"":"[")+n+(i?"":"]"))}):n.push(At(t)+"="+At(Kr(e)))}if(!t)return"";var n=[];return r(t,"",!0),n.join("&")}}}function Yr(e,t){if(U(e)){var n=e.replace(Vr,"").trim();if(n){var r=t("Content-Type");if(r&&r.indexOf(Ur)===0||Zr(n))e=wt(n)}}return e}function Zr(e){var t=e.match(Wr);return t&&Xr[t[0]].test(e)}function ei(e){function r(e,n){e&&(t[e]=t[e]?t[e]+", "+n:n)}var t=Vt(),n;return U(e)?T(e.split("\n"),function(e){n=e.indexOf(":"),r(o(rt(e.substr(0,n))),rt(e.substr(n+1)))}):q(e)&&T(e,function(e,t){r(o(t),rt(e))}),t}function ti(e){var t;return function(n){t||(t=ei(e));if(n){var r=t[o(n)];return r===void 0&&(r=null),r}return t}}function ni(e,t,n,r){return V(r)?r(e,t,n):(T(r,function(r){e=r(e,t,n)}),e)}function ri(e){return 200<=e&&e<300}function ii(){var e=this.defaults={transformResponse:[Yr],transformRequest:[function(e){return q(e)&&!Q(e)&&!Y(e)&&!G(e)?bt(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ct(zr),put:ct(zr),patch:ct(zr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1;this.useApplyAsync=function(e){return I(e)?(t=!!e,this):t};var i=!0;this.useLegacyPromiseExtensions=function(e){return I(e)?(i=!!e,this):i};var s=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(u,f,l,c,h,p){function m(t){function m(e){var t=O({},e);return t.data=ni(e.data,e.headers,e.status,s.transformResponse),ri(e.status)?t:h.reject(t)}function g(e,t){var n,r={};return T(e,function(e,i){V(e)?(n=e(t),n!=null&&(r[i]=n)):r[i]=e}),r}function y(t){var n=e.headers,r=O({},t.headers),i,s,u;n=O({},n.common,n[o(t.method)]);e:for(i in n){s=o(i);for(u in r)if(o(u)===s)continue e;r[i]=n[i]}return g(r,ct(t))}if(!w.isObject(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);if(!U(t.url))throw r("$http")("badreq","Http request configuration url must be a string.  Received: {0}",t.url);var s=O({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},t);s.headers=y(t),s.method=a(s.method),s.paramSerializer=U(s.paramSerializer)?p.get(s.paramSerializer):s.paramSerializer;var u=function(t){var r=t.headers,i=ni(t.data,ti(r),n,t.transformRequest);return F(i)&&T(r,function(e,t){o(t)==="content-type"&&delete r[t]}),F(t.withCredentials)&&!F(e.withCredentials)&&(t.withCredentials=e.withCredentials),b(t,i).then(m,m)},f=[u,n],l=h.when(s);T(v,function(e){(e.request||e.requestError)&&f.unshift(e.request,e.requestError),(e.response||e.responseError)&&f.push(e.response,e.responseError)});while(f.length){var c=f.shift(),d=f.shift();l=l.then(c,d)}return i?(l.success=function(e){return Ut(e,"fn"),l.then(function(t){e(t.data,t.status,t.headers,s)}),l},l.error=function(e){return Ut(e,"fn"),l.then(null,function(t){e(t.data,t.status,t.headers,s)}),l}):(l.success=Jr("success"),l.error=Jr("error")),l}function g(e){T(arguments,function(e){m[e]=function(t,n){return m(O({},n||{},{method:e,url:t}))}})}function y(e){T(arguments,function(e){m[e]=function(t,n,r){return m(O({},r||{},{method:e,url:t,data:n}))}})}function b(r,i){function y(e,n,r,i){function s(){b(n,e,r,i)}a&&(ri(e)?a.put(v,[e,n,ei(r),i]):a.remove(v)),t?c.$applyAsync(s):(s(),c.$$phase||c.$apply())}function b(e,t,n,i){t=t>=-1?t:0,(ri(t)?s.resolve:s.reject)({data:e,status:t,headers:ti(n),config:r,statusText:i})}function w(e){b(e.data,e.status,ct(e.headers()),e.statusText)}function S(){var e=m.pendingRequests.indexOf(r);e!==-1&&m.pendingRequests.splice(e,1)}var s=h.defer(),o=s.promise,a,l,p=r.headers,v=E(r.url,r.paramSerializer(r.params));m.pendingRequests.push(r),o.then(S,S),(r.cache||e.cache)&&r.cache!==!1&&(r.method==="GET"||r.method==="JSONP")&&(a=q(r.cache)?r.cache:q(e.cache)?e.cache:d),a&&(l=a.get(v),I(l)?et(l)?l.then(w,w):X(l)?b(l[1],l[0],ct(l[2]),l[3]):b(l,200,{},"OK"):a.put(v,o));if(F(l)){var g=Ts(r.url)?f()[r.xsrfCookieName||e.xsrfCookieName]:n;g&&(p[r.xsrfHeaderName||e.xsrfHeaderName]=g),u(r.method,v,i,y,p,r.timeout,r.withCredentials,r.responseType)}return o}function E(e,t){return t.length>0&&(e+=(e.indexOf("?")==-1?"?":"&")+t),e}var d=l("$http");e.paramSerializer=U(e.paramSerializer)?p.get(e.paramSerializer):e.paramSerializer;var v=[];return T(s,function(e){v.unshift(U(e)?p.get(e):p.invoke(e))}),m.pendingRequests=[],g("get","delete","head","jsonp"),y("post","put","patch"),m.defaults=e,m}]}function si(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function oi(){this.$get=["$browser","$window","$document","$xhrFactory",function(e,t,n,r){return ui(e,r,e.defer,t.angular.callbacks,n[0])}]}function ui(e,t,n,r,i){function s(e,t,n){var s=i.createElement("script"),o=null;return s.type="text/javascript",s.src=e,s.async=!0,o=function(e){an(s,"load",o),an(s,"error",o),i.body.removeChild(s),s=null;var u=-1,a="unknown";e&&(e.type==="load"&&!r[t].called&&(e={type:"error"}),a=e.type,u=e.type==="error"?404:200),n&&n(u,a)},un(s,"load",o),un(s,"error",o),i.body.appendChild(s),o}return function(i,u,a,f,l,c,h,p){function w(){v&&v(),m&&m.abort()}function E(t,r,i,s,o){I(b)&&n.cancel(b),v=m=null,t(r,i,s,o),e.$$completeOutstandingRequest(P)}e.$$incOutstandingRequestCount(),u=u||e.url();if(o(i)=="jsonp"){var d="_"+(r.counter++).toString(36);r[d]=function(e){r[d].data=e,r[d].called=!0};var v=s(u.replace("JSON_CALLBACK","angular.callbacks."+d),d,function(e,t){E(f,e,r[d].data,"",t),r[d]=P})}else{var m=t(i,u);m.open(i,u,!0),T(l,function(e,t){I(e)&&m.setRequestHeader(t,e)}),m.onload=function(){var t=m.statusText||"",n="response"in m?m.response:m.responseText,r=m.status===1223?204:m.status;r===0&&(r=n?200:xs(u).protocol=="file"?404:0),E(f,r,n,m.getAllResponseHeaders(),t)};var g=function(){E(f,-1,null,null,"")};m.onerror=g,m.onabort=g,h&&(m.withCredentials=!0);if(p)try{m.responseType=p}catch(y){if(p!=="json")throw y}m.send(F(a)?null:a)}if(c>0)var b=n(w,c);else et(c)&&c.then(w)}}function fi(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function f(e){return"\\\\\\"+e}function l(n){return n.replace(u,e).replace(a,t)}function c(e){if(e==null)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=bt(e)}return e}function h(u,a,f,h){function T(e){try{return e=x(e),h&&!I(e)?e:c(e)}catch(t){r(ai.interr(u,t))}}h=!!h;var p,d,v=0,m=[],g=[],y=u.length,b,w=[],E=[];while(v<y){if((p=u.indexOf(e,v))==-1||(d=u.indexOf(t,p+s))==-1){v!==y&&w.push(l(u.substring(v)));break}v!==p&&w.push(l(u.substring(v,p))),b=u.substring(p+s,d),m.push(b),g.push(n(b,T)),v=d+o,E.push(w.length),w.push("")}f&&w.length>1&&ai.throwNoconcat(u);if(!a||m.length){var S=function(e){for(var t=0,n=m.length;t<n;t++){if(h&&F(e[t]))return;w[E[t]]=e[t]}return w.join("")},x=function(e){return f?i.getTrusted(f,e):i.valueOf(e)};return O(function(t){var n=0,i=m.length,s=new Array(i);try{for(;n<i;n++)s[n]=g[n](t);return S(s)}catch(o){r(ai.interr(u,o))}},{exp:u,expressions:m,$$watchDelegate:function(e,t){var n;return e.$watchGroup(g,function(i,s){var o=S(i);V(t)&&t.call(this,o,i!==s?n:o,e),n=o})}})}}var s=e.length,o=t.length,u=new RegExp(e.replace(/./g,f),"g"),a=new RegExp(t.replace(/./g,f),"g");return h.startSymbol=function(){return e},h.endSymbol=function(){return t},h}]}function li(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function s(s,o,u,a){var f=arguments.length>4,l=f?mt(arguments,4):[],c=t.setInterval,h=t.clearInterval,p=0,d=I(a)&&!a,v=(d?r:n).defer(),m=v.promise;return u=I(u)?u:0,m.then(null,null,f?function(){s.apply(null,l)}:s),m.$$intervalId=c(function(){v.notify(p++),u>0&&p>=u&&(v.resolve(p),h(m.$$intervalId),delete i[m.$$intervalId]),d||e.$apply()},o),i[m.$$intervalId]=v,m}var i={};return s.cancel=function(e){return e&&e.$$intervalId in i?(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0):!1},s}]}function di(e){var t=e.split("/"),n=t.length;while(n--)t[n]=Lt(t[n]);return t.join("/")}function vi(e,t){var n=xs(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=_(n.port)||hi[n.protocol]||null}function mi(e,t){var n=e.charAt(0)!=="/";n&&(e="/"+e);var r=xs(e);t.$$path=decodeURIComponent(n&&r.pathname.charAt(0)==="/"?r.pathname.substring(1):r.pathname),t.$$search=Ct(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&t.$$path.charAt(0)!="/"&&(t.$$path="/"+t.$$path)}function gi(e,t){if(t.indexOf(e)===0)return t.substr(e.length)}function yi(e){var t=e.indexOf("#");return t==-1?e:e.substr(0,t)}function bi(e){return e.replace(/(#.+)|#$/,"$1")}function wi(e){return e.substr(0,yi(e).lastIndexOf("/")+1)}function Ei(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Si(e,t,n){this.$$html5=!0,n=n||"",vi(e,this),this.$$parse=function(e){var n=gi(t,e);if(!U(n))throw pi("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);mi(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=kt(this.$$search),n=this.$$hash?"#"+Lt(this.$$hash):"";this.$$url=di(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&i[0]==="#")return this.hash(i.slice(1)),!0;var s,o,u;return I(s=gi(e,r))?(o=s,I(s=gi(n,s))?u=t+(gi("/",s)||s):u=e+o):I(s=gi(t,r))?u=t+s:t==r+"/"&&(u=t),u&&this.$$parse(u),!!u}}function xi(e,t,n){vi(e,this),this.$$parse=function(r){function o(e,t,n){var r=/^\/[A-Z]:(\/.*)/,i;return t.indexOf(n)===0&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var i=gi(e,r)||gi(t,r),s;!F(i)&&i.charAt(0)==="#"?(s=gi(n,i),F(s)&&(s=i)):this.$$html5?s=i:(s="",F(i)&&(e=r,this.replace())),mi(s,this),this.$$path=o(this.$$path,s,e),this.$$compose()},this.$$compose=function(){var t=kt(this.$$search),r=this.$$hash?"#"+Lt(this.$$hash):"";this.$$url=di(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return yi(e)==yi(t)?(this.$$parse(t),!0):!1}}function Ti(e,t,n){this.$$html5=!0,xi.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&i[0]==="#")return this.hash(i.slice(1)),!0;var s,o;return e==yi(r)?s=r:(o=gi(t,r))?s=e+n+o:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s},this.$$compose=function(){var t=kt(this.$$search),r=this.$$hash?"#"+Lt(this.$$hash):"";this.$$url=di(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function Ci(e){return function(){return this[e]}}function ki(e,t){return function(n){return F(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Li(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return I(t)?(e=t,this):e},this.html5Mode=function(e){return Z(e)?(t.enabled=e,this):q(e)?(Z(e.enabled)&&(t.enabled=e.enabled),Z(e.requireBase)&&(t.requireBase=e.requireBase),Z(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,s,o){function v(e,t,n){var i=u.url(),s=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(o){throw u.url(i),u.$$state=s,o}}function g(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,a,f=r.baseHref(),l=r.url(),c;if(t.enabled){if(!f&&t.requireBase)throw pi("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=Ei(l)+(f||"/"),a=i.history?Si:Ti}else c=yi(l),a=xi;var p=wi(c);u=new a(c,p,"#"+e),u.$$parseLinkUrl(l,l),u.$$state=r.state();var d=/^\s*(javascript|mailto):/i;s.on("click",function(e){if(!t.rewriteLinks||e.ctrlKey||e.metaKey||e.shiftKey||e.which==2||e.button==2)return;var i=h(e.target);while(ut(i[0])!=="a")if(i[0]===s[0]||!(i=i.parent())[0])return;var a=i.prop("href"),f=i.attr("href")||i.attr("xlink:href");q(a)&&a.toString()==="[object SVGAnimatedString]"&&(a=xs(a.animVal).href);if(d.test(a))return;a&&!i.attr("target")&&!e.isDefaultPrevented()&&u.$$parseLinkUrl(a,f)&&(e.preventDefault(),u.absUrl()!=r.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}),bi(u.absUrl())!=bi(l)&&r.url(u.absUrl(),!0);var m=!0;return r.onUrlChange(function(e,t){if(F(gi(p,e))){o.location.href=e;return}n.$evalAsync(function(){var r=u.absUrl(),i=u.$$state,s;e=bi(e),u.$$parse(e),u.$$state=t,s=n.$broadcast("$locationChangeStart",e,r,t,i).defaultPrevented;if(u.absUrl()!==e)return;s?(u.$$parse(r),u.$$state=i,v(r,!1,i)):(m=!1,g(r,i))}),n.$$phase||n.$digest()}),n.$watch(function(){var t=bi(r.url()),s=bi(u.absUrl()),o=r.state(),a=u.$$replace,f=t!==s||u.$$html5&&i.history&&o!==u.$$state;if(m||f)m=!1,n.$evalAsync(function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;if(u.absUrl()!==e)return;r?(u.$$parse(t),u.$$state=o):(f&&v(e,a,o===u.$$state?null:u.$$state),g(t,o))});u.$$replace=!1}),u}]}function Ai(){var e=!0,t=this;this.debugEnabled=function(t){return I(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||P,s=!1;try{s=!!i.apply}catch(o){}return s?function(){var e=[];return T(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,t==null?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Mi(e,t){if(e==="__defineGetter__"||e==="__defineSetter__"||e==="__lookupGetter__"||e==="__lookupSetter__"||e==="__proto__")throw Oi("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function _i(e,t){e+="";if(!U(e))throw Oi("iseccst","Cannot convert object to primitive value! Expression: {0}",t);return e}function Di(e,t){if(e){if(e.constructor===e)throw Oi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Oi("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Oi("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Oi("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function ji(e,t){if(e){if(e.constructor===e)throw Oi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Pi||e===Hi||e===Bi)throw Oi("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Fi(e,t){if(e)if(e===0..constructor||e===(!1).constructor||e==="".constructor||e==={}.constructor||e===[].constructor||e===Function.constructor)throw Oi("isecaf","Assigning to a constructor is disallowed! Expression: {0}",t)}function zi(e,t){return typeof e!="undefined"?e:t}function Wi(e,t){return typeof e=="undefined"?t:typeof t=="undefined"?e:e+t}function Xi(e,t){var n=e(t);return!n.$stateful}function Vi(e,t){var n,r;switch(e.type){case Ui.Program:n=!0,T(e.body,function(e){Vi(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Ui.Literal:e.constant=!0,e.toWatch=[];break;case Ui.UnaryExpression:Vi(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ui.BinaryExpression:Vi(e.left,t),Vi(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ui.LogicalExpression:Vi(e.left,t),Vi(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ui.ConditionalExpression:Vi(e.test,t),Vi(e.alternate,t),Vi(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ui.Identifier:e.constant=!1,e.toWatch=[e];break;case Ui.MemberExpression:Vi(e.object,t),e.computed&&Vi(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Ui.CallExpression:n=e.filter?Xi(t,e.callee.name):!1,r=[],T(e.arguments,function(e){Vi(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&Xi(t,e.callee.name)?r:[e];break;case Ui.AssignmentExpression:Vi(e.left,t),Vi(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ui.ArrayExpression:n=!0,r=[],T(e.elements,function(e){Vi(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=r;break;case Ui.ObjectExpression:n=!0,r=[],T(e.properties,function(e){Vi(e.value,t),n=n&&e.value.constant,e.value.constant||r.push.apply(r,e.value.toWatch)}),e.constant=n,e.toWatch=r;break;case Ui.ThisExpression:e.constant=!1,e.toWatch=[]}}function $i(e){if(e.length!=1)return;var t=e[0].expression,r=t.toWatch;return r.length!==1?r:r[0]!==t?r:n}function Ji(e){return e.type===Ui.Identifier||e.type===Ui.MemberExpression}function Ki(e){if(e.body.length===1&&Ji(e.body[0].expression))return{type:Ui.AssignmentExpression,left:e.body[0].expression,right:{type:Ui.NGValueParameter},operator:"="}}function Qi(e){return e.body.length===0||e.body.length===1&&(e.body[0].expression.type===Ui.Literal||e.body[0].expression.type===Ui.ArrayExpression||e.body[0].expression.type===Ui.ObjectExpression)}function Gi(e){return e.constant}function Yi(e,t){this.astBuilder=e,this.$filter=t}function Zi(e,t){this.astBuilder=e,this.$filter=t}function ts(e){return e=="constructor"}function rs(e){return V(e.valueOf)?e.valueOf():ns.call(e)}function is(){var e=Vt(),t=Vt();this.$get=["$filter",function(r){function u(e,t){if(e==null||t==null)return e===t;if(typeof e=="object"){e=rs(e);if(typeof e=="object")return!1}return e===t||e!==e&&t!==t}function a(e,t,r,i,s){var o=i.inputs,a;if(o.length===1){var f=u;return o=o[0],e.$watch(function(t){var r=o(t);return u(r,f)||(a=i(t,n,n,[r]),f=r&&rs(r)),a},t,r,s)}var l=[],c=[];for(var h=0,p=o.length;h<p;h++)l[h]=u,c[h]=null;return e.$watch(function(t){var r=!1;for(var s=0,f=o.length;s<f;s++){var h=o[s](t);if(r||(r=!u(h,l[s])))c[s]=h,l[s]=h&&rs(h)}return r&&(a=i(t,n,n,c)),a},t,r,s)}function f(e,t,n,r){var i,s;return i=e.$watch(function(t){return r(t)},function(n,r,o){s=n,V(t)&&t.apply(this,arguments),I(n)&&o.$$postDigest(function(){I(s)&&i()})},n)}function l(e,t,n,r){function o(e){var t=!0;return T(e,function(e){I(e)||(t=!1)}),t}var i,s;return i=e.$watch(function(t){return r(t)},function(n,r,u){s=n,V(t)&&t.call(this,n,r,u),o(n)&&u.$$postDigest(function(){o(s)&&i()})},n)}function c(e,t,n,r){var i;return i=e.$watch(function(t){return r(t)},function(n,r,s){V(t)&&t.apply(this,arguments),i()},n)}function h(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==l&&n!==f,s=i?function(i,s,o,u){var a=r&&u?u[0]:e(i,s,o,u);return t(a,i,s)}:function(r,i,s,o){var u=e(r,i,s,o),a=t(u,r,i);return I(u)?a:u};return e.$$watchDelegate&&e.$$watchDelegate!==a?s.$$watchDelegate=e.$$watchDelegate:t.$stateful||(s.$$watchDelegate=a,r=!e.inputs,s.inputs=e.inputs?e.inputs:[e]),s}var i=pt().noUnsafeEval,s={csp:i,expensiveChecks:!1},o={csp:i,expensiveChecks:!0};return function(i,u,p){var d,v,m;switch(typeof i){case"string":i=i.trim(),m=i;var g=p?t:e;d=g[m];if(!d){i.charAt(0)===":"&&i.charAt(1)===":"&&(v=!0,i=i.substring(2));var y=p?o:s,b=new Ri(y),w=new es(b,r,y);d=w.parse(i),d.constant?d.$$watchDelegate=c:v?d.$$watchDelegate=d.literal?l:f:d.inputs&&(d.$$watchDelegate=a),g[m]=d}return h(d,u);case"function":return h(i,u);default:return h(P,u)}}}]}function ss(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return us(function(t){e.$evalAsync(t)},t)}]}function os(){this.$get=["$browser","$exceptionHandler",function(e,t){return us(function(t){e.defer(t)},t)}]}function us(e,t){function s(e,t,n){function i(t){return function(n){if(r)return;r=!0,t.call(e,n)}}var r=!1;return[i(t),i(n)]}function u(){this.$$state={status:0}}function a(e,t){return function(n){t.call(e,n)}}function f(e){var r,i,s;s=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,u=s.length;o<u;++o){i=s[o][0],r=s[o][e.status];try{V(r)?i.resolve(r(e.value)):e.status===1?i.resolve(e.value):i.reject(e.value)}catch(a){i.reject(a),t(a)}}}function l(t){if(t.processScheduled||!t.pending)return;t.processScheduled=!0,e(function(){f(t)})}function c(){this.promise=new u,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}function g(e){var t=new c,n=0,r=X(e)?[]:{};return T(e,function(e,i){n++,v(e).then(function(e){if(r.hasOwnProperty(i))return;r[i]=e,--n||t.resolve(r)},function(e){if(r.hasOwnProperty(i))return;t.reject(e)})}),n===0&&t.resolve(r),t.promise}var i=r("$q",TypeError),o=function(){return new c};O(u.prototype,{then:function(e,t,n){if(F(e)&&F(t)&&F(n))return this;var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return d(t,!0,e)},function(t){return d(t,!1,e)},t)}}),O(c.prototype,{resolve:function(e){if(this.promise.$$state.status)return;e===this.promise?this.$$reject(i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e)},$$resolve:function(e){var n,r;r=s(this,this.$$resolve,this.$$reject);try{if(q(e)||V(e))n=e&&e.then;V(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(i){r[1](i),t(i)}},reject:function(e){if(this.promise.$$state.status)return;this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){var e,i;for(var s=0,o=r.length;s<o;s++){i=r[s][0],e=r[s][3];try{i.notify(V(e)?e(n):n)}catch(u){t(u)}}})}});var h=function(e){var t=new c;return t.reject(e),t.promise},p=function(t,n){var r=new c;return n?r.resolve(t):r.reject(t),r.promise},d=function(t,n,r){var i=null;try{V(r)&&(i=r())}catch(s){return p(s,!1)}return et(i)?i.then(function(){return p(t,n)},function(e){return p(e,!1)}):p(t,n)},v=function(e,t,n,r){var i=new c;return i.resolve(e),i.promise.then(t,n,r)},m=v,y=function b(e){function n(e){t.resolve(e)}function r(e){t.reject(e)}if(!V(e))throw i("norslvr","Expected resolverFn, got '{0}'",e);if(this instanceof b){var t=new c;return e(n,r),t.promise}return new b(e)};return y.defer=o,y.reject=h,y.when=v,y.resolve=m,y.all=g,y}function as(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,s=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return s.supported=i,s}]}function fs(){function s(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=k(),this.$$ChildScope=null}return t.prototype=e,t}var e=10,t=r("$rootScope"),n=null,i=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,o,a,f){function l(e){e.currentScope.$$destroyed=!0}function h(e){c===9&&(e.$$childHead&&h(e.$$childHead),e.$$nextSibling&&h(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function p(){this.$id=k(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function y(e){if(d.$$phase)throw t("inprog","{0} already in progress",d.$$phase);d.$$phase=e}function b(){d.$$phase=null}function w(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function E(e,t,n){do e.$$listenerCount[n]-=t,e.$$listenerCount[n]===0&&delete e.$$listenerCount[n];while(e=e.$parent)}function S(){}function N(){while(g.length)try{g.shift()()}catch(e){o(e)}i=null}function C(){i===null&&(i=f.defer(function(){d.$apply(N)}))}p.prototype={constructor:p,$new:function(e,t){var n;return t=t||this,e?(n=new p,n.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=s(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!=this)&&n.$on("$destroy",l),n},$watch:function(e,t,r,i){var s=a(e);if(s.$$watchDelegate)return s.$$watchDelegate(this,t,r,s,e);var o=this,u=o.$$watchers,f={fn:t,last:S,get:s,exp:i||e,eq:!!r};return n=null,V(t)||(f.fn=P),u||(u=o.$$watchers=[]),u.unshift(f),w(this,1),function(){ft(u,f)>=0&&w(o,-1),n=null}},$watchGroup:function(e,t){function f(){o=!1,u?(u=!1,t(r,r,s)):t(r,n,s)}var n=new Array(e.length),r=new Array(e.length),i=[],s=this,o=!1,u=!0;if(!e.length){var a=!0;return s.$evalAsync(function(){a&&t(r,r,s)}),function(){a=!1}}return e.length===1?this.$watch(e[0],function(i,s,o){r[0]=i,n[0]=s,t(r,i===s?r:n,o)}):(T(e,function(e,t){var u=s.$watch(e,function(i,u){r[t]=i,n[t]=u,o||(o=!0,s.$evalAsync(f))});i.push(u)}),function(){while(i.length)i.shift()()})},$watchCollection:function(e,t){function v(e){r=e;var t,n,s,o,a;if(F(r))return;if(!q(r))i!==r&&(i=r,f++);else if(x(r)){i!==c&&(i=c,d=i.length=0,f++),t=r.length,d!==t&&(f++,i.length=d=t);for(var l=0;l<t;l++)a=i[l],o=r[l],s=a!==a&&o!==o,!s&&a!==o&&(f++,i[l]=o)}else{i!==h&&(i=h={},d=0,f++),t=0;for(n in r)u.call(r,n)&&(t++,o=r[n],a=i[n],n in i?(s=a!==a&&o!==o,!s&&a!==o&&(f++,i[n]=o)):(d++,i[n]=o,f++));if(d>t){f++;for(n in i)u.call(r,n)||(d--,delete i[n])}}return f}function m(){p?(p=!1,t(r,r,n)):t(r,s,n);if(o)if(!q(r))s=r;else if(x(r)){s=new Array(r.length);for(var e=0;e<r.length;e++)s[e]=r[e]}else{s={};for(var i in r)u.call(r,i)&&(s[i]=r[i])}}v.$stateful=!0;var n=this,r,i,s,o=t.length>1,f=0,l=a(e,v),c=[],h={},p=!0,d=0;return this.$watch(l,m)},$digest:function(){var r,s,u,a,l,c,h=e,p,g,w=this,E=[],x,T,C;y("$digest"),f.$$checkUrlChange(),this===d&&i!==null&&(f.defer.cancel(i),N()),n=null;do{c=!1,g=w;while(v.length){try{C=v.shift(),C.scope.$eval(C.expression,C.locals)}catch(k){o(k)}n=null}e:do{if(a=g.$$watchers){l=a.length;while(l--)try{r=a[l];if(r)if((s=r.get(g))!==(u=r.last)&&!(r.eq?ht(s,u):typeof s=="number"&&typeof u=="number"&&isNaN(s)&&isNaN(u)))c=!0,n=r,r.last=r.eq?lt(s,null):s,r.fn(s,u===S?s:u,g),h<5&&(x=4-h,E[x]||(E[x]=[]),E[x].push({msg:V(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:s,oldVal:u}));else if(r===n){c=!1;break e}}catch(k){o(k)}}if(!(p=g.$$watchersCount&&g.$$childHead||g!==w&&g.$$nextSibling))while(g!==w&&!(p=g.$$nextSibling))g=g.$parent}while(g=p);if((c||v.length)&&!(h--))throw b(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,E)}while(c||v.length);b();while(m.length)try{m.shift()()}catch(k){o(k)}},$destroy:function(){if(this.$$destroyed)return;var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===d&&f.$$applicationDestroyed(),w(this,-this.$$watchersCount);for(var t in this.$$listenerCount)E(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=P,this.$on=this.$watch=this.$watchGroup=function(){return P},this.$$listeners={},this.$$nextSibling=null,h(this)},$eval:function(e,t){return a(e)(this,t)},$evalAsync:function(e,t){!d.$$phase&&!v.length&&f.defer(function(){v.length&&d.$digest()}),v.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){m.push(e)},$apply:function(e){try{y("$apply");try{return this.$eval(e)}finally{b()}}catch(t){o(t)}finally{try{d.$digest()}catch(t){throw o(t),t}}},$applyAsync:function(e){function n(){t.$eval(e)}var t=this;e&&g.push(n),C()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);r!==-1&&(n[r]=null,E(i,1,e))}},$emit:function(e,t){var n=[],r,i=this,s=!1,u={name:e,targetScope:i,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},a=vt([u],arguments,1),f,l;do{r=i.$$listeners[e]||n,u.currentScope=i;for(f=0,l=r.length;f<l;f++){if(!r[f]){r.splice(f,1),f--,l--;continue}try{r[f].apply(null,a)}catch(c){o(c)}}if(s)return u.currentScope=null,u;i=i.$parent}while(i);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,r=n,i=n,s={name:e,targetScope:n,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return s;var u=vt([s],arguments,1),a,f,l;while(r=i){s.currentScope=r,a=r.$$listeners[e]||[];for(f=0,l=a.length;f<l;f++){if(!a[f]){a.splice(f,1),f--,l--;continue}try{a[f].apply(null,u)}catch(c){o(c)}}if(!(i=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))while(r!==n&&!(i=r.$$nextSibling))r=r.$parent}return s.currentScope=null,s}};var d=new p,v=d.$$asyncQueue=[],m=d.$$postDigestQueue=[],g=d.$$applyAsyncQueue=[];return d}]}function ls(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return I(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return I(e)?(t=e,this):t},this.$get=function(){return function(r,i){var s=i?t:e,o;return o=xs(r).href,o!==""&&!o.match(s)?"unsafe:"+o:r}}}function ps(e){if(e==="self")return e;if(U(e)){if(e.indexOf("***")>-1)throw cs("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=it(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if($(e))return new RegExp("^"+e.source+"$");throw cs("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function ds(e){var t=[];return I(e)&&T(e,function(e){t.push(ps(e))}),t}function vs(){this.SCE_CONTEXTS=hs;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=ds(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=ds(e)),t},this.$get=["$injector",function(n){function i(e,t){return e==="self"?Ts(t):!!e.exec(t.href)}function s(n){var r=xs(n.toString()),s,o,u=!1;for(s=0,o=e.length;s<o;s++)if(i(e[s],r)){u=!0;break}if(u)for(s=0,o=t.length;s<o;s++)if(i(t[s],r)){u=!1;break}return u}function o(e){var t=function(t){this.$$unwrapTrustedValue=function(){return t}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function f(e,t){var n=a.hasOwnProperty(e)?a[e]:null;if(!n)throw cs("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(t===null||F(t)||t==="")return t;if(typeof t!="string")throw cs("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function l(e){return e instanceof u?e.$$unwrapTrustedValue():e}function c(e,t){if(t===null||F(t)||t==="")return t;var n=a.hasOwnProperty(e)?a[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===hs.RESOURCE_URL){if(s(t))return t;throw cs("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===hs.HTML)return r(t);throw cs("unsafe","Attempting to use an unsafe value in a safe context.")}var r=function(t){throw cs("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(r=n.get("$sanitize"));var u=o(),a={};return a[hs.HTML]=o(u),a[hs.CSS]=o(u),a[hs.URL]=o(u),a[hs.JS]=o(u),a[hs.RESOURCE_URL]=o(a[hs.URL]),{trustAs:f,getTrusted:c,valueOf:l}}]}function ms(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&c<8)throw cs("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=ct(hs);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=H),r.parseAs=function(n,i){var s=t(i);return s.literal&&s.constant?s:t(i,function(e){return r.getTrusted(n,e)})};var i=r.parseAs,s=r.getTrusted,u=r.trustAs;return T(hs,function(e,t){var n=o(t);r[dn("parse_as_"+n)]=function(t){return i(e,t)},r[dn("get_trusted_"+n)]=function(t){return s(e,t)},r[dn("trust_as_"+n)]=function(t){return u(e,t)}}),r}]}function gs(){this.$get=["$window","$document",function(e,t){var n={},r=_((/android (\d+)/.exec(o((e.navigator||{}).userAgent))||[])[1]),i=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u,a=/^(Moz|webkit|ms)(?=[A-Z])/,f=s.body&&s.body.style,l=!1,h=!1,p;if(f){for(var d in f)if(p=a.exec(d)){u=p[0],u=u.substr(0,1).toUpperCase()+u.substr(1);break}u||(u="WebkitOpacity"in f&&"webkit"),l="transition"in f||u+"Transition"in f,h="animation"in f||u+"Animation"in f,r&&(!l||!h)&&(l=U(f.webkitTransition),h=U(f.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||r<4)&&!i,hasEvent:function(e){if(e==="input"&&c<=11)return!1;if(F(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:pt(),vendorPrefix:u,transitions:l,animations:h,android:r}}]}function ys(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,r){function i(s,o){function f(e){if(!o)throw kr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText);return n.reject(e)}i.totalPendingRequests++;if(!U(s)||!e.get(s))s=r.getTrustedResourceUrl(s);var u=t.defaults&&t.defaults.transformResponse;X(u)?u=u.filter(function(e){return e!==Yr}):u===Yr&&(u=null);var a={cache:e,transformResponse:u};return t.get(s,a)["finally"](function(){i.totalPendingRequests--}).then(function(t){return e.put(s,t.data),t.data},f)}return i.totalPendingRequests=0,i}]}function bs(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return T(r,function(e){var r=w.element(e).data("$binding");r&&T(r,function(r){if(n){var s=new RegExp("(^|\\s)"+it(t)+"(\\s|\\||$)");s.test(r)&&i.push(e)}else r.indexOf(t)!=-1&&i.push(e)})}),i},r.findModels=function(e,t,n){var r=["ng-","data-ng-","ng\\:"];for(var i=0;i<r.length;++i){var s=n?"=":"*=",o="["+r[i]+"model"+s+'"'+t+'"]',u=e.querySelectorAll(o);if(u.length)return u}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function ws(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,u,a){V(o)||(a=u,u=o,o=P);var f=mt(arguments,3),l=I(a)&&!a,c=(l?r:n).defer(),h=c.promise,p;return p=t.defer(function(){try{c.resolve(o.apply(null,f))}catch(t){c.reject(t),i(t)}finally{delete s[h.$$timeoutId]}l||e.$apply()},u),h.$$timeoutId=p,s[p]=c,h}var s={};return o.cancel=function(e){return e&&e.$$timeoutId in s?(s[e.$$timeoutId].reject("canceled"),delete s[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function xs(e){var t=e;return c&&(Es.setAttribute("href",t),t=Es.href),Es.setAttribute("href",t),{href:Es.href,protocol:Es.protocol?Es.protocol.replace(/:$/,""):"",host:Es.host,search:Es.search?Es.search.replace(/^\?/,""):"",hash:Es.hash?Es.hash.replace(/^#/,""):"",hostname:Es.hostname,port:Es.port,pathname:Es.pathname.charAt(0)==="/"?Es.pathname:"/"+Es.pathname}}function Ts(e){var t=U(e)?xs(e):e;return t.protocol===Ss.protocol&&t.host===Ss.host}function Ns(){this.$get=B(e)}function Cs(e){function i(e){try{return decodeURIComponent(e)}catch(t){return e}}var t=e[0]||{},n={},r="";return function(){var e,s,o,u,a,f=t.cookie||"";if(f!==r){r=f,e=r.split("; "),n={};for(o=0;o<e.length;o++)s=e[o],u=s.indexOf("="),u>0&&(a=i(s.substring(0,u)),F(n[a])&&(n[a]=i(s.substring(u+1))))}return n}}function ks(){this.$get=Cs}function Ls(e){function n(r,i){if(q(r)){var s={};return T(r,function(e,t){s[t]=n(t,e)}),s}return e.factory(r+t,i)}var t="Filter";this.register=n,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],n("currency",Bs),n("date",eo),n("filter",As),n("json",to),n("limitTo",io),n("lowercase",no),n("number",js),n("orderBy",so),n("uppercase",ro)}function As(){return function(e,t,n){if(!x(e)){if(e==null)return e;throw r("filter")("notarray","Expected array but received: {0}",e)}var i=_s(t),s,o;switch(i){case"function":s=t;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":s=Os(t,n,o);break;default:return e}return Array.prototype.filter.call(e,s)}}function Os(e,t,n){var r=q(e)&&"$"in e,i;return t===!0?t=ht:V(t)||(t=function(e,t){return F(e)?!1:e===null||t===null?e===t:q(t)||q(e)&&!j(e)?!1:(e=o(""+e),t=o(""+t),e.indexOf(t)!==-1)}),i=function(i){return r&&!q(i)?Ms(i,e.$,t,!1):Ms(i,e,t,n)},i}function Ms(e,t,n,r,i){var s=_s(e),o=_s(t);if(o==="string"&&t.charAt(0)==="!")return!Ms(e,t.substring(1),n,r);if(X(e))return e.some(function(e){return Ms(e,t,n,r)});switch(s){case"object":var u;if(r){for(u in e)if(u.charAt(0)!=="$"&&Ms(e[u],t,n,!0))return!0;return i?!1:Ms(e,t,n,!1)}if(o==="object"){for(u in t){var a=t[u];if(V(a)||F(a))continue;var f=u==="$",l=f?e:e[u];if(!Ms(l,a,n,f,f))return!1}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function _s(e){return e===null?"null":typeof e}function Bs(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return F(n)&&(n=t.CURRENCY_SYM),F(r)&&(r=t.PATTERNS[1].maxFrac),e==null?e:qs(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function js(e){var t=e.NUMBER_FORMATS;return function(e,n){return e==null?e:qs(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Fs(e){var t=0,n,r,i,s,o;(r=e.indexOf(Ps))>-1&&(e=e.replace(Ps,"")),(i=e.search(/e/i))>0?(r<0&&(r=i),r+=+e.slice(i+1),e=e.substring(0,i)):r<0&&(r=e.length);for(i=0;e.charAt(i)==Hs;i++);if(i==(o=e.length))n=[0],r=1;else{o--;while(e.charAt(o)==Hs)o--;r-=i,n=[];for(s=0;i<=o;i++,s++)n[s]=+e.charAt(i)}return r>Ds&&(n=n.splice(0,Ds-1),t=r-1,r=1),{d:n,e:t,i:r}}function Is(e,t,n,r){var i=e.d,s=i.length-e.i;t=F(t)?Math.min(Math.max(n,s),r):+t;var o=t+e.i,u=i[o];if(o>0)i.splice(o);else{e.i=1,i.length=o=t+1;for(var a=0;a<o;a++)i[a]=0}u>=5&&i[o-1]++;for(;s<t;s++)i.push(0);var f=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);f&&(i.unshift(f),e.i++)}function qs(e,t,n,r,i){if(!U(e)&&!z(e)||isNaN(e))return"";var s=!isFinite(e),o=!1,u=Math.abs(e)+"",a="",f;if(s)a="";else{f=Fs(u),Is(f,i,t.minFrac,t.maxFrac);var l=f.d,c=f.i,h=f.e,p=[];o=l.reduce(function(e,t){return e&&!t},!0);while(c<0)l.unshift(0),c++;c>0?p=l.splice(c):(p=l,l=[0]);var d=[];l.length>t.lgSize&&d.unshift(l.splice(-t.lgSize).join(""));while(l.length>t.gSize)d.unshift(l.splice(-t.gSize).join(""));l.length&&d.unshift(l.join("")),a=d.join(n),p.length&&(a+=r+p.join("")),h&&(a+="e+"+h)}return e<0&&!o?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf}function Rs(e,t,n){var r="";e<0&&(r="-",e=-e),e=""+e;while(e.length<t)e=Hs+e;return n&&(e=e.substr(e.length-t)),r+e}function Us(e,t,n,r){return n=n||0,function(i){var s=i["get"+e]();if(n>0||s>-n)s+=n;return s===0&&n==-12&&(s=12),Rs(s,t,r)}}function zs(e,t){return function(n,r){var i=n["get"+e](),s=a(t?"SHORT"+e:e);return r[s][i]}}function Ws(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Rs(Math[r>0?"floor":"ceil"](r/60),2)+Rs(Math.abs(r%60),2),i}function Xs(e){var t=(new Date(e,0,1)).getDay();return new Date(e,0,(t<=4?5:12)-t)}function Vs(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function $s(e){return function(t){var n=Xs(t.getFullYear()),r=Vs(t),i=+r- +n,s=1+Math.round(i/6048e5);return Rs(s,e)}}function Js(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Ks(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Qs(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function eo(e){function n(e){var n;if(n=e.match(t)){var r=new Date(0),i=0,s=0,o=n[8]?r.setUTCFullYear:r.setFullYear,u=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=_(n[9]+n[10]),s=_(n[9]+n[11])),o.call(r,_(n[1]),_(n[2])-1,_(n[3]));var a=_(n[4]||0)-i,f=_(n[5]||0)-s,l=_(n[6]||0),c=Math.round(parseFloat("0."+(n[7]||0))*1e3);return u.call(r,a,f,l,c),r}return e}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,r,i){var s="",o=[],u,a;r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,U(t)&&(t=Zs.test(t)?_(t):n(t)),z(t)&&(t=new Date(t));if(!W(t)||!isFinite(t.getTime()))return t;while(r)a=Ys.exec(r),a?(o=vt(o,a,1),r=o.pop()):(o.push(r),r=null);var f=t.getTimezoneOffset();return i&&(f=Et(i,t.getTimezoneOffset()),t=xt(t,i,!0)),T(o,function(n){u=Gs[n],s+=u?u(t,e.DATETIME_FORMATS,f):n.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function to(){return function(e,t){return F(t)&&(t=2),bt(e,t)}}function io(){return function(e,t,n){return Math.abs(Number(t))===Infinity?t=Number(t):t=_(t),isNaN(t)?e:(z(e)&&(e=e.toString()),!X(e)&&!U(e)?e:(n=!n||isNaN(n)?0:_(n),n=n<0?Math.max(0,e.length+n):n,t>=0?e.slice(n,n+t):n===0?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)))}}function so(e){function t(t,n){return n=n?-1:1,t.map(function(t){var r=1,i=H;if(V(t))i=t;else if(U(t)){if(t.charAt(0)=="+"||t.charAt(0)=="-")r=t.charAt(0)=="-"?-1:1,t=t.substring(1);if(t!==""){i=e(t);if(i.constant){var s=i();i=function(e){return e[s]}}}}return{get:i,descending:r*n}})}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function r(e,t){if(typeof e.valueOf=="function"){e=e.valueOf();if(n(e))return e}if(j(e)){e=e.toString();if(n(e))return e}return t}function i(e,t){var n=typeof e;return e===null?(n="string",e="null"):n==="string"?e=e.toLowerCase():n==="object"&&(e=r(e,t)),{value:e,type:n}}function s(e,t){var n=0;return e.type===t.type?e.value!==t.value&&(n=e.value<t.value?-1:1):n=e.type<t.type?-1:1,n}return function(e,n,r){function a(e,t){return{value:e,predicateValues:o.map(function(n){return i(n.get(e),t)})}}function f(e,t){var n=0;for(var r=0,i=o.length;r<i;++r){n=s(e.predicateValues[r],t.predicateValues[r])*o[r].descending;if(n)break}return n}if(!x(e))return e;X(n)||(n=[n]),n.length===0&&(n=["+"]);var o=t(n,r);o.push({get:function(){return{}},descending:r?-1:1});var u=Array.prototype.map.call(e,a);return u.sort(f),e=u.map(function(e){return e.value}),e}}function oo(e){return V(e)&&(e={link:e}),e.restrict=e.restrict||"AC",B(e)}function co(e,t){e.$name=t}function ho(e,t,r,i,s){var o=this,u=[];o.$error={},o.$$success={},o.$pending=n,o.$name=s(t.name||t.ngForm||"")(r),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,o.$$parentForm=fo,o.$rollbackViewValue=function(){T(u,function(e){e.$rollbackViewValue()})},o.$commitViewValue=function(){T(u,function(e){e.$commitViewValue()})},o.$addControl=function(e){zt(e.$name,"input"),u.push(e),e.$name&&(o[e.$name]=e),e.$$parentForm=o},o.$$renameControl=function(e,t){var n=e.$name;o[n]===e&&delete o[n],o[t]=e,e.$name=t},o.$removeControl=function(e){e.$name&&o[e.$name]===e&&delete o[e.$name],T(o.$pending,function(t,n){o.$setValidity(n,null,e)}),T(o.$error,function(t,n){o.$setValidity(n,null,e)}),T(o.$$success,function(t,n){o.$setValidity(n,null,e)}),ft(u,e),e.$$parentForm=fo},yu({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(!r)e[t]=[n];else{var i=r.indexOf(n);i===-1&&r.push(n)}},unset:function(e,t,n){var r=e[t];if(!r)return;ft(r,n),r.length===0&&delete e[t]},$animate:i}),o.$setDirty=function(){i.removeClass(e,au),i.addClass(e,fu),o.$dirty=!0,o.$pristine=!1,o.$$parentForm.$setDirty()},o.$setPristine=function(){i.setClass(e,au,fu+" "+lo),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,T(u,function(e){e.$setPristine()})},o.$setUntouched=function(){T(u,function(e){e.$setUntouched()})},o.$setSubmitted=function(){i.addClass(e,lo),o.$submitted=!0,o.$$parentForm.$setSubmitted()}}function ko(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function Lo(e,t,n,r,i,s){Ao(e,t,n,r,i,s),ko(r)}function Ao(e,t,n,r,i,s){var u=o(t[0].type);if(!i.android){var a=!1;t.on("compositionstart",function(e){a=!0}),t.on("compositionend",function(){a=!1,f()})}var f=function(e){l&&(s.defer.cancel(l),l=null);if(a)return;var i=t.val(),o=e&&e.type;u!=="password"&&(!n.ngTrim||n.ngTrim!=="false")&&(i=rt(i)),(r.$viewValue!==i||i===""&&r.$$hasNativeValidators)&&r.$setViewValue(i,o)};if(i.hasEvent("input"))t.on("input",f);else{var l,c=function(e,t,n){l||(l=s.defer(function(){l=null,(!t||t.value!==n)&&f(e)}))};t.on("keydown",function(e){var t=e.keyCode;if(t===91||15<t&&t<19||37<=t&&t<=40)return;c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",f),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function Oo(e,t){if(W(e))return e;if(U(e)){xo.lastIndex=0;var n=xo.exec(e);if(n){var r=+n[1],i=+n[2],s=0,o=0,u=0,a=0,f=Xs(r),l=(i-1)*7;return t&&(s=t.getHours(),o=t.getMinutes(),u=t.getSeconds(),a=t.getMilliseconds()),new Date(r,0,f.getDate()+l,s,o,u,a)}}return NaN}function Mo(e,t){return function(n,r){var i,s;if(W(n))return n;if(U(n)){n.charAt(0)=='"'&&n.charAt(n.length-1)=='"'&&(n=n.substring(1,n.length-1));if(go.test(n))return new Date(n);e.lastIndex=0,i=e.exec(n);if(i)return i.shift(),r?s={yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:s={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},T(i,function(e,n){n<t.length&&(s[t[n]]=+e)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,s.sss*1e3||0)}return NaN}}function _o(e,t,r,i){return function(o,u,a,f,l,c,h){function g(e){return e&&(!e.getTime||e.getTime()===e.getTime())}function y(e){return I(e)&&!W(e)?r(e)||n:e}Do(o,u,a,f),Ao(o,u,a,f,l,c);var p=f&&f.$options&&f.$options.timezone,d;f.$$parserName=e,f.$parsers.push(function(e){if(f.$isEmpty(e))return null;if(t.test(e)){var i=r(e,d);return p&&(i=xt(i,p)),i}return n}),f.$formatters.push(function(e){if(e&&!W(e))throw pu("datefmt","Expected `{0}` to be a date",e);return g(e)?(d=e,d&&p&&(d=xt(d,p,!0)),h("date")(e,i,p)):(d=null,"")});if(I(a.min)||a.ngMin){var v;f.$validators.min=function(e){return!g(e)||F(v)||r(e)>=v},a.$observe("min",function(e){v=y(e),f.$validate()})}if(I(a.max)||a.ngMax){var m;f.$validators.max=function(e){return!g(e)||F(m)||r(e)<=m},a.$observe("max",function(e){m=y(e),f.$validate()})}}}function Do(e,t,r,i){var o=t[0],u=i.$$hasNativeValidators=q(o.validity);u&&i.$parsers.push(function(e){var r=t.prop(s)||{};return r.badInput&&!r.typeMismatch?n:e})}function Po(e,t,r,i,s,o){Do(e,t,r,i),Ao(e,t,r,i,s,o),i.$$parserName="number",i.$parsers.push(function(e){return i.$isEmpty(e)?null:wo.test(e)?parseFloat(e):n}),i.$formatters.push(function(e){if(!i.$isEmpty(e)){if(!z(e))throw pu("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e});if(I(r.min)||r.ngMin){var u;i.$validators.min=function(e){return i.$isEmpty(e)||F(u)||e>=u},r.$observe("min",function(e){I(e)&&!z(e)&&(e=parseFloat(e,10)),u=z(e)&&!isNaN(e)?e:n,i.$validate()})}if(I(r.max)||r.ngMax){var a;i.$validators.max=function(e){return i.$isEmpty(e)||F(a)||e<=a},r.$observe("max",function(e){I(e)&&!z(e)&&(e=parseFloat(e,10)),a=z(e)&&!isNaN(e)?e:n,i.$validate()})}}function Ho(e,t,n,r,i,s){Ao(e,t,n,r,i,s),ko(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||yo.test(n)}}function Bo(e,t,n,r,i,s){Ao(e,t,n,r,i,s),ko(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||bo.test(n)}}function jo(e,t,n,r){F(n.name)&&t.attr("name",k());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function Fo(e,t,n,r,i){var s;if(I(r)){s=e(r);if(!s.constant)throw pu("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return s(t)}return i}function Io(e,t,n,r,i,s,o,u){var a=Fo(u,e,"ngTrueValue",n.ngTrueValue,!0),f=Fo(u,e,"ngFalseValue",n.ngFalseValue,!1),l=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return ht(e,a)}),r.$parsers.push(function(e){return e?a:f})}function $o(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){var i=e[r];for(var s=0;s<t.length;s++)if(i==t[s])continue e;n.push(i)}return n}function i(e){var t=[];return X(e)?(T(e,function(e){t=t.concat(i(e))}),t):U(e)?e.split(" "):q(e)?(T(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(s,o,u){function f(e){var t=c(e,1);u.$addClass(t)}function l(e){var t=c(e,-1);u.$removeClass(t)}function c(e,t){var n=o.data("$classCounts")||Vt(),r=[];return T(e,function(e){if(t>0||n[e])n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e)}),o.data("$classCounts",n),r.join(" ")}function h(e,t){var i=r(t,e),s=r(e,t);i=c(i,1),s=c(s,-1),i&&i.length&&n.addClass(o,i),s&&s.length&&n.removeClass(o,s)}function p(e){if(t===!0||s.$index%2===t){var n=i(e||[]);if(!a)f(n);else if(!ht(e,a)){var r=i(a);h(r,n)}}a=ct(e)}var a;s.$watch(u[e],p,!0),u.$observe("class",function(t){p(s.$eval(u[e]))}),e!=="ngClass"&&s.$watch("$index",function(n,r){var o=n&1;if(o!==(r&1)){var a=i(s.$eval(u[e]));o===t?f(a):l(a)}})}}}]}function yu(e){function a(e,r,i){F(r)?f("$pending",e,i):l("$pending",e,i),Z(r)?r?(o(t.$error,e,i),s(t.$$success,e,i)):(s(t.$error,e,i),o(t.$$success,e,i)):(o(t.$error,e,i),o(t.$$success,e,i)),t.$pending?(c(hu,!0),t.$valid=t.$invalid=n,h("",null)):(c(hu,!1),t.$valid=bu(t.$error),t.$invalid=!t.$valid,h("",t.$valid));var u;t.$pending&&t.$pending[e]?u=n:t.$error[e]?u=!1:t.$$success[e]?u=!0:u=null,h(e,u),t.$$parentForm.$setValidity(e,u,t)}function f(e,n,r){t[e]||(t[e]={}),s(t[e],n,r)}function l(e,r,i){t[e]&&o(t[e],r,i),bu(t[e])&&(t[e]=n)}function c(e,t){t&&!i[e]?(u.addClass(r,e),i[e]=!0):!t&&i[e]&&(u.removeClass(r,e),i[e]=!1)}function h(e,t){e=e?"-"+jt(e,"-"):"",c(ou+e,t===!0),c(uu+e,t===!1)}var t=e.ctrl,r=e.$element,i={},s=e.set,o=e.unset,u=e.$animate;i[uu]=!(i[ou]=r.hasClass(ou)),t.$setValidity=a}function bu(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function ju(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}var i=/^\/(.+)\/([a-z]*)$/,s="validity",o=function(e){return U(e)?e.toLowerCase():e},u=Object.prototype.hasOwnProperty,a=function(e){return U(e)?e.toUpperCase():e},f=function(e){return U(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)}):e},l=function(e){return U(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(o=f,a=l);var c,h,p,d=[].slice,v=[].splice,m=[].push,g=Object.prototype.toString,y=Object.getPrototypeOf,b=r("ng"),w=e.angular||(e.angular={}),E,S=0;c=t.documentMode,P.$inject=[],H.$inject=[];var X=Array.isArray,tt=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,rt=function(e){return U(e)?e.trim():e},it=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},pt=function(){function r(){try{return new Function(""),!1}catch(e){return!0}}if(!I(pt.rules)){var e=t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");pt.rules={noUnsafeEval:!n||n.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!n||n.indexOf("no-inline-style")!==-1}}else pt.rules={noUnsafeEval:r(),noInlineStyle:!1}}return pt.rules},dt=function(){if(I(dt.name_))return dt.name_;var e,n,r=Ot.length,i,s;for(n=0;n<r;++n){i=Ot[n];if(e=t.querySelector("["+i.replace(":","\\:")+"jq]")){s=e.getAttribute(i+"jq");break}}return dt.name_=s},Ot=["ng-","data-ng-","ng:","x-ng-"],Bt=/[A-Z]/g,Ft=!1,It,$t=1,Jt=2,Kt=3,Qt=8,Gt=9,Yt=11,nn={full:"1.4.9",major:1,minor:4,dot:9,codeName:"implicit-superannuation"};Cn.expando="ng339";var sn=Cn.cache={},on=1,un=function(e,t,n){e.addEventListener(t,n,!1)},an=function(e,t,n){e.removeEventListener(t,n,!1)};Cn._data=function(e){return this.cache[e[this.expando]]||{}};var ln=/([\:\-\_]+(.))/g,cn=/^moz([A-Z])/,hn={mouseleave:"mouseout",mouseenter:"mouseover"},pn=r("jqLite"),vn=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,mn=/<|&#?\w+;/,gn=/<([\w:-]+)/,yn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,bn={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};bn.optgroup=bn.option,bn.tbody=bn.tfoot=bn.colgroup=bn.caption=bn.thead,bn.th=bn.td;var Nn=Node.prototype.contains||function(e){return!!(this.compareDocumentPosition(e)&16)},Un=Cn.prototype={ready:function(n){function i(){if(r)return;r=!0,n()}var r=!1;t.readyState==="complete"?setTimeout(i):(this.on("DOMContentLoaded",i),Cn(e).on("load",i))},toString:function(){var e=[];return T(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return e>=0?h(this[e]):h(this[this.length+e])},length:0,push:m,sort:[].sort,splice:[].splice},zn={};T("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){zn[o(e)]=e});var Wn={};T("input,select,option,textarea,button,form,details".split(","),function(e){Wn[e]=!0});var Xn={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};T({data:_n,removeData:On,hasData:Sn},function(e,t){Cn[t]=e}),T({data:_n,inheritedData:Fn,scope:function(e){return h.data(e,"$scope")||Fn(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return h.data(e,"$isolateScope")||h.data(e,"$isolateScopeNoTemplate")},controller:jn,injector:function(e){return Fn(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Dn,css:function(e,t,n){t=dn(t);if(!I(n))return e.style[t];e.style[t]=n},attr:function(e,t,r){var i=e.nodeType;if(i===Kt||i===Jt||i===Qt)return;var s=o(t);if(zn[s]){if(!I(r))return e[t]||(e.attributes.getNamedItem(t)||P).specified?s:n;r?(e[t]=!0,e.setAttribute(t,s)):(e[t]=!1,e.removeAttribute(s))}else if(I(r))e.setAttribute(t,r);else if(e.getAttribute){var u=e.getAttribute(t,2);return u===null?n:u}},prop:function(e,t,n){if(!I(n))return e[t];e[t]=n},text:function(){function e(e,t){if(F(t)){var n=e.nodeType;return n===$t||n===Kt?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(F(t)){if(e.multiple&&ut(e)==="select"){var n=[];return T(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n.length===0?null:n}return e.value}e.value=t},html:function(e,t){if(F(t))return e.innerHTML;Ln(e,!0),e.innerHTML=t},empty:In},function(e,t){Cn.prototype[t]=function(t,n){var r,i,s=this.length;if(e!==In&&F(e.length==2&&e!==Dn&&e!==jn?t:n)){if(q(t)){for(r=0;r<s;r++)if(e===_n)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}var o=e.$dv,u=F(o)?Math.min(s,1):s;for(var a=0;a<u;a++){var f=e(this[a],t,n);o=o?o+f:f}return o}for(r=0;r<s;r++)e(this[r],t,n);return this}}),T({removeData:On,on:function(t,r,i,s){if(I(s))throw pn("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!En(t))return;var o=Mn(t,!0),u=o.events,a=o.handle;a||(a=o.handle=Jn(t,u));var f=r.indexOf(" ")>=0?r.split(" "):[r],l=f.length,c=function(e,n,r){var s=u[e];s||(s=u[e]=[],s.specialHandlerWrapper=n,e!=="$destroy"&&!r&&un(t,e,a)),s.push(i)};while(l--)r=f[l],hn[r]?(c(hn[r],Qn),c(r,n,!0)):c(r)},off:An,one:function(e,t,n){e=h(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Ln(e),T(new Cn(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return T(e.childNodes,function(e){e.nodeType===$t&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n!==$t&&n!==Yt)return;t=new Cn(t);for(var r=0,i=t.length;r<i;r++){var s=t[r];e.appendChild(s)}},prepend:function(e,t){if(e.nodeType===$t){var n=e.firstChild;T(new Cn(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=h(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:qn,detach:function(e){qn(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new Cn(t);for(var i=0,s=t.length;i<s;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:Hn,removeClass:Pn,toggleClass:function(e,t,n){t&&T(t.split(" "),function(t){var r=n;F(r)&&(r=!Dn(e,t)),(r?Hn:Pn)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Yt?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:kn,triggerHandler:function(e,t,n){var r,i,s,o=t.type||t,u=Mn(e),a=u&&u.events,f=a&&a[o];f&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:P,type:o,target:e},t.type&&(r=O(r,t)),i=ct(f),s=n?[r].concat(n):[r],T(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,s)}))}},function(e,t){Cn.prototype[t]=function(t,n,r){var i;for(var s=0,o=this.length;s<o;s++)F(i)?(i=e(this[s],t,n,r),I(i)&&(i=h(i))):Bn(i,e(this[s],t,n,r));return I(i)?i:this},Cn.prototype.bind=Cn.prototype.on,Cn.prototype.unbind=Cn.prototype.off}),Zn.prototype={put:function(e,t){this[Yn(e,this.nextUid)]=t},get:function(e){return this[Yn(e,this.nextUid)]},remove:function(e){var t=this[e=Yn(e,this.nextUid)];return delete this[e],t}};var er=[function(){this.$get=[function(){return Zn}]}],tr=/^[^\(]*\(\s*([^\)]*)\)/m,nr=/,/,rr=/^\s*(_?)(\S+?)\1\s*$/,ir=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,sr=r("$injector");ar.$$annotate=ur;var lr=r("$animate"),cr=1,hr="ng-animate",gr=function(){this.$get=function(){}},yr=function(){var e=new Zn,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(e,t,n){var r=!1;return t&&(t=U(t)?t.split(" "):X(t)?t:[],T(t,function(t){t&&(r=!0,e[t]=n)})),r}function s(){T(t,function(t){var n=e.get(t);if(n){var r=vr(t.attr("class")),i="",s="";T(n,function(e,t){var n=!!r[t];e!==n&&(e?i+=(i.length?" ":"")+t:s+=(s.length?" ":"")+t)}),T(t,function(e){i&&Hn(e,i),s&&Pn(e,s)}),e.remove(t)}}),t.length=0}function o(n,o,u){var a=e.get(n)||{},f=i(a,o,!0),l=i(a,u,!1);if(f||l)e.put(n,a),t.push(n),t.length===1&&r.$$postDigest(s)}return{enabled:P,on:P,off:P,pin:P,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&o(e,r.addClass,r.removeClass);var s=new n;return s.complete(),s}}}]},br=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&n.charAt(0)!==".")throw lr("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(arguments.length===1){this.$$classNameFilter=e instanceof RegExp?e:null;if(this.$$classNameFilter){var t=new RegExp("(\\s+|\\/)"+hr+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw lr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',hr)}}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=dr(n);r&&!r.parentNode&&!r.previousElementSibling&&(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,s){return r=r&&h(r),i=i&&h(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",mr(s))},move:function(n,r,i,s){return r=r&&h(r),i=i&&h(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",mr(s))},leave:function(t,n){return e.push(t,"leave",mr(n),function(){t.remove()})},addClass:function(t,n,r){return r=mr(r),r.addClass=pr(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=mr(r),r.removeClass=pr(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=mr(i),i.addClass=pr(i.addClass,n),i.removeClass=pr(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,s){return s=mr(s),s.from=s.from?O(s.from,n):n,s.to=s.to?O(s.to,r):r,i=i||"ng-inline-animate",s.tempClasses=pr(s.tempClasses,i),e.push(t,"animate",s)}}}]}],wr=function(){this.$get=["$$rAF",function(e){function n(n){t.push(n);if(t.length>1)return;e(function(){for(var e=0;e<t.length;e++)t[e]();t=[]})}var t=[];return function(){var e=!1;return n(function(){e=!0}),function(t){e?t():n(t)}}}]},Er=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,n,r,i){function a(e){this.setHost(e);var t=n(),s=function(e){i(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){var n=r[0];n&&n.hidden?s(e):t(e)},this._state=0}var s=0,o=1,u=2;return a.chain=function(e,t){function r(){if(n===e.length){t(!0);return}e[n](function(e){if(e===!1){t(!1);return}n++,r()})}var n=0;r()},a.all=function(e,t){function i(i){r=r&&i,++n===e.length&&t(r)}var n=0,r=!0;T(e,function(e){e.done(i)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===u?e():this._doneCallbacks.push(e)},progress:P,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=o,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==u&&(T(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=u)}},a}]},Sr=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function u(){return e(function(){a(),s||o.complete(),s=!0}),o}function a(){i.addClass&&(t.addClass(i.addClass),i.addClass=null),i.removeClass&&(t.removeClass(i.removeClass),i.removeClass=null),i.to&&(t.css(i.to),i.to=null)}var i=r||{};i.$$prepared||(i=lt(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(t.css(i.from),i.from=null);var s,o=new n;return{start:u,end:u}}}]},kr=r("$compile");Lr.$inject=["$provide","$$sanitizeUriProvider"];var Ar=/^((?:x|data)[\:\-_])/i,Hr=r("$controller"),Br=/^(\S+)(\s+as\s+([\w$]+))?$/,Rr=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof h&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Ur="application/json",zr={"Content-Type":Ur+";charset=utf-8"},Wr=/^\[|^\{(?!\{)/,Xr={"[":/]$/,"{":/}$/},Vr=/^\)\]\}',?\n/,$r=r("$http"),Jr=function(e){return function(){throw $r("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},ai=w.$interpolateMinErr=r("$interpolate");ai.throwNoconcat=function(e){throw ai("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},ai.interr=function(e,t){return ai("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var ci=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,hi={http:80,https:443,ftp:21},pi=r("$location"),Ni={$$html5:!1,$$replace:!1,absUrl:Ci("$$absUrl"),url:function(e){if(F(e))return this.$$url;var t=ci.exec(e);return(t[1]||e==="")&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||e==="")&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Ci("$$protocol"),host:Ci("$$host"),port:Ci("$$port"),path:ki("$$path",function(e){return e=e!==null?e.toString():"",e.charAt(0)=="/"?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(U(e)||z(e))e=e.toString(),this.$$search=Ct(e);else{if(!q(e))throw pi("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=lt(e,{}),T(e,function(t,n){t==null&&delete e[n]}),this.$$search=e}break;default:F(t)||t===null?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:ki("$$hash",function(e){return e!==null?e.toString():""}),replace:function(){return this.$$replace=!0,this}};T([Ti,xi,Si],function(e){e.prototype=Object.create(Ni),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Si||!this.$$html5)throw pi("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=F(t)?null:t,this}});var Oi=r("$parse"),Pi=Function.prototype.call,Hi=Function.prototype.apply,Bi=Function.prototype.bind,Ii=Vt();T("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Ii[e]=!0});var qi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Ri=function(e){this.options=e};Ri.prototype={constructor:Ri,lex:function(e){this.text=e,this.index=0,this.tokens=[];while(this.index<this.text.length){var t=this.text.charAt(this.index);if(t==='"'||t==="'")this.readString(t);else if(this.isNumber(t)||t==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Ii[t],s=Ii[n],o=Ii[r];if(i||s||o){var u=o?r:s?n:t;this.tokens.push({index:this.index,text:u,operator:!0}),this.index+=u.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return"0"<=e&&e<="9"&&typeof e=="string"},isWhitespace:function(e){return e===" "||e==="\r"||e==="	"||e==="\n"||e===""||e===""},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||e==="$"},isExpOperator:function(e){return e==="-"||e==="+"||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=I(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Oi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){var e="",t=this.index;while(this.index<this.text.length){var n=o(this.text.charAt(this.index));if(n=="."||this.isNumber(n))e+=n;else{var r=this.peek();if(n=="e"&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&e.charAt(e.length-1)=="e")e+=n;else{if(!this.isExpOperator(n)||!!r&&!!this.isNumber(r)||e.charAt(e.length-1)!="e")break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;while(this.index<this.text.length){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;var n="",r=e,i=!1;while(this.index<this.text.length){var s=this.text.charAt(this.index);r+=s;if(i){if(s==="u"){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var u=qi[s];n+=u||s}i=!1}else if(s==="\\")i=!0;else{if(s===e){this.index++,this.tokens.push({index:t,text:r,constant:!0,value:n});return}n+=s}this.index++}this.throwError("Unterminated quote",t)}};var Ui=function(e,t){this.lexer=e,this.options=t};Ui.Program="Program",Ui.ExpressionStatement="ExpressionStatement",Ui.AssignmentExpression="AssignmentExpression",Ui.ConditionalExpression="ConditionalExpression",Ui.LogicalExpression="LogicalExpression",Ui.BinaryExpression="BinaryExpression",Ui.UnaryExpression="UnaryExpression",Ui.CallExpression="CallExpression",Ui.MemberExpression="MemberExpression",Ui.Identifier="Identifier",Ui.Literal="Literal",Ui.ArrayExpression="ArrayExpression",Ui.Property="Property",Ui.ObjectExpression="ObjectExpression",Ui.ThisExpression="ThisExpression",Ui.NGValueParameter="NGValueParameter",Ui.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){var e=[];for(;;){this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement());if(!this.expect(";"))return{type:Ui.Program,body:e}}},expressionStatement:function(){return{type:Ui.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){var e=this.expression(),t;while(t=this.expect("|"))e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:Ui.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e=this.logicalOR(),t,n;if(this.expect("?")){t=this.expression();if(this.consume(":"))return n=this.expression(),{type:Ui.ConditionalExpression,test:e,alternate:t,consequent:n}}return e},logicalOR:function(){var e=this.logicalAND();while(this.expect("||"))e={type:Ui.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){var e=this.equality();while(this.expect("&&"))e={type:Ui.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){var e=this.relational(),t;while(t=this.expect("==","!=","===","!=="))e={type:Ui.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){var e=this.additive(),t;while(t=this.expect("<",">","<=",">="))e={type:Ui.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){var e=this.multiplicative(),t;while(t=this.expect("+","-"))e={type:Ui.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){var e=this.unary(),t;while(t=this.expect("*","/","%"))e={type:Ui.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ui.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.constants.hasOwnProperty(this.peek().text)?e=lt(this.constants[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());var t;while(t=this.expect("(","[","."))t.text==="("?(e={type:Ui.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):t.text==="["?(e={type:Ui.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):t.text==="."?e={type:Ui.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){var t=[e],n={type:Ui.CallExpression,callee:this.identifier(),arguments:t,filter:!0};while(this.expect(":"))t.push(this.expression());return n},parseArguments:function(){var e=[];if(this.peekToken().text!==")")do e.push(this.expression());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ui.Identifier,name:e.text}},constant:function(){return{type:Ui.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ui.ArrayExpression,elements:e}},object:function(){var e=[],t;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;t={type:Ui.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Ui.ObjectExpression,properties:e}},throwError:function(e,t){throw Oi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(this.tokens.length===0)throw Oi("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(this.tokens.length===0)throw Oi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var s=this.tokens[e],o=s.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return s}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},constants:{"true":{type:Ui.Literal,value:!0},"false":{type:Ui.Literal,value:!1},"null":{type:Ui.Literal,value:null},"undefined":{type:Ui.Literal,value:n},"this":{type:Ui.ThisExpression}}},Yi.prototype={compile:function(e,t){var r=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Vi(i,r.$filter);var s="",o;this.stage="assign";if(o=Ki(i)){this.state.computing="assign";var u=this.nextId();this.recurse(o,u),this.return_(u),s="fn.assign="+this.generateFunction("assign","s,v,l")}var a=$i(i.body);r.stage="inputs",T(a,function(e,t){var n="fn"+t;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(e,i),r.return_(i),r.state.inputs.push(n),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);var f='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",l=(new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",f))(this.$filter,Mi,Di,ji,_i,Fi,zi,Wi,e);return this.state=this.stage=n,l.literal=Qi(i),l.constant=Gi(i),l},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return T(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return T(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,i,s,o){var u,a,f=this,l,c;i=i||P;if(!o&&I(e.watchId)){t=t||this.nextId(),this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,r,i,s,!0));return}switch(e.type){case Ui.Program:T(e.body,function(t,r){f.recurse(t.expression,n,n,function(e){a=e}),r!==e.body.length-1?f.current().body.push(a,";"):f.return_(a)});break;case Ui.Literal:c=this.escape(e.value),this.assign(t,c),i(c);break;case Ui.UnaryExpression:this.recurse(e.argument,n,n,function(e){a=e}),c=e.operator+"("+this.ifDefined(a,0)+")",this.assign(t,c),i(c);break;case Ui.BinaryExpression:this.recurse(e.left,n,n,function(e){u=e}),this.recurse(e.right,n,n,function(e){a=e}),e.operator==="+"?c=this.plus(u,a):e.operator==="-"?c=this.ifDefined(u,0)+e.operator+this.ifDefined(a,0):c="("+u+")"+e.operator+"("+a+")",this.assign(t,c),i(c);break;case Ui.LogicalExpression:t=t||this.nextId(),f.recurse(e.left,t),f.if_(e.operator==="&&"?t:f.not(t),f.lazyRecurse(e.right,t)),i(t);break;case Ui.ConditionalExpression:t=t||this.nextId(),f.recurse(e.test,t),f.if_(t,f.lazyRecurse(e.alternate,t),f.lazyRecurse(e.consequent,t)),i(t);break;case Ui.Identifier:t=t||this.nextId(),r&&(r.context=f.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),Mi(e.name),f.if_(f.stage==="inputs"||f.not(f.getHasOwnProperty("l",e.name)),function(){f.if_(f.stage==="inputs"||"s",function(){s&&s!==1&&f.if_(f.not(f.nonComputedMember("s",e.name)),f.lazyAssign(f.nonComputedMember("s",e.name),"{}")),f.assign(t,f.nonComputedMember("s",e.name))})},t&&f.lazyAssign(t,f.nonComputedMember("l",e.name))),(f.state.expensiveChecks||ts(e.name))&&f.addEnsureSafeObject(t),i(t);break;case Ui.MemberExpression:u=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),f.recurse(e.object,u,n,function(){f.if_(f.notNull(u),function(){if(e.computed)a=f.nextId(),f.recurse(e.property,a),f.getStringValue(a),f.addEnsureSafeMemberName(a),s&&s!==1&&f.if_(f.not(f.computedMember(u,a)),f.lazyAssign(f.computedMember(u,a),"{}")),c=f.ensureSafeObject(f.computedMember(u,a)),f.assign(t,c),r&&(r.computed=!0,r.name=a);else{Mi(e.property.name),s&&s!==1&&f.if_(f.not(f.nonComputedMember(u,e.property.name)),f.lazyAssign(f.nonComputedMember(u,e.property.name),"{}")),c=f.nonComputedMember(u,e.property.name);if(f.state.expensiveChecks||ts(e.property.name))c=f.ensureSafeObject(c);f.assign(t,c),r&&(r.computed=!1,r.name=e.property.name)}},function(){f.assign(t,"undefined")}),i(t)},!!s);break;case Ui.CallExpression:t=t||this.nextId(),e.filter?(a=f.filter(e.callee.name),l=[],T(e.arguments,function(e){var t=f.nextId();f.recurse(e,t),l.push(t)}),c=a+"("+l.join(",")+")",f.assign(t,c),i(t)):(a=f.nextId(),u={},l=[],f.recurse(e.callee,a,u,function(){f.if_(f.notNull(a),function(){f.addEnsureSafeFunction(a),T(e.arguments,function(e){f.recurse(e,f.nextId(),n,function(e){l.push(f.ensureSafeObject(e))})}),u.name?(f.state.expensiveChecks||f.addEnsureSafeObject(u.context),c=f.member(u.context,u.name,u.computed)+"("+l.join(",")+")"):c=a+"("+l.join(",")+")",c=f.ensureSafeObject(c),f.assign(t,c)},function(){f.assign(t,"undefined")}),i(t)}));break;case Ui.AssignmentExpression:a=this.nextId(),u={};if(!Ji(e.left))throw Oi("lval","Trying to assign a value to a non l-value");this.recurse(e.left,n,u,function(){f.if_(f.notNull(u.context),function(){f.recurse(e.right,a),f.addEnsureSafeObject(f.member(u.context,u.name,u.computed)),f.addEnsureSafeAssignContext(u.context),c=f.member(u.context,u.name,u.computed)+e.operator+a,f.assign(t,c),i(t||c)})},1);break;case Ui.ArrayExpression:l=[],T(e.elements,function(e){f.recurse(e,f.nextId(),n,function(e){l.push(e)})}),c="["+l.join(",")+"]",this.assign(t,c),i(c);break;case Ui.ObjectExpression:l=[],T(e.properties,function(e){f.recurse(e.value,f.nextId(),n,function(t){l.push(f.escape(e.key.type===Ui.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+l.join(",")+"}",this.assign(t,c),i(c);break;case Ui.ThisExpression:this.assign(t,"s"),i("s");break;case Ui.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(!e)return;return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return e+"."+t},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+",text)")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,i,s){var o=this;return function(){o.recurse(e,t,n,r,i,s)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(U(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(z(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(e===null)return"null";if(typeof e=="undefined")return"undefined";throw Oi("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Zi.prototype={compile:function(e,t){var n=this,r=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,Vi(r,n.$filter);var i,s;if(i=Ki(r))s=this.recurse(i);var o=$i(r.body),u;o&&(u=[],T(o,function(e,t){var r=n.recurse(e);e.input=r,u.push(r),e.watchId=t}));var a=[];T(r.body,function(e){a.push(n.recurse(e.expression))});var f=r.body.length===0?function(){}:r.body.length===1?a[0]:function(e,t){var n;return T(a,function(r){n=r(e,t)}),n};return s&&(f.assign=function(e,t,n){return s(e,n,t)}),u&&(f.inputs=u),f.literal=Qi(r),f.constant=Gi(r),f},recurse:function(e,t,r){var i,s,o=this,u,a;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ui.Literal:return this.value(e.value,t);case Ui.UnaryExpression:return s=this.recurse(e.argument),this["unary"+e.operator](s,t);case Ui.BinaryExpression:return i=this.recurse(e.left),s=this.recurse(e.right),this["binary"+e.operator](i,s,t);case Ui.LogicalExpression:return i=this.recurse(e.left),s=this.recurse(e.right),this["binary"+e.operator](i,s,t);case Ui.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Ui.Identifier:return Mi(e.name,o.expression),o.identifier(e.name,o.expensiveChecks||ts(e.name),t,r,o.expression);case Ui.MemberExpression:return i=this.recurse(e.object,!1,!!r),e.computed||(Mi(e.property.name,o.expression),s=e.property.name),e.computed&&(s=this.recurse(e.property)),e.computed?this.computedMember(i,s,t,r,o.expression):this.nonComputedMember(i,s,o.expensiveChecks,t,r,o.expression);case Ui.CallExpression:return u=[],T(e.arguments,function(e){u.push(o.recurse(e))}),e.filter&&(s=this.$filter(e.callee.name)),e.filter||(s=this.recurse(e.callee,!0)),e.filter?function(e,r,i,o){var a=[];for(var f=0;f<u.length;++f)a.push(u[f](e,r,i,o));var l=s.apply(n,a,o);return t?{context:n,name:n,value:l}:l}:function(e,n,r,i){var a=s(e,n,r,i),f;if(a.value!=null){Di(a.context,o.expression),ji(a.value,o.expression);var l=[];for(var c=0;c<u.length;++c)l.push(Di(u[c](e,n,r,i),o.expression));f=Di(a.value.apply(a.context,l),o.expression)}return t?{value:f}:f};case Ui.AssignmentExpression:return i=this.recurse(e.left,!0,1),s=this.recurse(e.right),function(e,n,r,u){var a=i(e,n,r,u),f=s(e,n,r,u);return Di(a.value,o.expression),Fi(a.context),a.context[a.name]=f,t?{value:f}:f};case Ui.ArrayExpression:return u=[],T(e.elements,function(e){u.push(o.recurse(e))}),function(e,n,r,i){var s=[];for(var o=0;o<u.length;++o)s.push(u[o](e,n,r,i));return t?{value:s}:s};case Ui.ObjectExpression:return u=[],T(e.properties,function(e){u.push({key:e.key.type===Ui.Identifier?e.key.name:""+e.key.value,value:o.recurse(e.value)})}),function(e,n,r,i){var s={};for(var o=0;o<u.length;++o)s[u[o].key]=u[o].value(e,n,r,i);return t?{value:s}:s};case Ui.ThisExpression:return function(e){return t?{value:e}:e};case Ui.NGValueParameter:return function(e,n,r,i){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,s){var o=e(n,r,i,s);return I(o)?o=+o:o=0,t?{value:o}:o}},"unary-":function(e,t){return function(n,r,i,s){var o=e(n,r,i,s);return I(o)?o=-o:o=0,t?{value:o}:o}},"unary!":function(e,t){return function(n,r,i,s){var o=!e(n,r,i,s);return t?{value:o}:o}},"binary+":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o),a=t(r,i,s,o),f=Wi(u,a);return n?{value:f}:f}},"binary-":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o),a=t(r,i,s,o),f=(I(u)?u:0)-(I(a)?a:0);return n?{value:f}:f}},"binary*":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)*t(r,i,s,o);return n?{value:u}:u}},"binary/":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)/t(r,i,s,o);return n?{value:u}:u}},"binary%":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)%t(r,i,s,o);return n?{value:u}:u}},"binary===":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)===t(r,i,s,o);return n?{value:u}:u}},"binary!==":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)!==t(r,i,s,o);return n?{value:u}:u}},"binary==":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)==t(r,i,s,o);return n?{value:u}:u}},"binary!=":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)!=t(r,i,s,o);return n?{value:u}:u}},"binary<":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)<t(r,i,s,o);return n?{value:u}:u}},"binary>":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)>t(r,i,s,o);return n?{value:u}:u}},"binary<=":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)<=t(r,i,s,o);return n?{value:u}:u}},"binary>=":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)>=t(r,i,s,o);return n?{value:u}:u}},"binary&&":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)&&t(r,i,s,o);return n?{value:u}:u}},"binary||":function(e,t,n){return function(r,i,s,o){var u=e(r,i,s,o)||t(r,i,s,o);return n?{value:u}:u}},"ternary?:":function(e,t,n,r){return function(i,s,o,u){var a=e(i,s,o,u)?t(i,s,o,u):n(i,s,o,u);return r?{value:a}:a}},value:function(e,t){return function(){return t?{context:n,name:n,value:e}:e}},identifier:function(e,t,r,i,s){return function(o,u,a,f){var l=u&&e in u?u:o;i&&i!==1&&l&&!l[e]&&(l[e]={});var c=l?l[e]:n;return t&&Di(c,s),r?{context:l,name:e,value:c}:c}},computedMember:function(e,t,n,r,i){return function(s,o,u,a){var f=e(s,o,u,a),l,c;return f!=null&&(l=t(s,o,u,a),l=_i(l),Mi(l,i),r&&r!==1&&f&&!f[l]&&(f[l]={}),c=f[l],Di(c,i)),n?{context:f,name:l,value:c}:c}},nonComputedMember:function(e,t,r,i,s,o){return function(u,a,f,l){var c=e(u,a,f,l);s&&s!==1&&c&&!c[t]&&(c[t]={});var h=c!=null?c[t]:n;return(r||ts(t))&&Di(h,o),i?{context:c,name:t,value:h}:h}},inputs:function(e,t){return function(n,r,i,s){return s?s[t]:e(n,r,i)}}};var es=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new Ui(this.lexer),this.astCompiler=n.csp?new Zi(this.ast,t):new Yi(this.ast,t)};es.prototype={constructor:es,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var ns=Object.prototype.valueOf,cs=r("$sce"),hs={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},kr=r("$compile"),Es=t.createElement("a"),Ss=xs(e.location.href);Cs.$inject=["$document"],Ls.$inject=["$provide"];var Ds=22,Ps=".",Hs="0";Bs.$inject=["$locale"],js.$inject=["$locale"];var Gs={yyyy:Us("FullYear",4),yy:Us("FullYear",2,0,!0),y:Us("FullYear",1),MMMM:zs("Month"),MMM:zs("Month",!0),MM:Us("Month",2,1),M:Us("Month",1,1),dd:Us("Date",2),d:Us("Date",1),HH:Us("Hours",2),H:Us("Hours",1),hh:Us("Hours",2,-12),h:Us("Hours",1,-12),mm:Us("Minutes",2),m:Us("Minutes",1),ss:Us("Seconds",2),s:Us("Seconds",1),sss:Us("Milliseconds",3),EEEE:zs("Day"),EEE:zs("Day",!0),a:Js,Z:Ws,ww:$s(2),w:$s(1),G:Ks,GG:Ks,GGG:Ks,GGGG:Qs},Ys=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Zs=/^\-?\d+$/;eo.$inject=["$locale"];var no=B(o),ro=B(a);so.$inject=["$parse"];var uo=B({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if(t[0].nodeName.toLowerCase()!=="a")return;var n=g.call(t.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),ao={};T(zn,function(e,t){function n(e,n,i){e.$watch(i[r],function(n){i.$set(t,!!n)})}if(e=="multiple")return;var r=Or("ng-"+t),i=n;e==="checked"&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),ao[r]=function(){return{restrict:"A",priority:100,link:i}}}),T(Xn,function(e,t){ao[t]=function(){return{priority:100,link:function(e,n,r){if(t==="ngPattern"&&r.ngPattern.charAt(0)=="/"){var s=r.ngPattern.match(i);if(s){r.$set("ngPattern",new RegExp(s[1],s[2]));return}}e.$watch(r[t],function(n){r.$set(t,n)})}}}}),T(["src","srcset","href"],function(e){var t=Or("ng-"+e);ao[t]=function(){return{priority:99,link:function(n,r,i){var s=e,o=e;e==="href"&&g.call(r.prop("href"))==="[object SVGAnimatedString]"&&(o="xlinkHref",i.$attr[o]="xlink:href",s=null),i.$observe(t,function(t){if(!t){e==="href"&&i.$set(o,null);return}i.$set(o,t),c&&s&&r.prop(s,i[o])})}}}});var fo={$addControl:P,$$renameControl:co,$removeControl:P,$setValidity:P,$setDirty:P,$setPristine:P,$setSubmitted:P},lo="ng-submitted";ho.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var po=function(e){return["$timeout","$parse",function(t,r){function s(e){return e===""?r('this[""]').assign:r(e).assign||P}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:ho,compile:function(i,o){i.addClass(au).addClass(ou);var u=o.name?"name":e&&o.ngForm?"ngForm":!1;return{pre:function(r,i,o,a){var f=a[0];if(!("action"in o)){var l=function(e){r.$apply(function(){f.$commitViewValue(),f.$setSubmitted()}),e.preventDefault()};un(i[0],"submit",l),i.on("$destroy",function(){t(function(){an(i[0],"submit",l)},0,!1)})}var c=a[1]||f.$$parentForm;c.$addControl(f);var h=u?s(f.$name):P;u&&(h(r,f),o.$observe(u,function(e){if(f.$name===e)return;h(r,n),f.$$parentForm.$$renameControl(f,e),h=s(f.$name),h(r,f)})),i.on("$destroy",function(){f.$$parentForm.$removeControl(f),h(r,n),O(f,fo)})}}}};return i}]},vo=po(),mo=po(!0),go=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,yo=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,bo=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,wo=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Eo=/^(\d{4})-(\d{2})-(\d{2})$/,So=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,xo=/^(\d{4})-W(\d\d)$/,To=/^(\d{4})-(\d\d)$/,No=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Co={text:Lo,date:_o("date",Eo,Mo(Eo,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":_o("datetimelocal",So,Mo(So,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:_o("time",No,Mo(No,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:_o("week",xo,Oo,"yyyy-Www"),month:_o("month",To,Mo(To,["yyyy","MM"]),"yyyy-MM"),number:Po,url:Ho,email:Bo,radio:jo,checkbox:Io,hidden:P,button:P,submit:P,reset:P,file:P},qo=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,s,u,a){a[0]&&(Co[o(u.type)]||Co.text)(i,s,u,a[0],t,e,n,r)}}}}],Ro=/^(true|false|\d+)$/,Uo=function(){return{restrict:"A",priority:100,compile:function(e,t){return Ro.test(t.ngValue)?function(t,n,r){r.$set("value",t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,function(t){r.$set("value",t)})}}}},zo=["$compile",function(e){return{restrict:"AC",compile:function(n){return e.$$addBindingClass(n),function(n,r,i){e.$$addBindingInfo(r,i.ngBind),r=r[0],n.$watch(i.ngBind,function(t){r.textContent=F(t)?"":t})}}}}],Wo=["$interpolate","$compile",function(e,t){return{compile:function(r){return t.$$addBindingClass(r),function(r,i,s){var o=e(i.attr(s.$attr.ngBindTemplate));t.$$addBindingInfo(i,o.expressions),i=i[0],s.$observe("ngBindTemplate",function(e){i.textContent=F(e)?"":e})}}}}],Xo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,s){var o=t(s.ngBindHtml),u=t(s.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(i),function(r,i,s){n.$$addBindingInfo(i,s.ngBindHtml),r.$watch(u,function(){i.html(e.getTrustedHtml(o(r))||"")})}}}}],Vo=B({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Jo=$o("",!0),Ko=$o("Odd",0),Qo=$o("Even",1),Go=oo({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),Yo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Zo={},eu={blur:!0,focus:!0};T("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Or("ng-"+e);Zo[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,s){var o=n(s[t],null,!0);return function(n,i){i.on(e,function(t){var i=function(){o(n,{$event:t})};eu[e]&&r.$$phase?n.$evalAsync(i):n.$apply(i)})}}}}]});var tu=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,s,o){var u,a,f;n.$watch(i.ngIf,function(s){s?a||o(function(n,s){a=s,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),u={clone:n},e.enter(n,r.parent(),r)}):(f&&(f.remove(),f=null),a&&(a.$destroy(),a=null),u&&(f=Xt(u.clone),e.leave(f).then(function(){f=null}),u=null))})}}}],nu=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:w.noop,compile:function(r,i){var s=i.ngInclude||i.src,o=i.onload||"",u=i.autoscroll;return function(r,i,a,f,l){var c=0,h,p,d,v=function(){p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),d&&(n.leave(d).then(function(){p=null}),p=d,d=null)};r.$watch(s,function(a){var p=function(){I(u)&&(!u||r.$eval(u))&&t()},m=++c;a?(e(a,!0).then(function(e){if(r.$$destroyed)return;if(m!==c)return;var t=r.$new();f.template=e;var s=l(t,function(e){v(),n.enter(e,null,i).then(p)});h=t,d=s,h.$emit("$includeContentLoaded",a),r.$eval(o)},function(){if(r.$$destroyed)return;m===c&&(v(),r.$emit("$includeContentError",a))}),r.$emit("$includeContentRequested",a)):(v(),f.template=null)})}}}}],ru=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,s){if(/SVG/.test(r[0].toString())){r.empty(),e(xn(s.template,t).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});return}r.html(s.template),e(r.contents())(n)}}}],iu=oo({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),su=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var s=t.attr(r.$attr.ngList)||", ",o=r.ngTrim!=="false",u=o?rt(s):s,a=function(e){if(F(e))return;var t=[];return e&&T(e.split(u),function(e){e&&t.push(o?rt(e):e)}),t};i.$parsers.push(a),i.$formatters.push(function(e){return X(e)?e.join(s):n}),i.$isEmpty=function(e){return!e||!e.length}}}},ou="ng-valid",uu="ng-invalid",au="ng-pristine",fu="ng-dirty",lu="ng-untouched",cu="ng-touched",hu="ng-pending",pu=r("ngModel"),du=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,i,s,o,u,a,f,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=l(r.name||"",!1)(e),this.$$parentForm=fo;var c=s(r.ngModel),h=c.assign,p=c,d=h,v=null,m,g=this;this.$$setOptions=function(e){g.$options=e;if(e&&e.getterSetter){var t=s(r.ngModel+"()"),n=s(r.ngModel+"($$$p)");p=function(e){var n=c(e);return V(n)&&(n=t(e)),n},d=function(e,t){V(c(e))?n(e,{$$$p:g.$modelValue}):h(e,g.$modelValue)}}else if(!c.assign)throw pu("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,Tt(i))},this.$render=P,this.$isEmpty=function(e){return F(e)||e===""||e===null||e!==e};var y=0;yu({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:o}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,o.removeClass(i,fu),o.addClass(i,au)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,o.removeClass(i,au),o.addClass(i,fu),g.$$parentForm.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,o.setClass(i,lu,cu)},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,o.setClass(i,cu,lu)},this.$rollbackViewValue=function(){u.cancel(v),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){if(z(g.$modelValue)&&isNaN(g.$modelValue))return;var e=g.$$lastCommittedViewValue,t=g.$$rawModelValue,r=g.$valid,i=g.$modelValue,s=g.$options&&g.$options.allowInvalid;g.$$runValidators(t,e,function(e){!s&&r!==e&&(g.$modelValue=e?t:n,g.$modelValue!==i&&g.$$writeModelToScope())})},this.$$runValidators=function(e,t,r){function s(){var e=g.$$parserName||"parse";return F(m)?(a(e,null),!0):(m||(T(g.$validators,function(e,t){a(t,null)}),T(g.$asyncValidators,function(e,t){a(t,null)})),a(e,m),m)}function o(){var n=!0;return T(g.$validators,function(r,i){var s=r(e,t);n=n&&s,a(i,s)}),n?!0:(T(g.$asyncValidators,function(e,t){a(t,null)}),!1)}function u(){var r=[],i=!0;T(g.$asyncValidators,function(s,o){var u=s(e,t);if(!et(u))throw pu("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",u);a(o,n),r.push(u.then(function(){a(o,!0)},function(e){i=!1,a(o,!1)}))}),r.length?f.all(r).then(function(){l(i)},P):l(!0)}function a(e,t){i===y&&g.$setValidity(e,t)}function l(e){i===y&&r(e)}y++;var i=y;if(!s()){l(!1);return}if(!o()){l(!1);return}u()},this.$commitViewValue=function(){var e=g.$viewValue;u.cancel(v);if(g.$$lastCommittedViewValue===e&&(e!==""||!g.$$hasNativeValidators))return;g.$$lastCommittedViewValue=e,g.$pristine&&this.$setDirty(),this.$$parseAndValidate()},this.$$parseAndValidate=function(){function u(){g.$modelValue!==s&&g.$$writeModelToScope()}var t=g.$$lastCommittedViewValue,r=t;m=F(r)?n:!0;if(m)for(var i=0;i<g.$parsers.length;i++){r=g.$parsers[i](r);if(F(r)){m=!1;break}}z(g.$modelValue)&&isNaN(g.$modelValue)&&(g.$modelValue=p(e));var s=g.$modelValue,o=g.$options&&g.$options.allowInvalid;g.$$rawModelValue=r,o&&(g.$modelValue=r,u()),g.$$runValidators(r,g.$$lastCommittedViewValue,function(e){o||(g.$modelValue=e?r:n,u())})},this.$$writeModelToScope=function(){d(e,g.$modelValue),T(g.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){g.$viewValue=e,(!g.$options||g.$options.updateOnDefault)&&g.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n=0,r=g.$options,i;r&&I(r.debounce)&&(i=r.debounce,z(i)?n=i:z(i[t])?n=i[t]:z(i["default"])&&(n=i["default"])),u.cancel(v),n?v=u(function(){g.$commitViewValue()},n):a.$$phase?g.$commitViewValue():e.$apply(function(){g.$commitViewValue()})},e.$watch(function(){var r=p(e);if(r!==g.$modelValue&&(g.$modelValue===g.$modelValue||r===r)){g.$modelValue=g.$$rawModelValue=r,m=n;var i=g.$formatters,s=i.length,o=r;while(s--)o=i[s](o);g.$viewValue!==o&&(g.$viewValue=g.$$lastCommittedViewValue=o,g.$render(),g.$$runValidators(r,o,P))}return r})}],vu=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:du,priority:1,compile:function(n){return n.addClass(au).addClass(lu).addClass(ou),{pre:function(t,n,r,i){var s=i[0],o=i[1]||s.$$parentForm;s.$$setOptions(i[2]&&i[2].$options),o.$addControl(s),r.$observe("name",function(e){s.$name!==e&&s.$$parentForm.$$renameControl(s,e)}),t.$on("$destroy",function(){s.$$parentForm.$removeControl(s)})},post:function(n,r,i,s){var o=s[0];o.$options&&o.$options.updateOn&&r.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),r.on("blur",function(t){if(o.$touched)return;e.$$phase?n.$evalAsync(o.$setTouched):n.$apply(o.$setTouched)})}}}}}],mu=/(\s+|^)default(\s+|$)/,gu=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=lt(e.$eval(t.ngModelOptions)),I(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=rt(this.$options.updateOn.replace(mu,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},wu=oo({terminal:!0,priority:1e3}),Eu=r("ngOptions"),Su=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,xu=["$compile","$parse",function(e,n){function r(e,t,r){function S(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function T(e){var t;if(!o&&x(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&n.charAt(0)!=="$"&&t.push(n)}return t}var i=e.match(Su);if(!i)throw Eu("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Tt(t));var s=i[5]||i[7],o=i[6],u=/ as /.test(i[0])&&i[1],a=i[9],f=n(i[2]?i[1]:s),l=u&&n(u),c=l||f,h=a&&n(a),p=a?function(e,t){return h(r,t)}:function(t){return Yn(t)},d=function(e,t){return p(e,E(e,t))},v=n(i[2]||i[1]),m=n(i[3]||""),g=n(i[4]||""),y=n(i[8]),b={},E=o?function(e,t){return b[o]=t,b[s]=e,b}:function(e){return b[s]=e,b};return{trackBy:a,getTrackByValue:d,getWatchables:n(y,function(e){var t=[];e=e||[];var n=T(e),s=n.length;for(var o=0;o<s;o++){var u=e===n?o:n[o],a=e[u],f=E(e[u],u),l=p(e[u],f);t.push(l);if(i[2]||i[1]){var c=v(r,f);t.push(c)}if(i[4]){var h=g(r,f);t.push(h)}}return t}),getOptions:function(){var e=[],t={},n=y(r)||[],i=T(n),s=i.length;for(var o=0;o<s;o++){var u=n===i?o:i[o],f=n[u],l=E(f,u),h=c(r,l),b=p(h,l),x=v(r,l),N=m(r,l),C=g(r,l),k=new S(b,h,x,N,C);e.push(k),t[b]=k}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[d(e)]},getViewValueFromOption:function(e){return a?w.copy(e.viewValue):e.viewValue}}}}}function u(t,n,u,a){function C(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),e.value!==t.value&&(t.value=e.selectValue)}function k(e,t,n,r){var i;return t&&o(t.nodeName)===n?i=t:(i=r.cloneNode(!1),t?e.insertBefore(i,t):e.appendChild(i)),i}function L(e){var t;while(e)t=e.nextSibling,qn(e),e=t}function A(e){var t=p&&p[0],n=y&&y[0];if(t||n)while(e&&(e===t||e===n||e.nodeType===Qt||ut(e)==="option"&&e.value===""))e=e.nextSibling;return e}function O(){var e=b&&l.readValue();b=w.getOptions();var t={},r=n[0].firstChild;g&&n.prepend(p),r=A(r),b.items.forEach(function(o){var u,a,f;o.group?(u=t[o.group],u||(a=k(n[0],r,"optgroup",s),r=a.nextSibling,a.label=o.group,u=t[o.group]={groupElement:a,currentOptionElement:a.firstChild}),f=k(u.groupElement,u.currentOptionElement,"option",i),C(o,f),u.currentOptionElement=f.nextSibling):(f=k(n[0],r,"option",i),C(o,f),r=f.nextSibling)}),Object.keys(t).forEach(function(e){L(t[e].currentOptionElement)}),L(r),f.$render();if(!f.$isEmpty(e)){var o=l.readValue(),u=w.trackBy||c;if(u?!ht(e,o):e!==o)f.$setViewValue(o),f.$render()}}var f=a[1];if(!f)return;var l=a[0],c=u.multiple,p;for(var d=0,v=n.children(),m=v.length;d<m;d++)if(v[d].value===""){p=v.eq(d);break}var g=!!p,y=h(i.cloneNode(!1));y.val("?");var b,w=r(u.ngOptions,n,t),E=function(){g||n.prepend(p),n.val(""),p.prop("selected",!0),p.attr("selected",!0)},S=function(){g||p.remove()},x=function(){n.prepend(y),n.val("?"),y.prop("selected",!0),y.attr("selected",!0)},N=function(){y.remove()};c?(f.$isEmpty=function(e){return!e||e.length===0},l.writeValue=function(t){b.items.forEach(function(e){e.element.selected=!1}),t&&t.forEach(function(e){var t=b.getOptionFromViewValue(e);t&&!t.disabled&&(t.element.selected=!0)})},l.readValue=function(){var t=n.val()||[],r=[];return T(t,function(e){var t=b.selectValueMap[e];t&&!t.disabled&&r.push(b.getViewValueFromOption(t))}),r},w.trackBy&&t.$watchCollection(function(){if(X(f.$viewValue))return f.$viewValue.map(function(e){return w.getTrackByValue(e)})},function(){f.$render()})):(l.writeValue=function(t){var r=b.getOptionFromViewValue(t);r&&!r.disabled?n[0].value!==r.selectValue&&(N(),S(),n[0].value=r.selectValue,r.element.selected=!0,r.element.setAttribute("selected","selected")):t===null||g?(N(),E()):(S(),x())},l.readValue=function(){var t=b.selectValueMap[n.val()];return t&&!t.disabled?(S(),N(),b.getViewValueFromOption(t)):null},w.trackBy&&t.$watch(function(){return w.getTrackByValue(f.$viewValue)},function(){f.$render()})),g?(p.remove(),e(p)(t),p.removeClass("ng-scope")):p=h(i.cloneNode(!1)),O(),t.$watchCollection(w.getWatchables,O)}var i=t.createElement("option"),s=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:{pre:function(t,n,r,i){i[0].registerOption=P},post:u}}}],Tu=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(s,u,a){function b(e){u.text(e||"")}var f=a.count,l=a.$attr.when&&u.attr(a.$attr.when),c=a.offset||0,h=s.$eval(l)||{},p={},d=t.startSymbol(),v=t.endSymbol(),m=d+f+"-"+c+v,g=w.noop,y;T(a,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+o(n[2]);h[r]=u.attr(a.$attr[t])}}),T(h,function(e,n){p[n]=t(e.replace(r,m))}),s.$watch(f,function(r){var i=parseFloat(r),o=isNaN(i);!o&&!(i in h)&&(i=e.pluralCat(i-c));if(i!==y&&!(o&&z(y)&&isNaN(y))){g();var u=p[i];F(u)?(r!=null&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+l),g=P,b()):g=s.$watch(u,b),y=i}})}}}],Nu=["$parse","$animate",function(e,i){var s="$$NG_REMOVED",o=r("ngRepeat"),a=function(e,t,n,r,i,s,o){e[n]=r,i&&(e[i]=s),e.$index=t,e.$first=t===0,e.$last=t===o-1,e.$middle=!e.$first&&!e.$last,e.$odd=!(e.$even=(t&1)===0)},f=function(e){return e.clone[0]},l=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(c,p){var d=p.ngRepeat,v=t.createComment(" end ngRepeat: "+d+" "),m=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",d);var g=m[1],y=m[2],b=m[3],w=m[4];m=g.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!m)throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var E=m[3]||m[1],S=m[2];if(b&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(b)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(b)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",b);var N,C,k,L,A={$id:Yn};return w?N=e(w):(k=function(e,t){return Yn(t)},L=function(e){return e}),function(t,r,c,p,m){N&&(C=function(e,n,r){return S&&(A[S]=e),A[E]=n,A.$index=r,N(t,A)});var g=Vt();t.$watchCollection(y,function(c){var p,y,w=r[0],N,A=Vt(),O,M,_,D,P,H,B,j,F;b&&(t[b]=c);if(x(c))H=c,P=C||k;else{P=C||L,H=[];for(var I in c)u.call(c,I)&&I.charAt(0)!=="$"&&H.push(I)}O=H.length,j=new Array(O);for(p=0;p<O;p++){M=c===H?p:H[p],_=c[M],D=P(M,_,p);if(g[D])B=g[D],delete g[D],A[D]=B,j[p]=B;else{if(A[D])throw T(j,function(e){e&&e.scope&&(g[e.id]=e)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",d,D,_);j[p]={id:D,scope:n,clone:n},A[D]=!0}}for(var q in g){B=g[q],F=Xt(B.clone),i.leave(F);if(F[0].parentNode)for(p=0,y=F.length;p<y;p++)F[p][s]=!0;B.scope.$destroy()}for(p=0;p<O;p++){M=c===H?p:H[p],_=c[M],B=j[p];if(B.scope){N=w;do N=N.nextSibling;while(N&&N[s]);f(B)!=N&&i.move(Xt(B.clone),null,h(w)),w=l(B),a(B.scope,p,E,_,S,M,O)}else m(function(t,n){B.scope=n;var r=v.cloneNode(!1);t[t.length++]=r,i.enter(t,null,h(w)),w=r,B.clone=t,A[B.id]=B,a(B.scope,p,E,_,S,M,O)})}g=A})}}}}],Cu="ng-hide",ku="ng-hide-animate",Lu=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(r){e[r?"removeClass":"addClass"](n,Cu,{tempClasses:ku})})}}}],Au=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(r){e[r?"addClass":"removeClass"](n,Cu,{tempClasses:ku})})}}}],Ou=oo(function(e,t,n){e.$watch(n.ngStyle,function(n,r){r&&n!==r&&T(r,function(e,n){t.css(n,"")}),n&&t.css(n)},!0)}),Mu=["$animate",function(e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,s){var o=i.ngSwitch||i.on,u=[],a=[],f=[],l=[],c=function(e,t){return function(){e.splice(t,1)}};n.$watch(o,function(r){var i,o;for(i=0,o=f.length;i<o;++i)e.cancel(f[i]);f.length=0;for(i=0,o=l.length;i<o;++i){var h=Xt(a[i].clone);l[i].$destroy();var p=f[i]=e.leave(h);p.then(c(f,i))}a.length=0,l.length=0,(u=s.cases["!"+r]||s.cases["?"])&&T(u,function(n){n.transclude(function(r,i){l.push(i);var s=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:r};a.push(o),e.enter(r,s.parent(),s)})})})}}}],_u=oo({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Du=oo({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),Pu=oo({restrict:"EAC",link:function(e,t,n,i,s){if(!s)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Tt(t));s(function(e){t.empty(),t.append(e)})}}),Hu=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if(n.type=="text/ng-template"){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Bu={$setViewValue:P,$render:P},Fu=["$element","$scope","$attrs",function(e,r,i){var s=this,o=new Zn;s.ngModelCtrl=Bu,s.unknownOption=h(t.createElement("option")),s.renderUnknownOption=function(t){var n="? "+Yn(t)+" ?";s.unknownOption.val(n),e.prepend(s.unknownOption),e.val(n)},r.$on("$destroy",function(){s.renderUnknownOption=P}),s.removeUnknownOption=function(){s.unknownOption.parent()&&s.unknownOption.remove()},s.readValue=function(){return s.removeUnknownOption(),e.val()},s.writeValue=function(n){s.hasOption(n)?(s.removeUnknownOption(),e.val(n),n===""&&s.emptyOption.prop("selected",!0)):n==null&&s.emptyOption?(s.removeUnknownOption(),e.val("")):s.renderUnknownOption(n)},s.addOption=function(e,t){zt(e,'"option value"'),e===""&&(s.emptyOption=t);var n=o.get(e)||0;o.put(e,n+1),s.ngModelCtrl.$render(),ju(t)},s.removeOption=function(e){var t=o.get(e);t&&(t===1?(o.remove(e),e===""&&(s.emptyOption=n)):o.put(e,t-1))},s.hasOption=function(e){return!!o.get(e)},s.registerOption=function(e,t,n,r,i){if(r){var o;n.$observe("value",function(n){I(o)&&s.removeOption(o),o=n,s.addOption(n,t)})}else i?e.$watch(i,function(r,i){n.$set("value",r),i!==r&&s.removeOption(i),s.addOption(r,t)}):s.addOption(n.value,t);t.on("$destroy",function(){s.removeOption(n.value),s.ngModelCtrl.$render()})}}],Iu=function(){function e(e,t,n,r){var i=r[1];if(!i)return;var s=r[0];s.ngModelCtrl=i,t.on("change",function(){e.$apply(function(){i.$setViewValue(s.readValue())})});if(n.multiple){s.readValue=function(){var n=[];return T(t.find("option"),function(e){e.selected&&n.push(e.value)}),n},s.writeValue=function(n){var r=new Zn(n);T(t.find("option"),function(e){e.selected=I(r.get(e.value))})};var o,u=NaN;e.$watch(function(){u===i.$viewValue&&!ht(o,i.$viewValue)&&(o=ct(i.$viewValue),i.$render()),u=i.$viewValue}),i.$isEmpty=function(e){return!e||e.length===0}}}function t(e,t,n,r){var i=r[1];if(!i)return;var s=r[0];i.$render=function(){s.writeValue(i.$viewValue)}}return{restrict:"E",require:["select","?ngModel"],controller:Fu,priority:1,link:{pre:e,post:t}}},qu=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){if(I(n.value))var r=e(n.value,!0);else{var i=e(t.text(),!0);i||n.$set("value",t.text())}return function(e,t,n){var s="$selectController",o=t.parent(),u=o.data(s)||o.parent().data(s);u&&u.registerOption(e,t,n,r,i)}}}}],Ru=B({restrict:"E",terminal:!1}),Uu=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()})}}},zu=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,s){if(!s)return;var o,u=i.ngPattern||i.pattern;i.$observe("pattern",function(e){U(e)&&e.length>0&&(e=new RegExp("^"+e+"$"));if(e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",u,e,Tt(t));o=e||n,s.$validate()}),s.$validators.pattern=function(e,t){return s.$isEmpty(t)||F(o)||o.test(t)}}}},Wu=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;var i=-1;n.$observe("maxlength",function(e){var t=_(e);i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}},Xu=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;var i=0;n.$observe("minlength",function(e){i=_(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}};if(e.angular.bootstrap){console.log("WARNING: Tried to load angular more than once.");return}qt(),rn(w),w.module("ngLocale",[],["$provide",function(e){function r(e){e+="";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function i(e,t){var i=t;n===i&&(i=Math.min(r(e),3));var s=Math.pow(10,i),o=(e*s|0)%s;return{v:i,f:o}}var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",pluralCat:function(e,n){var r=e|0,s=i(e,n);return r==1&&s.v==0?t.ONE:t.OTHER}})}]),h(t).ready(function(){_t(t,Dt)})}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),define("angular",function(e){return function(){var t,n;return t||e.angular}}(this)),function(e,t,n){"use strict";function s(){function e(e,n){return t.extend(Object.create(e),n)}function r(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,r){var s=r==="?"?r:null,o=r==="*"?r:null;return i.push({name:n,optional:!!s}),t=t||"",""+(s?"":t)+"(?:"+(s?t:"")+(o&&"(.+?)"||"([^/]+)")+(s||"")+")"+(s||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}var n={};this.when=function(e,i){var s=t.copy(i);t.isUndefined(s.reloadOnSearch)&&(s.reloadOnSearch=!0),t.isUndefined(s.caseInsensitiveMatch)&&(s.caseInsensitiveMatch=this.caseInsensitiveMatch),n[e]=t.extend(s,e&&r(e,s));if(e){var o=e[e.length-1]=="/"?e.substr(0,e.length-1):e+"/";n[o]=t.extend({redirectTo:e},r(o,s))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return typeof e=="string"&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(r,s,o,u,a,f,l){function v(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var s=1,o=i.length;s<o;++s){var u=n[s-1],a=i[s];u&&a&&(r[u.name]=a)}return r}function m(e){var n=d.current;h=y(),p=h&&n&&h.$$route===n.$$route&&t.equals(h.pathParams,n.pathParams)&&!h.reloadOnSearch&&!c,!p&&(n||h)&&r.$broadcast("$routeChangeStart",h,n).defaultPrevented&&e&&e.preventDefault()}function g(){var e=d.current,n=h;if(p)e.params=n.params,t.copy(e.params,o),r.$broadcast("$routeUpdate",e);else if(n||e)c=!1,d.current=n,n&&n.redirectTo&&(t.isString(n.redirectTo)?s.path(b(n.redirectTo,n.params)).search(n.params).replace():s.url(n.redirectTo(n.pathParams,s.path(),s.search())).replace()),u.when(n).then(function(){if(n){var e=t.extend({},n.resolve),r,i;return t.forEach(e,function(n,r){e[r]=t.isString(n)?a.get(n):a.invoke(n,null,null,r)}),t.isDefined(r=n.template)?t.isFunction(r)&&(r=r(n.params)):t.isDefined(i=n.templateUrl)&&(t.isFunction(i)&&(i=i(n.params)),t.isDefined(i)&&(n.loadedTemplateUrl=l.valueOf(i),r=f(i))),t.isDefined(r)&&(e.$template=r),u.all(e)}}).then(function(i){n==d.current&&(n&&(n.locals=i,t.copy(n.params,o)),r.$broadcast("$routeChangeSuccess",n,e))},function(t){n==d.current&&r.$broadcast("$routeChangeError",n,e,t)})}function y(){var r,i;return t.forEach(n,function(n,o){!i&&(r=v(s.path(),n))&&(i=e(n,{params:t.extend({},s.search(),r),pathParams:r}),i.$$route=n)}),i||n[null]&&e(n[null],{params:{},pathParams:{}})}function b(e,n){var r=[];return t.forEach((e||"").split(":"),function(e,t){if(t===0)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),s=i[1];r.push(n[s]),r.push(i[2]||""),delete n[s]}}),r.join("")}var c=!1,h,p,d={routes:n,reload:function(){c=!0,r.$evalAsync(function(){m(),g()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw i("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),s.path(b(this.current.$$route.originalPath,e)),s.search(e)}};return r.$on("$locationChangeStart",m),r.$on("$locationChangeSuccess",g),d}]}function o(){this.$get=function(){return{}}}function u(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,s,o,u,a){function d(){c&&(r.cancel(c),c=null),f&&(f.$destroy(),f=null),l&&(c=r.leave(l),c.then(function(){c=null}),l=null)}function v(){var o=e.current&&e.current.locals,u=o&&o.$template;if(t.isDefined(u)){var c=i.$new(),v=e.current,m=a(c,function(e){r.enter(e,null,l||s).then(function(){t.isDefined(h)&&(!h||i.$eval(h))&&n()}),d()});l=m,f=v.scope=c,f.$emit("$viewContentLoaded"),f.$eval(p)}else d()}var f,l,c,h=o.autoscroll,p=o.onload||"";i.$on("$routeChangeSuccess",v),v()}}}function a(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var s=n.current,o=s.locals;i.html(o.$template);var u=e(i.contents());if(s.controller){o.$scope=r;var a=t(s.controller,o);s.controllerAs&&(r[s.controllerAs]=a),i.data("$ngControllerController",a),i.children().data("$ngControllerController",a)}u(r)}}}var r=t.module("ngRoute",["ng"]).provider("$route",s),i=t.$$minErr("ngRoute");r.provider("$routeParams",o),r.directive("ngView",u),r.directive("ngView",a),u.$inject=["$route","$anchorScroll","$animate"],a.$inject=["$compile","$controller","$route"]}(window,window.angular),define("angularRoute",["angular"],function(){}),function(){function qn(e,t){return e.set(t[0],t[1]),e}function Rn(e,t){return e.add(t),e}function Un(e,t,n){var r=n.length;switch(r){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function zn(e,t,n,r){var i=-1,s=e.length;while(++i<s){var o=e[i];t(r,o,n(o),e)}return r}function Wn(e,t){var n=-1,r=e.length,i=-1,s=t.length,o=Array(r+s);while(++n<r)o[n]=e[n];while(++i<s)o[n++]=t[i];return o}function Xn(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e)===!1)break;return e}function Vn(e,t){var n=e.length;while(n--)if(t(e[n],n,e)===!1)break;return e}function $n(e,t){var n=-1,r=e.length;while(++n<r)if(!t(e[n],n,e))return!1;return!0}function Jn(e,t){var n=-1,r=e.length,i=-1,s=[];while(++n<r){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function Kn(e,t){return!!e.length&&sr(e,t,0)>-1}function Qn(e,t,n){var r=-1,i=e.length;while(++r<i)if(n(t,e[r]))return!0;return!1}function Gn(e,t){var n=-1,r=e.length,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function Yn(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function Zn(e,t,n,r){var i=-1,s=e.length;r&&s&&(n=e[++i]);while(++i<s)n=t(n,e[i],i,e);return n}function er(e,t,n,r){var i=e.length;r&&i&&(n=e[--i]);while(i--)n=t(n,e[i],i,e);return n}function tr(e,t){var n=-1,r=e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}function nr(t,n,r){var i=-1,s=t.length;while(++i<s){var o=t[i],u=n(o);if(u!=null&&(a===e?u===u:r(u,a)))var a=u,f=o}return f}function rr(e,t,n,r){var i;return n(e,function(e,n,s){if(t(e,n,s))return i=r?n:e,!1}),i}function ir(e,t,n){var r=e.length,i=n?r:-1;while(n?i--:++i<r)if(t(e[i],i,e))return i;return-1}function sr(e,t,n){if(t!==t)return Er(e,n);var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function or(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function ur(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function ar(t,n){var r,i=-1,s=t.length;while(++i<s){var o=n(t[i]);o!==e&&(r=r===e?o:r+o)}return r}function fr(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function lr(e,t){return Gn(t,function(t){return[t,e[t]]})}function cr(e){return function(t){return e(t)}}function hr(e,t){return Gn(t,function(t){return e[t]})}function pr(e,t){var n=-1,r=e.length;while(++n<r&&sr(t,e[n],0)>-1);return n}function dr(e,t){var n=e.length;while(n--&&sr(t,e[n],0)>-1);return n}function vr(e){return e&&e.Object===Object?e:null}function mr(t,n){if(t!==n){var r=t===null,i=t===e,s=t===t,o=n===null,u=n===e,a=n===n;if(t>n&&!o||!s||r&&!u&&a||i&&a)return 1;if(t<n&&!r||!a||o&&!i&&s||u&&s)return-1}return 0}function gr(e,t,n){var r=-1,i=e.criteria,s=t.criteria,o=i.length,u=n.length;while(++r<o){var a=mr(i[r],s[r]);if(a){if(r>=u)return a;var f=n[r];return a*(f=="desc"?-1:1)}}return e.index-t.index}function yr(e){return Nn[e]}function br(e){return Cn[e]}function wr(e){return"\\"+An[e]}function Er(e,t,n){var r=e.length,i=t+(n?0:-1);while(n?i--:++i<r){var s=e[i];if(s!==s)return i}return-1}function Sr(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(n){}return t}function xr(e,t){return e=typeof e=="number"||Ot.test(e)?+e:-1,t=t==null?N:t,e>-1&&e%1==0&&e<t}function Tr(e){var t,n=[];while(!(t=e.next()).done)n.push(t.value);return n}function Nr(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function Cr(e,t){var n=-1,r=e.length,i=-1,s=[];while(++n<r)e[n]===t&&(e[n]=M,s[++i]=n);return s}function kr(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Lr(e){if(!e||!gn.test(e))return e.length;var t=mn.lastIndex=0;while(mn.test(e))t++;return t}function Ar(e){return e.match(mn)}function Or(e){return kn[e]}function Mr(Ot){function Pr(e){if(Sf(e)&&!sf(e)&&!(e instanceof jr)){if(e instanceof Br)return e;if(Ut.call(e,"__wrapped__"))return Bo(e)}return new Br(e)}function Hr(){}function Br(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=e}function jr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function Fr(){var e=new jr(this.__wrapped__);return e.__actions__=Ps(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ps(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ps(this.__views__),e}function Ir(){if(this.__filtered__){var e=new jr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function qr(){var e=this.__wrapped__.value(),t=this.__dir__,n=sf(e),r=t<0,i=n?e.length:0,s=mo(0,i,this.__views__),o=s.start,u=s.end,a=u-o,f=r?u:o-1,l=this.__iteratees__,c=l.length,h=0,p=pn(a,this.__takeCount__);if(!n||i<y||i==a&&p==a)return Ss(e,this.__actions__);var d=[];e:while(a--&&h<p){f+=t;var v=-1,m=e[f];while(++v<c){var g=l[v],E=g.iteratee,S=g.type,x=E(m);if(S==w)m=x;else if(!x){if(S==b)continue e;break e}}d[h++]=m}return d}function Rr(){}function Ur(e,t){return Wr(e,t)&&delete e[t]}function zr(t,n){if(An){var r=t[n];return r===x?e:r}return Ut.call(t,n)?t[n]:e}function Wr(t,n){return An?t[n]!==e:Ut.call(t,n)}function Xr(t,n,r){t[n]=An&&r===e?x:r}function Vr(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function $r(){this.__data__={hash:new Rr,map:Cn?new Cn:[],string:new Rr}}function Jr(e){var t=this.__data__;return To(e)?Ur(typeof e=="string"?t.string:t.hash,e):Cn?t.map["delete"](e):ui(t.map,e)}function Kr(e){var t=this.__data__;return To(e)?zr(typeof e=="string"?t.string:t.hash,e):Cn?t.map.get(e):ai(t.map,e)}function Qr(e){var t=this.__data__;return To(e)?Wr(typeof e=="string"?t.string:t.hash,e):Cn?t.map.has(e):fi(t.map,e)}function Gr(e,t){var n=this.__data__;return To(e)?Xr(typeof e=="string"?n.string:n.hash,e,t):Cn?n.map.set(e,t):ci(n.map,e,t),this}function Yr(e){var t=-1,n=e?e.length:0;this.__data__=new Vr;while(++t<n)this.push(e[t])}function Zr(e,t){var n=e.__data__;if(To(t)){var r=n.__data__,i=typeof t=="string"?r.string:r.hash;return i[t]===x}return n.has(t)}function ei(e){var t=this.__data__;if(To(e)){var n=t.__data__,r=typeof e=="string"?n.string:n.hash;r[e]=x}else t.set(e,x)}function ti(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function ni(){this.__data__={array:[],map:null}}function ri(e){var t=this.__data__,n=t.array;return n?ui(n,e):t.map["delete"](e)}function ii(e){var t=this.__data__,n=t.array;return n?ai(n,e):t.map.get(e)}function si(e){var t=this.__data__,n=t.array;return n?fi(n,e):t.map.has(e)}function oi(e,t){var n=this.__data__,r=n.array;r&&(r.length<y-1?ci(r,e,t):(n.array=null,n.map=new Vr(r)));var i=n.map;return i&&i.set(e,t),this}function ui(e,t){var n=li(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():on.call(e,n,1),!0}function ai(t,n){var r=li(t,n);return r<0?e:t[r][1]}function fi(e,t){return li(e,t)>-1}function li(e,t){var n=e.length;while(n--)if(ef(e[n][0],t))return n;return-1}function ci(e,t,n){var r=li(e,t);r<0?e.push([t,n]):e[r][1]=n}function hi(t,n,r,i){return t===e||ef(t,qt[r])&&!Ut.call(i,r)?n:t}function pi(t,n,r){if(r!==e&&!ef(t[n],r)||typeof n=="number"&&r===e&&!(n in t))t[n]=r}function di(t,n,r){var i=t[n];if(!ef(i,r)||ef(i,qt[n])&&!Ut.call(t,n)||r===e&&!(n in t))t[n]=r}function vi(e,t,n,r){return Ti(e,function(e,i,s){t(r,e,n(e),s)}),r}function mi(e,t){return e&&Hs(t,yl(t),e)}function gi(t,n){var r=-1,i=t==null,s=n.length,o=Array(s);while(++r<s)o[r]=i?e:hl(t,n[r]);return o}function yi(t,n,r){return t===t&&(r!==e&&(t=t<=r?t:r),n!==e&&(t=t>=n?t:n)),t}function bi(t,n,r,i,s,o){var u;r&&(u=s?r(t,i,s,o):r(t));if(u!==e)return u;if(!Ef(t))return t;var a=sf(t);if(a){u=yo(t);if(!n)return Ps(t,u)}else{var f=vo(t),l=f==j||f==F;if(lf(t))return Ns(t,n);if(!(f==R||f==_||l&&!s))return Tn[f]?wo(t,f,n):s?t:{};if(Sr(t))return s?t:{};u=bo(l?{}:t);if(!n)return js(t,mi(u,t))}o||(o=new ti);var c=o.get(t);return c?c:(o.set(t,u),(a?Xn:Di)(t,function(e,i){di(u,i,bi(e,n,r,i,t,o))}),a?u:js(t,u))}function wi(t){var n=yl(t),r=n.length;return function(i){if(i==null)return!r;var s=r;while(s--){var o=n[s],u=t[o],a=i[o];if(a===e&&!(o in Object(i))||!u(a))return!1}return!0}}function Si(t,n,r){if(typeof t!="function")throw new Ft(S);return sn(function(){t.apply(e,r)},n)}function xi(e,t,n,r){var i=-1,s=Kn,o=!0,u=e.length,a=[],f=t.length;if(!u)return a;n&&(t=Gn(t,cr(n))),r?(s=Qn,o=!1):t.length>=y&&(s=Zr,o=!1,t=new Yr(t));e:while(++i<u){var l=e[i],c=n?n(l):l;if(o&&c===c){var h=f;while(h--)if(t[h]===c)continue e;a.push(l)}else s(t,c,r)||a.push(l)}return a}function Ci(e,t){var n=!0;return Ti(e,function(e,r,i){return n=!!t(e,r,i),n}),n}function ki(t,n,r,i){var s=t.length;r=Wf(r),r<0&&(r=-r>s?0:s+r),i=i===e||i>s?s:Wf(i),i<0&&(i+=s),i=r>i?0:Xf(i);while(r<i)t[r++]=n;return t}function Li(e,t){var n=[];return Ti(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Ai(e,t,n,r){r||(r=[]);var i=-1,s=e.length;while(++i<s){var o=e[i];af(o)&&(n||sf(o)||rf(o))?t?Ai(o,t,n,r):Yn(r,o):n||(r[r.length]=o)}return r}function _i(e,t){return e==null?e:Oi(e,t,bl)}function Di(e,t){return e&&Oi(e,t,yl)}function Pi(e,t){return e&&Mi(e,t,yl)}function Hi(e,t){return Jn(t,function(t){return yf(e[t])})}function Bi(t,n){n=xo(n,t)?[n+""]:ys(n);var r=0,i=n.length;while(t!=null&&r<i)t=t[n[r++]];return r&&r==i?t:e}function ji(e,t){return Ut.call(e,t)||typeof e=="object"&&t in e&&en(e)===null}function Fi(e,t){return t in Object(e)}function Ii(e,t,n){return e>=pn(t,n)&&e<hn(t,n)}function qi(t,n,r){var i=r?Qn:Kn,s=t.length,o=s,u=Array(s),a=[];while(o--){var f=t[o];o&&n&&(f=Gn(f,cr(n))),u[o]=!r&&(n||f.length>=120)?new Yr(o&&f):e}f=t[0];var l=-1,c=f.length,h=u[0];e:while(++l<c){var p=f[l],d=n?n(p):p;if(h?!Zr(h,d):!i(a,d,r)){var o=s;while(--o){var v=u[o];if(v?!Zr(v,d):!i(t[o],d,r))continue e}h&&h.push(d),a.push(p)}}return a}function Ri(e,t,n,r){return Di(e,function(e,i,s){t(r,n(e),i,s)}),r}function Ui(t,n,r){xo(n,t)||(n=ys(n),t=Oo(t,n),n=ou(n));var i=t==null?t:t[n];return i==null?e:Un(i,t,r)}function zi(e,t,n,r,i){return e===t?!0:e==null||t==null||!Ef(e)&&!Sf(t)?e!==e&&t!==t:Wi(e,t,zi,n,r,i)}function Wi(e,t,n,r,i,s){var o=sf(e),u=sf(t),a=D,f=D;o||(a=vo(e),a==_?a=R:a!=R&&(o=jf(e))),u||(f=vo(t),f==_?f=R:f!=R&&(u=jf(t)));var l=a==R&&!Sr(e),c=f==R&&!Sr(t),h=a==f;if(h&&!o&&!l)return so(e,t,a,n,r,i);var d=i&p;if(!d){var v=l&&Ut.call(e,"__wrapped__"),m=c&&Ut.call(t,"__wrapped__");if(v||m)return n(v?e.value():e,m?t.value():t,r,i,s)}return h?(s||(s=new ti),(o?io:oo)(e,t,n,r,i,s)):!1}function Xi(t,n,r,i){var s=r.length,o=s,u=!i;if(t==null)return!o;t=Object(t);while(s--){var a=r[s];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}while(++s<o){a=r[s];var f=a[0],l=t[f],c=a[1];if(u&&a[2]){if(l===e&&!(f in t))return!1}else{var d=new ti,v=i?i(l,c,f,t,n,d):e;if(v===e?!zi(c,l,i,h|p,d):!v)return!1}}return!0}function Vi(e){var t=typeof e;return t=="function"?e:e==null?xc:t=="object"?sf(e)?Gi(e[0],e[1]):Qi(e):Bc(e)}function $i(e){return cn(Object(e))}function Ji(e){e=e==null?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function Ki(e,t){var n=-1,r=uf(e)?Array(e.length):[];return Ti(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function Qi(t){var n=co(t);if(n.length==1&&n[0][2]){var r=n[0][0],i=n[0][1];return function(t){return t==null?!1:t[r]===i&&(i!==e||r in Object(t))}}return function(e){return e===t||Xi(e,t,n)}}function Gi(t,n){return function(r){var i=hl(r,t);return i===e&&i===n?dl(r,t):zi(n,i,e,h|p)}}function Yi(t,n,r,i,s){if(t===n)return;var o=sf(n)||jf(n)?e:bl(n);Xn(o||n,function(u,a){o&&(a=u,u=n[a]);if(Ef(u))s||(s=new ti),Zi(t,n,a,r,Yi,i,s);else{var f=i?i(t[a],u,a+"",t,n,s):e;f===e&&(f=u),pi(t,a,f)}})}function Zi(t,n,r,i,s,o,u){var a=t[r],f=n[r],l=u.get(f);if(l){pi(t,r,l);return}var c=o?o(a,f,r+"",t,n,u):e,h=c===e;h&&(c=f,sf(f)||jf(f)?sf(a)?c=i?Ps(a):a:af(a)?c=Ps(a):(h=!1,c=bi(f)):Mf(f)||rf(f)?rf(a)?c=$f(a):!Ef(a)||i&&yf(a)?(h=!1,c=bi(f)):c=i?bi(a):a:h=!1),u.set(f,c),h&&s(c,f,i,o,u),pi(t,r,c)}function es(e,t,n){var r=-1,i=fo();t=Gn(t.length?t:Array(1),function(e){return i(e)});var s=Ki(e,function(e,n,i){var s=Gn(t,function(t){return t(e)});return{criteria:s,index:++r,value:e}});return ur(s,function(e,t){return gr(e,t,n)})}function ts(e,t){return e=Object(e),Zn(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function ns(e,t){var n={};return _i(e,function(e,r){t(e,r)&&(n[r]=e)}),n}function rs(t){return function(n){return n==null?e:n[t]}}function is(e){return function(t){return Bi(t,e)}}function ss(e,t){return os(e,t)}function os(e,t,n){var r=-1,i=t.length,s=e;n&&(s=Gn(e,function(e){return n(e)}));while(++r<i){var o=0,u=t[r],a=n?n(u):u;while((o=sr(s,a,o))>-1)s!==e&&on.call(s,o,1),on.call(e,o,1)}return e}function us(e,t){var n=e?t.length:0,r=n-1;while(n--){var i=t[n];if(r==n||i!=s){var s=i;if(xr(i))on.call(e,i,1);else if(!xo(i,e)){var o=ys(i),u=Oo(e,o);u!=null&&delete u[ou(o)]}else delete e[i]}}return e}function as(e,t){return e+an(mn()*(t-e+1))}function fs(e,t,n,r){var i=-1,s=hn(un((t-e)/(n||1)),0),o=Array(s);while(s--)o[r?s:++i]=e,e+=n;return o}function ls(t,n,r,i){n=xo(n,t)?[n+""]:ys(n);var s=-1,o=n.length,u=o-1,a=t;while(a!=null&&++s<o){var f=n[s];if(Ef(a)){var l=r;if(s!=u){var c=a[f];l=i?i(c,f,a):e,l===e&&(l=c==null?xr(n[s+1])?[]:{}:c)}di(a,f,l)}a=a[f]}return t}function hs(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;var s=Array(i);while(++r<i)s[r]=e[r+t];return s}function ps(e,t){var n;return Ti(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function ds(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&i<=O){while(r<i){var s=r+i>>>1,o=e[s];(n?o<=t:o<t)&&o!==null?r=s+1:i=s}return i}return vs(e,t,xc,n)}function vs(t,n,r,i){n=r(n);var s=0,o=t?t.length:0,u=n!==n,a=n===null,f=n===e;while(s<o){var l=an((s+o)/2),c=r(t[l]),h=c!==e,p=c===c;if(u)var d=p||i;else a?d=p&&h&&(i||c!=null):f?d=p&&(i||h):c==null?d=!1:d=i?c<=n:c<n;d?s=l+1:o=l}return pn(o,A)}function ms(e){return gs(e)}function gs(e,t){var n=0,r=e.length,i=e[0],s=t?t(i):i,o=s,u=0,a=[i];while(++n<r)i=e[n],s=t?t(i):i,ef(s,o)||(o=s,a[++u]=i);return a}function ys(e){return sf(e)?e:Do(e)}function bs(e,t,n){var r=-1,i=Kn,s=e.length,o=!0,u=[],a=u;if(n)o=!1,i=Qn;else if(s>=y){var f=t?null:no(e);if(f)return kr(f);o=!1,i=Zr,a=new Yr}else a=t?[]:u;e:while(++r<s){var l=e[r],c=t?t(l):l;if(o&&c===c){var h=a.length;while(h--)if(a[h]===c)continue e;t&&a.push(c),u.push(l)}else i(a,c,n)||(a!==u&&a.push(c),u.push(l))}return u}function ws(e,t){t=xo(t,e)?[t+""]:ys(t),e=Oo(e,t);var n=ou(t);return e!=null&&pl(e,n)?delete e[n]:!0}function Es(e,t,n,r){var i=e.length,s=r?i:-1;while((r?s--:++s<i)&&t(e[s],s,e));return n?hs(e,r?0:s,r?s+1:i):hs(e,r?s+1:0,r?i:s)}function Ss(e,t){var n=e;return n instanceof jr&&(n=n.value()),Zn(t,function(e,t){return t.func.apply(t.thisArg,Yn([e],t.args))},n)}function xs(e,t,n){var r=-1,i=e.length;while(++r<i)var s=s?Yn(xi(s,e[r],t,n),xi(e[r],s,t,n)):e[r];return s&&s.length?bs(s,t,n):[]}function Ts(t,n,r){var i=-1,s=t.length,o=n.length,u={};while(++i<s)r(u,t[i],i<o?n[i]:e);return u}function Ns(e,t){if(t)return e.slice();var n=e.constructor,r=new n(e.length);return e.copy(r),r}function Cs(e){var t=e.constructor,n=new t(e.byteLength),r=new Gt(n);return r.set(new Gt(e)),n}function ks(e){var t=e.constructor;return Zn(Nr(e),qn,new t)}function Ls(e){var t=e.constructor,n=new t(e.source,Tt.exec(e));return n.lastIndex=e.lastIndex,n}function As(e){var t=e.constructor;return Zn(kr(e),Rn,new t)}function Os(e){return Qt?Object(Fn.call(e)):{}}function Ms(e,t){var n=e.buffer,r=e.constructor;return new r(t?Cs(n):n,e.byteOffset,e.length)}function _s(e,t,n){var r=n.length,i=-1,s=hn(e.length-r,0),o=-1,u=t.length,a=Array(u+s);while(++o<u)a[o]=t[o];while(++i<r)a[n[i]]=e[i];while(s--)a[o++]=e[i++];return a}function Ds(e,t,n){var r=-1,i=n.length,s=-1,o=hn(e.length-i,0),u=-1,a=t.length,f=Array(o+a);while(++s<o)f[s]=e[s];var l=s;while(++u<a)f[l+u]=t[u];while(++r<i)f[l+n[r]]=e[s++];return f}function Ps(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}function Hs(e,t,n){return Bs(e,t,n)}function Bs(e,t,n,r){n||(n={});var i=-1,s=t.length;while(++i<s){var o=t[i],u=r?r(n[o],e[o],o,n,e):e[o];di(n,o,u)}return n}function js(e,t){return Hs(e,po(e),t)}function Fs(e,t){return function(n,r){var i=sf(n)?zn:vi,s=t?t():{};return i(n,e,fo(r),s)}}function Is(t){return Xa(function(n,r){var i=-1,s=r.length,o=s>1?r[s-1]:e,u=s>2?r[2]:e;o=typeof o=="function"?(s--,o):e,u&&So(r[0],r[1],u)&&(o=s<3?e:o,s=1),n=Object(n);while(++i<s){var a=r[i];a&&t(n,a,i,o)}return n})}function qs(e,t){return function(n,r){if(n==null)return n;if(!uf(n))return e(n,r);var i=n.length,s=t?i:-1,o=Object(n);while(t?s--:++s<i)if(r(o[s],s,o)===!1)break;return n}}function Rs(e){return function(t,n,r){var i=-1,s=Object(t),o=r(t),u=o.length;while(u--){var a=o[e?u:++i];if(n(s[a],a,s)===!1)break}return t}}function Us(e,t,r){function o(){var t=this&&this!==In&&this instanceof o?s:e;return t.apply(i?r:this,arguments)}var i=t&n,s=Xs(e);return o}function zs(t){return function(n){n=Kf(n);var r=gn.test(n)?Ar(n):e,i=r?r[0]:n.charAt(0),s=r?r.slice(1).join(""):n.slice(1);return i[t]()+s}}function Ws(e){return function(t){return Zn(vc(Ul(t)),e,"")}}function Xs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ei(e.prototype),r=e.apply(n,t);return Ef(r)?r:n}}function Vs(t,n,r){function s(){var o=arguments.length,u=o,a=Array(o),f=this&&this!==In&&this instanceof s?i:t,l=Pr.placeholder||s.placeholder;while(u--)a[u]=arguments[u];var c=o<3&&a[0]!==l&&a[o-1]!==l?[]:Cr(a,l);return o-=c.length,o<r?eo(t,n,Js,l,e,a,c,e,e,r-o):Un(f,this,a)}var i=Xs(t);return s}function $s(t){return Xa(function(n){n=Ai(n);var r=n.length,i=r,o=Br.prototype.thru;t&&n.reverse();while(i--){var a=n[i];if(typeof a!="function")throw new Ft(S);if(o&&!c&&ao(a)=="wrapper")var c=new Br([],!0)}i=c?i:r;while(++i<r){a=n[i];var h=ao(a),p=h=="wrapper"?uo(a):e;p&&No(p[0])&&p[1]==(f|s|u|l)&&!p[4].length&&p[9]==1?c=c[ao(p[0])].apply(c,p[3]):c=a.length==1&&No(a)?c[h]():c.thru(a)}return function(){var e=arguments,t=e[0];if(c&&e.length==1&&sf(t)&&t.length>=y)return c.plant(t).value();var i=0,s=r?n[i].apply(this,e):t;while(++i<r)s=n[i].call(this,s);return s}})}function Js(t,i,u,a,l,h,p,d,v,m){function T(){var e=arguments.length,n=e,r=Array(e);while(n--)r[n]=arguments[n];a&&(r=_s(r,a,l)),h&&(r=Ds(r,h,p));if(w||E){var s=Pr.placeholder||T.placeholder,o=Cr(r,s);e-=o.length;if(e<m)return eo(t,i,Js,s,u,r,o,d,v,m-e)}var f=y?u:this,c=b?f[t]:t;return d?r=Mo(r,d):S&&r.length>1&&r.reverse(),g&&v<r.length&&(r.length=v),this&&this!==In&&this instanceof T&&(c=x||Xs(c)),c.apply(f,r)}var g=i&f,y=i&n,b=i&r,w=i&s,E=i&o,S=i&c,x=b?e:Xs(t);return T}function Ks(e,t){return function(n,r){return Ri(n,e,t(r),{})}}function Qs(e){return Xa(function(t){return t=Gn(Ai(t),fo()),Xa(function(n){var r=this;return e(t,function(e){return Un(e,r,n)})})})}function Gs(t,n,r){n=Wf(n);var i=Lr(t);if(!n||i>=n)return"";var s=n-i;r=r===e?" ":r+"";var o=ec(r,un(s/Lr(r)));return gn.test(r)?Ar(o).slice(0,s).join(""):o.slice(0,s)}function Ys(e,t,r,i){function u(){var t=-1,n=arguments.length,a=-1,f=i.length,l=Array(f+n),c=this&&this!==In&&this instanceof u?o:e;while(++a<f)l[a]=i[a];while(n--)l[a++]=arguments[++t];return Un(c,s?r:this,l)}var s=t&n,o=Xs(e);return u}function Zs(t){return function(n,r,i){return i&&typeof i!="number"&&So(n,r,i)&&(r=i=e),n=Vf(n),n=n===n?n:0,r===e?(r=n,n=0):r=Vf(r)||0,i=i===e?n<r?1:-1:Vf(i)||0,fs(n,r,i,t)}}function eo(t,o,f,l,c,h,p,d,v,m){var g=o&s,y=d?Ps(d):e,b=g?p:e,w=g?e:p,E=g?h:e,S=g?e:h;o|=g?u:a,o&=~(g?a:u),o&i||(o&=~(n|r));var x=[t,o,c,E,b,S,w,y,v,m],T=f.apply(e,x);return No(t)&&_o(T,x),T.placeholder=l,T}function to(e){var t=Bt[e];return function(e,n){e=Vf(e),n=Wf(n);if(n){var r=(Kf(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return r=(Kf(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function ro(t,i,f,l,c,h,p,d){var v=i&r;if(!v&&typeof t!="function")throw new Ft(S);var m=l?l.length:0;m||(i&=~(u|a),l=c=e),p=p===e?p:hn(Wf(p),0),d=d===e?d:Wf(d),m-=c?c.length:0;if(i&a){var g=l,y=c;l=c=e}var b=v?e:uo(t),w=[t,i,f,l,c,g,y,h,p,d];b&&Lo(w,b),t=w[0],i=w[1],f=w[2],l=w[3],c=w[4],d=w[9]=w[9]==null?v?0:t.length:hn(w[9]-m,0),!d&&i&(s|o)&&(i&=~(s|o));if(!i||i==n)var E=Us(t,i,f);else i==s||i==o?E=Vs(t,i,d):i!=u&&i!=(n|u)||!!c.length?E=Js.apply(e,w):E=Ys(t,i,f,l);var x=b?cs:_o;return x(E,w)}function io(t,n,r,i,s,o){var u=-1,a=s&p,f=s&h,l=t.length,c=n.length;if(l!=c&&!(a&&c>l))return!1;var d=o.get(t);if(d)return d==n;var v=!0;o.set(t,n);while(++u<l){var m=t[u],g=n[u];if(i)var y=a?i(g,m,u,n,t,o):i(m,g,u,t,n,o);if(y!==e){if(y)continue;v=!1;break}if(f){if(!tr(n,function(e){return m===e||r(m,e,i,s,o)})){v=!1;break}}else if(m!==g&&!r(m,g,i,s,o)){v=!1;break}}return o["delete"](t),v}function so(e,t,n,r,i,s){switch(n){case J:if(e.byteLength!=t.byteLength||!r(new Gt(e),new Gt(t)))return!1;return!0;case P:case H:return+e==+t;case B:return e.name==t.name&&e.message==t.message;case q:return e!=+e?t!=+t:e==+t;case U:case W:return e==t+"";case I:var o=Nr;case z:var u=s&p;return o||(o=kr),(u||e.size==t.size)&&r(o(e),o(t),i,s|h);case X:return!!Qt&&Fn.call(e)==Fn.call(t)}return!1}function oo(t,n,r,i,s,o){var u=s&p,a=yl(t),f=a.length,l=yl(n),c=l.length;if(f!=c&&!u)return!1;var h=f;while(h--){var d=a[h];if(!(u?d in n:ji(n,d)))return!1}var v=o.get(t);if(v)return v==n;var m=!0;o.set(t,n);var g=u;while(++h<f){d=a[h];var y=t[d],b=n[d];if(i)var w=u?i(b,y,d,n,t,o):i(y,b,d,t,n,o);if(w===e?y!==b&&!r(y,b,i,s,o):!w){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var E=t.constructor,S=n.constructor;E!=S&&"constructor"in t&&"constructor"in n&&!(typeof E=="function"&&E instanceof E&&typeof S=="function"&&S instanceof S)&&(m=!1)}return o["delete"](t),m}function ao(e){var t=e.name+"",n=Dr[t],r=Ut.call(Dr,t)?n.length:0;while(r--){var i=n[r],s=i.func;if(s==null||s==e)return i.name}return t}function fo(){var e=Pr.iteratee||Tc;return e=e===Tc?Vi:e,arguments.length?e(arguments[0],arguments[1]):e}function co(e){var t=Ml(e),n=t.length;while(n--)t[n][2]=ko(t[n][1]);return t}function ho(t,n){var r=t==null?e:t[n];return kf(r)?r:e}function vo(e){return Xt.call(e)}function mo(e,t,n){var r=-1,i=n.length;while(++r<i){var s=n[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=pn(t,e+o);break;case"takeRight":e=hn(e,t-o)}}return{start:e,end:t}}function go(t,n,r){if(t==null)return!1;var i=r(t,n);!i&&!xo(n)&&(n=ys(n),t=Oo(t,n),t!=null&&(n=ou(n),i=r(t,n)));var s=t?t.length:e;return i||!!s&&wf(s)&&xr(n,s)&&(sf(t)||Hf(t)||rf(t))}function yo(e){var t=e.length,n=e.constructor(t);return t&&typeof e[0]=="string"&&Ut.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function bo(t){if(Co(t))return{};var n=t.constructor;return Ei(yf(n)?n.prototype:e)}function wo(e,t,n){var r=e.constructor;switch(t){case J:return Cs(e);case P:case H:return new r(+e);case K:case Q:case G:case Y:case Z:case et:case tt:case nt:case rt:return Ms(e,n);case I:return ks(e);case q:case W:return new r(e);case U:return Ls(e);case z:return As(e);case X:return Os(e)}}function Eo(t){var n=t?t.length:e;return wf(n)&&(sf(t)||Hf(t)||rf(t))?fr(n,String):null}function So(e,t,n){if(!Ef(n))return!1;var r=typeof t;return(r=="number"?uf(n)&&xr(t,n.length):r=="string"&&t in n)?ef(n[t],e):!1}function xo(e,t){return typeof e=="number"?!0:!sf(e)&&(vt.test(e)||!dt.test(e)||t!=null&&e in Object(t))}function To(e){var t=typeof e;return t=="number"||t=="boolean"||t=="string"&&e!=="__proto__"||e==null}function No(e){var t=ao(e),n=Pr[t];if(typeof n=="function"&&t in jr.prototype){if(e===n)return!0;var r=uo(n);return!!r&&e===r[0]}return!1}function Co(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||qt;return e===n}function ko(e){return e===e&&!Ef(e)}function Lo(e,t){var o=e[1],u=t[1],a=o|u,c=a<(n|r|f),h=u==f&&o==s||u==f&&o==l&&e[7].length<=t[8]||u==(f|l)&&t[7].length<=t[8]&&o==s;if(!c&&!h)return e;u&n&&(e[2]=t[2],a|=o&n?0:i);var p=t[3];if(p){var d=e[3];e[3]=d?_s(d,p,t[4]):Ps(p),e[4]=d?Cr(e[3],M):Ps(t[4])}return p=t[5],p&&(d=e[5],e[5]=d?Ds(d,p,t[6]):Ps(p),e[6]=d?Cr(e[5],M):Ps(t[6])),p=t[7],p&&(e[7]=Ps(p)),u&f&&(e[8]=e[8]==null?t[8]:pn(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function Ao(t,n,r,i,s,o){return Ef(t)&&Ef(n)&&(o.set(n,t),Yi(t,n,e,Ao,o)),t}function Oo(e,t){return t.length==1?e:hl(e,hs(t,0,-1))}function Mo(t,n){var r=t.length,i=pn(n.length,r),s=Ps(t);while(i--){var o=n[i];t[i]=xr(o,r)?s[o]:e}return t}function Do(e){var t=[];return Kf(e).replace(mt,function(e,n,r,i){t.push(r?i.replace(St,"$1"):n||e)}),t}function Po(e){return af(e)?e:[]}function Ho(e){return typeof e=="function"?e:xc}function Bo(e){if(e instanceof jr)return e.clone();var t=new Br(e.__wrapped__,e.__chain__);return t.__actions__=Ps(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function jo(e,t){t=hn(Wf(t),0);var n=e?e.length:0;if(!n||t<1)return[];var r=0,i=-1,s=Array(un(n/t));while(r<n)s[++i]=hs(e,r,r+=t);return s}function Fo(e){var t=-1,n=e?e.length:0,r=-1,i=[];while(++t<n){var s=e[t];s&&(i[++r]=s)}return i}function zo(t,n,r){var i=t?t.length:0;return i?(n=r||n===e?1:Wf(n),hs(t,n<0?0:n,i)):[]}function Wo(t,n,r){var i=t?t.length:0;return i?(n=r||n===e?1:Wf(n),n=i-n,hs(t,0,n<0?0:n)):[]}function Xo(e,t){return e&&e.length?Es(e,fo(t,3),!0,!0):[]}function Vo(e,t){return e&&e.length?Es(e,fo(t,3),!0):[]}function $o(e,t,n,r){var i=e?e.length:0;return i?(n&&typeof n!="number"&&So(e,t,n)&&(n=0,r=i),ki(e,t,n,r)):[]}function Jo(e,t){return e&&e.length?ir(e,fo(t,3)):-1}function Ko(e,t){return e&&e.length?ir(e,fo(t,3),!0):-1}function Qo(e){var t=e?e.length:0;return t?Ai(e):[]}function Go(e){var t=e?e.length:0;return t?Ai(e,!0):[]}function Yo(e){var t=-1,n=e?e.length:0,r={};while(++t<n){var i=e[t];r[i[0]]=i[1]}return r}function Zo(t){return t?t[0]:e}function eu(e,t,n){var r=e?e.length:0;return r?(n=Wf(n),n<0&&(n=hn(r+n,0)),sr(e,t,n)):-1}function tu(e){return Wo(e,1)}function su(e,t){return e?ln.call(e,t):""}function ou(t){var n=t?t.length:0;return n?t[n-1]:e}function uu(t,n,r){var i=t?t.length:0;if(!i)return-1;var s=i;r!==e&&(s=Wf(r),s=(s<0?hn(i+s,0):pn(s,i-1))+1);if(n!==n)return Er(t,s,!0);while(s--)if(t[s]===n)return s;return-1}function fu(e,t){return e&&e.length&&t&&t.length?ss(e,t):e}function lu(e,t,n){return e&&e.length&&t&&t.length?os(e,t,fo(n)):e}function hu(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;t=fo(t,3);while(++r<s){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return us(e,i),n}function pu(e){return e?Nn.call(e):e}function du(t,n,r){var i=t?t.length:0;return i?(r&&typeof r!="number"&&So(t,n,r)?(n=0,r=i):(n=n==null?0:Wf(n),r=r===e?i:Wf(r)),hs(t,n,r)):[]}function vu(e,t){return ds(e,t)}function mu(e,t,n){return vs(e,t,fo(n))}function gu(e,t){var n=e?e.length:0;if(n){var r=ds(e,t);if(r<n&&ef(e[r],t))return r}return-1}function yu(e,t){return ds(e,t,!0)}function bu(e,t,n){return vs(e,t,fo(n),!0)}function wu(e,t){var n=e?e.length:0;if(n){var r=ds(e,t,!0)-1;if(ef(e[r],t))return r}return-1}function Eu(e){return e&&e.length?ms(e):[]}function Su(e,t){return e&&e.length?gs(e,fo(t)):[]}function xu(e){return zo(e,1)}function Tu(t,n,r){return!t||!t.length?[]:(n=r||n===e?1:Wf(n),hs(t,0,n<0?0:n))}function Nu(t,n,r){var i=t?t.length:0;return i?(n=r||n===e?1:Wf(n),n=i-n,hs(t,n<0?0:n,i)):[]}function Cu(e,t){return e&&e.length?Es(e,fo(t,3),!1,!0):[]}function ku(e,t){return e&&e.length?Es(e,fo(t,3)):[]}function Mu(e){return e&&e.length?bs(e):[]}function _u(e,t){return e&&e.length?bs(e,fo(t)):[]}function Du(t,n){return t&&t.length?bs(t,e,n):[]}function Pu(e){if(!e||!e.length)return[];var t=0;return e=Jn(e,function(e){if(af(e))return t=hn(e.length,t),!0}),fr(t,function(t){return Gn(e,rs(t))})}function Hu(t,n){if(!t||!t.length)return[];var r=Pu(t);return n==null?r:Gn(r,function(t){return Un(n,e,t)})}function Ru(e,t){return Ts(e||[],t||[],di)}function Uu(e,t){return Ts(e||[],t||[],ls)}function Wu(e){var t=Pr(e);return t.__chain__=!0,t}function Xu(e,t){return t(e),e}function Vu(e,t){return t(e)}function Ju(){return Wu(this)}function Ku(){return new Br(this.value(),this.__chain__)}function Qu(e){return this.map(e).flatten()}function Gu(){this.__values__===e&&(this.__values__=zf(this.value()));var t=this.__index__>=this.__values__.length,n=t?e:this.__values__[this.__index__++];return{done:t,value:n}}function Yu(){return this}function Zu(t){var n,r=this;while(r instanceof Hr){var i=Bo(r);i.__index__=0,i.__values__=e,n?s.__wrapped__=i:n=i;var s=i;r=r.__wrapped__}return s.__wrapped__=t,n}function ea(){var t=this.__wrapped__;if(t instanceof jr){var n=t;return this.__actions__.length&&(n=new jr(this)),n=n.reverse(),n.__actions__.push({func:Vu,args:[pu],thisArg:e}),new Br(n,this.__chain__)}return this.thru(pu)}function ta(){return Ss(this.__wrapped__,this.__actions__)}function ra(t,n,r){var i=sf(t)?$n:Ci;return r&&So(t,n,r)&&(n=e),i(t,fo(n,3))}function ia(e,t){var n=sf(e)?Jn:Li;return n(e,fo(t,3))}function sa(t,n){n=fo(n,3);if(sf(t)){var r=ir(t,n);return r>-1?t[r]:e}return rr(t,n,Ti)}function oa(t,n){n=fo(n,3);if(sf(t)){var r=ir(t,n,!0);return r>-1?t[r]:e}return rr(t,n,Ni)}function ua(e,t){return Ai(da(e,t))}function aa(e,t){return typeof t=="function"&&sf(e)?Xn(e,t):Ti(e,Ho(t))}function fa(e,t){return typeof t=="function"&&sf(e)?Vn(e,t):Ni(e,Ho(t))}function ca(e,t,n,r){e=uf(e)?e:Hl(e),n=n&&!r?Wf(n):0;var i=e.length;return n<0&&(n=hn(i+n,0)),Hf(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&sr(e,t,n)>-1}function da(e,t){var n=sf(e)?Gn:Ki;return n(e,fo(t,3))}function va(t,n,r,i){return t==null?[]:(sf(n)||(n=n==null?[]:[n]),r=i?e:r,sf(r)||(r=r==null?[]:[r]),es(t,n,r))}function ga(e,t,n){var r=sf(e)?Zn:or,i=arguments.length<3;return r(e,fo(t,4),n,i,Ti)}function ya(e,t,n){var r=sf(e)?er:or,i=arguments.length<3;return r(e,fo(t,4),n,i,Ni)}function ba(e,t){var n=sf(e)?Jn:Li;return t=fo(t,3),n(e,function(e,n,r){return!t(e,n,r)})}function wa(t){var n=uf(t)?t:Hl(t),r=n.length;return r>0?n[as(0,r-1)]:e}function Ea(e,t){var n=-1,r=zf(e),i=r.length,s=i-1;t=yi(Wf(t),0,i);while(++n<t){var o=as(n,s),u=r[o];r[o]=r[n],r[n]=u}return r.length=t,r}function Sa(e){return Ea(e,L)}function xa(e){if(e==null)return 0;if(uf(e)){var t=e.length;return t&&Hf(e)?Lr(e):t}return yl(e).length}function Ta(t,n,r){var i=sf(t)?tr:ps;return r&&So(t,n,r)&&(n=e),i(t,fo(n,3))}function ka(e,t){if(typeof t!="function")throw new Ft(S);return e=Wf(e),function(){if(--e<1)return t.apply(this,arguments)}}function La(t,n,r){return n=r?e:n,n=t&&n==null?t.length:n,ro(t,f,e,e,e,e,n)}function Aa(t,n){var r;if(typeof n!="function")throw new Ft(S);return t=Wf(t),function(){return--t>0&&(r=n.apply(this,arguments)),t<=1&&(n=e),r}}function _a(t,n,r){n=r?e:n;var i=ro(t,s,e,e,e,e,e,n);return i.placeholder=Pr.placeholder||_a.placeholder,i}function Da(t,n,r){n=r?e:n;var i=ro(t,o,e,e,e,e,e,n);return i.placeholder=Pr.placeholder||Da.placeholder,i}function Pa(t,n,r){function v(){f&&Yt(f),s&&Yt(s),c=0,i=s=a=f=l=e}function m(n,r){r&&Yt(r),s=f=l=e,n&&(c=Ca(),o=t.apply(a,i),!f&&!s&&(i=a=e))}function g(){var e=n-(Ca()-u);e<=0||e>n?m(l,s):f=sn(g,e)}function y(){if(f&&l||s&&d)o=t.apply(a,i);return v(),o}function b(){m(d,f)}function w(){i=arguments,u=Ca(),a=this,l=d&&(f||!h);if(p===!1)var r=h&&!f;else{!c&&!s&&!h&&(c=u);var v=p-(u-c),m=v<=0||v>p;m?(s&&(s=Yt(s)),c=u,o=t.apply(a,i)):s||(s=sn(b,v))}return m&&f?f=Yt(f):!f&&n!==p&&(f=sn(g,n)),r&&(m=!0,o=t.apply(a,i)),m&&!f&&!s&&(i=a=e),o}var i,s,o,u,a,f,l,c=0,h=!1,p=!1,d=!0;if(typeof t!="function")throw new Ft(S);return n=Vf(n)||0,Ef(r)&&(h=!!r.leading,p="maxWait"in r&&hn(Vf(r.maxWait)||0,n),d="trailing"in r?!!r.trailing:d),w.cancel=v,w.flush=y,w}function ja(e){return ro(e,c)}function Fa(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new Ft(S);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o),o};return n.cache=new Fa.Cache,n}function Ia(e){if(typeof e!="function")throw new Ft(S);return function(){return!e.apply(this,arguments)}}function qa(e){return Aa(2,e)}function Xa(t,n){if(typeof t!="function")throw new Ft(S);return n=hn(n===e?t.length-1:Wf(n),0),function(){var e=arguments,r=-1,i=hn(e.length-n,0),s=Array(i);while(++r<i)s[r]=e[n+r];switch(n){case 0:return t.call(this,s);case 1:return t.call(this,e[0],s);case 2:return t.call(this,e[0],e[1],s)}var o=Array(n+1);r=-1;while(++r<n)o[r]=e[r];return o[n]=s,Un(t,this,o)}}function Va(t,n){if(typeof t!="function")throw new Ft(S);return n=n===e?0:hn(Wf(n),0),Xa(function(e){var r=e[n],i=e.slice(0,n);return r&&Yn(i,r),Un(t,this,i)})}function $a(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new Ft(S);return Ef(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Pa(e,t,{leading:r,maxWait:t,trailing:i})}function Ja(e){return La(e,1)}function Ka(e,t){return t=t==null?xc:t,Ua(t,e)}function Qa(e){return bi(e)}function Ga(e,t){return bi(e,!1,t)}function Ya(e){return bi(e,!0)}function Za(e,t){return bi(e,!0,t)}function ef(e,t){return e===t||e!==e&&t!==t}function tf(e,t){return e>t}function nf(e,t){return e>=t}function rf(e){return af(e)&&Ut.call(e,"callee")&&(!rn.call(e,"callee")||Xt.call(e)==_)}function of(e){return Sf(e)&&Xt.call(e)==J}function uf(e){return e!=null&&(typeof e!="function"||!yf(e))&&wf(lo(e))}function af(e){return Sf(e)&&uf(e)}function ff(e){return e===!0||e===!1||Sf(e)&&Xt.call(e)==P}function cf(e){return Sf(e)&&Xt.call(e)==H}function hf(e){return!!e&&e.nodeType===1&&Sf(e)&&!Mf(e)}function pf(e){if(uf(e)&&(sf(e)||Hf(e)||yf(e.splice)||rf(e)))return!e.length;for(var t in e)if(Ut.call(e,t))return!1;return!0}function df(e,t){return zi(e,t)}function vf(t,n,r){r=typeof r=="function"?r:e;var i=r?r(t,n):e;return i===e?zi(t,n,r):!!i}function mf(e){return Sf(e)&&typeof e.message=="string"&&Xt.call(e)==B}function gf(e){return typeof e=="number"&&fn(e)}function yf(e){var t=Ef(e)?Xt.call(e):"";return t==j||t==F}function bf(e){return typeof e=="number"&&e==Wf(e)}function wf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=N}function Ef(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Sf(e){return!!e&&typeof e=="object"}function xf(e){return Sf(e)&&vo(e)==I}function Tf(e,t){return e===t||Xi(e,t,co(t))}function Nf(t,n,r){return r=typeof r=="function"?r:e,Xi(t,n,co(n),r)}function Cf(e){return Of(e)&&e!=+e}function kf(e){return e==null?!1:yf(e)?$t.test(Rt.call(e)):Sf(e)&&(Sr(e)?$t:Lt).test(e)}function Lf(e){return e===null}function Af(e){return e==null}function Of(e){return typeof e=="number"||Sf(e)&&Xt.call(e)==q}function Mf(e){if(!Sf(e)||Xt.call(e)!=R||Sr(e))return!1;var t=qt;typeof e.constructor=="function"&&(t=en(e));if(t===null)return!0;var n=t.constructor;return typeof n=="function"&&n instanceof n&&Rt.call(n)==Wt}function _f(e){return Ef(e)&&Xt.call(e)==U}function Df(e){return bf(e)&&e>=-N&&e<=N}function Pf(e){return Sf(e)&&vo(e)==z}function Hf(e){return typeof e=="string"||!sf(e)&&Sf(e)&&Xt.call(e)==W}function Bf(e){return typeof e=="symbol"||Sf(e)&&Xt.call(e)==X}function jf(e){return Sf(e)&&wf(e.length)&&!!xn[Xt.call(e)]}function Ff(t){return t===e}function If(e){return Sf(e)&&vo(e)==V}function qf(e){return Sf(e)&&Xt.call(e)==$}function Rf(e,t){return e<t}function Uf(e,t){return e<=t}function zf(e){if(!e)return[];if(uf(e))return Hf(e)?Ar(e):Ps(e);if(nn&&e[nn])return Tr(e[nn]());var t=vo(e),n=t==I?Nr:t==z?kr:Hl;return n(e)}function Wf(e){if(!e)return e===0?e:0;e=Vf(e);if(e===T||e===-T){var t=e<0?-1:1;return t*C}var n=e%1;return e===e?n?e-n:e:0}function Xf(e){return e?yi(Wf(e),0,L):0}function Vf(e){if(Ef(e)){var t=yf(e.valueOf)?e.valueOf():e;e=Ef(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(bt,"");var n=kt.test(e);return n||At.test(e)?Mn(e.slice(2),n?2:8):Ct.test(e)?k:+e}function $f(e){return Hs(e,bl(e))}function Jf(e){return yi(Wf(e),-N,N)}function Kf(e){if(typeof e=="string")return e;if(e==null)return"";if(Bf(e))return Qt?vr.call(e):"";var t=e+"";return t=="0"&&1/e==-T?"-0":t}function tl(e,t){var n=Ei(e);return t?mi(n,t):n}function il(e,t){return rr(e,fo(t,3),Di,!0)}function sl(e,t){return rr(e,fo(t,3),Pi,!0)}function ol(e,t){return e==null?e:Oi(e,Ho(t),bl)}function ul(e,t){return e==null?e:Mi(e,Ho(t),bl)}function al(e,t){return e&&Di(e,Ho(t))}function fl(e,t){return e&&Pi(e,Ho(t))}function ll(e){return e==null?[]:Hi(e,yl(e))}function cl(e){return e==null?[]:Hi(e,bl(e))}function hl(t,n,r){var i=t==null?e:Bi(t,n);return i===e?r:i}function pl(e,t){return go(e,t,ji)}function dl(e,t){return go(e,t,Fi)}function yl(e){var t=Co(e);if(!t&&!uf(e))return $i(e);var n=Eo(e),r=!!n,i=n||[],s=i.length;for(var o in e)ji(e,o)&&(!r||o!="length"&&!xr(o,s))&&(!t||o!="constructor")&&i.push(o);return i}function bl(e){var t=-1,n=Co(e),r=Ji(e),i=r.length,s=Eo(e),o=!!s,u=s||[],a=u.length;while(++t<i){var f=r[t];(!o||f!="length"&&!xr(f,a))&&(f!="constructor"||!n&&!!Ut.call(e,f))&&u.push(f)}return u}function wl(e,t){var n={};return t=fo(t,3),Di(e,function(e,r,i){n[t(e,r,i)]=e}),n}function El(e,t){var n={};return t=fo(t,3),Di(e,function(e,r,i){n[r]=t(e,r,i)}),n}function Nl(e,t){return t=fo(t,2),ns(e,function(e,n){return!t(e,n)})}function kl(e,t){return e==null?{}:ns(e,fo(t,2))}function Ll(t,n,r){if(!xo(n,t)){n=ys(n);var i=hl(t,n);t=Oo(t,n)}else i=t==null?e:t[n];return i===e&&(i=r),yf(i)?i.call(t):i}function Al(e,t,n){return e==null?e:ls(e,t,n)}function Ol(t,n,r,i){return i=typeof i=="function"?i:e,t==null?t:ls(t,n,r,i)}function Ml(e){return lr(e,yl(e))}function _l(e){return lr(e,bl(e))}function Dl(t,n,r){var i=sf(t)||jf(t);n=fo(n,4);if(r==null)if(i||Ef(t)){var s=t.constructor;i?r=sf(t)?new s:[]:r=Ei(yf(s)?s.prototype:e)}else r={};return(i?Xn:Di)(t,function(e,t,i){return n(r,e,t,i)}),r}function Pl(e,t){return e==null?!0:ws(e,t)}function Hl(e){return e?hr(e,yl(e)):[]}function Bl(e){return e==null?hr(e,bl(e)):[]}function jl(t,n,r){return r===e&&(r=n,n=e),r!==e&&(r=Vf(r),r=r===r?r:0),n!==e&&(n=Vf(n),n=n===n?n:0),yi(Vf(t),n,r)}function Fl(t,n,r){return n=Vf(n)||0,r===e?(r=n,n=0):r=Vf(r)||0,t=Vf(t),Ii(t,n,r)}function Il(t,n,r){r&&typeof r!="boolean"&&So(t,n,r)&&(n=r=e),r===e&&(typeof n=="boolean"?(r=n,n=e):typeof t=="boolean"&&(r=t,t=e)),t===e&&n===e?(t=0,n=1):(t=Vf(t)||0,n===e?(n=t,t=0):n=Vf(n)||0);if(t>n){var i=t;t=n,n=i}if(r||t%1||n%1){var s=mn();return pn(t+s*(n-t+On("1e-"+((s+"").length-1))),n)}return as(t,n)}function Rl(e){return Kl(Kf(e).toLowerCase())}function Ul(e){return e=Kf(e),e&&e.replace(Mt,yr).replace(vn,"")}function zl(t,n,r){t=Kf(t),n=typeof n=="string"?n:n+"";var i=t.length;return r=r===e?i:yi(Wf(r),0,i),r-=n.length,r>=0&&t.indexOf(n,r)==r}function Wl(e){return e=Kf(e),e&&lt.test(e)?e.replace(at,br):e}function Xl(e){return e=Kf(e),e&&yt.test(e)?e.replace(gt,"\\$&"):e}function Ql(e,t,n){e=Kf(e),t=Wf(t);var r=Lr(e);if(!t||r>=t)return e;var i=(t-r)/2,s=an(i),o=un(i);return Gs("",s,n)+e+Gs("",o,n)}function Gl(e,t,n){return e=Kf(e),e+Gs(e,t,n)}function Yl(e,t,n){return e=Kf(e),Gs(e,t,n)+e}function Zl(e,t,n){return n||t==null?t=0:t&&(t=+t),e=Kf(e).replace(bt,""),dn(e,t||(Nt.test(e)?16:10))}function ec(e,t){e=Kf(e),t=Wf(t);var n="";if(!e||t<1||t>N)return n;do t%2&&(n+=e),t=an(t/2),e+=e;while(t);return n}function tc(){var e=arguments,t=Kf(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function rc(e,t,n){return Kf(e).split(t,n)}function sc(e,t,n){return e=Kf(e),n=yi(Wf(n),0,e.length),e.lastIndexOf(t,n)==n}function oc(t,n,r){var i=Pr.templateSettings;r&&So(t,n,r)&&(n=e),t=Kf(t),n=Yf({},n,i,hi);var s=Yf({},n.imports,i.imports,hi),o=yl(s),u=hr(s,o),a,f,l=0,c=n.interpolate||_t,h="__p += '",p=jt((n.escape||_t).source+"|"+c.source+"|"+(c===pt?xt:_t).source+"|"+(n.evaluate||_t).source+"|$","g"),d="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Sn+"]")+"\n";t.replace(p,function(e,n,r,i,s,o){return r||(r=i),h+=t.slice(l,o).replace(Dt,wr),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(f=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=o+e.length,e}),h+="';\n";var v=n.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(f?h.replace(it,""):h).replace(st,"$1").replace(ot,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=mc(function(){return Function(o,d+"return "+h).apply(e,u)});m.source=h;if(mf(m))throw m;return m}function uc(e){return Kf(e).toLowerCase()}function ac(e){return Kf(e).toUpperCase()}function fc(t,n,r){t=Kf(t);if(!t)return t;if(r||n===e)return t.replace(bt,"");n+="";if(!n)return t;var i=Ar(t),s=Ar(n);return i.slice(pr(i,s),dr(i,s)+1).join("")}function lc(t,n,r){t=Kf(t);if(!t)return t;if(r||n===e)return t.replace(Et,"");n+="";if(!n)return t;var i=Ar(t);return i.slice(0,dr(i,Ar(n))+1).join("")}function cc(t,n,r){t=Kf(t);if(!t)return t;if(r||n===e)return t.replace(wt,"");n+="";if(!n)return t;var i=Ar(t);return i.slice(pr(i,Ar(n))).join("")}function hc(t,n){var r=d,i=v;if(Ef(n)){var s="separator"in n?n.separator:s;r="length"in n?Wf(n.length):r,i="omission"in n?Kf(n.omission):i}t=Kf(t);var o=t.length;if(gn.test(t)){var u=Ar(t);o=u.length}if(r>=o)return t;var a=r-Lr(i);if(a<1)return i;var f=u?u.slice(0,a).join(""):t.slice(0,a);if(s===e)return f+i;u&&(a+=f.length-a);if(_f(s)){if(t.slice(a).search(s)){var l,c=f;s.global||(s=jt(s.source,Kf(Tt.exec(s))+"g")),s.lastIndex=0;while(l=s.exec(c))var h=l.index;f=f.slice(0,h===e?a:h)}}else if(t.indexOf(s,a)!=a){var p=f.lastIndexOf(s);p>-1&&(f=f.slice(0,p))}return f+i}function pc(e){return e=Kf(e),e&&ft.test(e)?e.replace(ut,Or):e}function vc(t,n,r){return t=Kf(t),n=r?e:n,n===e&&(n=wn.test(t)?bn:yn),t.match(n)||[]}function yc(e){var t=e?e.length:0,n=fo();return e=t?Gn(e,function(e){if(typeof e[1]!="function")throw new Ft(S);return[n(e[0]),e[1]]}):[],Xa(function(n){var r=-1;while(++r<t){var i=e[r];if(Un(i[0],this,n))return Un(i[1],this,n)}})}function bc(e){return wi(bi(e,!0))}function wc(e){return function(){return e}}function xc(e){return e}function Tc(e){return Vi(typeof e=="function"?e:bi(e,!0))}function Nc(e){return Qi(bi(e,!0))}function Cc(e,t){return Gi(e,bi(t,!0))}function Ac(e,t,n){var r=yl(t),i=Hi(t,r);n==null&&(!Ef(t)||!i.length&&!!r.length)&&(n=t,t=e,e=this,i=Hi(t,yl(t)));var s=Ef(n)&&"chain"in n?n.chain:!0,o=yf(e);return Xn(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__),i=n.__actions__=Ps(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Yn([this.value()],arguments))})}),e}function Oc(){return In._===this&&(In._=Vt),this}function Mc(){}function _c(e){return e=Wf(e),function(){return arguments[e]}}function Bc(e){return xo(e)?rs(e):is(e)}function jc(t){return function(n){return t==null?e:Bi(t,n)}}function qc(e,t){e=Wf(e);if(e<1||e>N)return[];var n=L,r=pn(e,L);t=Ho(t),e-=L;var i=fr(r,t);while(++n<e)t(n);return i}function Rc(e){return sf(e)?Gn(e,String):Do(e)}function Uc(e){var t=++zt;return Kf(e)+t}function zc(t,n){var r;return t===e&&n===e?0:(t!==e&&(r=t),n!==e&&(r=r===e?n:r+n),r)}function Vc(t){return t&&t.length?nr(t,xc,tf):e}function $c(t,n){return t&&t.length?nr(t,fo(n),tf):e}function Jc(e){return Zc(e)/(e?e.length:0)}function Kc(t){return t&&t.length?nr(t,xc,Rf):e}function Qc(t,n){return t&&t.length?nr(t,fo(n),Rf):e}function Yc(t,n){var r;return t===e&&n===e?0:(t!==e&&(r=t),n!==e&&(r=r===e?n:r-n),r)}function Zc(e){return e&&e.length?ar(e,xc):0}function eh(e,t){return e&&e.length?ar(e,fo(t)):0}Ot=Ot?_r.defaults({},Ot,_r.pick(In,En)):In;var Pt=Ot.Date,Ht=Ot.Error,Bt=Ot.Math,jt=Ot.RegExp,Ft=Ot.TypeError,It=Ot.Array.prototype,qt=Ot.Object.prototype,Rt=Ot.Function.prototype.toString,Ut=qt.hasOwnProperty,zt=0,Wt=Rt.call(Object),Xt=qt.toString,Vt=In._,$t=jt("^"+Rt.call(Ut).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jt=jn?Ot.Buffer:e,Kt=Ot.Reflect,Qt=Ot.Symbol,Gt=Ot.Uint8Array,Yt=Ot.clearTimeout,Zt=Kt?Kt.enumerate:e,en=Object.getPrototypeOf,tn=Object.getOwnPropertySymbols,nn=typeof (nn=Qt&&Qt.iterator)=="symbol"?nn:e,rn=qt.propertyIsEnumerable,sn=Ot.setTimeout,on=It.splice,un=Bt.ceil,an=Bt.floor,fn=Ot.isFinite,ln=It.join,cn=Object.keys,hn=Bt.max,pn=Bt.min,dn=Ot.parseInt,mn=Bt.random,Nn=It.reverse,Cn=ho(Ot,"Map"),kn=ho(Ot,"Set"),Ln=ho(Ot,"WeakMap"),An=ho(Object,"create"),_n=Ln&&new Ln,Dn=Cn?Rt.call(Cn):"",Pn=kn?Rt.call(kn):"",Hn=Ln?Rt.call(Ln):"",Bn=Qt?Qt.prototype:e,Fn=Qt?Bn.valueOf:e,vr=Qt?Bn.toString:e,Dr={};Pr.templateSettings={escape:ct,evaluate:ht,interpolate:pt,variable:"",imports:{_:Pr}};var Ei=function(){function t(){}return function(n){if(Ef(n)){t.prototype=n;var r=new t;t.prototype=e}return r||{}}}(),Ti=qs(Di),Ni=qs(Pi,!0),Oi=Rs(),Mi=Rs(!0);Zt&&!rn.call({valueOf:1},"valueOf")&&(Ji=function(e){return Tr(Zt(e))});var cs=_n?function(e,t){return _n.set(e,t),e}:xc,no=!kn||(new kn([1,2])).size!==2?Mc:function(e){return new kn(e)},uo=_n?function(e){return _n.get(e)}:Mc,lo=rs("length"),po=tn||function(){return[]};if(Cn&&vo(new Cn)!=I||kn&&vo(new kn)!=z||Ln&&vo(new Ln)!=V)vo=function(e){var t=Xt.call(e),n=t==R?e.constructor:null,r=typeof n=="function"?Rt.call(n):"";if(r)switch(r){case Dn:return I;case Pn:return z;case Hn:return V}return t};var _o=function(){var e=0,t=0;return function(n,r){var i=Ca(),s=g-(i-t);t=i;if(s>0){if(++e>=m)return n}else e=0;return cs(n,r)}}(),Io=Xa(function(e,t){return sf(e)||(e=e==null?[]:[Object(e)]),t=Ai(t),Wn(e,t)}),qo=Xa(function(e,t){return af(e)?xi(e,Ai(t,!1,!0)):[]}),Ro=Xa(function(t,n){var r=ou(n);return af(r)&&(r=e),af(t)?xi(t,Ai(n,!1,!0),fo(r)):[]}),Uo=Xa(function(t,n){var r=ou(n);return af(r)&&(r=e),af(t)?xi(t,Ai(n,!1,!0),e,r):[]}),nu=Xa(function(e){var t=Gn(e,Po);return t.length&&t[0]===e[0]?qi(t):[]}),ru=Xa(function(t){var n=ou(t),r=Gn(t,Po);return n===ou(r)?n=e:r.pop(),r.length&&r[0]===t[0]?qi(r,fo(n)):[]}),iu=Xa(function(t){var n=ou(t),r=Gn(t,Po);return n===ou(r)?n=e:r.pop(),r.length&&r[0]===t[0]?qi(r,e,n):[]}),au=Xa(fu),cu=Xa(function(e,t){t=Gn(Ai(t),String);var n=gi(e,t);return us(e,t.sort(mr)),n}),Lu=Xa(function(e){return bs(Ai(e,!1,!0))}),Au=Xa(function(t){var n=ou(t);return af(n)&&(n=e),bs(Ai(t,!1,!0),fo(n))}),Ou=Xa(function(t){var n=ou(t);return af(n)&&(n=e),bs(Ai(t,!1,!0),e,n)}),Bu=Xa(function(e,t){return af(e)?xi(e,t):[]}),ju=Xa(function(e){return xs(Jn(e,af))}),Fu=Xa(function(t){var n=ou(t);return af(n)&&(n=e),xs(Jn(t,af),fo(n))}),Iu=Xa(function(t){var n=ou(t);return af(n)&&(n=e),xs(Jn(t,af),e,n)}),qu=Xa(Pu),zu=Xa(function(t){var n=t.length,r=n>1?t[n-1]:e;return r=typeof r=="function"?(t.pop(),r):e,Hu(t,r)}),$u=Xa(function(t){t=Ai(t);var n=t.length,r=n?t[0]:0,i=this.__wrapped__,s=function(e){return gi(e,t)};return n>1||this.__actions__.length||!(i instanceof jr)||!xr(r)?this.thru(s):(i=i.slice(r,+r+(n?1:0)),i.__actions__.push({func:Vu,args:[s],thisArg:e}),(new Br(i,this.__chain__)).thru(function(t){return n&&!t.length&&t.push(e),t}))}),na=Fs(function(e,t,n){Ut.call(e,n)?++e[n]:e[n]=1}),la=Fs(function(e,t,n){Ut.call(e,n)?e[n].push(t):e[n]=[t]}),ha=Xa(function(t,n,r){var i=-1,s=typeof n=="function",o=xo(n),u=uf(t)?Array(t.length):[];return Ti(t,function(t){var a=s?n:o&&t!=null?t[n]:e;u[++i]=a?Un(a,t,r):Ui(t,n,r)}),u}),pa=Fs(function(e,t,n){e[n]=t}),ma=Fs(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Na=Xa(function(e,t){if(e==null)return[];var n=t.length;return n>1&&So(e,t[0],t[1])?t=[]:n>2&&So(t[0],t[1],t[2])&&(t.length=1),es(e,Ai(t),[])}),Ca=Pt.now,Oa=Xa(function(e,t,r){var i=n;if(r.length){var s=Pr.placeholder||Oa.placeholder,o=Cr(r,s);i|=u}return ro(e,i,t,r,o)}),Ma=Xa(function(e,t,i){var s=n|r;if(i.length){var o=Pr.placeholder||Ma.placeholder,a=Cr(i,o);s|=u}return ro(t,s,e,i,a)}),Ha=Xa(function(e,t){return Si(e,1,t)}),Ba=Xa(function(e,t,n){return Si(e,Vf(t)||0,n)}),Ra=Xa(function(e,t){t=Gn(Ai(t),fo());var n=t.length;return Xa(function(r){var i=-1,s=pn(r.length,n);while(++i<s)r[i]=t[i].call(this,r[i]);return Un(e,this,r)})}),Ua=Xa(function(t,n){var r=Pr.placeholder||Ua.placeholder,i=Cr(n,r);return ro(t,u,e,n,i)}),za=Xa(function(t,n){var r=Pr.placeholder||za.placeholder,i=Cr(n,r);return ro(t,a,e,n,i)}),Wa=Xa(function(t,n){return ro(t,l,e,e,e,Ai(n))}),sf=Array.isArray,lf=Jt?function(e){return e instanceof Jt}:wc(!1),Qf=Is(function(e,t){Hs(t,yl(t),e)}),Gf=Is(function(e,t){Hs(t,bl(t),e)}),Yf=Is(function(e,t,n,r){Bs(t,bl(t),e,r)}),Zf=Is(function(e,t,n,r){Bs(t,yl(t),e,r)}),el=Xa(function(e,t){return gi(e,Ai(t))}),nl=Xa(function(t){return t.push(e,hi),Un(Yf,e,t)}),rl=Xa(function(t){return t.push(e,Ao),Un(xl,e,t)}),vl=Ks(function(e,t,n){e[t]=n},wc(xc)),ml=Ks(function(e,t,n){Ut.call(e,t)?e[t].push(n):e[t]=[n]},fo),gl=Xa(Ui),Sl=Is(function(e,t,n){Yi(e,t,n)}),xl=Is(function(e,t,n,r){Yi(e,t,n,r)}),Tl=Xa(function(e,t){return e==null?{}:(t=Gn(Ai(t),String),ts(e,xi(bl(e),t)))}),Cl=Xa(function(e,t){return e==null?{}:ts(e,Ai(t))}),ql=Ws(function(e,t,n){return t=t.toLowerCase(),e+(n?Rl(t):t)}),Vl=Ws(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),$l=Ws(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Jl=zs("toLowerCase"),Kl=zs("toUpperCase"),nc=Ws(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ic=Ws(function(e,t,n){return e+(n?" ":"")+Rl(t)}),dc=Ws(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),mc=Xa(function(t,n){try{return Un(t,e,n)}catch(r){return Ef(r)?r:new Ht(r)}}),gc=Xa(function(e,t){return Xn(Ai(t),function(t){e[t]=Oa(e[t],e)}),e}),Ec=$s(),Sc=$s(!0),kc=Xa(function(e,t){return function(n){return Ui(n,e,t)}}),Lc=Xa(function(e,t){return function(n){return Ui(e,n,t)}}),Dc=Qs(Gn),Pc=Qs($n),Hc=Qs(tr),Fc=Zs(),Ic=Zs(!0),Wc=to("ceil"),Xc=to("floor"),Gc=to("round");return Pr.prototype=Hr.prototype,Br.prototype=Ei(Hr.prototype),Br.prototype.constructor=Br,jr.prototype=Ei(Hr.prototype),jr.prototype.constructor=jr,Rr.prototype=An?An(null):qt,Vr.prototype.clear=$r,Vr.prototype["delete"]=Jr,Vr.prototype.get=Kr,Vr.prototype.has=Qr,Vr.prototype.set=Gr,Yr.prototype.push=ei,ti.prototype.clear=ni,ti.prototype["delete"]=ri,ti.prototype.get=ii,ti.prototype.has=si,ti.prototype.set=oi,Fa.Cache=Vr,Pr.after=ka,Pr.ary=La,Pr.assign=Qf,Pr.assignIn=Gf,Pr.assignInWith=Yf,Pr.assignWith=Zf,Pr.at=el,Pr.before=Aa,Pr.bind=Oa,Pr.bindAll=gc,Pr.bindKey=Ma,Pr.chain=Wu,Pr.chunk=jo,Pr.compact=Fo,Pr.concat=Io,Pr.cond=yc,Pr.conforms=bc,Pr.constant=wc,Pr.countBy=na,Pr.create=tl,Pr.curry=_a,Pr.curryRight=Da,Pr.debounce=Pa,Pr.defaults=nl,Pr.defaultsDeep=rl,Pr.defer=Ha,Pr.delay=Ba,Pr.difference=qo,Pr.differenceBy=Ro,Pr.differenceWith=Uo,Pr.drop=zo,Pr.dropRight=Wo,Pr.dropRightWhile=Xo,Pr.dropWhile=Vo,Pr.fill=$o,Pr.filter=ia,Pr.flatMap=ua,Pr.flatten=Qo,Pr.flattenDeep=Go,Pr.flip=ja,Pr.flow=Ec,Pr.flowRight=Sc,Pr.fromPairs=Yo,Pr.functions=ll,Pr.functionsIn=cl,Pr.groupBy=la,Pr.initial=tu,Pr.intersection=nu,Pr.intersectionBy=ru,Pr.intersectionWith=iu,Pr.invert=vl,Pr.invertBy=ml,Pr.invokeMap=ha,Pr.iteratee=Tc,Pr.keyBy=pa,Pr.keys=yl,Pr.keysIn=bl,Pr.map=da,Pr.mapKeys=wl,Pr.mapValues=El,Pr.matches=Nc,Pr.matchesProperty=Cc,Pr.memoize=Fa,Pr.merge=Sl,Pr.mergeWith=xl,Pr.method=kc,Pr.methodOf=Lc,Pr.mixin=Ac,Pr.negate=Ia,Pr.nthArg=_c,Pr.omit=Tl,Pr.omitBy=Nl,Pr.once=qa,Pr.orderBy=va,Pr.over=Dc,Pr.overArgs=Ra,Pr.overEvery=Pc,Pr.overSome=Hc,Pr.partial=Ua,Pr.partialRight=za,Pr.partition=ma,Pr.pick=Cl,Pr.pickBy=kl,Pr.property=Bc,Pr.propertyOf=jc,Pr.pull=au,Pr.pullAll=fu,Pr.pullAllBy=lu,Pr.pullAt=cu,Pr.range=Fc,Pr.rangeRight=Ic,Pr.rearg=Wa,Pr.reject=ba,Pr.remove=hu,Pr.rest=Xa,Pr.reverse=pu,Pr.sampleSize=Ea,Pr.set=Al,Pr.setWith=Ol,Pr.shuffle=Sa,Pr.slice=du,Pr.sortBy=Na,Pr.sortedUniq=Eu,Pr.sortedUniqBy=Su,Pr.split=rc,Pr.spread=Va,Pr.tail=xu,Pr.take=Tu,Pr.takeRight=Nu,Pr.takeRightWhile=Cu,Pr.takeWhile=ku,Pr.tap=Xu,Pr.throttle=$a,Pr.thru=Vu,Pr.toArray=zf,Pr.toPairs=Ml,Pr.toPairsIn=_l,Pr.toPath=Rc,Pr.toPlainObject=$f,Pr.transform=Dl,Pr.unary=Ja,Pr.union=Lu,Pr.unionBy=Au,Pr.unionWith=Ou,Pr.uniq=Mu,Pr.uniqBy=_u,Pr.uniqWith=Du,Pr.unset=Pl,Pr.unzip=Pu,Pr.unzipWith=Hu,Pr.values=Hl,Pr.valuesIn=Bl,Pr.without=Bu,Pr.words=vc,Pr.wrap=Ka,Pr.xor=ju,Pr.xorBy=Fu,Pr.xorWith=Iu,Pr.zip=qu,Pr.zipObject=Ru,Pr.zipObjectDeep=Uu,Pr.zipWith=zu,Pr.extend=Gf,Pr.extendWith=Yf,Ac(Pr,Pr),Pr.add=zc,Pr.attempt=mc,Pr.camelCase=ql,Pr.capitalize=Rl,Pr.ceil=Wc,Pr.clamp=jl,Pr.clone=Qa,Pr.cloneDeep=Ya,Pr.cloneDeepWith=Za,Pr.cloneWith=Ga,Pr.deburr=Ul,Pr.endsWith=zl,Pr.eq=ef,Pr.escape=Wl,Pr.escapeRegExp=Xl,Pr.every=ra,Pr.find=sa,Pr.findIndex=Jo,Pr.findKey=il,Pr.findLast=oa,Pr.findLastIndex=Ko,Pr.findLastKey=sl,Pr.floor=Xc,Pr.forEach=aa,Pr.forEachRight=fa,Pr.forIn=ol,Pr.forInRight=ul,Pr.forOwn=al,Pr.forOwnRight=fl,Pr.get=hl,Pr.gt=tf,Pr.gte=nf,Pr.has=pl,Pr.hasIn=dl,Pr.head=Zo,Pr.identity=xc,Pr.includes=ca,Pr.indexOf=eu,Pr.inRange=Fl,Pr.invoke=gl,Pr.isArguments=rf,Pr.isArray=sf,Pr.isArrayBuffer=of,Pr.isArrayLike=uf,Pr.isArrayLikeObject=af,Pr.isBoolean=ff,Pr.isBuffer=lf,Pr.isDate=cf,Pr.isElement=hf,Pr.isEmpty=pf,Pr.isEqual=df,Pr.isEqualWith=vf,Pr.isError=mf,Pr.isFinite=gf,Pr.isFunction=yf,Pr.isInteger=bf,Pr.isLength=wf,Pr.isMap=xf,Pr.isMatch=Tf,Pr.isMatchWith=Nf,Pr.isNaN=Cf,Pr.isNative=kf,Pr.isNil=Af,Pr.isNull=Lf,Pr.isNumber=Of,Pr.isObject=Ef,Pr.isObjectLike=Sf,Pr.isPlainObject=Mf,Pr.isRegExp=_f,Pr.isSafeInteger=Df,Pr.isSet=Pf,Pr.isString=Hf,Pr.isSymbol=Bf,Pr.isTypedArray=jf,Pr.isUndefined=Ff,Pr.isWeakMap=If,Pr.isWeakSet=qf,Pr.join=su,Pr.kebabCase=Vl,Pr.last=ou,Pr.lastIndexOf=uu,Pr.lowerCase=$l,Pr.lowerFirst=Jl,Pr.lt=Rf,Pr.lte=Uf,Pr.max=Vc,Pr.maxBy=$c,Pr.mean=Jc,Pr.min=Kc,Pr.minBy=Qc,Pr.noConflict=Oc,Pr.noop=Mc,Pr.now=Ca,Pr.pad=Ql,Pr.padEnd=Gl,Pr.padStart=Yl,Pr.parseInt=Zl,Pr.random=Il,Pr.reduce=ga,Pr.reduceRight=ya,Pr.repeat=ec,Pr.replace=tc,Pr.result=Ll,Pr.round=Gc,Pr.runInContext=Mr,Pr.sample=wa,Pr.size=xa,Pr.snakeCase=nc,Pr.some=Ta,Pr.sortedIndex=vu,Pr.sortedIndexBy=mu,Pr.sortedIndexOf=gu,Pr.sortedLastIndex=yu,Pr.sortedLastIndexBy=bu,Pr.sortedLastIndexOf=wu,Pr.startCase=ic,Pr.startsWith=sc,Pr.subtract=Yc,Pr.sum=Zc,Pr.sumBy=eh,Pr.template=oc,Pr.times=qc,Pr.toInteger=Wf,Pr.toLength=Xf,Pr.toLower=uc,Pr.toNumber=Vf,Pr.toSafeInteger=Jf,Pr.toString=Kf,Pr.toUpper=ac,Pr.trim=fc,Pr.trimEnd=lc,Pr.trimStart=cc,Pr.truncate=hc,Pr.unescape=pc,Pr.uniqueId=Uc,Pr.upperCase=dc,Pr.upperFirst=Kl,Pr.each=aa,Pr.eachRight=fa,Pr.first=Zo,Ac(Pr,function(){var e={};return Di(Pr,function(t,n){Ut.call(Pr.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Pr.VERSION=t,Xn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Pr[e].placeholder=Pr}),Xn(["drop","take"],function(t,n){jr.prototype[t]=function(r){var i=this.__filtered__;if(i&&!n)return new jr(this);r=r===e?1:hn(Wf(r),0);var s=this.clone();return i?s.__takeCount__=pn(r,s.__takeCount__):s.__views__.push({size:pn(r,L),type:t+(s.__dir__<0?"Right":"")}),s},jr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Xn(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==b||n==E;jr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:fo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Xn(["head","last"],function(e,t){var n="take"+(t?"Right":"");jr.prototype[e]=function(){return this[n](1).value()[0]}}),Xn(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");jr.prototype[e]=function(){return this.__filtered__?new jr(this):this[n](1)}}),jr.prototype.compact=function(){return this.filter(xc)},jr.prototype.find=function(e){return this.filter(e).head()},jr.prototype.findLast=function(e){return this.reverse().find(e)},jr.prototype.invokeMap=Xa(function(e,t){return typeof e=="function"?new jr(this):this.map(function(n){return Ui(n,e,t)})}),jr.prototype.reject=function(e){return e=fo(e,3),this.filter(function(t){return!e(t)})},jr.prototype.slice=function(t,n){t=Wf(t);var r=this;return r.__filtered__&&(t>0||n<0)?new jr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),n!==e&&(n=Wf(n),r=n<0?r.dropRight(-n):r.take(n-t)),r)},jr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},jr.prototype.toArray=function(){return this.take(L)},Di(jr.prototype,function(t,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),s=Pr[i?"take"+(n=="last"?"Right":""):n],o=i||/^find/.test(n);if(!s)return;Pr.prototype[n]=function(){var n=this.__wrapped__,u=i?[1]:arguments,a=n instanceof jr,f=u[0],l=a||sf(n),c=function(e){var t=s.apply(Pr,Yn([e],u));return i&&h?t[0]:t};l&&r&&typeof f=="function"&&f.length!=1&&(a=l=!1);var h=this.__chain__,p=!!this.__actions__.length,d=o&&!h,v=a&&!p;if(!o&&l){n=v?n:new jr(this);var m=t.apply(n,u);return m.__actions__.push({func:Vu,args:[c],thisArg:e}),new Br(m,h)}return d&&v?t.apply(this,u):(m=this.thru(c),d?i?m.value()[0]:m.value():m)}}),Xn(["pop","push","shift","sort","splice","unshift"],function(e){var t=It[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Pr.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Di(jr.prototype,function(e,t){var n=Pr[t];if(n){var r=n.name+"",i=Dr[r]||(Dr[r]=[]);i.push({name:t,func:n})}}),Dr[Js(e,r).name]=[{name:"wrapper",func:e}],jr.prototype.clone=Fr,jr.prototype.reverse=Ir,jr.prototype.value=qr,Pr.prototype.at=$u,Pr.prototype.chain=Ju,Pr.prototype.commit=Ku,Pr.prototype.flatMap=Qu,Pr.prototype.next=Gu,Pr.prototype.plant=Zu,Pr.prototype.reverse=ea,Pr.prototype.toJSON=Pr.prototype.valueOf=Pr.prototype.value=ta,nn&&(Pr.prototype[nn]=Yu),Pr}var e,t="4.3.0",n=1,r=2,i=4,s=8,o=16,u=32,a=64,f=128,l=256,c=512,h=1,p=2,d=30,v="...",m=150,g=16,y=200,b=1,w=2,E=3,S="Expected a function",x="__lodash_hash_undefined__",T=1/0,N=9007199254740991,C=1.7976931348623157e308,k=0/0,L=4294967295,A=L-1,O=L>>>1,M="__lodash_placeholder__",_="[object Arguments]",D="[object Array]",P="[object Boolean]",H="[object Date]",B="[object Error]",j="[object Function]",F="[object GeneratorFunction]",I="[object Map]",q="[object Number]",R="[object Object]",U="[object RegExp]",z="[object Set]",W="[object String]",X="[object Symbol]",V="[object WeakMap]",$="[object WeakSet]",J="[object ArrayBuffer]",K="[object Float32Array]",Q="[object Float64Array]",G="[object Int8Array]",Y="[object Int16Array]",Z="[object Int32Array]",et="[object Uint8Array]",tt="[object Uint8ClampedArray]",nt="[object Uint16Array]",rt="[object Uint32Array]",it=/\b__p \+= '';/g,st=/\b(__p \+=) '' \+/g,ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ut=/&(?:amp|lt|gt|quot|#39|#96);/g,at=/[&<>"'`]/g,ft=RegExp(ut.source),lt=RegExp(at.source),ct=/<%-([\s\S]+?)%>/g,ht=/<%([\s\S]+?)%>/g,pt=/<%=([\s\S]+?)%>/g,dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vt=/^\w*$/,mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,gt=/[\\^$.*+?()[\]{}|]/g,yt=RegExp(gt.source),bt=/^\s+|\s+$/g,wt=/^\s+/,Et=/\s+$/,St=/\\(\\)?/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tt=/\w*$/,Nt=/^0x/i,Ct=/^[-+]0x[0-9a-f]+$/i,kt=/^0b[01]+$/i,Lt=/^\[object .+?Constructor\]$/,At=/^0o[0-7]+$/i,Ot=/^(?:0|[1-9]\d*)$/,Mt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,_t=/($^)/,Dt=/['\n\r\u2028\u2029\\]/g,Pt="\\ud800-\\udfff",Ht="\\u0300-\\u036f\\ufe20-\\ufe23",Bt="\\u20d0-\\u20f0",jt="\\u2700-\\u27bf",Ft="a-z\\xdf-\\xf6\\xf8-\\xff",It="\\xac\\xb1\\xd7\\xf7",qt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rt="\\u2018\\u2019\\u201c\\u201d",Ut=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zt="A-Z\\xc0-\\xd6\\xd8-\\xde",Wt="\\ufe0e\\ufe0f",Xt=It+qt+Rt+Ut,Vt="["+Pt+"]",$t="["+Xt+"]",Jt="["+Ht+Bt+"]",Kt="\\d+",Qt="["+jt+"]",Gt="["+Ft+"]",Yt="[^"+Pt+Xt+Kt+jt+Ft+zt+"]",Zt="\\ud83c[\\udffb-\\udfff]",en="(?:"+Jt+"|"+Zt+")",tn="[^"+Pt+"]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",rn="[\\ud800-\\udbff][\\udc00-\\udfff]",sn="["+zt+"]",on="\\u200d",un="(?:"+Gt+"|"+Yt+")",an="(?:"+sn+"|"+Yt+")",fn=en+"?",ln="["+Wt+"]?",cn="(?:"+on+"(?:"+[tn,nn,rn].join("|")+")"+ln+fn+")*",hn=ln+fn+cn,pn="(?:"+[Qt,nn,rn].join("|")+")"+hn,dn="(?:"+[tn+Jt+"?",Jt,nn,rn,Vt].join("|")+")",vn=RegExp(Jt,"g"),mn=RegExp(Zt+"(?="+Zt+")|"+dn+hn,"g"),gn=RegExp("["+on+Pt+Ht+Bt+Wt+"]"),yn=/[a-zA-Z0-9]+/g,bn=RegExp([sn+"?"+Gt+"+(?="+[$t,sn,"$"].join("|")+")",an+"+(?="+[$t,sn+un,"$"].join("|")+")",sn+"?"+un+"+",sn+"+",Kt,pn].join("|"),"g"),wn=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,En=["Array","Buffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sn=-1,xn={};xn[K]=xn[Q]=xn[G]=xn[Y]=xn[Z]=xn[et]=xn[tt]=xn[nt]=xn[rt]=!0,xn[_]=xn[D]=xn[J]=xn[P]=xn[H]=xn[B]=xn[j]=xn[I]=xn[q]=xn[R]=xn[U]=xn[z]=xn[W]=xn[V]=!1;var Tn={};Tn[_]=Tn[D]=Tn[J]=Tn[P]=Tn[H]=Tn[K]=Tn[Q]=Tn[G]=Tn[Y]=Tn[Z]=Tn[I]=Tn[q]=Tn[R]=Tn[U]=Tn[z]=Tn[W]=Tn[X]=Tn[et]=Tn[tt]=Tn[nt]=Tn[rt]=!0,Tn[B]=Tn[j]=Tn[V]=!1;var Nn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},kn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ln={"function":!0,object:!0},An={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},On=parseFloat,Mn=parseInt,_n=Ln[typeof exports]&&exports&&!exports.nodeType?exports:null,Dn=Ln[typeof module]&&module&&!module.nodeType?module:null,Pn=vr(_n&&Dn&&typeof global=="object"&&global),Hn=vr(Ln[typeof self]&&self),Bn=vr(Ln[typeof window]&&window),jn=Dn&&Dn.exports===_n?_n:null,Fn=vr(Ln[typeof this]&&this),In=Pn||Bn!==(Fn&&Fn.window)&&Bn||Hn||Fn||Function("return this")(),_r=Mr();(Bn||Hn||{})._=_r,typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("lodash",[],function(){return _r}):_n&&Dn?(jn&&((Dn.exports=_r)._=_r),_n._=_r):In._=_r}.call(this),function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}(typeof window!="undefined"?window:this,function(window,noGlobal){function isArrayLike(e){var t=!!e&&"length"in e&&e.length,n=jQuery.type(e);return n==="function"||jQuery.isWindow(e)?!1:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function winnow(e,t,n){if(jQuery.isFunction(t))return jQuery.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return jQuery.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(risSimple.test(t))return jQuery.filter(t,e,n);t=jQuery.filter(t,e)}return jQuery.grep(e,function(e){return indexOf.call(t,e)>-1!==n})}function sibling(e,t){while((e=e[t])&&e.nodeType!==1);return e}function createOptions(e){var t={};return jQuery.each(e.match(rnotwhite)||[],function(e,n){t[n]=!0}),t}function completed(){document.removeEventListener("DOMContentLoaded",completed),window.removeEventListener("load",completed),jQuery.ready()}function Data(){this.expando=jQuery.expando+Data.uid++}function dataAttr(e,t,n){var r;if(n===undefined&&e.nodeType===1){r="data-"+t.replace(rmultiDash,"-$&").toLowerCase(),n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:rbrace.test(n)?jQuery.parseJSON(n):n}catch(i){}dataUser.set(e,t,n)}else n=undefined}return n}function adjustCSS(e,t,n,r){var i,s=1,o=20,u=r?function(){return r.cur()}:function(){return jQuery.css(e,t,"")},a=u(),f=n&&n[3]||(jQuery.cssNumber[t]?"":"px"),l=(jQuery.cssNumber[t]||f!=="px"&&+a)&&rcssNum.exec(jQuery.css(e,t));if(l&&l[3]!==f){f=f||l[3],n=n||[],l=+a||1;do s=s||".5",l/=s,jQuery.style(e,t,l+f);while(s!==(s=u()/a)&&s!==1&&--o)}return n&&(l=+l||+a||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=f,r.start=l,r.end=i)),i}function getAll(e,t){var n=typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll(t||"*"):[];return t===undefined||t&&jQuery.nodeName(e,t)?jQuery.merge([e],n):n}function setGlobalEval(e,t){var n=0,r=e.length;for(;n<r;n++)dataPriv.set(e[n],"globalEval",!t||dataPriv.get(t[n],"globalEval"))}function buildFragment(e,t,n,r,i){var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;for(;p<d;p++){s=e[p];if(s||s===0)if(jQuery.type(s)==="object")jQuery.merge(h,s.nodeType?[s]:s);else if(!rhtml.test(s))h.push(t.createTextNode(s));else{o=o||c.appendChild(t.createElement("div")),u=(rtagName.exec(s)||["",""])[1].toLowerCase(),a=wrapMap[u]||wrapMap._default,o.innerHTML=a[1]+jQuery.htmlPrefilter(s)+a[2],l=a[0];while(l--)o=o.lastChild;jQuery.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}}c.textContent="",p=0;while(s=h[p++]){if(r&&jQuery.inArray(s,r)>-1){i&&i.push(s);continue}f=jQuery.contains(s.ownerDocument,s),o=getAll(c.appendChild(s),"script"),f&&setGlobalEval(o);if(n){l=0;while(s=o[l++])rscriptType.test(s.type||"")&&n.push(s)}}return c}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(e){}}function on(e,t,n,r,i,s){var o,u;if(typeof t=="object"){typeof n!="string"&&(r=r||n,n=undefined);for(u in t)on(e,u,n,r,t[u],s);return e}r==null&&i==null?(i=n,r=n=undefined):i==null&&(typeof n=="string"?(i=r,r=undefined):(i=r,r=n,n=undefined));if(i===!1)i=returnFalse;else if(!i)return e;return s===1&&(o=i,i=function(e){return jQuery().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=jQuery.guid++)),e.each(function(){jQuery.event.add(this,t,i,r,n)})}function manipulationTarget(e,t){return jQuery.nodeName(e,"table")&&jQuery.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function disableScript(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function restoreScript(e){var t=rscriptTypeMasked.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function cloneCopyEvent(e,t){var n,r,i,s,o,u,a,f;if(t.nodeType!==1)return;if(dataPriv.hasData(e)){s=dataPriv.access(e),o=dataPriv.set(t,s),f=s.events;if(f){delete o.handle,o.events={};for(i in f)for(n=0,r=f[i].length;n<r;n++)jQuery.event.add(t,i,f[i][n])}}dataUser.hasData(e)&&(u=dataUser.access(e),a=jQuery.extend({},u),dataUser.set(t,a))}function fixInput(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&rcheckableType.test(e.type))t.checked=e.checked;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function domManip(e,t,n,r){t=concat.apply([],t);var i,s,o,u,a,f,l=0,c=e.length,h=c-1,p=t[0],d=jQuery.isFunction(p);if(d||c>1&&typeof p=="string"&&!support.checkClone&&rchecked.test(p))return e.each(function(i){var s=e.eq(i);d&&(t[0]=p.call(this,i,s.html())),domManip(s,t,n,r)});if(c){i=buildFragment(t,e[0].ownerDocument,!1,e,r),s=i.firstChild,i.childNodes.length===1&&(i=s);if(s||r){o=jQuery.map(getAll(i,"script"),disableScript),u=o.length;for(;l<c;l++)a=i,l!==h&&(a=jQuery.clone(a,!0,!0),u&&jQuery.merge(o,getAll(a,"script"))),n.call(e[l],a,l);if(u){f=o[o.length-1].ownerDocument,jQuery.map(o,restoreScript);for(l=0;l<u;l++)a=o[l],rscriptType.test(a.type||"")&&!dataPriv.access(a,"globalEval")&&jQuery.contains(f,a)&&(a.src?jQuery._evalUrl&&jQuery._evalUrl(a.src):jQuery.globalEval(a.textContent.replace(rcleanScript,"")))}}}return e}function remove(e,t,n){var r,i=t?jQuery.filter(t,e):e,s=0;for(;(r=i[s])!=null;s++)!n&&r.nodeType===1&&jQuery.cleanData(getAll(r)),r.parentNode&&(n&&jQuery.contains(r.ownerDocument,r)&&setGlobalEval(getAll(r,"script")),r.parentNode.removeChild(r));return e}function actualDisplay(e,t){var n=jQuery(t.createElement(e)).appendTo(t.body),r=jQuery.css(n[0],"display");return n.detach(),r}function defaultDisplay(e){var t=document,n=elemdisplay[e];if(!n){n=actualDisplay(e,t);if(n==="none"||!n)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=iframe[0].contentDocument,t.write(),t.close(),n=actualDisplay(e,t),iframe.detach();elemdisplay[e]=n}return n}function curCSS(e,t,n){var r,i,s,o,u=e.style;return n=n||getStyles(e),o=n?n.getPropertyValue(t)||n[t]:undefined,(o===""||o===undefined)&&!jQuery.contains(e.ownerDocument,e)&&(o=jQuery.style(e,t)),n&&!support.pixelMarginRight()&&rnumnonpx.test(o)&&rmargin.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s),o!==undefined?o+"":o}function addGetHookIf(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function vendorPropName(e){if(e in emptyStyle)return e;var t=e[0].toUpperCase()+e.slice(1),n=cssPrefixes.length;while(n--){e=cssPrefixes[n]+t;if(e in emptyStyle)return e}}function setPositiveNumber(e,t,n){var r=rcssNum.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function augmentWidthOrHeight(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=jQuery.css(e,n+cssExpand[s],!0,i)),r?(n==="content"&&(o-=jQuery.css(e,"padding"+cssExpand[s],!0,i)),n!=="margin"&&(o-=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i))):(o+=jQuery.css(e,"padding"+cssExpand[s],!0,i),n!=="padding"&&(o+=jQuery.css(e,"border"+cssExpand[s]+"Width",!0,i)));return o}function getWidthOrHeight(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=getStyles(e),o=jQuery.css(e,"boxSizing",!1,s)==="border-box";document.msFullscreenElement&&window.top!==window&&e.getClientRects().length&&(i=Math.round(e.getBoundingClientRect()[t]*100));if(i<=0||i==null){i=curCSS(e,t,s);if(i<0||i==null)i=e.style[t];if(rnumnonpx.test(i))return i;r=o&&(support.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+augmentWidthOrHeight(e,t,n||(o?"border":"content"),r,s)+"px"}function showHide(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=dataPriv.get(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&isHidden(r)&&(s[o]=dataPriv.access(r,"olddisplay",defaultDisplay(r.nodeName)))):(i=isHidden(r),(n!=="none"||!i)&&dataPriv.set(r,"olddisplay",i?n:jQuery.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function Tween(e,t,n,r,i){return new Tween.prototype.init(e,t,n,r,i)}function createFxNow(){return window.setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(e,t){var n,r=0,i={height:e};t=t?1:0;for(;r<4;r+=2-t)n=cssExpand[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function createTween(e,t,n){var r,i=(Animation.tweeners[t]||[]).concat(Animation.tweeners["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function defaultPrefilter(e,t,n){var r,i,s,o,u,a,f,l,c=this,h={},p=e.style,d=e.nodeType&&isHidden(e),v=dataPriv.get(e,"fxshow");n.queue||(u=jQuery._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,jQuery.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],f=jQuery.css(e,"display"),l=f==="none"?dataPriv.get(e,"olddisplay")||defaultDisplay(e.nodeName):f,l==="inline"&&jQuery.css(e,"float")==="none"&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(rfxtypes.exec(i)){delete t[r],s=s||i==="toggle";if(i===(d?"hide":"show")){if(i!=="show"||!v||v[r]===undefined)continue;d=!0}h[r]=v&&v[r]||jQuery.style(e,r)}else f=undefined}if(!jQuery.isEmptyObject(h)){v?"hidden"in v&&(d=v.hidden):v=dataPriv.access(e,"fxshow",{}),s&&(v.hidden=!d),d?jQuery(e).show():c.done(function(){jQuery(e).hide()}),c.done(function(){var t;dataPriv.remove(e,"fxshow");for(t in h)jQuery.style(e,t,h[t])});for(r in h)o=createTween(d?v[r]:0,r,c),r in v||(v[r]=o.start,d&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}else(f==="none"?defaultDisplay(e.nodeName):f)==="inline"&&(p.display=f)}function propFilter(e,t){var n,r,i,s,o;for(n in e){r=jQuery.camelCase(n),i=t[r],s=e[n],jQuery.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=jQuery.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Animation(e,t,n){var r,i,s=0,o=Animation.prefilters.length,u=jQuery.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=fxNow||createFxNow(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:jQuery.extend({},t),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},n),originalProperties:t,originalOptions:n,startTime:fxNow||createFxNow(),duration:n.duration,tweens:[],createTween:function(t,n){var r=jQuery.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?(u.notifyWith(e,[f,1,0]),u.resolveWith(e,[f,t])):u.rejectWith(e,[f,t]),this}}),l=f.props;propFilter(l,f.opts.specialEasing);for(;s<o;s++){r=Animation.prefilters[s].call(f,e,l,f.opts);if(r)return jQuery.isFunction(r.stop)&&(jQuery._queueHooks(f.elem,f.opts.queue).stop=jQuery.proxy(r.stop,r)),r}return jQuery.map(l,createTween,f),jQuery.isFunction(f.opts.start)&&f.opts.start.call(e,f),jQuery.fx.timer(jQuery.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function getClass(e){return e.getAttribute&&e.getAttribute("class")||""}function addToPrefiltersOrTransports(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function inspectPrefiltersOrTransports(e,t,n,r){function o(u){var a;return i[u]=!0,jQuery.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===transports;return o(t.dataTypes[0])||!i["*"]&&o("*")}function ajaxExtend(e,t){var n,r,i=jQuery.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&jQuery.extend(!0,e,r),e}function ajaxHandleResponses(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==a[0]&&a.unshift(s),n[s]}function ajaxConvert(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function buildParams(e,t,n,r){var i;if(jQuery.isArray(t))jQuery.each(t,function(t,i){n||rbracket.test(e)?r(e,i):buildParams(e+"["+(typeof i=="object"&&i!=null?t:"")+"]",i,n,r)});else if(!n&&jQuery.type(t)==="object")for(i in t)buildParams(e+"["+i+"]",t[i],n,r);else r(e,t)}function getWindow(e){return jQuery.isWindow(e)?e:e.nodeType===9&&e.defaultView}var arr=[],document=window.document,slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},version="2.2.1",jQuery=function(e,t){return new jQuery.fn.init(e,t)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(e,t){return t.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:slice.call(this)},pushStack:function(e){var t=jQuery.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return jQuery.each(this,e)},map:function(e){return this.pushStack(jQuery.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!jQuery.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((e=arguments[u])!=null)for(t in e){n=o[t],r=e[t];if(o===r)continue;f&&r&&(jQuery.isPlainObject(r)||(i=jQuery.isArray(r)))?(i?(i=!1,s=n&&jQuery.isArray(n)?n:[]):s=n&&jQuery.isPlainObject(n)?n:{},o[t]=jQuery.extend(f,s,r)):r!==undefined&&(o[t]=r)}return o},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return jQuery.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!jQuery.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){return jQuery.type(e)!=="object"||e.nodeType||jQuery.isWindow(e)?!1:e.constructor&&!hasOwn.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?class2type[toString.call(e)]||"object":typeof e},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(e){return e.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(isArrayLike(e)){n=e.length;for(;r<n;r++)if(t.call(e[r],r,e[r])===!1)break}else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return e==null?"":(e+"").replace(rtrim,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(isArrayLike(Object(e))?jQuery.merge(n,typeof e=="string"?[e]:e):push.call(n,e)),n},inArray:function(e,t,n){return t==null?-1:indexOf.call(t,e,n)},merge:function(e,t){var n=+t.length,r=0,i=e.length;for(;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,i,s=0,o=[];if(isArrayLike(e)){r=e.length;for(;s<r;s++)i=t(e[s],s,n),i!=null&&o.push(i)}else for(s in e)i=t(e[s],s,n),i!=null&&o.push(i);return concat.apply([],o)},guid:1,proxy:function(e,t){var n,r,i;return typeof t=="string"&&(n=e[t],t=e,e=n),jQuery.isFunction(e)?(r=slice.call(arguments,2),i=function(){return e.apply(t||this,r.concat(slice.call(arguments)))},i.guid=e.guid=e.guid||jQuery.guid++,i):undefined},now:Date.now,support:support}),typeof Symbol=="function"&&(jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){class2type["[object "+t+"]"]=t.toLowerCase()});var Sizzle=function(e){function st(e,t,r,i){var s,u,f,l,c,d,g,y,S=t&&t.ownerDocument,x=t?t.nodeType:9;r=r||[];if(typeof e!="string"||!e||x!==1&&x!==9&&x!==11)return r;if(!i){(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p;if(v){if(x!==11&&(d=Y.exec(e)))if(s=d[1]){if(x===9){if(!(f=t.getElementById(s)))return r;if(f.id===s)return r.push(f),r}else if(S&&(f=S.getElementById(s))&&b(t,f)&&f.id===s)return r.push(f),r}else{if(d[2])return D.apply(r,t.getElementsByTagName(e)),r;if((s=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(s)),r}if(n.qsa&&!C[e+" "]&&(!m||!m.test(e))){if(x!==1)S=t,y=e;else if(t.nodeName.toLowerCase()!=="object"){(l=t.getAttribute("id"))?l=l.replace(et,"\\$&"):t.setAttribute("id",l=w),g=o(e),u=g.length,c=$.test(l)?"#"+l:"[id='"+l+"']";while(u--)g[u]=c+" "+mt(g[u]);y=g.join(","),S=Z.test(e)&&dt(t.parentNode)||t}if(y)try{return D.apply(r,S.querySelectorAll(y)),r}catch(T){}finally{l===w&&t.removeAttribute("id")}}}}return a(e.replace(U,"$1"),t,r,i)}function ot(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ut(e){return e[w]=!0,e}function at(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ft(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function lt(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function pt(e){return ut(function(t){return t=+t,ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function dt(e){return e&&typeof e.getElementsByTagName!="undefined"&&e}function vt(){}function mt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function gt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f,l=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){f=t[w]||(t[w]={}),a=f[t.uniqueID]||(f[t.uniqueID]={});if((u=a[r])&&u[0]===S&&u[1]===s)return l[2]=u[2];a[r]=l;if(l[2]=e(t,n,o))return!0}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bt(e,t,n){var r=0,i=t.length;for(;r<i;r++)st(e,t[r],n);return n}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function Et(e,t,n,r,i,s){return r&&!r[w]&&(r=Et(r)),i&&!i[w]&&(i=Et(i,s)),ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||bt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?wt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function St(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,!0),c=gt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[gt(yt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return Et(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(U,"$1"),n,a<i&&St(e.slice(a,i)),i<s&&St(e=e.slice(i)),i<s&&mt(e))}h.push(n)}return yt(h)}function xt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,d,m,g=0,y="0",b=s&&[],w=[],E=f,x=s||i&&r.find.TAG("*",l),T=S+=E==null?1:Math.random()||.1,N=x.length;l&&(f=o===p||o||l);for(;y!==N&&(c=x[y])!=null;y++){if(i&&c){d=0,!o&&c.ownerDocument!==p&&(h(c),u=!v);while(m=e[d++])if(m(c,o||p,u)){a.push(c);break}l&&(S=T)}n&&((c=!m&&c)&&g--,s&&b.push(c))}g+=y;if(n&&y!==g){d=0;while(m=t[d++])m(b,w,o,u);if(s){if(g>0)while(y--)!b[y]&&!w[y]&&(w[y]=M.call(a));w=wt(w)}D.apply(a,w),l&&!s&&w.length>0&&g+t.length>1&&st.uniqueSort(a)}return l&&(S=T,f=E),b};return n?ut(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ot(),N=ot(),C=ot(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){var n=0,r=e.length;for(;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+j+"*\\]",q=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|"+".*"+")\\)|)",R=new RegExp(j+"+","g"),U=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),z=new RegExp("^"+j+"*,"+j+"*"),W=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),X=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),V=new RegExp(q),$=new RegExp("^"+F+"$"),J={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,et=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),nt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},rt=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(it){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=st.support={},s=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=st.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;if(o===p||o.nodeType!==9||!o.documentElement)return p;p=o,d=p.documentElement,v=!s(p),(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=at(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=at(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=G.test(p.getElementsByClassName),n.getById=at(function(e){return d.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!="undefined"&&v){var n=t.getElementById(e);return n?[n]:[]}},r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e);if(n.qsa)return t.querySelectorAll(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!="undefined"&&v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=G.test(p.querySelectorAll))at(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),at(function(e){var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=G.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=G.test(d.compareDocumentPosition),b=t||G.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===p||e.ownerDocument===E&&b(E,e)?-1:t===p||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,o=[e],u=[t];if(!i||!s)return e===p?-1:t===p?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return lt(e,t);n=e;while(n=n.parentNode)o.unshift(n);n=t;while(n=n.parentNode)u.unshift(n);while(o[r]===u[r])r++;return r?lt(o[r],u[r]):o[r]===E?-1:u[r]===E?1:0},p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(X,"='$1']");if(n.matchesSelector&&v&&!C[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},st.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):undefined;return s!==undefined?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=st.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=st.selectors={cacheLength:50,createPseudo:ut,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(tt,nt),e[3]=(e[3]||e[4]||e[5]||"").replace(tt,nt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(tt,nt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i.replace(R," ")+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u,b=!1;if(m){if(s){while(v){h=t;while(h=h[v])if(u?h.nodeName.toLowerCase()===g:h.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){h=m,c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),f=l[e]||[],p=f[0]===S&&f[1],b=p&&f[2],h=p&&m.childNodes[p];while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if(h.nodeType===1&&++b&&h===t){l[e]=[S,p,b];break}}else{y&&(h=t,c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),f=l[e]||[],p=f[0]===S&&f[1],b=p);if(b===!1)while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if((u?h.nodeName.toLowerCase()===g:h.nodeType===1)&&++b){y&&(c=h[w]||(h[w]={}),l=c[h.uniqueID]||(c[h.uniqueID]={}),l[e]=[S,b]);if(h===t)break}}return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ut(function(e){var t=[],n=[],r=u(e.replace(U,"$1"));return r[w]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return e=e.replace(tt,nt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ut(function(e){return $.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(tt,nt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[n<0?n+t:n]}),even:pt(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ht(t);return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,o=st.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=z.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=W.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(U," ")}),u=u.slice(n.length);for(o in r.filter)(i=J[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?st.error(e):N(e,a).slice(0)},u=st.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=St(t[n]),s[w]?r.push(s):i.push(s);s=C(e,xt(i,r)),s.selector=e}return s},a=st.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(tt,nt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=J.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(tt,nt),Z.test(f[0].type)&&dt(t.parentNode)||t)){f.splice(a,1),e=s.length&&mt(f);if(!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,!t||Z.test(e)&&dt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=at(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ft("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!at(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ft("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),at(function(e){return e.getAttribute("disabled")==null})||ft(B,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),st}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var dir=function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9)if(e.nodeType===1){if(i&&jQuery(e).is(n))break;r.push(e)}return r},siblings=function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n},rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?jQuery.find.matchesSelector(r,e)?[r]:[]:jQuery.find.matches(e,jQuery.grep(t,function(e){return e.nodeType===1}))},jQuery.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if(typeof e!="string")return this.pushStack(jQuery(e).filter(function(){for(t=0;t<n;t++)if(jQuery.contains(i[t],this))return!0}));for(t=0;t<n;t++)jQuery.find(e,i[t],r);return r=this.pushStack(n>1?jQuery.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(winnow(this,e||[],!1))},not:function(e){return this.pushStack(winnow(this,e||[],!0))},is:function(e){return!!winnow(this,typeof e=="string"&&rneedsContext.test(e)?jQuery(e):e||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(e,t,n){var r,i;if(!e)return this;n=n||rootjQuery;if(typeof e=="string"){e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?r=[null,e,null]:r=rquickExpr.exec(e);if(r&&(r[1]||!t)){if(r[1]){t=t instanceof jQuery?t[0]:t,jQuery.merge(this,jQuery.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:document,!0));if(rsingleTag.test(r[1])&&jQuery.isPlainObject(t))for(r in t)jQuery.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=document.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=document,this.selector=e,this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):jQuery.isFunction(e)?n.ready!==undefined?n.ready(e):e(jQuery):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),jQuery.makeArray(e,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({has:function(e){var t=jQuery(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++)if(jQuery.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=rneedsContext.test(e)||typeof e!="string"?jQuery(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&jQuery.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?jQuery.uniqueSort(s):s)},index:function(e){return e?typeof e=="string"?indexOf.call(jQuery(e),this[0]):indexOf.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),jQuery.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return dir(e,"parentNode")},parentsUntil:function(e,t,n){return dir(e,"parentNode",n)},next:function(e){return sibling(e,"nextSibling")},prev:function(e){return sibling(e,"previousSibling")},nextAll:function(e){return dir(e,"nextSibling")},prevAll:function(e){return dir(e,"previousSibling")},nextUntil:function(e,t,n){return dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return dir(e,"previousSibling",n)},siblings:function(e){return siblings((e.parentNode||{}).firstChild,e)},children:function(e){return siblings(e.firstChild)},contents:function(e){return e.contentDocument||jQuery.merge([],e.childNodes)}},function(e,t){jQuery.fn[e]=function(n,r){var i=jQuery.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=jQuery.filter(r,i)),this.length>1&&(guaranteedUnique[e]||jQuery.uniqueSort(i),rparentsprev.test(e)&&i.reverse()),this.pushStack(i)}});var rnotwhite=/\S+/g;jQuery.Callbacks=function(e){e=typeof e=="string"?createOptions(e):jQuery.extend({},e);var t,n,r,i,s=[],o=[],u=-1,a=function(){i=e.once,r=t=!0;for(;o.length;u=-1){n=o.shift();while(++u<s.length)s[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=s.length,n=!1)}e.memory||(n=!1),t=!1,i&&(n?s=[]:s="")},f={add:function(){return s&&(n&&!t&&(u=s.length-1,o.push(n)),function r(t){jQuery.each(t,function(t,n){jQuery.isFunction(n)?(!e.unique||!f.has(n))&&s.push(n):n&&n.length&&jQuery.type(n)!=="string"&&r(n)})}(arguments),n&&!t&&a()),this},remove:function(){return jQuery.each(arguments,function(e,t){var n;while((n=jQuery.inArray(t,s,n))>-1)s.splice(n,1),n<=u&&u--}),this},has:function(e){return e?jQuery.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=o=[],n||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||a()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},jQuery.extend({Deferred:function(e){var t=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return jQuery.Deferred(function(n){jQuery.each(t,function(t,s){var o=jQuery.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&jQuery.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?jQuery.extend(e,r):r}},i={};return r.pipe=r.then,jQuery.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=slice.call(arguments),r=n.length,i=r!==1||e&&jQuery.isFunction(e.promise)?r:0,s=i===1?e:jQuery.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?slice.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&jQuery.isFunction(n[t].promise)?n[t].promise().progress(o(t,a,u)).done(o(t,f,n)).fail(s.reject):--i}return i||s.resolveWith(f,n),s.promise()}});var readyList;jQuery.fn.ready=function(e){return jQuery.ready.promise().done(e),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(e){e?jQuery.readyWait++:jQuery.ready(!0)},ready:function(e){if(e===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(e!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))}}),jQuery.ready.promise=function(e){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?window.setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed),window.addEventListener("load",completed))),readyList.promise(e)},jQuery.ready.promise();var access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(jQuery.type(n)==="object"){i=!0;for(u in n)access(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,jQuery.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(jQuery(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s},acceptData=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};Data.uid=1,Data.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!acceptData(e))return{};var t=e[this.expando];return t||(t={},acceptData(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(typeof t=="string")i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return t===undefined||t&&typeof t=="string"&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,jQuery.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,s=e[this.expando];if(s===undefined)return;if(t===undefined)this.register(e);else{jQuery.isArray(t)?r=t.concat(t.map(jQuery.camelCase)):(i=jQuery.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(rnotwhite)||[])),n=r.length;while(n--)delete s[r[n]]}if(t===undefined||jQuery.isEmptyObject(s))e.nodeType?e[this.expando]=undefined:delete e[this.expando]},hasData:function(e){var t=e[this.expando];return t!==undefined&&!jQuery.isEmptyObject(t)}};var dataPriv=new Data,dataUser=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;jQuery.extend({hasData:function(e){return dataUser.hasData(e)||dataPriv.hasData(e)},data:function(e,t,n){return dataUser.access(e,t,n)},removeData:function(e,t){dataUser.remove(e,t)},_data:function(e,t,n){return dataPriv.access(e,t,n)},_removeData:function(e,t){dataPriv.remove(e,t)}}),jQuery.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=dataUser.get(s);if(s.nodeType===1&&!dataPriv.get(s,"hasDataAttrs")){n=o.length;while(n--)o[n]&&(r=o[n].name,r.indexOf("data-")===0&&(r=jQuery.camelCase(r.slice(5)),dataAttr(s,r,i[r])));dataPriv.set(s,"hasDataAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){dataUser.set(this,e)}):access(this,function(t){var n,r;if(s&&t===undefined){n=dataUser.get(s,e)||dataUser.get(s,e.replace(rmultiDash,"-$&").toLowerCase());if(n!==undefined)return n;r=jQuery.camelCase(e),n=dataUser.get(s,r);if(n!==undefined)return n;n=dataAttr(s,r,undefined);if(n!==undefined)return n;return}r=jQuery.camelCase(e),this.each(function(){var n=dataUser.get(this,r);dataUser.set(this,r,t),e.indexOf("-")>-1&&n!==undefined&&dataUser.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){dataUser.remove(this,e)})}}),jQuery.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=dataPriv.get(e,t),n&&(!r||jQuery.isArray(n)?r=dataPriv.access(e,t,jQuery.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=jQuery.queue(e,t),r=n.length,i=n.shift(),s=jQuery._queueHooks(e,t),o=function(){jQuery.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return dataPriv.get(e,n)||dataPriv.access(e,n,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(e,[t+"queue",n])})})}}),jQuery.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?jQuery.queue(this[0],e):t===undefined?this:this.each(function(){var n=jQuery.queue(this,e,t);jQuery._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&jQuery.dequeue(this,e)})},dequeue:function(e){return this.each(function(){jQuery.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=jQuery.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=dataPriv.get(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),cssExpand=["Top","Right","Bottom","Left"],isHidden=function(e,t){return e=t||e,jQuery.css(e,"display")==="none"||!jQuery.contains(e.ownerDocument,e)},rcheckableType=/^(?:checkbox|radio)$/i,rtagName=/<([\w:-]+)/,rscriptType=/^$|\/(?:java|ecma)script/i,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var rhtml=/<|&#?\w+;/;(function(){var e=document.createDocumentFragment(),t=e.appendChild(document.createElement("div")),n=document.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),support.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue})();var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;jQuery.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=dataPriv.get(e);if(!m)return;n.handler&&(s=n,n=s.handler,i=s.selector),n.guid||(n.guid=jQuery.guid++),(a=m.events)||(a=m.events={}),(o=m.handle)||(o=m.handle=function(t){return typeof jQuery!="undefined"&&jQuery.event.triggered!==t.type?jQuery.event.dispatch.apply(e,arguments):undefined}),t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p)continue;c=jQuery.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=jQuery.event.special[p]||{},l=jQuery.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&jQuery.expr.match.needsContext.test(i),namespace:d.join(".")},s),(h=a[p])||(h=a[p]=[],h.delegateCount=0,(!c.setup||c.setup.call(e,r,d,o)===!1)&&e.addEventListener&&e.addEventListener(p,o)),c.add&&(c.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),jQuery.event.global[p]=!0}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=dataPriv.hasData(e)&&dataPriv.get(e);if(!m||!(a=m.events))return;t=(t||"").match(rnotwhite)||[""],f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in a)jQuery.event.remove(e,p+t[f],n,r,!0);continue}c=jQuery.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],(i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)&&(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&jQuery.removeEvent(e,p,m.handle),delete a[p])}jQuery.isEmptyObject(a)&&dataPriv.remove(e,"handle events")},dispatch:function(e){e=jQuery.event.fix(e);var t,n,r,i,s,o=[],u=slice.call(arguments),a=(dataPriv.get(this,"events")||{})[e.type]||[],f=jQuery.event.special[e.type]||{};u[0]=e,e.delegateTarget=this;if(f.preDispatch&&f.preDispatch.call(this,e)===!1)return;o=jQuery.event.handlers.call(this,e,a),t=0;while((i=o[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped())if(!e.rnamespace||e.rnamespace.test(s.namespace))e.handleObj=s,e.data=s.data,r=((jQuery.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return f.postDispatch&&f.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(e.type!=="click"||isNaN(e.button)||e.button<1))for(;a!==this;a=a.parentNode||this)if(a.nodeType===1&&(a.disabled!==!0||e.type!=="click")){r=[];for(n=0;n<u;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?jQuery(i,this).index(a)>-1:jQuery.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return e.pageX==null&&t.clientX!=null&&(n=e.target.ownerDocument||document,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.which&&s!==undefined&&(e.which=s&1?1:s&2?3:s&4?2:0),e}},fix:function(e){if(e[jQuery.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=rmouseEvent.test(i)?this.mouseHooks:rkeyEvent.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new jQuery.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=document),e.target.nodeType===3&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(e){return jQuery.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},jQuery.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},jQuery.Event=function(e,t){if(!(this instanceof jQuery.Event))return new jQuery.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===!1?returnTrue:returnFalse):this.type=e,t&&jQuery.extend(this,t),this.timeStamp=e&&e.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){jQuery.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!jQuery.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),jQuery.fn.extend({on:function(e,t,n,r){return on(this,e,t,n,r)},one:function(e,t,n,r){return on(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,jQuery(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=returnFalse),this.each(function(){jQuery.event.remove(this,e,n,t)})}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;jQuery.extend({htmlPrefilter:function(e){return e.replace(rxhtmlTag,"<$1></$2>")},clone:function(e,t,n){var r,i,s,o,u=e.cloneNode(!0),a=jQuery.contains(e.ownerDocument,e);if(!support.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!jQuery.isXMLDoc(e)){o=getAll(u),s=getAll(e);for(r=0,i=s.length;r<i;r++)fixInput(s[r],o[r])}if(t)if(n){s=s||getAll(e),o=o||getAll(u);for(r=0,i=s.length;r<i;r++)cloneCopyEvent(s[r],o[r])}else cloneCopyEvent(e,u);return o=getAll(u,"script"),o.length>0&&setGlobalEval(o,!a&&getAll(e,"script")),u},cleanData:function(e){var t,n,r,i=jQuery.event.special,s=0;for(;(n=e[s])!==undefined;s++)if(acceptData(n)){if(t=n[dataPriv.expando]){if(t.events)for(r in t.events)i[r]?jQuery.event.remove(n,r):jQuery.removeEvent(n,r,t.handle);n[dataPriv.expando]=undefined}n[dataUser.expando]&&(n[dataUser.expando]=undefined)}}}),jQuery.fn.extend({domManip:domManip,detach:function(e){return remove(this,e,!0)},remove:function(e){return remove(this,e)},text:function(e){return access(this,function(e){return e===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=e})},null,e,arguments.length)},append:function(){return domManip(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.appendChild(e)}})},prepend:function(){return domManip(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return domManip(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return domManip(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++)e.nodeType===1&&(jQuery.cleanData(getAll(e,!1)),e.textContent="");return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return jQuery.clone(this,e,t)})},html:function(e){return access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&t.nodeType===1)return t.innerHTML;if(typeof e=="string"&&!rnoInnerhtml.test(e)&&!wrapMap[(rtagName.exec(e)||["",""])[1].toLowerCase()]){e=jQuery.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(jQuery.cleanData(getAll(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return domManip(this,arguments,function(t){var n=this.parentNode;jQuery.inArray(this,e)<0&&(jQuery.cleanData(getAll(this)),n&&n.replaceChild(t,this))},e)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){jQuery.fn[e]=function(e){var n,r=[],i=jQuery(e),s=i.length-1,o=0;for(;o<=s;o++)n=o===s?this:this.clone(!0),jQuery(i[o])[t](n),push.apply(r,n.get());return this.pushStack(r)}});var iframe,elemdisplay={HTML:"block",BODY:"block"},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener)t=window;return t.getComputedStyle(e)},swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i},documentElement=document.documentElement;(function(){function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",documentElement.appendChild(i);var o=window.getComputedStyle(s);e=o.top!=="1%",r=o.marginLeft==="2px",t=o.width==="4px",s.style.marginRight="50%",n=o.marginRight==="4px",documentElement.removeChild(i)}var e,t,n,r,i=document.createElement("div"),s=document.createElement("div");if(!s.style)return;s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=s.style.backgroundClip==="content-box",i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",i.appendChild(s),jQuery.extend(support,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return t==null&&o(),t},pixelMarginRight:function(){return t==null&&o(),n},reliableMarginLeft:function(){return t==null&&o(),r},reliableMarginRight:function(){var e,t=s.appendChild(document.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",documentElement.appendChild(i),e=!parseFloat(window.getComputedStyle(t).marginRight),documentElement.removeChild(i),s.removeChild(t),e}})})();var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;jQuery.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=curCSS(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=jQuery.camelCase(t),a=e.style;t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(u)||u),o=jQuery.cssHooks[t]||jQuery.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=rcssNum.exec(n))&&i[1]&&(n=adjustCSS(e,t,i),s="number");if(n==null||n!==n)return;s==="number"&&(n+=i&&i[3]||(jQuery.cssNumber[u]?"":"px")),!support.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)a[t]=n},css:function(e,t,n,r){var i,s,o,u=jQuery.camelCase(t);return t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(u)||u),o=jQuery.cssHooks[t]||jQuery.cssHooks[u],o&&"get"in o&&(i=o.get(e,!0,n)),i===undefined&&(i=curCSS(e,t,r)),i==="normal"&&t in cssNormalTransform&&(i=cssNormalTransform[t]),n===""||n?(s=parseFloat(i),n===!0||isFinite(s)?s||0:i):i}}),jQuery.each(["height","width"],function(e,t){jQuery.cssHooks[t]={get:function(e,n,r){if(n)return rdisplayswap.test(jQuery.css(e,"display"))&&e.offsetWidth===0?swap(e,cssShow,function(){return getWidthOrHeight(e,t,r)}):getWidthOrHeight(e,t,r)},set:function(e,n,r){var i,s=r&&getStyles(e),o=r&&augmentWidthOrHeight(e,t,r,jQuery.css(e,"boxSizing",!1,s)==="border-box",s);return o&&(i=rcssNum.exec(n))&&(i[3]||"px")!=="px"&&(e.style[t]=n,n=jQuery.css(e,t)),setPositiveNumber(e,n,o)}}}),jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(e,t){if(t)return(parseFloat(curCSS(e,"marginLeft"))||e.getBoundingClientRect().left-swap(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(e,t){if(t)return swap(e,{display:"inline-block"},curCSS,[e,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(e,t){jQuery.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+cssExpand[r]+t]=s[r]||s[r-2]||s[0];return i}},rmargin.test(e)||(jQuery.cssHooks[e+t].set=setPositiveNumber)}),jQuery.fn.extend({css:function(e,t){return access(this,function(e,t,n){var r,i,s={},o=0;if(jQuery.isArray(t)){r=getStyles(e),i=t.length;for(;o<i;o++)s[t[o]]=jQuery.css(e,t[o],!1,r);return s}return n!==undefined?jQuery.style(e,t,n):jQuery.css(e,t)},e,t,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||jQuery.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(jQuery.cssNumber[n]?"":"px")},cur:function(){var e=Tween.propHooks[this.prop];return e&&e.get?e.get(this):Tween.propHooks._default.get(this)},run:function(e){var t,n=Tween.propHooks[this.prop];return this.options.duration?this.pos=t=jQuery.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(e){var t;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(t=jQuery.css(e.elem,e.prop,""),!t||t==="auto"?0:t)},set:function(e){jQuery.fx.step[e.prop]?jQuery.fx.step[e.prop](e):e.elem.nodeType!==1||e.elem.style[jQuery.cssProps[e.prop]]==null&&!jQuery.cssHooks[e.prop]?e.elem[e.prop]=e.now:jQuery.style(e.elem,e.prop,e.now+e.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},jQuery.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return adjustCSS(n.elem,e,rcssNum.exec(t),n),n}]},tweener:function(e,t){jQuery.isFunction(e)?(t=e,e=["*"]):e=e.match(rnotwhite);var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Animation.tweeners[n]=Animation.tweeners[n]||[],Animation.tweeners[n].unshift(t)},prefilters:[defaultPrefilter],prefilter:function(e,t){t?Animation.prefilters.unshift(e):Animation.prefilters.push(e)}}),jQuery.speed=function(e,t,n){var r=e&&typeof e=="object"?jQuery.extend({},e):{complete:n||!n&&t||jQuery.isFunction(e)&&e,duration:e,easing:n&&t||t&&!jQuery.isFunction(t)&&t};r.duration=jQuery.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in jQuery.fx.speeds?jQuery.fx.speeds[r.duration]:jQuery.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){jQuery.isFunction(r.old)&&r.old.call(this),r.queue&&jQuery.dequeue(this,r.queue)},r},jQuery.fn.extend({fadeTo:function(e,t,n,r){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=jQuery.isEmptyObject(e),s=jQuery.speed(t,n,r),o=function(){var t=Animation(this,jQuery.extend({},e),s);(i||dataPriv.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=jQuery.timers,o=dataPriv.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&rrun.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&jQuery.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=dataPriv.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=jQuery.timers,o=r?r.length:0;n.finish=!0,jQuery.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),jQuery.each(["toggle","show","hide"],function(e,t){var n=jQuery.fn[t];jQuery.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(genFx(t,!0),e,r,i)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){jQuery.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),jQuery.timers=[],jQuery.fx.tick=function(){var e,t=0,n=jQuery.timers;fxNow=jQuery.now();for(;t<n.length;t++)e=n[t],!e()&&n[t]===e&&n.splice(t--,1);n.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(e){jQuery.timers.push(e),e()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){window.clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(e,t){return e=jQuery.fx?jQuery.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=window.setTimeout(t,e);n.stop=function(){window.clearTimeout(r)}})},function(){var e=document.createElement("input"),t=document.createElement("select"),n=t.appendChild(document.createElement("option"));e.type="checkbox",support.checkOn=e.value!=="",support.optSelected=n.selected,t.disabled=!0,support.optDisabled=!n.disabled,e=document.createElement("input"),e.value="t",e.type="radio",support.radioValue=e.value==="t"}();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(e,t){return access(this,jQuery.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){jQuery.removeAttr(this,e)})}}),jQuery.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(s===3||s===8||s===2)return;if(typeof e.getAttribute=="undefined")return jQuery.prop(e,t,n);if(s!==1||!jQuery.isXMLDoc(e))t=t.toLowerCase(),i=jQuery.attrHooks[t]||(jQuery.expr.match.bool.test(t)?boolHook:undefined);if(n!==undefined){if(n===null){jQuery.removeAttr(e,t);return}return i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:(e.setAttribute(t,n+""),n)}return i&&"get"in i&&(r=i.get(e,t))!==null?r:(r=jQuery.find.attr(e,t),r==null?undefined:r)},attrHooks:{type:{set:function(e,t){if(!support.radioValue&&t==="radio"&&jQuery.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(rnotwhite);if(s&&e.nodeType===1)while(n=s[i++])r=jQuery.propFix[n]||n,jQuery.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),boolHook={set:function(e,t,n){return t===!1?jQuery.removeAttr(e,n):e.setAttribute(n,n),n}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(e,t){var n=attrHandle[t]||jQuery.find.attr;attrHandle[t]=function(e,t,r){var i,s;return r||(s=attrHandle[t],attrHandle[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,attrHandle[t]=s),i}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(e,t){return access(this,jQuery.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[jQuery.propFix[e]||e]})}}),jQuery.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(s===3||s===8||s===2)return;if(s!==1||!jQuery.isXMLDoc(e))t=jQuery.propFix[t]||t,i=jQuery.propHooks[t];return n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=jQuery.find.attr(e,"tabindex");return t?parseInt(t,10):rfocusable.test(e.nodeName)||rclickable.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),support.optSelected||(jQuery.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(e){var t,n,r,i,s,o,u,a=0;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).addClass(e.call(this,t,getClass(this)))});if(typeof e=="string"&&e){t=e.match(rnotwhite)||[];while(n=this[a++]){i=getClass(n),r=n.nodeType===1&&(" "+i+" ").replace(rclass," ");if(r){o=0;while(s=t[o++])r.indexOf(" "+s+" ")<0&&(r+=s+" ");u=jQuery.trim(r),i!==u&&n.setAttribute("class",u)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u,a=0;if(jQuery.isFunction(e))return this.each(function(t){jQuery(this).removeClass(e.call(this,t,getClass(this)))});if(!arguments.length)return this.attr("class","");if(typeof e=="string"&&e){t=e.match(rnotwhite)||[];while(n=this[a++]){i=getClass(n),r=n.nodeType===1&&(" "+i+" ").replace(rclass," ");if(r){o=0;while(s=t[o++])while(r.indexOf(" "+s+" ")>-1)r=r.replace(" "+s+" "," ");u=jQuery.trim(r),i!==u&&n.setAttribute("class",u)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):jQuery.isFunction(e)?this.each(function(n){jQuery(this).toggleClass(e.call(this,n,getClass(this),t),t)}):this.each(function(){var t,r,i,s;if(n==="string"){r=0,i=jQuery(this),s=e.match(rnotwhite)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(e===undefined||n==="boolean")t=getClass(this),t&&dataPriv.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":dataPriv.get(this,"__className__")||"")})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(n.nodeType===1&&(" "+getClass(n)+" ").replace(rclass," ").indexOf(t)>-1)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=jQuery.valHooks[i.type]||jQuery.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(rreturn,""):n==null?"":n);return}return r=jQuery.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,jQuery(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":jQuery.isArray(i)&&(i=jQuery.map(i,function(e){return e==null?"":e+""})),t=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),jQuery.extend({valHooks:{option:{get:function(e){return jQuery.trim(e.value)}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!jQuery.nodeName(n.parentNode,"optgroup"))){t=jQuery(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=jQuery.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=jQuery.inArray(jQuery.valHooks.option.get(r),s)>-1)n=!0}return n||(e.selectedIndex=-1),s}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(e,t){if(jQuery.isArray(t))return e.checked=jQuery.inArray(jQuery(e).val(),t)>-1}},support.checkOn||(jQuery.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(e,t,n,r){var i,s,o,u,a,f,l,c=[n||document],h=hasOwn.call(e,"type")?e.type:e,p=hasOwn.call(e,"namespace")?e.namespace.split("."):[];s=o=n=n||document;if(n.nodeType===3||n.nodeType===8)return;if(rfocusMorph.test(h+jQuery.event.triggered))return;h.indexOf(".")>-1&&(p=h.split("."),h=p.shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,e=e[jQuery.expando]?e:new jQuery.Event(h,typeof e=="object"&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=t==null?[e]:jQuery.makeArray(t,[e]),l=jQuery.event.special[h]||{};if(!r&&l.trigger&&l.trigger.apply(n,t)===!1)return;if(!r&&!l.noBubble&&!jQuery.isWindow(n)){u=l.delegateType||h,rfocusMorph.test(u+h)||(s=s.parentNode);for(;s;s=s.parentNode)c.push(s),o=s;o===(n.ownerDocument||document)&&c.push(o.defaultView||o.parentWindow||window)}i=0;while((s=c[i++])&&!e.isPropagationStopped())e.type=i>1?u:l.bindType||h,f=(dataPriv.get(s,"events")||{})[e.type]&&dataPriv.get(s,"handle"),f&&f.apply(s,t),f=a&&s[a],f&&f.apply&&acceptData(s)&&(e.result=f.apply(s,t),e.result===!1&&e.preventDefault());return e.type=h,!r&&!e.isDefaultPrevented()&&(!l._default||l._default.apply(c.pop(),t)===!1)&&acceptData(n)&&a&&jQuery.isFunction(n[h])&&!jQuery.isWindow(n)&&(o=n[a],o&&(n[a]=null),jQuery.event.triggered=h,n[h](),jQuery.event.triggered=undefined,o&&(n[a]=o)),e.result},simulate:function(e,t,n){var r=jQuery.extend(new jQuery.Event,n,{type:e,isSimulated:!0});jQuery.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}}),jQuery.fn.extend({trigger:function(e,t){return this.each(function(){jQuery.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return jQuery.event.trigger(e,t,n,!0)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){jQuery.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),jQuery.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),support.focusin="onfocusin"in window,support.focusin||jQuery.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){jQuery.event.simulate(t,e.target,jQuery.event.fix(e))};jQuery.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=dataPriv.access(r,t);i||r.addEventListener(e,n,!0),dataPriv.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=dataPriv.access(r,t)-1;i?dataPriv.access(r,t,i):(r.removeEventListener(e,n,!0),dataPriv.remove(r,t))}}});var location=window.location,nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(e){return JSON.parse(e+"")},jQuery.parseXML=function(e){var t;if(!e||typeof e!="string")return null;try{t=(new window.DOMParser).parseFromString(e,"text/xml")}catch(n){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+e),t};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href,jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ajaxExtend(ajaxExtend(e,jQuery.ajaxSettings),t):ajaxExtend(jQuery.ajaxSettings,e)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(e,t){function S(e,t,s,u){var f,m,g,b,E,S=t;if(y===2)return;y=2,o&&window.clearTimeout(o),n=undefined,i=u||"",w.readyState=e>0?4:0,f=e>=200&&e<300||e===304,s&&(b=ajaxHandleResponses(l,w,s)),b=ajaxConvert(l,b,w,f);if(f)l.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(jQuery.lastModified[r]=E),E=w.getResponseHeader("etag"),E&&(jQuery.etag[r]=E)),e===204||l.type==="HEAD"?S="nocontent":e===304?S="notmodified":(S=b.state,m=b.data,g=b.error,f=!g);else{g=S;if(e||!S)S="error",e<0&&(e=0)}w.status=e,w.statusText=(t||S)+"",f?p.resolveWith(c,[m,S,w]):p.rejectWith(c,[w,S,g]),w.statusCode(v),v=undefined,a&&h.trigger(f?"ajaxSuccess":"ajaxError",[w,l,f?m:g]),d.fireWith(c,[w,S]),a&&(h.trigger("ajaxComplete",[w,l]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof e=="object"&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=jQuery.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?jQuery(c):jQuery.event,p=jQuery.Deferred(),d=jQuery.Callbacks("once memory"),v=l.statusCode||{},m={},g={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(y===2){if(!s){s={};while(t=rheaders.exec(i))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return y===2?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=g[n]=g[n]||e,m[e]=t),this},overrideMimeType:function(e){return y||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),S(0,t),this}};p.promise(w).complete=d.add,w.success=w.done,w.error=w.fail,l.url=((e||l.url||location.href)+"").replace(rhash,"").replace(rprotocol,location.protocol+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=jQuery.trim(l.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(l.crossDomain==null){u=document.createElement("a");try{u.href=l.url,u.href=u.href,l.crossDomain=originAnchor.protocol+"//"+originAnchor.host!=u.protocol+"//"+u.host}catch(E){l.crossDomain=!0}}l.data&&l.processData&&typeof l.data!="string"&&(l.data=jQuery.param(l.data,l.traditional)),inspectPrefiltersOrTransports(prefilters,l,t,w);if(y===2)return w;a=jQuery.event&&l.global,a&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!rnoContent.test(l.type),r=l.url,l.hasContent||(l.data&&(r=l.url+=(rquery.test(r)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=rts.test(r)?r.replace(rts,"$1_="+nonce++):r+(rquery.test(r)?"&":"?")+"_="+nonce++)),l.ifModified&&(jQuery.lastModified[r]&&w.setRequestHeader("If-Modified-Since",jQuery.lastModified[r]),jQuery.etag[r]&&w.setRequestHeader("If-None-Match",jQuery.etag[r])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):l.accepts["*"]);for(f in l.headers)w.setRequestHeader(f,l.headers[f]);if(!l.beforeSend||l.beforeSend.call(c,w,l)!==!1&&y!==2){b="abort";for(f in{success:1,error:1,complete:1})w[f](l[f]);n=inspectPrefiltersOrTransports(transports,l,t,w);if(!n)S(-1,"No Transport");else{w.readyState=1,a&&h.trigger("ajaxSend",[w,l]);if(y===2)return w;l.async&&l.timeout>0&&(o=window.setTimeout(function(){w.abort("timeout")},l.timeout));try{y=1,n.send(m,S)}catch(E){if(!(y<2))throw E;S(-1,E)}}return w}return w.abort()},getJSON:function(e,t,n){return jQuery.get(e,t,n,"json")},getScript:function(e,t){return jQuery.get(e,undefined,t,"script")}}),jQuery.each(["get","post"],function(e,t){jQuery[t]=function(e,n,r,i){return jQuery.isFunction(n)&&(i=i||r,r=n,n=undefined),jQuery.ajax(jQuery.extend({url:e,type:t,dataType:i,data:n,success:r},jQuery.isPlainObject(e)&&e))}}),jQuery._evalUrl=function(e){return jQuery.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(e){var t;return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapAll(e.call(this,t))}):(this[0]&&(t=jQuery(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return jQuery.isFunction(e)?this.each(function(t){jQuery(this).wrapInner(e.call(this,t))}):this.each(function(){var t=jQuery(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=jQuery.isFunction(e);return this.each(function(n){jQuery(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(e){return!jQuery.expr.filters.visible(e)},jQuery.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(e,t){var n,r=[],i=function(e,t){t=jQuery.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(e)||e.jquery&&!jQuery.isPlainObject(e))jQuery.each(e,function(){i(this.name,this.value)});else for(n in e)buildParams(n,e[n],t,i);return r.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=jQuery.prop(this,"elements");return e?jQuery.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(e)&&(this.checked||!rcheckableType.test(e))}).map(function(e,t){var n=jQuery(this).val();return n==null?null:jQuery.isArray(n)?jQuery.map(n,function(e){return{name:t.name,value:e.replace(rCRLF,"\r\n")}}):{name:t.name,value:n.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(e){var t,n;if(support.cors||xhrSupported&&!e.crossDomain)return{send:function(r,i){var s,o=e.xhr();o.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),!e.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");for(s in r)o.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=n=o.onload=o.onerror=o.onabort=o.onreadystatechange=null,e==="abort"?o.abort():e==="error"?typeof o.status!="number"?i(0,"error"):i(o.status,o.statusText):i(xhrSuccessStatus[o.status]||o.status,o.statusText,(o.responseType||"text")!=="text"||typeof o.responseText!="string"?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=t(),n=o.onerror=t("error"),o.onabort!==undefined?o.onabort=n:o.onreadystatechange=function(){o.readyState===4&&window.setTimeout(function(){t&&n()})},t=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return jQuery.globalEval(e),e}}}),jQuery.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),jQuery.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=jQuery("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i(e.type==="error"?404:200,e.type)}),document.head.appendChild(t[0])},abort:function(){n&&n()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[e]=!0,e}}),jQuery.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,o=e.jsonp!==!1&&(rjsonp.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp")return r=e.jsonpCallback=jQuery.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(rjsonp,"$1"+r):e.jsonp!==!1&&(e.url+=(rquery.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||jQuery.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i=window[r],window[r]=function(){s=arguments},n.always(function(){i===undefined?jQuery(window).removeProp(r):window[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,oldCallbacks.push(r)),s&&jQuery.isFunction(i)&&i(s[0]),s=i=undefined}),"script"}),support.createHTMLDocument=function(){var e=document.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),jQuery.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||(support.createHTMLDocument?document.implementation.createHTMLDocument(""):document);var r=rsingleTag.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=buildFragment([e],t,i),i&&i.length&&jQuery(i).remove(),jQuery.merge([],r.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(e,t,n){if(typeof e!="string"&&_load)return _load.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>-1&&(r=jQuery.trim(e.slice(u)),e=e.slice(0,u)),jQuery.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(i="POST"),o.length>0&&jQuery.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?jQuery("<div>").append(jQuery.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(o,s||[e.responseText,t,e])})}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){jQuery.fn[t]=function(e){return this.on(t,e)}}),jQuery.expr.filters.animated=function(e){return jQuery.grep(jQuery.timers,function(t){return e===t.elem}).length},jQuery.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=jQuery.css(e,"position"),c=jQuery(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=jQuery.css(e,"top"),a=jQuery.css(e,"left"),f=(l==="absolute"||l==="fixed")&&(s+a).indexOf("auto")>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),jQuery.isFunction(t)&&(t=t.call(e,n,jQuery.extend({},u))),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},jQuery.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){jQuery.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},s=r&&r.ownerDocument;if(!s)return;return t=s.documentElement,jQuery.contains(t,r)?(i=r.getBoundingClientRect(),n=getWindow(s),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(!this[0])return;var e,t,n=this[0],r={top:0,left:0};return jQuery.css(n,"position")==="fixed"?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),jQuery.nodeName(e[0],"html")||(r=e.offset()),r.top+=jQuery.css(e[0],"borderTopWidth",!0),r.left+=jQuery.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-jQuery.css(n,"marginTop",!0),left:t.left-r.left-jQuery.css(n,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&jQuery.css(e,"position")==="static")e=e.offsetParent;return e||documentElement})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;jQuery.fn[e]=function(r){return access(this,function(e,r,i){var s=getWindow(e);if(i===undefined)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i},e,r,arguments.length)}}),jQuery.each(["top","left"],function(e,t){jQuery.cssHooks[t]=addGetHookIf(support.pixelPosition,function(e,n){if(n)return n=curCSS(e,t),rnumnonpx.test(n)?jQuery(e).position()[t]+"px":n})}),jQuery.each({Height:"height",Width:"width"},function(e,t){jQuery.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){jQuery.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return access(this,function(t,n,r){var i;return jQuery.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?jQuery.css(t,n,o):jQuery.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),jQuery.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(e){return window.$===jQuery&&(window.$=_$),e&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},noGlobal||(window.jQuery=window.$=jQuery),jQuery}),define("lib/common/imgKit/imgKit",["angular","jquery"],function(e,t){e.module("imgKit",[]).directive("imgKit",["$location",function(e){return{template:['<div ng-click="click()" class="img-kit">','<span ng-show="isOn" class="launcher">','<i ng-repeat="( key, url ) in toCanvas" ng-click="launch( key )" class="fa fa-{{ key }}"></i>',"</span>","<ng-transclude></ng-transclude>","</div>"].join(""),replace:!0,transclude:!0,link:function(t,n){t.isOn=!1,t.click=function(){t.isOn=!t.isOn},t.toCanvas={bomb:"bomb"},t.launch=function(n){e.path("/canvas/"+t.toCanvas[n])}}}}]).service("imgData",[function(){this.process=function(e){}}])}),define("lib/dbpedia/dbpedia",["angular","lodash","lib/common/imgKit/imgKit"],function(e,t,n){e.module("dbpedia",["atCommon","imgKit"]).directive("dbpImgHistory",["dbpedia","$compile",function(t,n){return{replace:!0,link:function(r,i){function s(){var s=e.copy(t.img.history);s=s.map(function(e){return"<dbp-key>"+e+"</dbp-key>"}),s[s.length-1]="and "+s[s.length-1],i.html(n(s.join(", "))(r))}s(),r.$watch(function(){return t.img.history},function(e,t){if(e==undefined||e==t)return;s()})}}}]).directive("dbpImgSearch",["dbpedia","spinSvc",function(e,t){return{restrict:"E",replace:!0,scope:{},templateUrl:"lib/dbpedia/bio/input.html",link:function(t,n){t.dbpedia=e,t.run=function(){e.img.http()}}}}]).directive("dbpediaQueryArea",["dbpedia",function(e){return{restrict:"E",replace:!0,template:'<textarea class="dbpedia-query-area" ng-model="search" ng-enter="run()"></textarea>',link:function(t,n){t.search="",t.run=function(){e.query.http(t.search)}}}}]).directive("dbpediaQueryDump",["dbpedia",function(e){return{restrict:"E",replace:!0,scope:{},template:'<pre class="dbpedia-search-dump">{{ output() }}</pre>',link:function(t,n){t.output=function(){return JSON.stringify(e.query.result,"",2)}}}}]).directive("dbpSpecies",["dbpedia",function(e){return{restrict:"E",replace:!0,scope:{},templateUrl:"lib/dbpedia/bio/species.html",link:function(t,n){t.dbpedia=e,t.on=function(){return e.img.result!=null&&e.img.result.length>0&&!e.waiting}}}}]).service("dbpediaQuery",[function(){var e=this;e.img=function(e){return'				PREFIX dbpedia2: <http://dbpedia.org/property/>				PREFIX foaf: <http://xmlns.com/foaf/0.1/>				SELECT	?name, ?kingdom, ?phylum, ?class, ?order, ?family, ?genus, ?species, ?subspecies, ?img, ?abstract				WHERE {					?s	dbpedia2:regnum ?hasValue;						rdfs:label ?name						FILTER regex( ?name, "'+e.search+'", "i" )						FILTER ( langMatches( lang( ?name ), "EN" ))					?animal dbpedia2:name ?name;						foaf:depiction ?img;						dbpedia2:regnum ?kingdom						OPTIONAL { ?animal dbpedia2:ordo ?order . }						OPTIONAL { ?animal dbpedia2:phylum ?phylum . }						OPTIONAL { ?animal dbpedia2:classis ?class . }						OPTIONAL { ?animal dbpedia2:familia ?family . }						OPTIONAL { ?animal dbpedia2:genus ?genus . }						OPTIONAL { ?animal dbpedia2:species ?species . }						OPTIONAL { ?animal dbpedia2:subspecies ?subspecies . }						OPTIONAL {							?animal <http://dbpedia.org/ontology/abstract> ?abstract							FILTER ( langMatches( lang( ?abstract ), "EN" ))						}				}				GROUP BY ?name				LIMIT '+e.limit},e.genus={search:function(e){return'					PREFIX dbpedia2: <http://dbpedia.org/property/>					PREFIX foaf: <http://xmlns.com/foaf/0.1/>					SELECT	?s					WHERE {						?s dbpedia2:genus ?hasValue;							dbpedia2:genus ?name							FILTER regex( ?name, "'+e.name+'", "i" )							FILTER ( langMatches( lang( ?name ), "EN" ))					}					GROUP BY ?name					LIMIT '+e.limit},species:{names:function(e){return'						PREFIX dbpedia2: <http://dbpedia.org/property/>						PREFIX foaf: <http://xmlns.com/foaf/0.1/>						SELECT	?species						WHERE {							?genus dbpedia2:genus ?hasValue;								dbpedia2:genus ?name								FILTER regex( ?name, "'+e.name+'", "i" )								FILTER ( langMatches( lang( ?name ), "EN" ))							?species dbpedia2:genus ?genus						}'},full:function(e){return'						PREFIX dbpedia2: <http://dbpedia.org/property/>						PREFIX foaf: <http://xmlns.com/foaf/0.1/>						SELECT	?name, ?kingdom, ?phylum, ?class, ?order, ?family, ?genus, ?species, ?subspecies, ?img, ?abstract						WHERE {							?s dbpedia2:genus ?hasValue;								dbpedia2:genus ?name								FILTER regex( ?name, "'+e.name+'", "i" )								FILTER ( langMatches( lang( ?name ), "EN" ))							?animal dbpedia2:genus ?s;								foaf:depiction ?img								OPTIONAL { ?animal dbpedia2:regnum ?kingdom . }								OPTIONAL { ?animal dbpedia2:name ?name . }								OPTIONAL { ?animal dbpedia2:ordo ?order . }								OPTIONAL { ?animal dbpedia2:phylum ?phylum . }								OPTIONAL { ?animal dbpedia2:classis ?class . }								OPTIONAL { ?animal dbpedia2:familia ?family . }								OPTIONAL { ?animal dbpedia2:genus ?genus . }								OPTIONAL { ?animal dbpedia2:species ?species . }								OPTIONAL { ?animal dbpedia2:subspecies ?subspecies . }								OPTIONAL {									?animal <http://dbpedia.org/ontology/abstract> ?abstract									FILTER ( langMatches( lang( ?abstract ), "EN" ))								}						}'}}}}]).directive("dbpKey",["dbpedia",function(e){return{restrict:"E",replace:!0,transclude:!0,scope:{},template:'<a href ng-click="click()" ng-transclude></a>',link:function(t,n){t.click=function(){e.img.search=n.text(),e.img.http()}}}}]).service("dbpedia",["$http","$q","dbpediaQuery","spinSvc",function(e,n,r,i){function o(){s.off(2)}var s=i.register("dbpedia-http"),u="http://dbpedia.org/sparql",a=this;a.buildUrl=function(e){return encodeURI(u+"?query="+e+"&format=json")},a.waiting=!1,a.http=function(t){return s.on(),a.waiting=!0,n(function(n,r){e.get(a.buildUrl(t.query)).then(function(e){t.success(e),o(),a.waiting=!1,n(e)},function(e){t.error(e),o(),a.waiting=!1,r(e)})})},a.query={},a.query.result=null,a.query.http=function(e){return a.http({query:e,success:function(e){a.query.result=e},error:function(e){a.query.result=e}})},a.img={},a.img.result=null,a.img.search=null,a.img.history=["ghost","death","gold","rainbow","glass"],a.img.http=function(){return a.http({query:r.img({search:a.img.search,limit:25}),success:function(e){a.img.result=e.data.results.bindings},error:function(e){}}).then(function(){a.img.history=t.union(a.img.history,[a.img.search])},function(){})}}])}),!function(){function i(e){return e&&(e.ownerDocument||e.document||e).documentElement}function s(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function p(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function d(e){return e===null?NaN:+e}function v(e){return!isNaN(e)}function m(e){return{left:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function y(e){return e.length}function w(e){var t=1;while(e*t%1)t*=10;return t}function E(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function S(){this._=Object.create(null)}function N(e){return(e+="")===x||e[0]===T?T+e:e}function C(e){return(e+="")[0]===T?e.slice(1):e}function k(e){return N(e)in this._}function L(e){return(e=N(e))in this._&&delete this._[e]}function A(){var e=[];for(var t in this._)e.push(C(t));return e}function O(){var e=0;for(var t in this._)++e;return e}function M(){for(var e in this._)return!1;return!0}function _(){this._=Object.create(null)}function D(e){return e}function P(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function H(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=B.length;n<r;++n){var i=B[n]+t;if(i in e)return i}}function j(){}function F(){}function I(e){function r(){var n=t,r=-1,i=n.length,s;while(++r<i)(s=n[r].on)&&s.apply(this,arguments);return e}var t=[],n=new S;return r.on=function(r,i){var s=n.get(r),o;return arguments.length<2?s&&s.on:(s&&(s.on=null,t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function q(){e.event.preventDefault()}function R(){var t=e.event,n;while(n=t.sourceEvent)t=n;return t}function U(t){var n=new F,r=0,i=arguments.length;while(++r<i)n[arguments[r]]=I(n);return n.of=function(r,i){return function(s){try{var o=s.sourceEvent=e.event;s.target=t,e.event=s,n[s.type].apply(r,i)}finally{e.event=o}}},n}function X(e){return W(e,K),e}function Q(e){return typeof e=="function"?e:function(){return V(e,this)}}function G(e){return typeof e=="function"?e:function(){return $(e,this)}}function et(t,n){function r(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function s(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=e.ns.qualify(t),n==null?t.local?i:r:typeof n=="function"?t.local?a:u:t.local?o:s}function tt(e){return e.trim().replace(/\s+/g," ")}function nt(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function rt(e){return(e+"").trim().split(/^|\s+/)}function it(e,t){function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}e=rt(e).map(st);var n=e.length;return typeof t=="function"?i:r}function st(e){var t=nt(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",tt(i+" "+e))):n.setAttribute("class",tt(i.replace(t," ")))}}function ot(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return t==null?r:typeof t=="function"?s:i}function ut(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return t==null?n:typeof t=="function"?i:r}function at(t){function n(){var e=this.ownerDocument,n=this.namespaceURI;return n===Y&&e.documentElement.namespaceURI===Y?e.createElement(t):e.createElementNS(n,t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return typeof t=="function"?t:(t=e.ns.qualify(t)).local?r:n}function ft(){var e=this.parentNode;e&&e.removeChild(this)}function lt(e){return{__data__:e}}function ct(e){return function(){return J(this,e)}}function ht(e){return arguments.length||(e=p),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function pt(e,t){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],s=0,o=i.length,u;s<o;s++)(u=i[s])&&t(u,s,n);return e}function dt(e){return W(e,vt),e}function mt(e){var t,n;return function(r,i,s){var o=e[s].update,u=o.length,a;s!=n&&(n=s,t=0),i>=t&&(t=i+1);while(!(a=o[t])&&++t<u);return a}}function gt(t,r,i){function f(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function l(){var e=u(r,n(arguments));f.call(this),this.addEventListener(t,this[s]=e,e.$=i),e._=r}function c(){var n=new RegExp("^__on([^.]+)"+e.requote(t)+"$"),r;for(var i in this)if(r=i.match(n)){var s=this[i];this.removeEventListener(r[1],s,s.$),delete this[i]}}var s="__on"+t,o=t.indexOf("."),u=bt;o>0&&(t=t.slice(0,o));var a=yt.get(t);return a&&(t=a,u=wt),o?r?l:f:r?j:c}function bt(t,n){return function(r){var i=e.event;e.event=r,n[0]=this.__data__;try{t.apply(this,n)}finally{e.event=i}}}function wt(e,t){var n=bt(e,t);return function(e){var t=this,r=e.relatedTarget;(!r||r!==t&&!(r.compareDocumentPosition(t)&8))&&n.call(t,e)}}function xt(t){var n=".dragsuppress-"+ ++St,r="click"+n,o=e.select(s(t)).on("touchmove"+n,q).on("dragstart"+n,q).on("selectstart"+n,q);Et==null&&(Et="onselectstart"in t?!1:H(t.style,"userSelect"));if(Et){var u=i(t).style,a=u[Et];u[Et]="none"}return function(e){o.on(n,null),Et&&(u[Et]=a);if(e){var t=function(){o.on(r,null)};o.on(r,function(){q(),t()},!0),setTimeout(t,0)}}}function Nt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(Tt<0){var o=s(t);if(o.scrollX||o.scrollY){r=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=r[0][0].getScreenCTM();Tt=!u.f&&!u.e,r.remove()}}return Tt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}function Ct(){return e.event.changedTouches[0].identifier}function Ht(e){return e>0?1:e<0?-1:0}function Bt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function jt(e){return e>1?0:e<-1?At:Math.acos(e)}function Ft(e){return e>1?_t:e<-1?-_t:Math.asin(e)}function It(e){return((e=Math.exp(e))-1/e)/2}function qt(e){return((e=Math.exp(e))+1/e)/2}function Rt(e){return((e=Math.exp(2*e))-1)/(e+1)}function Ut(e){return(e=Math.sin(e/2))*e}function Kt(){}function Qt(e,t,n){return this instanceof Qt?void (this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof Qt?new Qt(e.h,e.s,e.l):bn(""+e,wn,Qt):new Qt(e,t,n)}function Yt(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,new dn(o(e+120),o(e),o(e-120))}function Zt(t,n,r){return this instanceof Zt?void (this.h=+t,this.c=+n,this.l=+r):arguments.length<2?t instanceof Zt?new Zt(t.h,t.c,t.l):t instanceof nn?ln(t.l,t.a,t.b):ln((t=En((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Zt(t,n,r)}function tn(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new nn(n,Math.cos(e*=Dt)*t,Math.sin(e)*t)}function nn(e,t,n){return this instanceof nn?void (this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof nn?new nn(e.l,e.a,e.b):e instanceof Zt?tn(e.h,e.c,e.l):En((e=dn(e)).r,e.g,e.b):new nn(e,t,n)}function fn(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=cn(i)*sn,r=cn(r)*on,s=cn(s)*un,new dn(pn(3.2404542*i-1.5371385*r-.4985314*s),pn(-0.969266*i+1.8760108*r+.041556*s),pn(.0556434*i-.2040259*r+1.0572252*s))}function ln(e,t,n){return e>0?new Zt(Math.atan2(n,t)*Pt,Math.sqrt(t*t+n*n),e):new Zt(NaN,NaN,e)}function cn(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function hn(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function pn(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function dn(e,t,n){return this instanceof dn?void (this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof dn?new dn(e.r,e.g,e.b):bn(""+e,dn,Yt):new dn(e,t,n)}function vn(e){return new dn(e>>16,e>>8&255,e&255)}function mn(e){return vn(e)+""}function yn(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function bn(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(xn(u[0]),xn(u[1]),xn(u[2]))}}return(a=Tn.get(e))?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&!isNaN(a=parseInt(e.slice(1),16))&&(e.length===4?(r=(a&3840)>>4,r=r>>4|r,i=a&240,i=i>>4|i,s=a&15,s=s<<4|s):e.length===7&&(r=(a&16711680)>>16,i=(a&65280)>>8,s=a&255)),t(r,i,s))}function wn(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):(o=NaN,u=a>0&&a<1?0:o),new Qt(o,u,a)}function En(e,t,n){e=Sn(e),t=Sn(t),n=Sn(n);var r=hn((.4124564*e+.3575761*t+.1804375*n)/sn),i=hn((.2126729*e+.7151522*t+.072175*n)/on),s=hn((.0193339*e+.119192*t+.9503041*n)/un);return nn(116*i-16,500*(r-i),200*(i-s))}function Sn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xn(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function Nn(e){return typeof e=="function"?e:function(){return e}}function Cn(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=null),kn(t,n,e,r)}}function kn(t,r,i,s){function c(){var e=f.status,t;if(!e&&An(f)||e>=200&&e<300||e===304){try{t=i.call(o,f)}catch(n){u.error.call(o,n);return}u.load.call(o,t)}else u.error.call(o,f)}var o={},u=e.dispatch("beforesend","progress","load","error"),a={},f=new XMLHttpRequest,l=null;return this.XDomainRequest&&!("withCredentials"in f)&&/^(http(s)?:)?\/\//.test(t)&&(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=c:f.onreadystatechange=function(){f.readyState>3&&c()},f.onprogress=function(t){var n=e.event;e.event=t;try{u.progress.call(o,f)}finally{e.event=n}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?a[e]:(t==null?delete a[e]:a[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(r=e==null?null:e+"",o):r},o.responseType=function(e){return arguments.length?(l=e,o):l},o.response=function(e){return i=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(n(arguments)))}}),o.send=function(e,n,i){arguments.length===2&&typeof n=="function"&&(i=n,n=null),f.open(e,t,!0),r!=null&&!("accept"in a)&&(a.accept=r+",*/*");if(f.setRequestHeader)for(var s in a)f.setRequestHeader(s,a[s]);return r!=null&&f.overrideMimeType&&f.overrideMimeType(r),l!=null&&(f.responseType=l),i!=null&&o.on("error",i).on("load",function(e){i(null,e)}),u.beforesend.call(o,f),f.send(n==null?null:n),o},o.abort=function(){return f.abort(),o},e.rebind(o,u,"on"),s==null?o:o.get(Ln(s))}function Ln(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function An(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function Hn(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,s={c:e,t:i,n:null};return Mn?Mn.n=s:On=s,Mn=s,_n||(Dn=clearTimeout(Dn),_n=1,Pn(Bn)),s}function Bn(){var e=jn(),t=Fn()-e;t>24?(isFinite(t)&&(clearTimeout(Dn),Dn=setTimeout(Bn,t)),_n=0):(_n=1,Pn(Bn))}function jn(){var e=Date.now(),t=On;while(t)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Fn(){var e,t=On,n=Infinity;while(t)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:On=t.n;return Mn=e,n}function In(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Rn(e,t){var n=Math.pow(10,b(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Un(t){var n=t.decimal,r=t.thousands,i=t.grouping,s=t.currency,o=i&&r?function(e,t){var n=e.length,s=[],o=0,u=i[0],a=0;while(n>0&&u>0){a+u+1>t&&(u=Math.max(1,t-a)),s.push(e.substring(n-=u,n+u));if((a+=u+1)>t)break;u=i[o=(o+1)%i.length]}return s.reverse().join(r)}:D;return function(t){var r=zn.exec(t),i=r[1]||" ",u=r[2]||">",a=r[3]||"-",f=r[4]||"",l=r[5],c=+r[6],h=r[7],p=r[8],d=r[9],v=1,m="",g="",y=!1,b=!0;p&&(p=+p.substring(1));if(l||i==="0"&&u==="=")l=i="0",u="=";switch(d){case"n":h=!0,d="g";break;case"%":v=100,g="%",d="f";break;case"p":v=100,g="%",d="r";break;case"b":case"o":case"x":case"X":f==="#"&&(m="0"+d.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":v=-1,d="r"}f==="$"&&(m=s[0],g=s[1]),d=="r"&&!p&&(d="g");if(p!=null)if(d=="g")p=Math.max(1,Math.min(21,p));else if(d=="e"||d=="f")p=Math.max(0,Math.min(20,p));d=Wn.get(d)||Xn;var w=l&&h;return function(t){var r=g;if(y&&t%1)return"";var s=t<0||t===0&&1/t<0?(t=-t,"-"):a==="-"?"":a;if(v<0){var f=e.formatPrefix(t,p);t=f.scale(t),r=f.symbol+g}else t*=v;t=d(t,p);var E=t.lastIndexOf("."),S,x;if(E<0){var T=b?t.lastIndexOf("e"):-1;T<0?(S=t,x=""):(S=t.substring(0,T),x=t.substring(T))}else S=t.substring(0,E),x=n+t.substring(E+1);!l&&h&&(S=o(S,Infinity));var N=m.length+S.length+x.length+(w?0:s.length),C=N<c?(new Array(N=c-N+1)).join(i):"";return w&&(S=o(C+S,C.length?c-x.length:Infinity)),s+=m,t=S+x,(u==="<"?s+t+C:u===">"?C+s+t:u==="^"?C.substring(0,N>>=1)+s+t+C.substring(N):s+(w?t:C+t))+r}}}function Xn(e){return e+""}function Jn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Qn(e,t,n){function r(t){var n=e(t),r=s(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new $n(n-1)),1),n}function s(e,n){return t(e=new $n(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)while(o<r)n(o)%s||u.push(new Date(+o)),t(o,1);else while(o<r)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{$n=Jn;var r=new Jn;return r._=e,o(r,t,n)}finally{$n=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=Gn(e);return a.floor=a,a.round=Gn(r),a.ceil=Gn(i),a.offset=Gn(s),a.range=u,e}function Gn(e){return function(t,n){try{$n=Jn;var r=new Jn;return r._=t,e(r,n)._}finally{$n=Date}}}function Yn(t){function l(e){function n(n){var r=[],i=-1,s=0,o,u,a;while(++i<t)if(e.charCodeAt(i)===37){r.push(e.slice(s,i)),(u=Zn[o=e.charAt(++i)])!=null&&(o=e.charAt(++i));if(a=E[o])o=a(n,u==null?o==="e"?" ":"0":u);r.push(o),s=i+1}return r.push(e.slice(s,i)),r.join("")}var t=e.length;return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=c(n,e,t,0);if(r!=t.length)return null;"p"in n&&(n.H=n.H%12+n.p*12);var i=n.Z!=null&&$n!==Jn,s=new(i?Jn:$n);return"j"in n?s.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),s.setFullYear(n.y,0,1),s.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(s.getDay()+5)%7:n.w+n.U*7-(s.getDay()+6)%7)):s.setFullYear(n.y,n.m,n.d),s.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?s._:s},n.toString=function(){return e},n}function c(e,t,n,r){var i,s,o,u=0,a=t.length,f=n.length;while(u<a){if(r>=f)return-1;i=t.charCodeAt(u++);if(i===37){o=t.charAt(u++),s=S[o in Zn?t.charAt(u++):o];if(!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function x(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1}function T(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1}function N(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=w.get(r[0].toLowerCase()),n+r[0].length):-1}function C(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function k(e,t,n){return c(e,E.c.toString(),t,n)}function L(e,t,n){return c(e,E.x.toString(),t,n)}function A(e,t,n){return c(e,E.X.toString(),t,n)}function O(e,t,n){var r=h.get(t.slice(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}var n=t.dateTime,r=t.date,i=t.time,s=t.periods,o=t.days,u=t.shortDays,a=t.months,f=t.shortMonths;l.utc=function(e){function n(e){try{$n=Jn;var n=new $n;return n._=e,t(n)}finally{$n=Date}}var t=l(e);return n.parse=function(e){try{$n=Jn;var n=t.parse(e);return n&&n._}finally{$n=Date}},n.toString=t.toString,n},l.multi=l.utc.multi=Er;var h=e.map(),p=rr(o),d=ir(o),v=rr(u),m=ir(u),g=rr(a),y=ir(a),b=rr(f),w=ir(f);s.forEach(function(e,t){h.set(e.toLowerCase(),t)});var E={a:function(e){return u[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return f[e.getMonth()]},B:function(e){return a[e.getMonth()]},c:l(n),d:function(e,t){return nr(e.getDate(),t,2)},e:function(e,t){return nr(e.getDate(),t,2)},H:function(e,t){return nr(e.getHours(),t,2)},I:function(e,t){return nr(e.getHours()%12||12,t,2)},j:function(e,t){return nr(1+Vn.dayOfYear(e),t,3)},L:function(e,t){return nr(e.getMilliseconds(),t,3)},m:function(e,t){return nr(e.getMonth()+1,t,2)},M:function(e,t){return nr(e.getMinutes(),t,2)},p:function(e){return s[+(e.getHours()>=12)]},S:function(e,t){return nr(e.getSeconds(),t,2)},U:function(e,t){return nr(Vn.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return nr(Vn.mondayOfYear(e),t,2)},x:l(r),X:l(i),y:function(e,t){return nr(e.getFullYear()%100,t,2)},Y:function(e,t){return nr(e.getFullYear()%1e4,t,4)},Z:br,"%":function(){return"%"}},S={a:x,A:T,b:N,B:C,c:k,d:pr,e:pr,H:vr,I:vr,j:dr,L:yr,m:hr,M:mr,p:O,S:gr,U:or,w:sr,W:ur,x:L,X:A,y:fr,Y:ar,Z:lr,"%":wr};return l}function nr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function rr(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function ir(e){var t=new S,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function sr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function or(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function ur(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function ar(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function fr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+2));return r?(e.y=cr(+r[0]),n+r[0].length):-1}function lr(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function cr(e){return e+(e>68?1900:2e3)}function hr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function pr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function dr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function vr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function mr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function gr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function yr(e,t,n){er.lastIndex=0;var r=er.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function br(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=b(t)/60|0,i=b(t)%60;return n+nr(r,"0",2)+nr(i,"0",2)}function wr(e,t,n){tr.lastIndex=0;var r=tr.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Er(e){var t=e.length,n=-1;while(++n<t)e[n][0]=this(e[n][0]);return function(t){var n=0,r=e[n];while(!r[1](t))r=e[++n];return r[0](t)}}function xr(){}function Nr(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function Cr(e,t){e&&Lr.hasOwnProperty(e.type)&&Lr[e.type](e,t)}function Ar(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Or(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)Ar(e[n],t,1);t.polygonEnd()}function Pr(){function s(e,t){e*=Dt,t=t*Dt/2+At/4;var s=e-n,o=s>=0?1:-1,u=o*s,a=Math.cos(t),f=Math.sin(t),l=i*f,c=r*a+l*Math.cos(u),h=l*o*Math.sin(u);_r.add(Math.atan2(h,c)),n=e,r=a,i=f}var e,t,n,r,i;Dr.point=function(o,u){Dr.point=s,n=(e=o)*Dt,r=Math.cos(u=(t=u)*Dt/2+At/4),i=Math.sin(u)},Dr.lineEnd=function(){s(e,t)}}function Hr(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Br(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Fr(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ir(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function qr(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Rr(e){return[Math.atan2(e[1],e[0]),Ft(e[2])]}function Ur(e,t){return b(e[0]-t[0])<kt&&b(e[1]-t[1])<kt}function ti(e,t){e*=Dt;var n=Math.cos(t*=Dt);ni(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ni(e,t,n){++zr,Xr+=(e-Xr)/zr,Vr+=(t-Vr)/zr,$r+=(n-$r)/zr}function ri(){function r(r,i){r*=Dt;var s=Math.cos(i*=Dt),o=s*Math.cos(r),u=s*Math.sin(r),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=t*a-n*u)*f+(f=n*o-e*a)*f+(f=e*u-t*o)*f),e*o+t*u+n*a);Wr+=f,Jr+=f*(e+(e=o)),Kr+=f*(t+(t=u)),Qr+=f*(n+(n=a)),ni(e,t,n)}var e,t,n;ei.point=function(i,s){i*=Dt;var o=Math.cos(s*=Dt);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(s),ei.point=r,ni(e,t,n)}}function ii(){ei.point=ti}function si(){function s(e,t){e*=Dt;var s=Math.cos(t*=Dt),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(t),f=r*a-i*u,l=i*o-n*a,c=n*u-r*o,h=Math.sqrt(f*f+l*l+c*c),p=n*o+r*u+i*a,d=h&&-jt(p)/h,v=Math.atan2(h,p);Gr+=d*f,Yr+=d*l,Zr+=d*c,Wr+=v,Jr+=v*(n+(n=o)),Kr+=v*(r+(r=u)),Qr+=v*(i+(i=a)),ni(n,r,i)}var e,t,n,r,i;ei.point=function(o,u){e=o,t=u,ei.point=s,o*=Dt;var a=Math.cos(u*=Dt);n=a*Math.cos(o),r=a*Math.sin(o),i=Math.sin(u),ni(n,r,i)},ei.lineEnd=function(){s(e,t),ei.lineEnd=ii,ei.point=ti}}function oi(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function ui(){return!0}function ai(e,t,n,r,i){var s=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(Ur(n,r)){i.lineStart();for(var u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}var a=new li(n,e,null,!0),f=new li(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new li(r,e,null,!1),f=new li(r,null,a,!0),a.o=f,s.push(a),o.push(f)}),o.sort(t),fi(s),fi(o);if(!s.length)return;for(var u=0,a=n,f=o.length;u<f;++u)o[u].e=a=!a;var l=s[0],c,h;for(;;){var p=l,d=!0;while(p.v)if((p=p.n)===l)return;c=p.z,i.lineStart();do{p.v=p.o.v=!0;if(p.e){if(d)for(var u=0,f=c.length;u<f;++u)i.point((h=c[u])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((h=c[u])[0],h[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}function fi(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}function li(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ci(t,n,r,i){return function(s,o){function l(e,n){var r=s(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function c(e,t){var n=s(e,t);u.point(n[0],n[1])}function h(){f.point=c,u.lineStart()}function p(){f.point=l,u.lineEnd()}function w(e,t){b.push([e,t]);var n=s(e,t);m.point(n[0],n[1])}function E(){m.lineStart(),b=[]}function S(){w(b[0][0],b[0][1]),m.lineEnd();var e=m.clean(),t=v.buffer(),n,r=t.length;b.pop(),y.push(b),b=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,s;if(r>0){g||(o.polygonStart(),g=!0),o.lineStart();while(++i<r)o.point((s=n[i])[0],s[1]);o.lineEnd()}return}r>1&&e&2&&t.push(t.pop().concat(t.shift())),d.push(t.filter(hi))}var u=n(o),a=s.invert(i[0],i[1]),f={point:l,lineStart:h,lineEnd:p,polygonStart:function(){f.point=w,f.lineStart=E,f.lineEnd=S,d=[],y=[]},polygonEnd:function(){f.point=l,f.lineStart=h,f.lineEnd=p,d=e.merge(d);var t=bi(a,y);d.length?(g||(o.polygonStart(),g=!0),ai(d,di,t,r,o)):t&&(g||(o.polygonStart(),g=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),d=y=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}},d,v=pi(),m=n(v),g=!1,y,b;return f}}function hi(e){return e.length>1}function pi(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:j,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function di(e,t){return((e=e.x)[0]<0?e[1]-_t-kt:_t-e[1])-((t=t.x)[0]<0?t[1]-_t-kt:_t-t[1])}function mi(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?At:-At,a=b(s-t);b(a-At)<kt?(e.point(t,n=(n+o)/2>0?_t:-_t),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&a>=At&&(b(t-r)<kt&&(t-=r*kt),b(s-u)<kt&&(s-=u*kt),n=gi(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function gi(e,t,n,r){var i,s,o=Math.sin(e-n);return b(o)>kt?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function yi(e,t,n,r){var i;if(e==null)i=n*_t,r.point(-At,i),r.point(0,i),r.point(At,i),r.point(At,0),r.point(At,-i),r.point(0,-i),r.point(-At,-i),r.point(-At,0),r.point(-At,i);else if(b(e[0]-t[0])>kt){var s=e[0]<t[0]?At:-At;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function bi(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;_r.reset();for(var u=0,a=t.length;u<a;++u){var f=t[u],l=f.length;if(!l)continue;var c=f[0],h=c[0],p=c[1]/2+At/4,d=Math.sin(p),v=Math.cos(p),m=1;for(;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+At/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>At,N=d*b;_r.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Ot:E;if(T^h>=n^g>=n){var C=jr(Hr(c),Hr(e));qr(C);var k=jr(i,C);qr(k);var L=(T^E>=0?-1:1)*Ft(k[2]);if(r>L||r===L&&(C[0]||C[1]))o+=T^E>=0?1:-1}if(!(m++))break;h=g,d=b,v=w,c=e}}return(s<-kt||s<kt&&_r<0)^o&1}function wi(e){function s(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,f,l;return{lineStart:function(){f=o=!1,l=1},point:function(c,h){var p=[c,h],d,v=s(c,h),m=n?v?0:a(c,h):v?a(c+(c<0?At:-At),h):0;!t&&(f=o=v)&&e.lineStart();if(v!==o){d=u(t,p);if(Ur(t,d)||Ur(p,d))p[0]+=kt,p[1]+=kt,v=s(p[0],p[1])}if(v!==o)l=0,v?(e.lineStart(),d=u(p,t),e.point(d[0],d[1])):(d=u(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(r&&t&&n^v){var g;!(m&i)&&(g=u(p,t,!0))&&(l=0,n?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}v&&(!t||!Ur(t,p))&&e.point(p[0],p[1]),t=p,o=v,i=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return l|(f&&o)<<1}}}function u(e,n,r){var i=Hr(e),s=Hr(n),o=[1,0,0],u=jr(i,s),a=Br(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=t*a/l,h=-t*f/l,p=jr(o,u),d=Ir(o,c),v=Ir(u,h);Fr(d,v);var m=p,g=Br(d,m),y=Br(m,m),w=g*g-y*(Br(d,d)-1);if(w<0)return;var E=Math.sqrt(w),S=Ir(m,(-g-E)/y);Fr(S,d),S=Rr(S);if(!r)return S;var x=e[0],T=n[0],N=e[1],C=n[1],k;T<x&&(k=x,x=T,T=k);var L=T-x,A=b(L-At)<kt,O=A||L<kt;!A&&C<N&&(k=N,N=C,C=k);if(O?A?N+C>0^S[1]<(b(S[0]-x)<kt?N:C):N<=S[1]&&S[1]<=C:L>At^(x<=S[0]&&S[0]<=T)){var M=Ir(m,(-g+E)/y);return Fr(M,d),[S,Rr(M)]}}function a(t,r){var i=n?e:At-e,s=0;return t<-i?s|=1:t>i&&(s|=2),r<-i?s|=4:r>i&&(s|=8),s}var t=Math.cos(e),n=t>0,r=b(t)>kt,i=rs(e,6*Dt);return ci(s,o,i,n?[0,-e]:[-At,e-At])}function Ei(e,t,n,r){return function(i){var s=i.a,o=i.b,u=s.x,a=s.y,f=o.x,l=o.y,c=0,h=1,p=f-u,d=l-a,v;v=e-u;if(!p&&v>0)return;v/=p;if(p<0){if(v<c)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>c&&(c=v)}v=n-u;if(!p&&v<0)return;v/=p;if(p<0){if(v>h)return;v>c&&(c=v)}else if(p>0){if(v<c)return;v<h&&(h=v)}v=t-a;if(!d&&v>0)return;v/=d;if(d<0){if(v<c)return;v<h&&(h=v)}else if(d>0){if(v>h)return;v>c&&(c=v)}v=r-a;if(!d&&v<0)return;v/=d;if(d<0){if(v>h)return;v>c&&(c=v)}else if(d>0){if(v<c)return;v<h&&(h=v)}return c>0&&(i.a={x:u+c*p,y:a+c*d}),h<1&&(i.b={x:u+h*p,y:a+h*d}),i}}function xi(t,n,r,i){function s(e,i){return b(e[0]-t)<kt?i>0?0:3:b(e[0]-r)<kt?i>0?2:1:b(e[1]-n)<kt?i>0?1:0:i>0?3:2}function o(e,t){return u(e.x,t.x)}function u(e,t){var n=s(e,1),r=s(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}return function(a){function m(e){var t=0,n=p.length,r=e[1];for(var i=0;i<n;++i)for(var s=1,o=p[i],u=o.length,a=o[0],f;s<u;++s)f=o[s],a[1]<=r?f[1]>r&&Bt(a,f,e)>0&&++t:f[1]<=r&&Bt(a,f,e)<0&&--t,a=f;return t!==0}function g(e,o,a,f){var l=0,c=0;if(e==null||(l=s(e,a))!==(c=s(o,a))||u(e,o)<0^a>0){do f.point(l===0||l===3?t:r,l>1?i:n);while((l=(l+a+4)%4)!==c)}else f.point(o[0],o[1])}function y(e,s){return t<=e&&e<=r&&n<=s&&s<=i}function b(e,t){y(e,t)&&a.point(e,t)}function L(){v.point=O,p&&p.push(d=[]),C=!0,N=!1,x=T=NaN}function A(){h&&(O(w,E),S&&N&&l.rejoin(),h.push(l.buffer())),v.point=b,N&&a.lineEnd()}function O(e,t){e=Math.max(-Si,Math.min(Si,e)),t=Math.max(-Si,Math.min(Si,t));var n=y(e,t);p&&d.push([e,t]);if(C)w=e,E=t,S=n,C=!1,n&&(a.lineStart(),a.point(e,t));else if(n&&N)a.point(e,t);else{var r={a:{x:x,y:T},b:{x:e,y:t}};c(r)?(N||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),n||a.lineEnd(),k=!1):n&&(a.lineStart(),a.point(e,t),k=!1)}x=e,T=t,N=n}var f=a,l=pi(),c=Ei(t,n,r,i),h,p,d,v={point:b,lineStart:L,lineEnd:A,polygonStart:function(){a=l,h=[],p=[],k=!0},polygonEnd:function(){a=f,h=e.merge(h);var n=m([t,i]),r=k&&n,s=h.length;if(r||s)a.polygonStart(),r&&(a.lineStart(),g(null,null,1,a),a.lineEnd()),s&&ai(h,o,n,g,a),a.polygonEnd();h=p=d=null}},w,E,S,x,T,N,C,k;return v}}function Ti(e){var t=0,n=At/3,r=Ki(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*At/180,n=e[1]*At/180):[t/At*180,n/At*180]},i}function Ni(e,t){function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),s-n*Math.cos(e)]}var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),s=Math.sqrt(i)/r;return o.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/r,Ft((i-(e*e+n*n)*r*r)/(2*r))]},o}function Ai(){function i(e,t){ki+=r*e-n*t,n=e,r=t}var e,t,n,r;Li.point=function(s,o){Li.point=i,e=n=s,t=r=o},Li.lineEnd=function(){i(e,t)}}function Hi(e,t){e<Oi&&(Oi=e),e>_i&&(_i=e),t<Mi&&(Mi=t),t>Di&&(Di=t)}function Bi(){function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=s}function s(e,n){t.push("L",e,",",n)}function o(){n.point=r}function u(){t.push("Z")}var e=ji(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=ji(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};return n}function ji(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Ii(e,t){Xr+=e,Vr+=t,++$r}function qi(){function n(n,r){var i=n-e,s=r-t,o=Math.sqrt(i*i+s*s);Jr+=o*(e+n)/2,Kr+=o*(t+r)/2,Qr+=o,Ii(e=n,t=r)}var e,t;Fi.point=function(r,i){Fi.point=n,Ii(e=r,t=i)}}function Ri(){Fi.point=Ii}function Ui(){function i(e,t){var i=e-n,s=t-r,o=Math.sqrt(i*i+s*s);Jr+=o*(n+e)/2,Kr+=o*(r+t)/2,Qr+=o,o=r*e-n*t,Gr+=o*(n+e),Yr+=o*(r+t),Zr+=o*3,Ii(n=e,r=t)}var e,t,n,r;Fi.point=function(s,o){Fi.point=i,Ii(e=n=s,t=r=o)},Fi.lineEnd=function(){i(e,t)}}function zi(e){function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Ot)}function i(t,r){e.moveTo(t,r),n.point=s}function s(t,n){e.lineTo(t,n)}function o(){n.point=r}function u(){e.closePath()}var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:j};return n}function Wi(e){function i(e){return(r?o:s)(e)}function s(t){return $i(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function o(t){function y(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){h=NaN,g.point=w,t.lineStart()}function w(n,i){var s=Hr([n,i]),o=e(n,i);u(h,p,c,d,v,m,h=o[0],p=o[1],c=n,d=s[0],v=s[1],m=s[2],r,t),t.point(h,p)}function E(){g.point=y,t.lineEnd()}function S(){b(),g.point=x,g.lineEnd=T}function x(e,t){w(n=e,i=t),s=h,o=p,a=d,f=v,l=m,g.point=w}function T(){u(h,p,c,d,v,m,s,o,n,a,f,l,r,t),g.lineEnd=E,E()}var n,i,s,o,a,f,l,c,h,p,d,v,m,g={point:y,lineStart:b,lineEnd:E,polygonStart:function(){t.polygonStart(),g.lineStart=S},polygonEnd:function(){t.polygonEnd(),g.lineStart=b}};return g}function u(r,i,s,o,a,f,l,c,h,p,d,v,m,g){var y=l-r,w=c-i,E=y*y+w*w;if(E>4*t&&m--){var S=o+p,x=a+d,T=f+v,N=Math.sqrt(S*S+x*x+T*T),C=Math.asin(T/=N),k=b(b(T)-1)<kt||b(s-h)<kt?(s+h)/2:Math.atan2(x,S),L=e(k,C),A=L[0],O=L[1],M=A-r,_=O-i,D=w*M-y*_;if(D*D/E>t||b((y*M+w*_)/E-.5)>.3||o*p+a*d+f*v<n)u(r,i,s,o,a,f,A,O,k,S/=N,x/=N,T,m,g),g.point(A,O),u(A,O,k,S,x,T,l,c,h,p,d,v,m,g)}}var t=.5,n=Math.cos(30*Dt),r=16;return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function Xi(e){var t=Wi(function(t,n){return e([t*Pt,n*Pt])});return function(e){return Qi(t(e))}}function Vi(e){this.stream=e}function $i(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Ji(e){return Ki(function(){return e})()}function Ki(t){function E(e){return e=i(e[0]*Dt,e[1]*Dt),[e[0]*o+d,v-e[1]*o]}function S(e){return e=i.invert((e[0]-d)/o,(v-e[1])/o),e&&[e[0]*Pt,e[1]*Pt]}function x(){i=oi(r=Zi(c,h,p),n);var e=n(f,l);return d=u-e[0]*o,v=a+e[1]*o,T()}function T(){return w&&(w.valid=!1,w=null),E}var n,r,i,s=Wi(function(e,t){return e=n(e,t),[e[0]*o+d,v-e[1]*o]}),o=150,u=480,a=250,f=0,l=0,c=0,h=0,p=0,d,v,m=vi,g=D,y=null,b=null,w;return E.stream=function(e){return w&&(w.valid=!1),w=Qi(m(r,s(g(e)))),w.valid=!0,w},E.clipAngle=function(e){return arguments.length?(m=e==null?(y=e,vi):wi((y=+e)*Dt),T()):y},E.clipExtent=function(e){return arguments.length?(b=e,g=e?xi(e[0][0],e[0][1],e[1][0],e[1][1]):D,T()):b},E.scale=function(e){return arguments.length?(o=+e,x()):o},E.translate=function(e){return arguments.length?(u=+e[0],a=+e[1],x()):[u,a]},E.center=function(e){return arguments.length?(f=e[0]%360*Dt,l=e[1]%360*Dt,x()):[f*Pt,l*Pt]},E.rotate=function(e){return arguments.length?(c=e[0]%360*Dt,h=e[1]%360*Dt,p=e.length>2?e[2]%360*Dt:0,x()):[c*Pt,h*Pt,p*Pt]},e.rebind(E,s,"precision"),function(){return n=t.apply(this,arguments),E.invert=n.invert&&S,x()}}function Qi(e){return $i(e,function(t,n){e.point(t*Dt,n*Dt)})}function Gi(e,t){return[e,t]}function Yi(e,t){return[e>At?e-Ot:e<-At?e+Ot:e,t]}function Zi(e,t,n){return e?t||n?oi(ts(e),ns(t,n)):ts(e):t||n?ns(t,n):Yi}function es(e){return function(t,n){return t+=e,[t>At?t-Ot:t<-At?t+Ot:t,n]}}function ts(e){var t=es(e);return t.invert=es(-e),t}function ns(e,t){function o(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*n+u*r;return[Math.atan2(a*i-l*s,u*n-f*r),Ft(l*i+a*s)]}var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),s=Math.sin(t);return o.invert=function(e,t){var o=Math.cos(t),u=Math.cos(e)*o,a=Math.sin(e)*o,f=Math.sin(t),l=f*i-a*s;return[Math.atan2(a*i+f*s,u*n+l*r),Ft(l*n-u*r)]},o}function rs(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;if(i!=null){i=is(n,i),s=is(n,s);if(o>0?i<s:i>s)i+=o*Ot}else i=e+o*Ot,s=e-.5*a;for(var f,l=i;o>0?l>s:l<s;l-=a)u.point((f=Rr([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function is(e,t){var n=Hr(t);n[0]-=e,qr(n);var r=jt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-kt)%(2*Math.PI)}function ss(t,n,r){var i=e.range(t,n-kt,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function os(t,n,r){var i=e.range(t,n-kt,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function us(e){return e.source}function as(e){return e.target}function fs(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(Ut(r-t)+i*o*Ut(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Pt,Math.atan2(o,Math.sqrt(r*r+i*i))*Pt]}:function(){return[e*Pt,t*Pt]};return d.distance=h,d}function hs(){function r(r,i){var s=Math.sin(i*=Dt),o=Math.cos(i),u=b((r*=Dt)-e),a=Math.cos(u);ls+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=n*s-t*o*a)*u),t*s+n*o*a),e=r,t=s,n=o}var e,t,n;cs.point=function(i,s){e=i*Dt,t=Math.sin(s*=Dt),n=Math.cos(s),cs.point=r},cs.lineEnd=function(){cs.point=cs.lineEnd=j}}function ps(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function ms(e,t){function o(e,t){s>0?t<-_t+kt&&(t=-_t+kt):t>_t-kt&&(t=_t-kt);var n=s/Math.pow(r(t),i);return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var n=Math.cos(e),r=function(e){return Math.tan(At/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),s=n*Math.pow(r(e),i)/i;return i?(o.invert=function(e,t){var n=s-t,r=Ht(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(s/r,1/i))-_t]},o):bs}function gs(e,t){function s(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;return b(r)<kt?Gi:(s.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-Ht(r)*Math.sqrt(e*e+n*n)]},s)}function bs(e,t){return[e,Math.log(Math.tan(At/4+t/2))]}function ws(e){var t=Ji(e),n=t.scale,r=t.translate,i=t.clipExtent,s;return t.scale=function(){var e=n.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.translate=function(){var e=r.apply(t,arguments);return e===t?s?t.clipExtent(null):t:e},t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(s=e==null){var u=At*n(),a=r();i([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else s&&(o=null);return o},t.clipExtent(null)}function xs(e,t){return[Math.log(Math.tan(At/4+t/2)),-e]}function Ts(e){return e[0]}function Ns(e){return e[1]}function Cs(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;i++){while(r>1&&Bt(e[n[r-2]],e[n[r-1]],e[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function ks(e,t){return e[0]-t[0]||e[1]-t[1]}function As(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Os(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Ms(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Is(){oo(this),this.edge=this.site=this.circle=null}function qs(e){var t=Hs.pop()||new Is;return t.site=e,t}function Rs(e){Gs(e),Ps.remove(e),Hs.push(e),oo(e)}function Us(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];Rs(e);var a=s;while(a.circle&&b(n-a.circle.x)<kt&&b(r-a.circle.cy)<kt)s=a.P,u.unshift(a),Rs(a),a=s;u.unshift(a),Gs(a);var f=o;while(f.circle&&b(n-f.circle.x)<kt&&b(r-f.circle.cy)<kt)o=f.N,u.push(f),Rs(f),f=o;u.push(f),Gs(f);var l=u.length,c;for(c=1;c<l;++c)f=u[c],a=u[c-1],ro(f.edge,a.site,f.site,i);a=u[0],f=u[l-1],f.edge=to(a.site,f.site,null,i),Qs(a),Qs(f)}function zs(e){var t=e.x,n=e.y,r,i,s,o,u=Ps._;while(u){s=Ws(u,n)-t;if(s>kt)u=u.L;else{o=t-Xs(u,n);if(!(o>kt)){s>-kt?(r=u.P,i=u):o>-kt?(r=u,i=u.N):r=i=u;break}if(!u.R){r=u;break}u=u.R}}var a=qs(e);Ps.insert(r,a);if(!r&&!i)return;if(r===i){Gs(r),i=qs(r.site),Ps.insert(a,i),a.edge=i.edge=to(r.site,a.site),Qs(r),Qs(i);return}if(!i){a.edge=to(r.site,a.site);return}Gs(r),Gs(i);var f=r.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=i.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};ro(i.edge,f,d,w),a.edge=to(f,e,null,w),i.edge=to(e,d,null,w),Qs(r),Qs(i)}function Ws(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function Xs(e,t){var n=e.N;if(n)return Ws(n,t);var r=e.site;return r.y===t?r.x:Infinity}function Vs(e){this.site=e,this.edges=[]}function $s(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],s,o,u,a,f=Ds,l=f.length,c,h,p,d,v,m;while(l--){c=f[l];if(!c||!c.prepare())continue;p=c.edges,d=p.length,h=0;while(h<d){m=p[h].end(),u=m.x,a=m.y,v=p[++h%d].start(),s=v.x,o=v.y;if(b(u-s)>kt||b(a-o)>kt)p.splice(h,0,new io(no(c.site,m,b(u-t)<kt&&i-a>kt?{x:t,y:b(s-t)<kt?o:i}:b(a-i)<kt&&n-u>kt?{x:b(o-i)<kt?s:n,y:i}:b(u-n)<kt&&a-r>kt?{x:n,y:b(s-n)<kt?o:r}:b(a-r)<kt&&u-t>kt?{x:b(o-r)<kt?s:t,y:r}:null),c.site,null)),++d}}}function Js(e,t){return t.angle-e.angle}function Ks(){oo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qs(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,s=n.site;if(r===s)return;var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(h>=-Lt)return;var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=Fs.pop()||new Ks;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;var y=null,b=js._;while(b)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}js.insert(y,g),y||(Bs=g)}function Gs(e){var t=e.circle;t&&(t.P||(Bs=t.N),js.remove(t),Fs.push(t),oo(t),e.circle=null)}function Ys(e){var t=_s,n=Ei(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!Zs(i,e)||!n(i)||b(i.a.x-i.b.x)<kt&&b(i.a.y-i.b.y)<kt)i.a=i.b=null,t.splice(r,1)}}function Zs(e,t){var n=e.b;if(n)return!0;var r=e.a,i=t[0][0],s=t[1][0],o=t[0][1],u=t[1][1],a=e.l,f=e.r,l=a.x,c=a.y,h=f.x,p=f.y,d=(l+h)/2,v=(c+p)/2,m,g;if(p===c){if(d<i||d>=s)return;if(l>h){if(!r)r={x:d,y:o};else if(r.y>=u)return;n={x:d,y:u}}else{if(!r)r={x:d,y:u};else if(r.y<o)return;n={x:d,y:o}}}else{m=(l-h)/(p-c),g=v-m*d;if(m<-1||m>1)if(l>h){if(!r)r={x:(o-g)/m,y:o};else if(r.y>=u)return;n={x:(u-g)/m,y:u}}else{if(!r)r={x:(u-g)/m,y:u};else if(r.y<o)return;n={x:(o-g)/m,y:o}}else if(c<p){if(!r)r={x:i,y:m*i+g};else if(r.x>=s)return;n={x:s,y:m*s+g}}else{if(!r)r={x:s,y:m*s+g};else if(r.x<i)return;n={x:i,y:m*i+g}}}return e.a=r,e.b=n,!0}function eo(e,t){this.l=e,this.r=t,this.a=this.b=null}function to(e,t,n,r){var i=new eo(e,t);return _s.push(i),n&&ro(i,e,t,n),r&&ro(i,t,e,r),Ds[e.i].edges.push(new io(i,e,t)),Ds[t.i].edges.push(new io(i,t,e)),i}function no(e,t,n){var r=new eo(e,null);return r.a=t,r.b=n,_s.push(r),r}function ro(e,t,n,r){!e.a&&!e.b?(e.a=r,e.l=t,e.r=n):e.l===n?e.b=r:e.a=r}function io(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function so(){this._=null}function oo(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function uo(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ao(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function fo(e){while(e.L)e=e.L;return e}function lo(e,t){var n=e.sort(co).pop(),r,i,s;_s=[],Ds=new Array(e.length),Ps=new so,js=new so;for(;;){s=Bs;if(n&&(!s||n.y<s.y||n.y===s.y&&n.x<s.x)){if(n.x!==r||n.y!==i)Ds[n.i]=new Vs(n),zs(n),r=n.x,i=n.y;n=e.pop()}else{if(!s)break;Us(s.arc)}}t&&(Ys(t),$s(t));var o={cells:Ds,edges:_s};return Ps=js=_s=Ds=null,o}function co(e,t){return t.y-e.y||t.x-e.x}function po(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function vo(e){return e.x}function mo(e){return e.y}function go(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function yo(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=(n+i)*.5,u=(r+s)*.5,a=t.nodes;a[0]&&yo(e,a[0],n,r,o,u),a[1]&&yo(e,a[1],o,r,i,u),a[2]&&yo(e,a[2],n,u,o,s),a[3]&&yo(e,a[3],o,u,i,s)}}function bo(e,t,n,r,i,s,o){var u=Infinity,a;return function f(e,l,c,h,p){if(l>s||c>o||h<r||p<i)return;if(d=e.point){var d,v=t-e.x,m=n-e.y,g=v*v+m*m;if(g<u){var y=Math.sqrt(u=g);r=t-y,i=n-y,s=t+y,o=n+y,a=d}}var b=e.nodes,w=(l+h)*.5,E=(c+p)*.5,S=t>=w,x=n>=E;for(var T=x<<1|S,N=T+4;T<N;++T)if(e=b[T&3])switch(T&3){case 0:f(e,l,c,w,E);break;case 1:f(e,w,c,h,E);break;case 2:f(e,l,E,w,p);break;case 3:f(e,w,E,h,p)}}(e,r,i,s,o),a}function wo(t,n){t=e.rgb(t),n=e.rgb(n);var r=t.r,i=t.g,s=t.b,o=n.r-r,u=n.g-i,a=n.b-s;return function(e){return"#"+yn(Math.round(r+o*e))+yn(Math.round(i+u*e))+yn(Math.round(s+a*e))}}function Eo(e,t){var n={},r={},i;for(i in e)i in t?n[i]=Co(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}}function So(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function xo(e,t){var n=To.lastIndex=No.lastIndex=0,r,i,s,o=-1,u=[],a=[];e+="",t+="";while((r=To.exec(e))&&(i=No.exec(t)))(s=i.index)>n&&(s=t.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,a.push({i:o,x:So(r,i)})),n=No.lastIndex;return n<t.length&&(s=t.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n=0,r;n<t;++n)u[(r=a[n]).i]=r.x(e);return u.join("")})}function Co(t,n){var r=e.interpolators.length,i;while(--r>=0&&!(i=e.interpolators[r](t,n)));return i}function ko(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(Co(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}}function Mo(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function _o(e){return function(t){return 1-e(1-t)}}function Do(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Po(e){return e*e}function Ho(e){return e*e*e}function Bo(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function jo(e){return function(t){return Math.pow(t,e)}}function Fo(e){return 1-Math.cos(e*_t)}function Io(e){return Math.pow(2,10*(e-1))}function qo(e){return 1-Math.sqrt(1-e*e)}function Ro(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Ot*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ot/t)}}function Uo(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function zo(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Wo(t,n){t=e.hcl(t),n=e.hcl(n);var r=t.h,i=t.c,s=t.l,o=n.h-r,u=n.c-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.c:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return tn(r+o*e,i+u*e,s+a*e)+""}}function Xo(t,n){t=e.hsl(t),n=e.hsl(n);var r=t.h,i=t.s,s=t.l,o=n.h-r,u=n.s-i,a=n.l-s;return isNaN(u)&&(u=0,i=isNaN(i)?n.s:i),isNaN(o)?(o=0,r=isNaN(r)?n.h:r):o>180?o-=360:o<-180&&(o+=360),function(e){return Yt(r+o*e,i+u*e,s+a*e)+""}}function Vo(t,n){t=e.lab(t),n=e.lab(n);var r=t.l,i=t.a,s=t.b,o=n.l-r,u=n.a-i,a=n.b-s;return function(e){return fn(r+o*e,i+u*e,s+a*e)+""}}function $o(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Jo(e){var t=[e.a,e.b],n=[e.c,e.d],r=Qo(t),i=Ko(t,n),s=Qo(Go(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Pt,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Pt:0}function Ko(e,t){return e[0]*t[0]+e[1]*t[1]}function Qo(e){var t=Math.sqrt(Ko(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Go(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Zo(e){return e.length?e.pop()+",":""}function eu(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:So(e[0],t[0])},{i:i-2,x:So(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function tu(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Zo(n)+"rotate(",null,")")-2,x:So(e,t)})):t&&n.push(Zo(n)+"rotate("+t+")")}function nu(e,t,n,r){e!==t?r.push({i:n.push(Zo(n)+"skewX(",null,")")-2,x:So(e,t)}):t&&n.push(Zo(n)+"skewX("+t+")")}function ru(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Zo(n)+"scale(",null,",",null,")");r.push({i:i-4,x:So(e[0],t[0])},{i:i-2,x:So(e[1],t[1])})}else(t[0]!==1||t[1]!==1)&&n.push(Zo(n)+"scale("+t+")")}function iu(t,n){var r=[],i=[];return t=e.transform(t),n=e.transform(n),eu(t.translate,n.translate,r,i),tu(t.rotate,n.rotate,r,i),nu(t.skew,n.skew,r,i),ru(t.scale,n.scale,r,i),t=n=null,function(e){var t=-1,n=i.length,s;while(++t<n)r[(s=i[t]).i]=s.x(e);return r.join("")}}function su(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function ou(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function uu(e){var t=e.source,n=e.target,r=fu(t,n),i=[t];while(t!==r)t=t.parent,i.push(t);var s=i.length;while(n!==r)i.splice(s,0,n),n=n.parent;return i}function au(e){var t=[],n=e.parent;while(n!=null)t.push(e),e=n,n=n.parent;return t.push(e),t}function fu(e,t){if(e===t)return e;var n=au(e),r=au(t),i=n.pop(),s=r.pop(),o=null;while(i===s)o=i,i=n.pop(),s=r.pop();return o}function lu(e){e.fixed|=2}function cu(e){e.fixed&=-7}function hu(e){e.fixed|=4,e.px=e.x,e.py=e.y}function pu(e){e.fixed&=-5}function du(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var s=e.nodes,o=s.length,u=-1,a;while(++u<o){a=s[u];if(a==null)continue;du(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy}}if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function yu(t,n){return e.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=Tu,t}function bu(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((i=e.children)&&(r=i.length)){var r,i;while(--r>=0)n.push(i[r])}}}function wu(e,t){var n=[e],r=[];while((e=n.pop())!=null){r.push(e);if((o=e.children)&&(s=o.length)){var i=-1,s,o;while(++i<s)n.push(o[i])}}while((e=r.pop())!=null)t(e)}function Eu(e){return e.children}function Su(e){return e.value}function xu(e,t){return t.value-e.value}function Tu(t){return e.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function Cu(e){return e.x}function ku(e){return e.y}function Lu(e,t,n){e.y0=t,e.y=n}function Mu(t){return e.range(t.length)}function _u(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function Du(e){var t=1,n=0,r=e[0][1],i,s=e.length;for(;t<s;++t)(i=e[t][1])>r&&(n=t,r=i);return n}function Pu(e){return e.reduce(Hu,0)}function Hu(e,t){return e+t[1]}function Bu(e,t){return ju(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ju(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];while(++n<=t)s[n]=i*n+r;return s}function Fu(t){return[e.min(t),e.max(t)]}function Iu(e,t){return e.value-t.value}function qu(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ru(e,t){e._pack_next=t,t._pack_prev=e}function Uu(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function zu(e){function p(e){n=Math.min(e.x-e.r,n),r=Math.max(e.x+e.r,r),i=Math.min(e.y-e.r,i),s=Math.max(e.y+e.r,s)}if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,s=-Infinity,o,u,a,f,l,c,h;t.forEach(Wu),o=t[0],o.x=-o.r,o.y=0,p(o);if(h>1){u=t[1],u.x=u.r,u.y=0,p(u);if(h>2){a=t[2],$u(o,u,a),p(a),qu(o,a),o._pack_prev=a,qu(a,u),u=o._pack_next;for(f=3;f<h;f++){$u(o,u,a=t[f]);var d=0,v=1,m=1;for(l=u._pack_next;l!==u;l=l._pack_next,v++)if(Uu(l,a)){d=1;break}if(d==1)for(c=o._pack_prev;c!==l._pack_prev;c=c._pack_prev,m++)if(Uu(c,a))break;d?(v<m||v==m&&u.r<o.r?Ru(o,u=l):Ru(o=c,u),f--):(qu(o,a),u=a,p(a))}}}var g=(n+r)/2,y=(i+s)/2,b=0;for(f=0;f<h;f++)a=t[f],a.x-=g,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,t.forEach(Xu)}function Wu(e){e._pack_next=e._pack_prev=e}function Xu(e){delete e._pack_next,delete e._pack_prev}function Vu(e,t,n,r){var i=e.children;e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r;if(i){var s=-1,o=i.length;while(++s<o)Vu(i[s],t,n,r)}}function $u(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ju(e,t){return e.parent==t.parent?1:2}function Ku(e){var t=e.children;return t.length?t[0]:e.t}function Qu(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function Gu(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Yu(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Zu(e,t,n){return e.a.parent===t.parent?e.a:n}function ea(t){return 1+e.max(t,function(e){return e.y})}function ta(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function na(e){var t=e.children;return t&&t.length?na(t[0]):e}function ra(e){var t=e.children,n;return t&&(n=t.length)?ra(t[n-1]):e}function ia(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function sa(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),s<0&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function oa(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function ua(e){return e.rangeExtent?e.rangeExtent():oa(e.range())}function aa(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function fa(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function la(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ca}function ha(t,n,r,i){var s=[],o=[],u=0,a=Math.min(t.length,n.length)-1;t[a]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());while(++u<=a)s.push(r(t[u-1],t[u])),o.push(i(n[u-1],n[u]));return function(n){var r=e.bisect(t,n,1,a)-1;return o[r](s[r](n))}}function pa(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?ha:aa,a=r?ou:su;return i=o(e,t,a,n),s=o(t,e,a,Co),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate($o)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return ga(e,t)},u.tickFormat=function(t,n){return ya(e,t,n)},u.nice=function(t){return va(e,t),o()},u.copy=function(){return pa(e,t,n,r)},o()}function da(t,n){return e.rebind(t,n,"range","rangeRound","interpolate","clamp")}function va(e,t){return fa(e,la(ma(e,t)[2])),fa(e,la(ma(e,t)[2])),e}function ma(e,t){t==null&&(t=10);var n=oa(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function ga(t,n){return e.range.apply(e,ma(t,n))}function ya(t,n,r){var i=ma(t,n);if(r){var s=zn.exec(r);s.shift();if(s[8]==="s"){var o=e.formatPrefix(Math.max(b(i[0]),b(i[1])));return s[7]||(s[7]="."+wa(o.scale(i[2]))),s[8]="f",r=e.format(s.join("")),function(e){return r(o.scale(e))+o.symbol}}s[7]||(s[7]="."+Ea(s[8],i)),r=s.join("")}else r=",."+wa(i[2])+"f";return e.format(r)}function wa(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Ea(e,t){var n=wa(t[2]);return e in ba?Math.abs(n-wa(Math.max(b(t[0]),b(t[1]))))+ +(e!=="e"):n-(e==="%")*2}function Sa(t,n,r,i){function s(e){return(r?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function o(e){return r?Math.pow(n,e):-Math.pow(n,-e)}function u(e){return t(s(e))}return u.invert=function(e){return o(t.invert(e))},u.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((i=e.map(Number)).map(s)),u):i},u.base=function(e){return arguments.length?(n=+e,t.domain(i.map(s)),u):n},u.nice=function(){var e=fa(i.map(s),r?Math:Ta);return t.domain(e),i=e.map(o),u},u.ticks=function(){var e=oa(i),t=[],u=e[0],a=e[1],f=Math.floor(s(u)),l=Math.ceil(s(a)),c=n%1?2:n;if(isFinite(l-f)){if(r){for(;f<l;f++)for(var h=1;h<c;h++)t.push(o(f)*h);t.push(o(f))}else{t.push(o(f));for(;f++<l;)for(var h=c-1;h>0;h--)t.push(o(f)*h)}for(f=0;t[f]<u;f++);for(l=t.length;t[l-1]>a;l--);t=t.slice(f,l)}return t},u.tickFormat=function(t,r){if(!arguments.length)return xa;arguments.length<2?r=xa:typeof r!="function"&&(r=e.format(r));var i=Math.max(1,n*t/u.ticks().length);return function(e){var t=e/o(Math.round(s(e)));return t*n<n-.5&&(t*=n),t<=i?r(e):""}},u.copy=function(){return Sa(t.copy(),n,r,i)},da(u,t)}function Na(e,t,n){function s(t){return e(r(t))}var r=Ca(t),i=Ca(1/t);return s.invert=function(t){return i(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),s):n},s.ticks=function(e){return ga(n,e)},s.tickFormat=function(e,t){return ya(n,e,t)},s.nice=function(e){return s.domain(va(n,e))},s.exponent=function(o){return arguments.length?(r=Ca(t=o),i=Ca(1/t),e.domain(n.map(r)),s):t},s.copy=function(){return Na(e.copy(),t,n)},da(s,e)}function Ca(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ka(t,n){function o(e){return i[((r.get(e)||(n.t==="range"?r.set(e,t.push(e)):NaN))-1)%i.length]}function u(n,r){return e.range(t.length).map(function(e){return n+r*e})}var r,i,s;return o.domain=function(e){if(!arguments.length)return t;t=[],r=new S;var i=-1,s=e.length,u;while(++i<s)r.has(u=e[i])||r.set(u,t.push(u));return o[n.t].apply(o,n.a)},o.range=function(e){return arguments.length?(i=e,s=0,n={t:"range",a:arguments},o):i},o.rangePoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],f=e[1],l=t.length<2?(a=(a+f)/2,0):(f-a)/(t.length-1+r);return i=u(a+l*r/2,l),s=0,n={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(e,r){arguments.length<2&&(r=0);var a=e[0],f=e[1],l=t.length<2?(a=f=Math.round((a+f)/2),0):(f-a)/(t.length-1+r)|0;return i=u(a+Math.round(l*r/2+(f-a-(t.length-1+r)*l)/2),l),s=0,n={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=(c-l)/(t.length-r+2*a);return i=u(l+h*a,h),f&&i.reverse(),s=h*(1-r),n={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(e,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var f=e[1]<e[0],l=e[f-0],c=e[1-f],h=Math.floor((c-l)/(t.length-r+2*a));return i=u(l+Math.round((c-l-(t.length-r)*h)/2),h),f&&i.reverse(),s=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return s},o.rangeExtent=function(){return oa(n.a[0])},o.copy=function(){return ka(t,n)},o.domain(t)}function _a(t,n){function i(){var i=0,o=n.length;r=[];while(++i<o)r[i-1]=e.quantile(t,i/o);return s}function s(t){if(!isNaN(t=+t))return n[e.bisect(r,t)]}var r;return s.domain=function(e){return arguments.length?(t=e.map(d).filter(v).sort(p),i()):t},s.range=function(e){return arguments.length?(n=e,i()):n},s.quantiles=function(){return r},s.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?r[e-1]:t[0],e<r.length?r[e]:t[t.length-1]]},s.copy=function(){return _a(t,n)},i()}function Da(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/r+e,[t,t+1/r]},s.copy=function(){return Da(e,t,n)},o()}function Pa(t,n){function r(r){if(r<=r)return n[e.bisect(t,r)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(e){return arguments.length?(n=e,r):n},r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},r.copy=function(){return Pa(t,n)},r}function Ha(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return ga(e,t)},t.tickFormat=function(t,n){return ya(e,t,n)},t.copy=function(){return Ha(e)},t}function Ba(){return 0}function Fa(e){return e.innerRadius}function Ia(e){return e.outerRadius}function qa(e){return e.startAngle}function Ra(e){return e.endAngle}function Ua(e){return e&&e.padAngle}function za(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Wa(e,t,n,r,i){var s=e[0]-t[0],o=e[1]-t[1],u=(i?r:-r)/Math.sqrt(s*s+o*o),a=u*o,f=-u*s,l=e[0]+a,c=e[1]+f,h=t[0]+a,p=t[1]+f,d=(l+h)/2,v=(c+p)/2,m=h-l,g=p-c,y=m*m+g*g,b=n-r,w=l*p-h*c,E=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-w*w)),S=(w*g-m*E)/y,x=(-w*m-g*E)/y,T=(w*g+m*E)/y,N=(-w*m+g*E)/y,C=S-d,k=x-v,L=T-d,A=N-v;return C*C+k*k>L*L+A*A&&(S=T,x=N),[[S-a,x-f],[S*n/b,x*n/b]]}function Xa(e){function u(s){function d(){u.push("M",i(e(a),o))}var u=[],a=[],f=-1,l=s.length,c,h=Nn(t),p=Nn(n);while(++f<l)r.call(this,c=s[f],f)?a.push([+h.call(this,c,f),+p.call(this,c,f)]):a.length&&(d(),a=[]);return a.length&&d(),u.length?u.join(""):null}var t=Ts,n=Ns,r=ui,i=$a,s=i.key,o=.7;return u.x=function(e){return arguments.length?(t=e,u):t},u.y=function(e){return arguments.length?(n=e,u):n},u.defined=function(e){return arguments.length?(r=e,u):r},u.interpolate=function(e){return arguments.length?(typeof e=="function"?s=i=e:s=(i=Va.get(e)||$a).key,u):s},u.tension=function(e){return arguments.length?(o=e,u):o},u}function $a(e){return e.length>1?e.join("L"):e+"Z"}function Ja(e){return e.join("L")+"Z"}function Ka(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Qa(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ga(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Ya(e,t){return e.length<4?$a(e):e[1]+tf(e.slice(1,-1),nf(e,t))}function Za(e,t){return e.length<3?Ja(e):e[0]+tf((e.push(e[0]),e),nf([e[e.length-2]].concat(e,[e[1]]),t))}function ef(e,t){return e.length<3?$a(e):e[0]+tf(e,nf(e,t))}function tf(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return $a(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function nf(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function rf(e){if(e.length<3)return $a(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",af(cf,o),",",af(cf,u)];e.push(e[n-1]);while(++t<=n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),hf(a,o,u);return e.pop(),a.push("L",r),a.join("")}function sf(e){if(e.length<4)return $a(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(af(cf,s)+","+af(cf,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),hf(t,s,o);return t.join("")}function of(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[af(cf,o),",",af(cf,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),hf(t,o,u);return t.join("")}function uf(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o)}return rf(e)}function af(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function hf(e,t,n){e.push("C",af(ff,t),",",af(ff,n),",",af(lf,t),",",af(lf,n),",",af(cf,t),",",af(cf,n))}function pf(e,t){return(t[1]-e[1])/(t[0]-e[0])}function df(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=pf(i,s);while(++t<n)r[t]=(o+(o=pf(i=s,s=e[t+1])))/2;return r[t]=o,r}function vf(e){var t=[],n,r,i,s,o=df(e),u=-1,a=e.length-1;while(++u<a)n=pf(e[u],e[u+1]),b(n)<kt?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function mf(e){return e.length<3?$a(e):e[0]+tf(e,vf(e))}function gf(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]-_t,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function yf(e){function c(u){function x(){c.push("M",o(e(p),l),f,a(e(h.reverse()),l),"Z")}var c=[],h=[],p=[],d=-1,v=u.length,m,g=Nn(t),y=Nn(r),b=t===n?function(){return E}:Nn(n),w=r===i?function(){return S}:Nn(i),E,S;while(++d<v)s.call(this,m=u[d],d)?(h.push([E=+g.call(this,m,d),S=+y.call(this,m,d)]),p.push([+b.call(this,m,d),+w.call(this,m,d)])):h.length&&(x(),h=[],p=[]);return h.length&&x(),c.length?c.join(""):null}var t=Ts,n=Ts,r=0,i=Ns,s=ui,o=$a,u=o.key,a=o,f="L",l=.7;return c.x=function(e){return arguments.length?(t=n=e,c):n},c.x0=function(e){return arguments.length?(t=e,c):t},c.x1=function(e){return arguments.length?(n=e,c):n},c.y=function(e){return arguments.length?(r=i=e,c):i},c.y0=function(e){return arguments.length?(r=e,c):r},c.y1=function(e){return arguments.length?(i=e,c):i},c.defined=function(e){return arguments.length?(s=e,c):s},c.interpolate=function(e){return arguments.length?(typeof e=="function"?u=o=e:u=(o=Va.get(e)||$a).key,a=o.reverse||o,f=o.closed?"M":"L",c):u},c.tension=function(e){return arguments.length?(l=e,c):l},c}function bf(e){return e.radius}function wf(e){return[e.x,e.y]}function Ef(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-_t;return[n*Math.cos(r),n*Math.sin(r)]}}function Sf(){return 64}function xf(){return"circle"}function Tf(e){var t=Math.sqrt(e/At);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Af(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Of(e,t,n){return W(e,Mf),e.namespace=t,e.id=n,e}function Hf(e,t,n,r){var i=e.id,s=e.namespace;return pt(e,typeof n=="function"?function(e,o,u){e[s][i].tween.set(t,r(n.call(e,e.__data__,o,u)))}:(n=r(n),function(e){e[s][i].tween.set(t,n)}))}function Bf(e){return e==null&&(e=""),function(){this.textContent=e}}function jf(e){return e==null?"__transition__":"__transition_"+e+"__"}function Ff(e,t,n,r,i){function h(e){var t=o.delay;a.t=t+u;if(t<=e)return p(e-t);a.c=p}function p(n){var i=s.active,h=s[i];h&&(h.timer.c=null,h.timer.t=NaN,--s.count,delete s[i],h.event&&h.event.interrupt.call(e,e.__data__,h.index));for(var p in s)if(+p<r){var v=s[p];v.timer.c=null,v.timer.t=NaN,--s.count,delete s[p]}a.c=d,Hn(function(){return a.c&&d(n||1)&&(a.c=null,a.t=NaN),1},0,u),s.active=r,o.event&&o.event.start.call(e,e.__data__,t),c=[],o.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&c.push(r)}),l=o.ease,f=o.duration}function d(i){var u=i/f,a=l(u),h=c.length;while(h>0)c[--h].call(e,a);if(u>=1)return o.event&&o.event.end.call(e,e.__data__,t),--s.count?delete s[r]:delete e[n],1}var s=e[n]||(e[n]={active:0,count:0}),o=s[r],u,a,f,l,c;o||(u=i.time,a=Hn(h,0,u),o=s[r]={tween:new S,time:u,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++s.count)}function Rf(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Uf(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function Jf(e){return e.toISOString()}function Kf(t,n,r){function i(e){return t(e)}function s(t,r){var i=t[1]-t[0],s=i/r,o=e.bisect(Gf,s);return o==Gf.length?[n.year,ma(t.map(function(e){return e/31536e6}),r)[2]]:o?n[s/Gf[o-1]<Gf[o]/s?o-1:o]:[el,ma(t,r)[2]]}return i.invert=function(e){return Qf(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Qf)},i.nice=function(e,t){function u(n){return!isNaN(n)&&!e.range(n,Qf(+n+1),t).length}var n=i.domain(),r=oa(n),o=e==null?s(r,10):typeof e=="number"&&s(r,e);return o&&(e=o[0],t=o[1]),i.domain(fa(n,t>1?{floor:function(t){while(u(t=e.floor(t)))t=Qf(t-1);return t},ceil:function(t){while(u(t=e.ceil(t)))t=Qf(+t+1);return t}}:e))},i.ticks=function(e,t){var n=oa(i.domain()),r=e==null?s(n,10):typeof e=="number"?s(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],Qf(+n[1]+1),t<1?1:t)},i.tickFormat=function(){return r},i.copy=function(){return Kf(t.copy(),n,r)},da(i,t)}function Qf(e){return new Date(e)}function rl(e){return JSON.parse(e.responseText)}function il(e){var t=r.createRange();return t.selectNode(r.body),t.createContextualFragment(e.responseText)}var e={version:"3.5.16"},t=[].slice,n=function(e){return t.call(e)},r=this.document;if(r)try{n(r.documentElement.childNodes)[0].nodeType}catch(o){n=function(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}}Date.now||(Date.now=function(){return+(new Date)});if(r)try{r.createElement("DIV").style.setProperty("opacity",0,"")}catch(u){var a=this.Element.prototype,f=a.setAttribute,l=a.setAttributeNS,c=this.CSSStyleDeclaration.prototype,h=c.setProperty;a.setAttribute=function(e,t){f.call(this,e,t+"")},a.setAttributeNS=function(e,t,n){l.call(this,e,t,n+"")},c.setProperty=function(e,t,n){h.call(this,e,t+"",n)}}e.ascending=p,e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r)if((s=t.call(e,e[n],n))!=null&&s>=s){i=s;break}while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},e.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r)if((s=t.call(e,e[n],n))!=null&&s>=s){i=s;break}while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},e.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r)if((s=e[n])!=null&&s>=s){i=o=s;break}while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r)if((s=t.call(e,e[n],n))!=null&&s>=s){i=o=s;break}while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},e.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)v(i=+e[s])&&(n+=i);else while(++s<r)v(i=+t.call(e,e[s],s))&&(n+=i);return n},e.mean=function(e,t){var n=0,r=e.length,i,s=-1,o=r;if(arguments.length===1)while(++s<r)v(i=d(e[s]))?n+=i:--o;else while(++s<r)v(i=d(t.call(e,e[s],s)))?n+=i:--o;if(o)return n/o},e.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},e.median=function(t,n){var r=[],i=t.length,s,o=-1;if(arguments.length===1)while(++o<i)v(s=d(t[o]))&&r.push(s);else while(++o<i)v(s=d(n.call(t,t[o],o)))&&r.push(s);if(r.length)return e.quantile(r.sort(p),.5)},e.variance=function(e,t){var n=e.length,r=0,i,s,o=0,u=-1,a=0;if(arguments.length===1)while(++u<n)v(i=d(e[u]))&&(s=i-r,r+=s/++a,o+=s*(i-r));else while(++u<n)v(i=d(t.call(e,e[u],u)))&&(s=i-r,r+=s/++a,o+=s*(i-r));if(a>1)return o/(a-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var g=m(p);e.bisectLeft=g.left,e.bisect=e.bisectRight=g.right,e.bisector=function(e){return m(e.length===1?function(t,n){return p(e(t),n)}:e)},e.shuffle=function(e,t,n){(r=arguments.length)<3&&(n=e.length,r<2&&(t=0));var r=n-t,i,s;while(r)s=Math.random()*r--|0,i=e[r+t],e[r+t]=e[s+t],e[s+t]=i;return e},e.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r},e.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],s=new Array(n<0?0:n);while(t<n)s[t]=[r=i,i=e[++t]];return s},e.transpose=function(t){if(!(o=t.length))return[];for(var n=-1,r=e.min(t,y),i=new Array(r);++n<r;)for(var s=-1,o,u=i[n]=new Array(o);++s<o;)u[s]=t[s][n];return i},e.zip=function(){return e.transpose(arguments)},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.merge=function(e){var t=e.length,n,r=-1,i=0,s,o;while(++r<t)i+=e[r].length;s=new Array(i);while(--t>=0){o=e[t],n=o.length;while(--n>=0)s[--i]=o[n]}return s};var b=Math.abs;e.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=w(b(n)),s=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++s)>t)r.push(o/i);else while((o=e+n*++s)<t)r.push(o/i);return r},e.map=function(e,t){var n=new S;if(e instanceof S)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r=-1,i=e.length,s;if(arguments.length===1)while(++r<i)n.set(r,e[r]);else while(++r<i)n.set(t.call(e,s=e[r],r),s)}else for(var o in e)n.set(o,e[o]);return n};var x="__proto__",T="\0";E(S,{has:k,get:function(e){return this._[N(e)]},set:function(e,t){return this._[N(e)]=t},remove:L,keys:A,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:C(t),value:this._[t]});return e},size:O,empty:M,forEach:function(e){for(var t in this._)e.call(this,C(t),this._[t])}}),e.nest=function(){function o(e,r,u){if(u>=n.length)return s?s.call(t,r):i?r.sort(i):r;var a=-1,f=r.length,l=n[u++],c,h,p,d=new S,v;while(++a<f)(v=d.get(c=l(h=r[a])))?v.push(h):d.set(c,[h]);return e?(h=e(),p=function(t,n){h.set(t,o(e,n,u))}):(h={},p=function(t,n){h[t]=o(e,n,u)}),d.forEach(p),h}function u(e,t){if(t>=n.length)return e;var i=[],s=r[t++];return e.forEach(function(e,n){i.push({key:e,values:u(n,t)})}),s?i.sort(function(e,t){return s(e.key,t.key)}):i}var t={},n=[],r=[],i,s;return t.map=function(e,t){return o(t,e,0)},t.entries=function(t){return u(o(e.map,t,0),0)},t.key=function(e){return n.push(e),t},t.sortKeys=function(e){return r[n.length-1]=e,t},t.sortValues=function(e){return i=e,t},t.rollup=function(e){return s=e,t},t},e.set=function(e){var t=new _;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},E(_,{has:k,add:function(e){return this._[N(e+="")]=!0,e},remove:L,values:A,size:O,empty:M,forEach:function(e){for(var t in this._)e.call(this,C(t))}}),e.behavior={},e.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=P(e,t,t[i]);return e};var B=["webkit","ms","moz","Moz","o","O"];e.dispatch=function(){var e=new F,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=I(e);return e},F.prototype.on=function(e,t){var n=e.indexOf("."),r="";n>=0&&(r=e.slice(n+1),e=e.slice(0,n));if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},e.event=null,e.requote=function(e){return e.replace(z,"\\$&")};var z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,W={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},V=function(e,t){return t.querySelector(e)},$=function(e,t){return t.querySelectorAll(e)},J=function(e,t){var n=e.matches||e[H(e,"matchesSelector")];return J=function(e,t){return n.call(e,t)},J(e,t)};typeof Sizzle=="function"&&(V=function(e,t){return Sizzle(e,t)[0]||null},$=Sizzle,J=Sizzle.matchesSelector),e.selection=function(){return e.select(r.documentElement)};var K=e.selection.prototype=[];K.select=function(e){var t=[],n,r,i,s;e=Q(e);for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a,o)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return X(t)},K.selectAll=function(e){var t=[],r,i;e=G(e);for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a])t.push(r=n(e.call(i,i.__data__,a,s))),r.parentNode=i;return X(t)};var Y="http://www.w3.org/1999/xhtml",Z={svg:"http://www.w3.org/2000/svg",xhtml:Y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:Z,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),Z.hasOwnProperty(n)?{space:Z[n],local:e}:e}},K.attr=function(t,n){if(arguments.length<2){if(typeof t=="string"){var r=this.node();return t=e.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(n in t)this.each(et(n,t[n]));return this}return this.each(et(t,n))},K.classed=function(e,t){if(arguments.length<2){if(typeof e=="string"){var n=this.node(),r=(e=rt(e)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return!1}else{t=n.getAttribute("class");while(++i<r)if(!nt(e[i]).test(t))return!1}return!0}for(t in e)this.each(it(t,e[t]));return this}return this.each(it(e,t))},K.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.each(ot(n,e[n],t));return this}if(r<2){var i=this.node();return s(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(ot(e,t,n))},K.property=function(e,t){if(arguments.length<2){if(typeof e=="string")return this.node()[e];for(t in e)this.each(ut(t,e[t]));return this}return this.each(ut(e,t))},K.text=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},K.html=function(e){return arguments.length?this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},K.append=function(e){return e=at(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},K.insert=function(e,t){return e=at(e),t=Q(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},K.remove=function(){return this.each(ft)},K.data=function(e,t){function o(e,n){var r,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(s),c=new Array(s),h=new Array(i),p,d;if(t){var v=new S,m=new Array(i),g;for(r=-1;++r<i;)if(p=e[r])v.has(g=t.call(p,p.__data__,r))?h[r]=p:v.set(g,p),m[r]=g;for(r=-1;++r<s;)(p=v.get(g=t.call(n,d=n[r],r)))?p!==!0&&(l[r]=p,p.__data__=d):c[r]=lt(d),v.set(g,!0);for(r=-1;++r<i;)r in m&&v.get(m[r])!==!0&&(h[r]=e[r])}else{for(r=-1;++r<o;)p=e[r],d=n[r],p?(p.__data__=d,l[r]=p):c[r]=lt(d);for(;r<s;++r)c[r]=lt(n[r]);for(;r<i;++r)h[r]=e[r]}c.update=l,c.parentNode=l.parentNode=h.parentNode=e.parentNode,u.push(c),a.push(l),f.push(h)}var n=-1,r=this.length,i,s;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r)if(s=i[n])e[n]=s.__data__;return e}var u=dt([]),a=X([]),f=X([]);if(typeof e=="function")while(++n<r)o(i=this[n],e.call(i,i.parentNode.__data__,n));else while(++n<r)o(i=this[n],e);return a.enter=function(){return u},a.exit=function(){return f},a},K.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},K.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=ct(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u,s)&&n.push(i)}return X(t)},K.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},K.sort=function(e){e=ht.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},K.each=function(e){return pt(this,function(t,n,r){e.call(t,t.__data__,n,r)})},K.call=function(e){var t=n(arguments);return e.apply(t[0]=this,t),this},K.empty=function(){return!this.node()},K.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var s=n[r];if(s)return s}return null},K.size=function(){var e=0;return pt(this,function(){++e}),e};var vt=[];e.selection.enter=dt,e.selection.enter.prototype=vt,vt.append=K.append,vt.empty=K.empty,vt.node=K.node,vt.call=K.call,vt.size=K.size,vt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f,u)),r.__data__=o.__data__):n.push(null)}return X(t)},vt.insert=function(e,t){return arguments.length<2&&(t=mt(this)),K.insert.call(this,e,t)},e.select=function(e){var t;return typeof e=="string"?(t=[V(e,r)],t.parentNode=r.documentElement):(t=[e],t.parentNode=i(e)),X([t])},e.selectAll=function(e){var t;return typeof e=="string"?(t=n($(e,r)),t.parentNode=r.documentElement):(t=n(e),t.parentNode=null),X([t])},K.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t=!1);for(n in e)this.each(gt(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(gt(e,t,n))};var yt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});r&&yt.forEach(function(e){"on"+e in r&&yt.remove(e)});var Et,St=0;e.mouse=function(e){return Nt(e,R())};var Tt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;e.touch=function(e,t,n){arguments.length<3&&(n=t,t=R().changedTouches);if(t)for(var r=0,i=t.length,s;r<i;++r)if((s=t[r]).identifier===n)return Nt(e,s)},e.behavior.drag=function(){function o(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function u(r,i,s,o,u){return function(){function b(){var e=i(l,p),t,n;if(!e)return;t=e[0]-y[0],n=e[1]-y[1],h|=t|n,y=e,c({type:"drag",x:e[0]+v[0],y:e[1]+v[1],dx:t,dy:n})}function w(){if(!i(l,p))return;m.on(o+d,null).on(u+d,null),g(h),c({type:"dragend"})}var a=this,f=e.event.target.correspondingElement||e.event.target,l=a.parentNode,c=t.of(a,arguments),h=0,p=r(),d=".drag"+(p==null?"":"-"+p),v,m=e.select(s(f)).on(o+d,b).on(u+d,w),g=xt(f),y=i(l,p);n?(v=n.apply(a,arguments),v=[v.x-y[0],v.y-y[1]]):v=[0,0],c({type:"dragstart"})}}var t=U(o,"drag","dragstart","dragend"),n=null,r=u(j,e.mouse,s,"mousemove","mouseup"),i=u(Ct,e.touch,D,"touchmove","touchend");return o.origin=function(e){return arguments.length?(n=e,o):n},e.rebind(o,t,"on")},e.touches=function(e,t){return arguments.length<2&&(t=R().touches),t?n(t).map(function(t){var n=Nt(e,t);return n.identifier=t.identifier,n}):[]};var kt=1e-6,Lt=kt*kt,At=Math.PI,Ot=2*At,Mt=Ot-kt,_t=At/2,Dt=At/180,Pt=180/At,zt=Math.SQRT2,Wt=2,Xt=4;e.interpolateZoom=function(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],u=t[2],a=s-n,f=o-r,l=a*a+f*f,c,h;if(l<Lt)h=Math.log(u/i)/zt,c=function(e){return[n+e*a,r+e*f,i*Math.exp(zt*e*h)]};else{var p=Math.sqrt(l),d=(u*u-i*i+Xt*l)/(2*i*Wt*p),v=(u*u-i*i-Xt*l)/(2*u*Wt*p),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);h=(g-m)/zt,c=function(e){var t=e*h,s=qt(m),o=i/(Wt*p)*(s*Rt(zt*t+m)-It(m));return[n+o*a,r+o*f,i*s/qt(zt*t+m)]}}return c.duration=h*1e3,c},e.behavior.zoom=function(){function S(e){e.on(c,_).on(Jt+".zoom",P).on("dblclick.zoom",H).on(v,D)}function x(e){return[(e[0]-t.x)/t.k,(e[1]-t.y)/t.k]}function T(e){return[e[0]*t.k+t.x,e[1]*t.k+t.y]}function N(e){t.k=Math.max(a[0],Math.min(a[1],e))}function C(e,n){n=T(n),t.x+=e[0]-n[0],t.y+=e[1]-n[1]}function k(n,r,s,o){n.__chart__={x:t.x,y:t.y,k:t.k},N(Math.pow(2,o)),C(i=r,s),n=e.select(n),f>0&&(n=n.transition().duration(f)),n.call(S.event)}function L(){b&&b.domain(y.range().map(function(e){return(e-t.x)/t.k}).map(y.invert)),E&&E.domain(w.range().map(function(e){return(e-t.y)/t.k}).map(w.invert))}function A(e){l++||e({type:"zoomstart"})}function O(e){L(),e({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function M(e){--l||(e({type:"zoomend"}),i=null)}function _(){function a(){r=1,C(e.mouse(t),o),O(n)}function f(){i.on(h,null).on(p,null),u(r),M(n)}var t=this,n=g.of(t,arguments),r=0,i=e.select(s(t)).on(h,a).on(p,f),o=x(e.mouse(t)),u=xt(t);Lf.call(t),A(n)}function D(){function d(){var r=e.touches(n);return o=t.k,r.forEach(function(e){e.identifier in i&&(i[e.identifier]=x(e))}),r}function y(){var r=e.event.target;e.select(r).on(a,b).on(f,w),l.push(r);var o=e.event.changedTouches;for(var u=0,c=o.length;u<c;++u)i[o[u].identifier]=null;var h=d(),p=Date.now();if(h.length===1){if(p-m<500){var v=h[0];k(n,v,i[v.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),q()}m=p}else if(h.length>1){var v=h[0],g=h[1],y=v[0]-g[0],E=v[1]-g[1];s=y*y+E*E}}function b(){var t=e.touches(n),u,a,f,l;Lf.call(n);for(var c=0,h=t.length;c<h;++c,l=null){f=t[c];if(l=i[f.identifier]){if(a)break;u=f,a=l}}if(l){var p=(p=f[0]-u[0])*p+(p=f[1]-u[1])*p,d=s&&Math.sqrt(p/s);u=[(u[0]+f[0])/2,(u[1]+f[1])/2],a=[(a[0]+l[0])/2,(a[1]+l[1])/2],N(d*o)}m=null,C(u,a),O(r)}function w(){if(e.event.touches.length){var t=e.event.changedTouches;for(var n=0,s=t.length;n<s;++n)delete i[t[n].identifier];for(var o in i)return void d()}e.selectAll(l).on(u,null),h.on(c,_).on(v,D),p(),M(r)}var n=this,r=g.of(n,arguments),i={},s=0,o,u=".zoom-"+e.event.changedTouches[0].identifier,a="touchmove"+u,f="touchend"+u,l=[],h=e.select(n),p=xt(n);y(),A(r),h.on(c,null).on(v,y)}function P(){var r=g.of(this,arguments);d?clearTimeout(d):(Lf.call(this),n=x(i=o||e.mouse(this)),A(r)),d=setTimeout(function(){d=null,M(r)},50),q(),N(Math.pow(2,$t()*.002)*t.k),C(i,n),O(r)}function H(){var n=e.mouse(this),r=Math.log(t.k)/Math.LN2;k(this,n,x(n),e.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}var t={x:0,y:0,k:1},n,i,o,u=[960,500],a=Vt,f=250,l=0,c="mousedown.zoom",h="mousemove.zoom",p="mouseup.zoom",d,v="touchstart.zoom",m,g=U(S,"zoomstart","zoom","zoomend"),y,b,w,E;return Jt||(Jt="onwheel"in r?($t=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?($t=function(){return e.event.wheelDelta},"mousewheel"):($t=function(){return-e.event.detail},"MozMousePixelScroll")),S.event=function(n){n.each(function(){var n=g.of(this,arguments),r=t;Df?e.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},A(n)}).tween("zoom:zoom",function(){var s=u[0],o=u[1],a=i?i[0]:s/2,f=i?i[1]:o/2,l=e.interpolateZoom([(a-t.x)/t.k,(f-t.y)/t.k,s/t.k],[(a-r.x)/r.k,(f-r.y)/r.k,s/r.k]);return function(e){var r=l(e),i=s/r[2];this.__chart__=t={x:a-r[0]*i,y:f-r[1]*i,k:i},O(n)}}).each("interrupt.zoom",function(){M(n)}).each("end.zoom",function(){M(n)}):(this.__chart__=t,A(n),O(n),M(n))})},S.translate=function(e){return arguments.length?(t={x:+e[0],y:+e[1],k:t.k},L(),S):[t.x,t.y]},S.scale=function(e){return arguments.length?(t={x:t.x,y:t.y,k:null},N(+e),L(),S):t.k},S.scaleExtent=function(e){return arguments.length?(a=e==null?Vt:[+e[0],+e[1]],S):a},S.center=function(e){return arguments.length?(o=e&&[+e[0],+e[1]],S):o},S.size=function(e){return arguments.length?(u=e&&[+e[0],+e[1]],S):u},S.duration=function(e){return arguments.length?(f=+e,S):f},S.x=function(e){return arguments.length?(b=e,y=e.copy(),t={x:0,y:0,k:1},S):b},S.y=function(e){return arguments.length?(E=e,w=e.copy(),t={x:0,y:0,k:1},S):E},e.rebind(S,g,"on")};var Vt=[0,Infinity],$t,Jt;e.color=Kt,Kt.prototype.toString=function(){return this.rgb()+""},e.hsl=Qt;var Gt=Qt.prototype=new Kt;Gt.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Qt(this.h,this.s,this.l/e)},Gt.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Qt(this.h,this.s,e*this.l)},Gt.rgb=function(){return Yt(this.h,this.s,this.l)},e.hcl=Zt;var en=Zt.prototype=new Kt;en.brighter=function(e){return new Zt(this.h,this.c,Math.min(100,this.l+rn*(arguments.length?e:1)))},en.darker=function(e){return new Zt(this.h,this.c,Math.max(0,this.l-rn*(arguments.length?e:1)))},en.rgb=function(){return tn(this.h,this.c,this.l).rgb()},e.lab=nn;var rn=18,sn=.95047,on=1,un=1.08883,an=nn.prototype=new Kt;an.brighter=function(e){return new nn(Math.min(100,this.l+rn*(arguments.length?e:1)),this.a,this.b)},an.darker=function(e){return new nn(Math.max(0,this.l-rn*(arguments.length?e:1)),this.a,this.b)},an.rgb=function(){return fn(this.l,this.a,this.b)},e.rgb=dn;var gn=dn.prototype=new Kt;gn.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?new dn(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new dn(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e)))},gn.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new dn(e*this.r,e*this.g,e*this.b)},gn.hsl=function(){return wn(this.r,this.g,this.b)},gn.toString=function(){return"#"+yn(this.r)+yn(this.g)+yn(this.b)};var Tn=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Tn.forEach(function(e,t){Tn.set(e,vn(t))}),e.functor=Nn,e.xhr=Cn(D),e.dsv=function(e,t){function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=kn(e,t,n==null?s:o(n),r);return i.row=function(e){return arguments.length?i.response((n=e)==null?s:o(e)):n},i}function s(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function u(t){return t.map(a).join(e)}function a(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);return i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},i.parseRows=function(e,t){function c(){if(u>=o)return i;if(l)return l=!1,n;var t=u;if(e.charCodeAt(t)===34){var s=t;while(s++<o)if(e.charCodeAt(s)===34){if(e.charCodeAt(s+1)!==34)break;++s}u=s+2;var a=e.charCodeAt(s+1);return a===13?(l=!0,e.charCodeAt(s+2)===10&&++u):a===10&&(l=!0),e.slice(t+1,s).replace(/""/g,'"')}while(u<o){var a=e.charCodeAt(u++),f=1;if(a===10)l=!0;else if(a===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(a!==r)continue;return e.slice(t,u-f)}return e.slice(t)}var n={},i={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==i){var h=[];while(f!==n&&f!==i)h.push(f),f=c();if(t&&(h=t(h,a++))==null)continue;s.push(h)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new _,r=[];return t.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(a).join(e)].concat(t.map(function(t){return r.map(function(e){return a(t[e])}).join(e)})).join("\n")},i.formatRows=function(e){return e.map(u).join("\n")},i},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var On,Mn,_n,Dn,Pn=this[H(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};e.timer=function(){Hn.apply(this,arguments)},e.timer.flush=function(){jn(),Fn()},e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var qn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Rn);e.formatPrefix=function(t,n){var r=0;if(t=+t)t<0&&(t*=-1),n&&(t=e.round(t,In(t,n))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3));return qn[8+r/3]};var zn=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Wn=e.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(t,n){return(t=e.round(t,In(t,n))).toFixed(Math.max(0,Math.min(20,In(t*(1+1e-15),n))))}}),Vn=e.time={},$n=Date;Jn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Kn.setUTCDate.apply(this._,arguments)},setDay:function(){Kn.setUTCDay.apply(this._,arguments)},setFullYear:function(){Kn.setUTCFullYear.apply(this._,arguments)},setHours:function(){Kn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Kn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Kn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Kn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Kn.setUTCSeconds.apply(this._,arguments)},setTime:function(){Kn.setTime.apply(this._,arguments)}};var Kn=Date.prototype;Vn.year=Qn(function(e){return e=Vn.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Vn.years=Vn.year.range,Vn.years.utc=Vn.year.utc.range,Vn.day=Qn(function(e){var t=new $n(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Vn.days=Vn.day.range,Vn.days.utc=Vn.day.utc.range,Vn.dayOfYear=function(e){var t=Vn.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Vn[e]=Qn(function(e){return(e=Vn.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=Vn.year(e).getDay();return Math.floor((Vn.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Vn[e+"s"]=n.range,Vn[e+"s"].utc=n.utc.range,Vn[e+"OfYear"]=function(e){var n=Vn.year(e).getDay();return Math.floor((Vn.dayOfYear(e)+(n+t)%7)/7)}}),Vn.week=Vn.sunday,Vn.weeks=Vn.sunday.range,Vn.weeks.utc=Vn.sunday.utc.range,Vn.weekOfYear=Vn.sundayOfYear;var Zn={"-":"",_:" ",0:"0"},er=/^\s*\d+/,tr=/^%/;e.locale=function(e){return{numberFormat:Un(e),timeFormat:Yn(e)}};var Sr=e.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});e.format=Sr.numberFormat,e.geo={},xr.prototype={s:0,t:0,add:function(e){Nr(e,this.t,Tr),Nr(Tr.s,this.s,this),this.s?this.t+=Tr.t:this.s=Tr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Tr=new xr;e.geo.stream=function(e,t){e&&kr.hasOwnProperty(e.type)?kr[e.type](e,t):Cr(e,t)};var kr={Feature:function(e,t){Cr(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)Cr(n[r].geometry,t)}},Lr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Ar(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Ar(n[r],t,0)},Polygon:function(e,t){Or(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Or(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)Cr(n[r],t)}};e.geo.area=function(t){return Mr=0,e.geo.stream(t,Dr),Mr};var Mr,_r=new xr,Dr={sphere:function(){Mr+=4*At},point:j,lineStart:j,lineEnd:j,polygonStart:function(){_r.reset(),Dr.lineStart=Pr},polygonEnd:function(){var e=2*_r;Mr+=e<0?4*At+e:e,Dr.lineStart=Dr.lineEnd=Dr.point=j}};e.geo.bounds=function(){function p(e,s){l.push(c=[t=e,r=e]),s<n&&(n=s),s>i&&(i=s)}function d(e,o){var u=Hr([e*Dt,o*Dt]);if(a){var f=jr(a,u),l=[f[1],-f[0],0],c=jr(l,f);qr(c),c=Rr(c);var h=e-s,d=h>0?1:-1,v=c[0]*Pt*d,m=b(h)>180;if(m^(d*s<v&&v<d*e)){var g=c[1]*Pt;g>i&&(i=g)}else if(v=(v+360)%360-180,m^(d*s<v&&v<d*e)){var g=-c[1]*Pt;g<n&&(n=g)}else o<n&&(n=o),o>i&&(i=o);m?e<s?E(t,e)>E(t,r)&&(r=e):E(e,r)>E(t,r)&&(t=e):r>=t?(e<t&&(t=e),e>r&&(r=e)):e>s?E(t,e)>E(t,r)&&(r=e):E(e,r)>E(t,r)&&(t=e)}else p(e,o);a=u,s=e}function v(){h.point=d}function m(){c[0]=t,c[1]=r,h.point=p,a=null}function g(e,t){if(a){var n=e-s;f+=b(n)>180?n+(n>0?360:-360):n}else o=e,u=t;Dr.point(e,t),d(e,t)}function y(){Dr.lineStart()}function w(){g(o,u),Dr.lineEnd(),b(f)>kt&&(t=-(r=180)),c[0]=t,c[1]=r,a=null}function E(e,t){return(t-=e)<0?t+360:t}function S(e,t){return e[0]-t[0]}function x(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var t,n,r,i,s,o,u,a,f,l,c,h={point:p,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=y,h.lineEnd=w,f=0,Dr.polygonStart()},polygonEnd:function(){Dr.polygonEnd(),h.point=p,h.lineStart=v,h.lineEnd=m,_r<0?(t=-(r=180),n=-(i=90)):f>kt?i=90:f<-kt&&(n=-90),c[0]=t,c[1]=r}};return function(s){i=r=-(t=n=Infinity),l=[],e.geo.stream(s,h);var o=l.length;if(o){l.sort(S);for(var u=1,a=l[0],f,p=[a];u<o;++u)f=l[u],x(f[0],a)||x(f[1],a)?(E(a[0],f[1])>E(a[0],a[1])&&(a[1]=f[1]),E(f[0],a[1])>E(a[0],a[1])&&(a[0]=f[0])):p.push(a=f);var d=-Infinity,v;for(var o=p.length-1,u=0,a=p[o],f;u<=o;a=f,++u)f=p[u],(v=E(a[1],f[0]))>d&&(d=v,t=f[0],r=a[1])}return l=c=null,t===Infinity||n===Infinity?[[NaN,NaN],[NaN,NaN]]:[[t,n],[r,i]]}}(),e.geo.centroid=function(t){zr=Wr=Xr=Vr=$r=Jr=Kr=Qr=Gr=Yr=Zr=0,e.geo.stream(t,ei);var n=Gr,r=Yr,i=Zr,s=n*n+r*r+i*i;if(s<Lt){n=Jr,r=Kr,i=Qr,Wr<kt&&(n=Xr,r=Vr,i=$r),s=n*n+r*r+i*i;if(s<Lt)return[NaN,NaN]}return[Math.atan2(r,n)*Pt,Ft(i/Math.sqrt(s))*Pt]};var zr,Wr,Xr,Vr,$r,Jr,Kr,Qr,Gr,Yr,Zr,ei={sphere:j,point:ti,lineStart:ri,lineEnd:ii,polygonStart:function(){ei.lineStart=si},polygonEnd:function(){ei.lineStart=ri}},vi=ci(ui,mi,yi,[-At,-At/2]),Si=1e9;e.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=xi(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(e.geo.conicEqualArea=function(){return Ti(Ni)}).raw=Ni,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){function f(e){var t=e[0],n=e[1];return i=null,(o(t,n),i)||(u(t,n),i)||a(t,n),i}var t=e.geo.albers(),n=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i,s={point:function(e,t){i=[e,t]}},o,u,a;return f.invert=function(e){var i=t.scale(),s=t.translate(),o=(e[0]-s[0])/i,u=(e[1]-s[1])/i;return(u>=.12&&u<.234&&o>=-0.425&&o<-0.214?n:u>=.166&&u<.234&&o>=-0.214&&o<-0.115?r:t).invert(e)},f.stream=function(e){var i=t.stream(e),s=n.stream(e),o=r.stream(e);return{point:function(e,t){i.point(e,t),s.point(e,t),o.point(e,t)},sphere:function(){i.sphere(),s.sphere(),o.sphere()},lineStart:function(){i.lineStart(),s.lineStart(),o.lineStart()},lineEnd:function(){i.lineEnd(),s.lineEnd(),o.lineEnd()},polygonStart:function(){i.polygonStart(),s.polygonStart(),o.polygonStart()},polygonEnd:function(){i.polygonEnd(),s.polygonEnd(),o.polygonEnd()}}},f.precision=function(e){return arguments.length?(t.precision(e),n.precision(e),r.precision(e),f):t.precision()},f.scale=function(e){return arguments.length?(t.scale(e),n.scale(e*.35),r.scale(e),f.translate(t.translate())):t.scale()},f.translate=function(e){if(!arguments.length)return t.translate();var i=t.scale(),l=+e[0],c=+e[1];return o=t.translate(e).clipExtent([[l-.455*i,c-.238*i],[l+.455*i,c+.238*i]]).stream(s).point,u=n.translate([l-.307*i,c+.201*i]).clipExtent([[l-.425*i+kt,c+.12*i+kt],[l-.214*i-kt,c+.234*i-kt]]).stream(s).point,a=r.translate([l-.205*i,c+.212*i]).clipExtent([[l-.214*i+kt,c+.166*i+kt],[l-.115*i-kt,c+.234*i-kt]]).stream(s).point,f},f.scale(1070)};var Ci,ki,Li={point:j,lineStart:j,lineEnd:j,polygonStart:function(){ki=0,Li.lineStart=Ai},polygonEnd:function(){Li.lineStart=Li.lineEnd=Li.point=j,Ci+=b(ki/2)}},Oi,Mi,_i,Di,Pi={point:Hi,lineStart:j,lineEnd:j,polygonStart:j,polygonEnd:j},Fi={point:Ii,lineStart:qi,lineEnd:Ri,polygonStart:function(){Fi.lineStart=Ui},polygonEnd:function(){Fi.point=Ii,Fi.lineStart=qi,Fi.lineEnd=Ri}};e.geo.path=function(){function u(n){if(n){typeof t=="function"&&s.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=i(s);e.geo.stream(n,o)}return s.result()}function a(){return o=null,u}var t=4.5,n,r,i,s,o;return u.area=function(t){return Ci=0,e.geo.stream(t,i(Li)),Ci},u.centroid=function(t){return Xr=Vr=$r=Jr=Kr=Qr=Gr=Yr=Zr=0,e.geo.stream(t,i(Fi)),Zr?[Gr/Zr,Yr/Zr]:Qr?[Jr/Qr,Kr/Qr]:$r?[Xr/$r,Vr/$r]:[NaN,NaN]},u.bounds=function(t){return _i=Di=-(Oi=Mi=Infinity),e.geo.stream(t,i(Pi)),[[Oi,Mi],[_i,Di]]},u.projection=function(e){return arguments.length?(i=(n=e)?e.stream||Xi(e):D,a()):n},u.context=function(e){return arguments.length?(s=(r=e)==null?new Bi:new zi(e),typeof t!="function"&&s.pointRadius(t),a()):r},u.pointRadius=function(e){return arguments.length?(t=typeof e=="function"?e:(s.pointRadius(+e),+e),u):t},u.projection(e.geo.albersUsa()).context(null)},e.geo.transform=function(e){return{stream:function(t){var n=new Vi(t);for(var r in e)n[r]=e[r];return n}}},Vi.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},e.geo.projection=Ji,e.geo.projectionMutator=Ki,(e.geo.equirectangular=function(){return Ji(Gi)}).raw=Gi.invert=Gi,e.geo.rotation=function(e){function t(t){return t=e(t[0]*Dt,t[1]*Dt),t[0]*=Pt,t[1]*=Pt,t}return e=Zi(e[0]%360*Dt,e[1]*Dt,e.length>2?e[2]*Dt:0),t.invert=function(t){return t=e.invert(t[0]*Dt,t[1]*Dt),t[0]*=Pt,t[1]*=Pt,t},t},Yi.invert=Gi,e.geo.circle=function(){function i(){var t=typeof e=="function"?e.apply(this,arguments):e,n=Zi(-t[0]*Dt,-t[1]*Dt,0).invert,i=[];return r(null,null,1,{point:function(e,t){i.push(e=n(e,t)),e[0]*=Pt,e[1]*=Pt}}),{type:"Polygon",coordinates:[i]}}var e=[0,0],t,n=6,r;return i.origin=function(t){return arguments.length?(e=t,i):e},i.angle=function(e){return arguments.length?(r=rs((t=+e)*Dt,n*Dt),i):t},i.precision=function(e){return arguments.length?(r=rs(t*Dt,(n=+e)*Dt),i):n},i.angle(90)},e.geo.distance=function(e,t){var n=(t[0]-e[0])*Dt,r=e[1]*Dt,i=t[1]*Dt,s=Math.sin(n),o=Math.cos(n),u=Math.sin(r),a=Math.cos(r),f=Math.sin(i),l=Math.cos(i),c;return Math.atan2(Math.sqrt((c=l*s)*c+(c=a*f-u*l*o)*c),u*f+a*l*o)},e.geo.graticule=function(){function y(){return{type:"MultiLineString",coordinates:w()}}function w(){return e.range(Math.ceil(i/c)*c,r,c).map(v).concat(e.range(Math.ceil(a/h)*h,u,h).map(m)).concat(e.range(Math.ceil(n/f)*f,t,f).filter(function(e){return b(e%c)>kt}).map(p)).concat(e.range(Math.ceil(o/l)*l,s,l).filter(function(e){return b(e%h)>kt}).map(d))}var t,n,r,i,s,o,u,a,f=10,l=f,c=90,h=360,p,d,v,m,g=2.5;return y.lines=function(){return w().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(m(u).slice(1),v(r).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],a=+e[0][1],u=+e[1][1],i>r&&(e=i,i=r,r=e),a>u&&(e=a,a=u,u=e),y.precision(g)):[[i,a],[r,u]]},y.minorExtent=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],s=+e[1][1],n>t&&(e=n,n=t,t=e),o>s&&(e=o,o=s,s=e),y.precision(g)):[[n,o],[t,s]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(c=+e[0],h=+e[1],y):[c,h]},y.minorStep=function(e){return arguments.length?(f=+e[0],l=+e[1],y):[f,l]},y.precision=function(e){return arguments.length?(g=+e,p=ss(o,s,90),d=os(n,t,g),v=ss(a,u,90),m=os(i,r,g),y):g},y.majorExtent([[-180,-90+kt],[180,90-kt]]).minorExtent([[-180,-80-kt],[180,80+kt]])},e.geo.greatArc=function(){function s(){return{type:"LineString",coordinates:[n||t.apply(this,arguments),i||r.apply(this,arguments)]}}var t=us,n,r=as,i;return s.distance=function(){return e.geo.distance(n||t.apply(this,arguments),i||r.apply(this,arguments))},s.source=function(e){return arguments.length?(t=e,n=typeof e=="function"?null:e,s):t},s.target=function(e){return arguments.length?(r=e,i=typeof e=="function"?null:e,s):r},s.precision=function(){return arguments.length?s:0},s},e.geo.interpolate=function(e,t){return fs(e[0]*Dt,e[1]*Dt,t[0]*Dt,t[1]*Dt)},e.geo.length=function(t){return ls=0,e.geo.stream(t,cs),ls};var ls,cs={sphere:j,point:j,lineStart:hs,lineEnd:j,polygonStart:j,polygonEnd:j},ds=ps(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(e.geo.azimuthalEqualArea=function(){return Ji(ds)}).raw=ds;var vs=ps(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},D);(e.geo.azimuthalEquidistant=function(){return Ji(vs)}).raw=vs,(e.geo.conicConformal=function(){return Ti(ms)}).raw=ms,(e.geo.conicEquidistant=function(){return Ti(gs)}).raw=gs;var ys=ps(function(e){return 1/e},Math.atan);(e.geo.gnomonic=function(){return Ji(ys)}).raw=ys,bs.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-_t]},(e.geo.mercator=function(){return ws(bs)}).raw=bs;var Es=ps(function(){return 1},Math.asin);(e.geo.orthographic=function(){return Ji(Es)}).raw=Es;var Ss=ps(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(e.geo.stereographic=function(){return Ji(Ss)}).raw=Ss,xs.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-_t]},(e.geo.transverseMercator=function(){var e=ws(xs),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=xs,e.geom={},e.geom.hull=function(e){function r(e){if(e.length<3)return[];var r=Nn(t),i=Nn(n),s,o=e.length,u=[],a=[];for(s=0;s<o;s++)u.push([+r.call(this,e[s],s),+i.call(this,e[s],s),s]);u.sort(ks);for(s=0;s<o;s++)a.push([u[s][0],-u[s][1]]);var f=Cs(u),l=Cs(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(s=f.length-1;s>=0;--s)p.push(e[u[f[s]][2]]);for(s=+c;s<l.length-h;++s)p.push(e[u[l[s]][2]]);return p}var t=Ts,n=Ns;return arguments.length?r(e):(r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r)},e.geom.polygon=function(e){return W(e,Ls),e};var Ls=e.geom.polygon.prototype=[];Ls.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t)n=r,r=this[e],i+=n[1]*r[0]-n[0]*r[1];return i*.5},Ls.centroid=function(e){var t=-1,n=this.length,r=0,i=0,s,o=this[n-1],u;arguments.length||(e=-1/(6*this.area()));while(++t<n)s=o,o=this[t],u=s[0]*o[1]-o[0]*s[1],r+=(s[0]+o[0])*u,i+=(s[1]+o[1])*u;return[r*e,i*e]},Ls.clip=function(e){var t,n=Ms(e),r=-1,i=this.length-Ms(this),s,o,u=this[i-1],a,f,l;while(++r<i){t=e.slice(),e.length=0,a=this[r],f=t[(o=t.length-n)-1],s=-1;while(++s<o)l=t[s],As(l,u,a)?(As(f,u,a)||e.push(Os(f,l,u,a)),e.push(l)):As(f,u,a)&&e.push(Os(f,l,u,a)),f=l;n&&e.push(e[0]),u=a}return e};var _s,Ds,Ps,Hs=[],Bs,js,Fs=[];Vs.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--)n=e[t].edge,(!n.b||!n.a)&&e.splice(t,1);return e.sort(Js),e.length},io.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},so.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=fo(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);t.L=t.R=null,t.U=n,t.C=!0,e=t;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(uo(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ao(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ao(this,n),e=n,n=e.U),n.C=!1,r.C=!0,uo(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,s,o;r?i?s=fo(i):s=r:s=i,t?t.L===e?t.L=s:t.R=s:this._=s,r&&i?(o=s.C,s.C=e.C,s.L=r,r.U=s,s!==i?(t=s.U,s.U=e.U,e=s.R,t.L=e,s.R=i,i.U=s):(s.U=t,t=s,e=s.R)):(o=e.C,e=s),e&&(e.U=t);if(o)return;if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){n=t.R,n.C&&(n.C=!1,t.C=!0,uo(this,t),n=t.R);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C)n.L.C=!1,n.C=!0,ao(this,n),n=t.R;n.C=t.C,t.C=n.R.C=!1,uo(this,t),e=this._;break}}else{n=t.L,n.C&&(n.C=!1,t.C=!0,ao(this,t),n=t.L);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C)n.R.C=!1,n.C=!0,uo(this,n),n=t.L;n.C=t.C,t.C=n.L.C=!1,ao(this,t),e=this._;break}}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}},e.geom.voronoi=function(e){function o(e){var t=new Array(e.length),n=s[0][0],r=s[0][1],i=s[1][0],o=s[1][1];return lo(u(e),s).cells.forEach(function(s,u){var a=s.edges,f=s.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=n&&f.x<=i&&f.y>=r&&f.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];l.point=e[u]}),t}function u(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/kt)*kt,y:Math.round(i(e,t)/kt)*kt,i:t}})}var t=Ts,n=Ns,r=t,i=n,s=ho;return e?o(e):(o.links=function(e){return lo(u(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(e){var t=[];return lo(u(e)).cells.forEach(function(n,r){var i=n.site,s=n.edges.sort(Js),o=-1,u=s.length,a,f,l=s[u-1].edge,c=l.l===i?l.r:l.l;while(++o<u)a=l,f=c,l=s[o].edge,c=l.l===i?l.r:l.l,r<f.i&&r<c.i&&po(i,f,c)<0&&t.push([e[r],e[f.i],e[c.i]])}),t},o.x=function(e){return arguments.length?(r=Nn(t=e),o):t},o.y=function(e){return arguments.length?(i=Nn(n=e),o):n},o.clipExtent=function(e){return arguments.length?(s=e==null?ho:e,o):s===ho?null:s},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):s===ho?null:s&&s[1]},o)};var ho=[[-1e6,-1e6],[1e6,1e6]];e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(e,t,n,r,i){function a(e){function T(e,t,n,r,i,s,o,u){if(isNaN(n)||isNaN(r))return;if(e.leaf){var a=e.x,f=e.y;if(a!=null)if(b(a-n)+b(f-r)<.01)N(e,t,n,r,i,s,o,u);else{var l=e.point;e.x=e.y=e.point=null,N(e,l,a,f,i,s,o,u),N(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else N(e,t,n,r,i,s,o,u)}function N(e,t,n,r,i,s,o,u){var a=(i+o)*.5,f=(s+u)*.5,l=n>=a,c=r>=f,h=c<<1|l;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=go()),l?i=a:o=a,c?s=f:u=f,T(e,t,n,r,i,s,o,u)}var a,f=Nn(s),l=Nn(o),c,h,p,d,v,m,g,y;if(t!=null)v=t,m=n,g=r,y=i;else{g=y=-(v=m=Infinity),c=[],h=[],d=e.length;if(u)for(p=0;p<d;++p)a=e[p],a.x<v&&(v=a.x),a.y<m&&(m=a.y),a.x>g&&(g=a.x),a.y>y&&(y=a.y),c.push(a.x),h.push(a.y);else for(p=0;p<d;++p){var w=+f(a=e[p],p),E=+l(a,p);w<v&&(v=w),E<m&&(m=E),w>g&&(g=w),E>y&&(y=E),c.push(w),h.push(E)}}var S=g-v,x=y-m;S>x?y=m+S:g=v+x;var C=go();C.add=function(e){T(C,e,+f(e,++p),+l(e,p),v,m,g,y)},C.visit=function(e){yo(e,C,v,m,g,y)},C.find=function(e){return bo(C,e[0],e[1],v,m,g,y)},p=-1;if(t==null){while(++p<d)T(C,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(C.add);return c=h=e=a=null,C}var s=Ts,o=Ns,u;return(u=arguments.length)?(s=vo,o=mo,u===3&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(o=e,a):o},a.extent=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):t==null?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(e==null?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):t==null?null:[r-t,i-n]},a)},e.interpolateRgb=wo,e.interpolateObject=Eo,e.interpolateNumber=So,e.interpolateString=xo;var To=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,No=new RegExp(To.source,"g");e.interpolate=Co,e.interpolators=[function(e,t){var n=typeof t;return(n==="string"?Tn.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?wo:xo:t instanceof Kt?wo:Array.isArray(t)?ko:n==="object"&&isNaN(t)?Eo:So)(e,t)}],e.interpolateArray=ko;var Lo=function(){return D},Ao=e.map({linear:Lo,poly:jo,quad:function(){return Po},cubic:function(){return Ho},sin:function(){return Fo},exp:function(){return Io},circle:function(){return qo},elastic:Ro,back:Uo,bounce:function(){return zo}}),Oo=e.map({"in":D,out:_o,"in-out":Do,"out-in":function(e){return Do(_o(e))}});e.ease=function(e){var n=e.indexOf("-"),r=n>=0?e.slice(0,n):e,i=n>=0?e.slice(n+1):"in";return r=Ao.get(r)||Lo,i=Oo.get(i)||D,Mo(i(r.apply(null,t.call(arguments,1))))},e.interpolateHcl=Wo,e.interpolateHsl=Xo,e.interpolateLab=Vo,e.interpolateRound=$o,e.transform=function(t){var n=r.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(e){if(e!=null){n.setAttribute("transform",e);var t=n.transform.baseVal.consolidate()}return new Jo(t?t.matrix:Yo)})(t)},Jo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Yo={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=iu,e.layout={},e.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(uu(e[n]));return t}},e.layout.chord=function(){function l(){var t={},l=[],h=e.range(s),p=[],d,v,m,g,y;n=[],r=[],d=0,g=-1;while(++g<s){v=0,y=-1;while(++y<s)v+=i[g][y];l.push(v),p.push(e.range(s)),d+=v}u&&h.sort(function(e,t){return u(l[e],l[t])}),a&&p.forEach(function(e,t){e.sort(function(e,n){return a(i[t][e],i[t][n])})}),d=(Ot-o*s)/d,v=0,g=-1;while(++g<s){m=v,y=-1;while(++y<s){var b=h[g],w=p[b][y],E=i[b][w],S=v,x=v+=E*d;t[b+"-"+w]={index:b,subindex:w,startAngle:S,endAngle:x,value:E}}r[b]={index:b,startAngle:m,endAngle:v,value:l[b]},v+=o}g=-1;while(++g<s){y=g-1;while(++y<s){var T=t[g+"-"+y],N=t[y+"-"+g];(T.value||N.value)&&n.push(T.value<N.value?{source:N,target:T}:{source:T,target:N})}}f&&c()}function c(){n.sort(function(e,t){return f((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var t={},n,r,i,s,o=0,u,a,f;return t.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,t):i},t.padding=function(e){return arguments.length?(o=e,n=r=null,t):o},t.sortGroups=function(e){return arguments.length?(u=e,n=r=null,t):u},t.sortSubgroups=function(e){return arguments.length?(a=e,n=null,t):a},t.sortChords=function(e){return arguments.length?(f=e,n&&c(),t):f},t.chords=function(){return n||l(),n},t.groups=function(){return r||l(),r},t},e.layout.force=function(){function b(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(u*u/p<a){if(a<c){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&a<c){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function w(n){n.px=e.event.x,n.py=e.event.y,t.resume()}var t={},n=e.dispatch("start","tick","end"),r,i=[1,1],s,o,u=.9,a=vu,f=mu,l=-30,c=gu,h=.1,p=.64,d=[],v=[],m,g,y;return t.tick=function(){if((o*=.99)<.005)return r=null,n.end({type:"end",alpha:o=0}),!0;var t=d.length,s=v.length,a,f,c,p,w,E,S,x,T;for(f=0;f<s;++f){c=v[f],p=c.source,w=c.target,x=w.x-p.x,T=w.y-p.y;if(E=x*x+T*T)E=o*g[f]*((E=Math.sqrt(E))-m[f])/E,x*=E,T*=E,w.x-=x*(S=p.weight+w.weight?p.weight/(p.weight+w.weight):.5),w.y-=T*S,p.x+=x*(S=1-S),p.y+=T*S}if(S=o*h){x=i[0]/2,T=i[1]/2,f=-1;if(S)while(++f<t)c=d[f],c.x+=(x-c.x)*S,c.y+=(T-c.y)*S}if(l){du(a=e.geom.quadtree(d),o,y),f=-1;while(++f<t)(c=d[f]).fixed||a.visit(b(c))}f=-1;while(++f<t)c=d[f],c.fixed?(c.x=c.px,c.y=c.py):(c.x-=(c.px-(c.px=c.x))*u,c.y-=(c.py-(c.py=c.y))*u);n.tick({type:"tick",alpha:o})},t.nodes=function(e){return arguments.length?(d=e,t):d},t.links=function(e){return arguments.length?(v=e,t):v},t.size=function(e){return arguments.length?(i=e,t):i},t.linkDistance=function(e){return arguments.length?(a=typeof e=="function"?e:+e,t):a},t.distance=t.linkDistance,t.linkStrength=function(e){return arguments.length?(f=typeof e=="function"?e:+e,t):f},t.friction=function(e){return arguments.length?(u=+e,t):u},t.charge=function(e){return arguments.length?(l=typeof e=="function"?e:+e,t):l},t.chargeDistance=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.gravity=function(e){return arguments.length?(h=+e,t):h},t.theta=function(e){return arguments.length?(p=e*e,t):Math.sqrt(p)},t.alpha=function(e){return arguments.length?(e=+e,o?e>0?o=e:(r.c=null,r.t=NaN,r=null,n.end({type:"end",alpha:o=0})):e>0&&(n.start({type:"start",alpha:o=e}),r=Hn(t.tick)),t):o},t.start=function(){function h(t,i){if(!u){u=new Array(n);for(a=0;a<n;++a)u[a]=[];for(a=0;a<r;++a){var s=v[a];u[s.source.index].push(s.target),u[s.target.index].push(s.source)}}var o=u[e],a=-1,f=o.length,l;while(++a<f)if(!isNaN(l=o[a][t]))return l;return Math.random()*i}var e,n=d.length,r=v.length,s=i[0],o=i[1],u,c;for(e=0;e<n;++e)(c=d[e]).index=e,c.weight=0;for(e=0;e<r;++e)c=v[e],typeof c.source=="number"&&(c.source=d[c.source]),typeof c.target=="number"&&(c.target=d[c.target]),++c.source.weight,++c.target.weight;for(e=0;e<n;++e)c=d[e],isNaN(c.x)&&(c.x=h("x",s)),isNaN(c.y)&&(c.y=h("y",o)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);m=[];if(typeof a=="function")for(e=0;e<r;++e)m[e]=+a.call(this,v[e],e);else for(e=0;e<r;++e)m[e]=a;g=[];if(typeof f=="function")for(e=0;e<r;++e)g[e]=+f.call(this,v[e],e);else for(e=0;e<r;++e)g[e]=f;y=[];if(typeof l=="function")for(e=0;e<n;++e)y[e]=+l.call(this,d[e],e);else for(e=0;e<n;++e)y[e]=l;return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){s||(s=e.behavior.drag().origin(D).on("dragstart.force",lu).on("drag.force",w).on("dragend.force",cu));if(!arguments.length)return s;this.on("mouseover.force",hu).on("mouseout.force",pu).call(s)},e.rebind(t,n,"on")};var vu=20,mu=1,gu=Infinity;e.layout.hierarchy=function(){function r(i){var s=[i],o=[],u;i.depth=0;while((u=s.pop())!=null){o.push(u);if((f=t.call(r,u,u.depth))&&(a=f.length)){var a,f,l;while(--a>=0)s.push(l=f[a]),l.parent=u,l.depth=u.depth+1;n&&(u.value=0),u.children=f}else n&&(u.value=+n.call(r,u,u.depth)||0),delete u.children}return wu(i,function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)}),o}var e=xu,t=Eu,n=Su;return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(bu(e,function(e){e.children&&(e.value=0)}),wu(e,function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0);if(t=e.parent)t.value+=e.value})),e},r},e.layout.partition=function(){function r(e,t,n,i){var s=e.children;e.x=t,e.y=e.depth*i,e.dx=n,e.dy=i;if(s&&(u=s.length)){var o=-1,u,a,f;n=e.value?n/e.value:0;while(++o<u)r(a=s[o],t,f=a.value*n,i),t+=f}}function i(e){var t=e.children,n=0;if(t&&(s=t.length)){var r=-1,s;while(++r<s)n=Math.max(n,i(t[r]))}return 1+n}function s(e,s){var o=t.call(this,e,s);return r(o[0],0,n[0],n[1]/i(o[0])),o}var t=e.layout.hierarchy(),n=[1,1];return s.size=function(e){return arguments.length?(n=e,s):n},yu(s,t)},e.layout.pie=function(){function o(u){var a=u.length,f=u.map(function(e,n){return+t.call(o,e,n)}),l=+(typeof r=="function"?r.apply(this,arguments):r),c=(typeof i=="function"?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(c)/a,+(typeof s=="function"?s.apply(this,arguments):s)),p=h*(c<0?-1:1),d=e.sum(f),v=d?(c-a*p)/d:0,m=e.range(a),g=[],y;return n!=null&&m.sort(n===Nu?function(e,t){return f[t]-f[e]}:function(e,t){return n(u[e],u[t])}),m.forEach(function(e){g[e]={data:u[e],value:y=f[e],startAngle:l,endAngle:l+=y*v+p,padAngle:h}}),g}var t=Number,n=Nu,r=0,i=Ot,s=0;return o.value=function(e){return arguments.length?(t=e,o):t},o.sort=function(e){return arguments.length?(n=e,o):n},o.startAngle=function(e){return arguments.length?(r=e,o):r},o.endAngle=function(e){return arguments.length?(i=e,o):i},o.padAngle=function(e){return arguments.length?(s=e,o):s},o};var Nu={};e.layout.stack=function(){function u(a,f){if(!(v=a.length))return a;var l=a.map(function(e,n){return t.call(u,e,n)}),c=l.map(function(e){return e.map(function(e,t){return[s.call(u,e,t),o.call(u,e,t)]})}),h=n.call(u,c,f);l=e.permute(l,h),c=e.permute(c,h);var p=r.call(u,c,f),d=l[0].length,v,m,g,y;for(g=0;g<d;++g){i.call(u,l[0][g],y=p[g],c[0][g][1]);for(m=1;m<v;++m)i.call(u,l[m][g],y+=c[m-1][g][1],c[m][g][1])}return a}var t=D,n=Mu,r=_u,i=Lu,s=Cu,o=ku;return u.values=function(e){return arguments.length?(t=e,u):t},u.order=function(e){return arguments.length?(n=typeof e=="function"?e:Au.get(e)||Mu,u):n},u.offset=function(e){return arguments.length?(r=typeof e=="function"?e:Ou.get(e)||_u,u):r},u.x=function(e){return arguments.length?(s=e,u):s},u.y=function(e){return arguments.length?(o=e,u):o},u.out=function(e){return arguments.length?(i=e,u):i},u};var Au=e.map({"inside-out":function(t){var n=t.length,r,i,s=t.map(Du),o=t.map(Pu),u=e.range(n).sort(function(e,t){return s[e]-s[t]}),a=0,f=0,l=[],c=[];for(r=0;r<n;++r)i=u[r],a<f?(a+=o[i],l.push(i)):(f+=o[i],c.push(i));return c.reverse().concat(l)},reverse:function(t){return e.range(t.length).reverse()},"default":Mu}),Ou=e.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,s,o,u,a=[];for(o=0;o<n;++o){for(s=0,u=0;s<t;s++)u+=e[s][o][1];u>i&&(i=u),r.push(u)}for(o=0;o<n;++o)a[o]=(i-r[o])/2;return a},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,s,o,u,a,f,l,c,h,p=[];p[0]=c=h=0;for(s=1;s<r;++s){for(i=0,u=0;i<t;++i)u+=e[i][s][1];for(i=0,a=0,l=n[s][0]-n[s-1][0];i<t;++i){for(o=0,f=(e[i][s][1]-e[i][s-1][1])/(2*l);o<i;++o)f+=(e[o][s][1]-e[o][s-1][1])/l;a+=f*e[i][s][1]}p[s]=c-=u?a/u*l:0,c<h&&(h=c)}for(s=0;s<r;++s)p[s]-=h;return p},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,u=[];for(s=0;s<n;++s){for(i=0,o=0;i<t;i++)o+=e[i][s][1];if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)u[s]=0;return u},zero:_u});e.layout.histogram=function(){function s(s,o){var u=[],a=s.map(n,this),f=r.call(this,a,o),l=i.call(this,f,a,o),c,o=-1,h=a.length,p=l.length-1,d=t?1:1/h,v;while(++o<p)c=u[o]=[],c.dx=l[o+1]-(c.x=l[o]),c.y=0;if(p>0){o=-1;while(++o<h)v=a[o],v>=f[0]&&v<=f[1]&&(c=u[e.bisect(l,v,1,p)-1],c.y+=d,c.push(s[o]))}return u}var t=!0,n=Number,r=Fu,i=Bu;return s.value=function(e){return arguments.length?(n=e,s):n},s.range=function(e){return arguments.length?(r=Nn(e),s):r},s.bins=function(e){return arguments.length?(i=typeof e=="number"?function(t){return ju(t,e)}:Nn(e),s):i},s.frequency=function(e){return arguments.length?(t=!!e,s):t},s},e.layout.pack=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a=r[0],f=r[1],l=i==null?Math.sqrt:typeof i=="function"?i:function(){return i};u.x=u.y=0,wu(u,function(e){e.r=+l(e.value)}),wu(u,zu);if(n){var c=n*(i?1:Math.max(2*u.r/a,2*u.r/f))/2;wu(u,function(e){e.r+=c}),wu(u,zu),wu(u,function(e){e.r-=c})}return Vu(u,a/2,f/2,i?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t=e.layout.hierarchy().sort(Iu),n=0,r=[1,1],i;return s.size=function(e){return arguments.length?(r=e,s):r},s.radius=function(e){return arguments.length?(i=e==null||typeof e=="function"?e:+e,s):i},s.padding=function(e){return arguments.length?(n=+e,s):n},yu(s,t)},e.layout.tree=function(){function s(e,s){var f=t.call(this,e,s),c=f[0],h=o(c);wu(h,u),h.parent.m=-h.z,bu(h,a);if(i)bu(c,l);else{var p=c,d=c,v=c;bu(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=n(p,d)/2-p.x,g=r[0]/(d.x+n(d,p)/2+m),y=r[1]/(v.depth||1);bu(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return f}function o(e){var t={A:null,children:[e]},n=[t],r;while((r=n.pop())!=null)for(var i=r.children,s,o=0,u=i.length;o<u;++o)n.push((i[o]=s={_:i[o],parent:r,children:(s=i[o].children)&&s.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=s);return t.children[0]}function u(e){var t=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(t.length){Yu(e);var s=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+n(e._,i._),e.m=e.z-s):e.z=s}else i&&(e.z=i.z+n(e._,i._));e.parent.A=f(e,i,e.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function f(e,t,r){if(t){var i=e,s=e,o=t,u=i.parent.children[0],a=i.m,f=s.m,l=o.m,c=u.m,h;while(o=Qu(o),i=Ku(i),o&&i)u=Ku(u),s=Qu(s),s.a=e,h=o.z+l-i.z-a+n(o._,i._),h>0&&(Gu(Zu(o,e,r),e,h),a+=h,f+=h),l+=o.m,a+=i.m,c+=u.m,f+=s.m;o&&!Qu(s)&&(s.t=o,s.m+=l-f),i&&!Ku(u)&&(u.t=i,u.m+=a-c,r=e)}return r}function l(e){e.x*=r[0],e.y=e.depth*r[1]}var t=e.layout.hierarchy().sort(null).value(null),n=Ju,r=[1,1],i=null;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null?l:null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)==null?null:l,s):i?r:null},yu(s,t)},e.layout.cluster=function(){function s(e,s){var o=t.call(this,e,s),u=o[0],a,f=0;wu(u,function(e){var t=e.children;t&&t.length?(e.x=ta(t),e.y=ea(t)):(e.x=a?f+=n(e,a):0,e.y=0,a=e)});var l=na(u),c=ra(u),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return wu(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),o}var t=e.layout.hierarchy().sort(null).value(null),n=Ju,r=[1,1],i=!1;return s.separation=function(e){return arguments.length?(n=e,s):n},s.size=function(e){return arguments.length?(i=(r=e)==null,s):i?null:r},s.nodeSize=function(e){return arguments.length?(i=(r=e)!=null,s):i?r:null},yu(s,t)},e.layout.treemap=function(){function l(e,t){var n=-1,r=e.length,i,s;while(++n<r)s=(i=e[n]).value*(t<0?0:t),i.area=isNaN(s)||s<=0?0:s}function c(e){var t=e.children;if(t&&t.length){var n=s(e),r=[],i=t.slice(),o,u=Infinity,f,h=a==="slice"?n.dx:a==="dice"?n.dy:a==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),v;l(i,n.dx*n.dy/e.value),r.area=0;while((v=i.length)>0)r.push(o=i[v-1]),r.area+=o.area,a!=="squarify"||(f=p(r,h))<=u?(i.pop(),u=f):(r.area-=r.pop().area,d(r,h,n,!1),h=Math.min(n.dx,n.dy),r.length=r.area=0,u=Infinity);r.length&&(d(r,h,n,!0),r.length=r.area=0),t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var n=s(e),r=t.slice(),i,o=[];l(r,n.dx*n.dy/e.value),o.area=0;while(i=r.pop())o.push(i),o.area+=i.area,i.z!=null&&(d(o,i.z?n.dx:n.dy,n,!r.length),o.length=o.area=0);t.forEach(h)}}function p(e,t){var n=e.area,r,i=0,s=Infinity,o=-1,u=e.length;while(++o<u){if(!(r=e[o].area))continue;r<s&&(s=r),r>i&&(i=r)}return n*=n,t*=t,n?Math.max(t*i*f/n,n/(t*s*f)):Infinity}function d(e,t,r,i){var s=-1,o=e.length,u=r.x,a=r.y,f=t?n(e.area/t):0,l;if(t==r.dx){if(i||f>r.dy)f=r.dy;while(++s<o)l=e[s],l.x=u,l.y=a,l.dy=f,u+=l.dx=Math.min(r.x+r.dx-u,f?n(l.area/f):0);l.z=!0,l.dx+=r.x+r.dx-u,r.y+=f,r.dy-=f}else{if(i||f>r.dx)f=r.dx;while(++s<o)l=e[s],l.x=u,l.y=a,l.dx=f,a+=l.dy=Math.min(r.y+r.dy-a,f?n(l.area/f):0);l.z=!1,l.dy+=r.y+r.dy-a,r.x+=f,r.dx-=f}}function v(e){var n=u||t(e),i=n[0];return i.x=i.y=0,i.value?(i.dx=r[0],i.dy=r[1]):i.dx=i.dy=0,u&&t.revalue(i),l([i],i.dx*i.dy/i.value),(u?h:c)(i),o&&(u=n),n}var t=e.layout.hierarchy(),n=Math.round,r=[1,1],i=null,s=ia,o=!1,u,a="squarify",f=.5*(1+Math.sqrt(5));return v.size=function(e){return arguments.length?(r=e,v):r},v.padding=function(e){function t(t){var n=e.call(v,t,t.depth);return n==null?ia(t):sa(t,typeof n=="number"?[n,n,n,n]:n)}function n(t){return sa(t,e)}if(!arguments.length)return i;var r;return s=(i=e)==null?ia:(r=typeof e)==="function"?t:r==="number"?(e=[e,e,e,e],n):n,v},v.round=function(e){return arguments.length?(n=e?Math.round:Number,v):n!=Number},v.sticky=function(e){return arguments.length?(o=e,u=null,v):o},v.ratio=function(e){return arguments.length?(f=e,v):f},v.mode=function(e){return arguments.length?(a=e+"",v):a},yu(v,t)},e.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=e.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},e.scale={};var ca={floor:D,ceil:D};e.scale.linear=function(){return pa([0,1],[0,1],Co,!1)};var ba={s:1,g:1,p:1,r:1,e:1};e.scale.log=function(){return Sa(e.scale.linear().domain([0,1]),10,!0,[1,10])};var xa=e.format(".0e"),Ta={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};e.scale.pow=function(){return Na(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return ka([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(La)},e.scale.category20=function(){return e.scale.ordinal().range(Aa)},e.scale.category20b=function(){return e.scale.ordinal().range(Oa)},e.scale.category20c=function(){return e.scale.ordinal().range(Ma)};var La=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(mn),Aa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(mn),Oa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(mn),Ma=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(mn);e.scale.quantile=function(){return _a([],[])},e.scale.quantize=function(){return Da(0,1,[0,1])},e.scale.threshold=function(){return Pa([.5],[0,1])},e.scale.identity=function(){return Ha([0,1])},e.svg={},e.svg.arc=function(){function u(){var u=Math.max(0,+e.apply(this,arguments)),f=Math.max(0,+t.apply(this,arguments)),l=i.apply(this,arguments)-_t,c=s.apply(this,arguments)-_t,h=Math.abs(c-l),p=l>c?0:1;f<u&&(d=f,f=u,u=d);if(h>=Mt)return a(f,p)+(u?a(u,1-p):"")+"Z";var d,v,m,g,y=0,b=0,w,E,S,x,T,N,C,k,L=[];if(g=(+o.apply(this,arguments)||0)/2)m=r===ja?Math.sqrt(u*u+f*f):+r.apply(this,arguments),p||(b*=-1),f&&(b=Ft(m/f*Math.sin(g))),u&&(y=Ft(m/u*Math.sin(g)));if(f){w=f*Math.cos(l+b),E=f*Math.sin(l+b),S=f*Math.cos(c-b),x=f*Math.sin(c-b);var A=Math.abs(c-l-2*b)<=At?0:1;if(b&&za(w,E,S,x)===p^A){var O=(l+c)/2;w=f*Math.cos(O),E=f*Math.sin(O),S=x=null}}else w=E=0;if(u){T=u*Math.cos(c-y),N=u*Math.sin(c-y),C=u*Math.cos(l+y),k=u*Math.sin(l+y);var M=Math.abs(l-c+2*y)<=At?0:1;if(y&&za(T,N,C,k)===1-p^M){var _=(l+c)/2;T=u*Math.cos(_),N=u*Math.sin(_),C=k=null}}else T=N=0;if(h>kt&&(d=Math.min(Math.abs(f-u)/2,+n.apply(this,arguments)))>.001){v=u<f^p?0:1;var D=d,P=d;if(h<At){var H=C==null?[T,N]:S==null?[w,E]:Os([w,E],[C,k],[S,x],[T,N]),B=w-H[0],j=E-H[1],F=S-H[0],I=x-H[1],q=1/Math.sin(Math.acos((B*F+j*I)/(Math.sqrt(B*B+j*j)*Math.sqrt(F*F+I*I)))/2),R=Math.sqrt(H[0]*H[0]+H[1]*H[1]);P=Math.min(d,(u-R)/(q-1)),D=Math.min(d,(f-R)/(q+1))}if(S!=null){var U=Wa(C==null?[T,N]:[C,k],[w,E],f,D,p),z=Wa([S,x],[T,N],f,D,p);d===D?L.push("M",U[0],"A",D,",",D," 0 0,",v," ",U[1],"A",f,",",f," 0 ",1-p^za(U[1][0],U[1][1],z[1][0],z[1][1]),",",p," ",z[1],"A",D,",",D," 0 0,",v," ",z[0]):L.push("M",U[0],"A",D,",",D," 0 1,",v," ",z[0])}else L.push("M",w,",",E);if(C!=null){var W=Wa([w,E],[C,k],u,-P,p),X=Wa([T,N],S==null?[w,E]:[S,x],u,-P,p);d===P?L.push("L",X[0],"A",P,",",P," 0 0,",v," ",X[1],"A",u,",",u," 0 ",p^za(X[1][0],X[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",P,",",P," 0 0,",v," ",W[0]):L.push("L",X[0],"A",P,",",P," 0 0,",v," ",W[0])}else L.push("L",T,",",N)}else L.push("M",w,",",E),S!=null&&L.push("A",f,",",f," 0 ",A,",",p," ",S,",",x),L.push("L",T,",",N),C!=null&&L.push("A",u,",",u," 0 ",M,",",1-p," ",C,",",k);return L.push("Z"),L.join("")}function a(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+ -e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var e=Fa,t=Ia,n=Ba,r=ja,i=qa,s=Ra,o=Ua;return u.innerRadius=function(t){return arguments.length?(e=Nn(t),u):e},u.outerRadius=function(e){return arguments.length?(t=Nn(e),u):t},u.cornerRadius=function(e){return arguments.length?(n=Nn(e),u):n},u.padRadius=function(e){return arguments.length?(r=e==ja?ja:Nn(e),u):r},u.startAngle=function(e){return arguments.length?(i=Nn(e),u):i},u.endAngle=function(e){return arguments.length?(s=Nn(e),u):s},u.padAngle=function(e){return arguments.length?(o=Nn(e),u):o},u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-_t;return[Math.cos(r)*n,Math.sin(r)*n]},u};var ja="auto";e.svg.line=function(){return Xa(D)};var Va=e.map({linear:$a,"linear-closed":Ja,step:Ka,"step-before":Qa,"step-after":Ga,basis:rf,"basis-open":sf,"basis-closed":of,bundle:uf,cardinal:ef,"cardinal-open":Ya,"cardinal-closed":Za,monotone:mf});Va.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ff=[0,2/3,1/3,0],lf=[0,1/3,2/3,0],cf=[0,1/6,2/3,1/6];e.svg.line.radial=function(){var e=Xa(gf);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Qa.reverse=Ga,Ga.reverse=Qa,e.svg.area=function(){return yf(D)},e.svg.area.radial=function(){var e=yf(gf);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},e.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)-_t,l=i.call(e,u,o)-_t;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>At)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=us,t=as,n=bf,r=qa,i=Ra;return s.radius=function(e){return arguments.length?(n=Nn(e),s):n},s.source=function(t){return arguments.length?(e=Nn(t),s):e},s.target=function(e){return arguments.length?(t=Nn(e),s):t},s.startAngle=function(e){return arguments.length?(r=Nn(e),s):r},s.endAngle=function(e){return arguments.length?(i=Nn(e),s):i},s},e.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=us,t=as,n=wf;return r.source=function(t){return arguments.length?(e=Nn(t),r):e},r.target=function(e){return arguments.length?(t=Nn(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),n=wf,r=t.projection;return t.projection=function(e){return arguments.length?r(Ef(n=e)):n},t},e.svg.symbol=function(){function n(n,r){return(Nf.get(e.call(this,n,r))||Tf)(t.call(this,n,r))}var e=xf,t=Sf;return n.type=function(t){return arguments.length?(e=Nn(t),n):e},n.size=function(e){return arguments.length?(t=Nn(e),n):t},n};var Nf=e.map({circle:Tf,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*kf)),n=t*kf;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Cf),n=t*Cf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Cf),n=t*Cf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});e.svg.symbolTypes=Nf.keys();var Cf=Math.sqrt(3),kf=Math.tan(30*Dt);K.transition=function(e){var t=Df||++_f,n=jf(e),r=[],i,s,o=Pf||{time:Date.now(),ease:Bo,delay:0,duration:250};for(var u=-1,a=this.length;++u<a;){r.push(i=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(s=f[l])&&Ff(s,l,n,t,o),i.push(s)}return Of(r,n,t)},K.interrupt=function(e){return this.each(e==null?Lf:Af(jf(e)))};var Lf=Af(jf()),Mf=[],_f=0,Df,Pf;Mf.call=K.call,Mf.empty=K.empty,Mf.node=K.node,Mf.size=K.size,e.transition=function(t,n){return t&&t.transition?Df?t.transition(n):t:e.selection().transition(t)},e.transition.prototype=Mf,Mf.select=function(e){var t=this.id,n=this.namespace,r=[],i,s,o;e=Q(e);for(var u=-1,a=this.length;++u<a;){r.push(i=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(o=f[l])&&(s=e.call(o,o.__data__,l,u))?("__data__"in o&&(s.__data__=o.__data__),Ff(s,l,n,t,o[n][t]),i.push(s)):i.push(null)}return Of(r,n,t)},Mf.selectAll=function(e){var t=this.id,n=this.namespace,r=[],i,s,o,u,a;e=G(e);for(var f=-1,l=this.length;++f<l;)for(var c=this[f],h=-1,p=c.length;++h<p;)if(o=c[h]){a=o[n][t],s=e.call(o,o.__data__,h,f),r.push(i=[]);for(var d=-1,v=s.length;++d<v;)(u=s[d])&&Ff(u,d,n,t,a),i.push(u)}return Of(r,n,t)},Mf.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=ct(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]);for(var r=this[s],u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u,s)&&n.push(i)}return Of(t,this.namespace,this.id)},Mf.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):pt(this,t==null?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Mf.attr=function(t,n){function s(){this.removeAttribute(i)}function o(){this.removeAttributeNS(i.space,i.local)}function u(e){return e==null?s:(e+="",function(){var t=this.getAttribute(i),n;return t!==e&&(n=r(t,e),function(e){this.setAttribute(i,n(e))})})}function a(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(i.space,i.local),n;return t!==e&&(n=r(t,e),function(e){this.setAttributeNS(i.space,i.local,n(e))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r=t=="transform"?iu:Co,i=e.ns.qualify(t);return Hf(this,"attr."+t,n,i.local?a:u)},Mf.attrTween=function(t,n){function i(e,t){var i=n.call(this,e,t,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function s(e,t){var i=n.call(this,e,t,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=e.ns.qualify(t);return this.tween("attr."+t,r.local?s:i)},Mf.style=function(e,t,n){function i(){this.style.removeProperty(e)}function o(t){return t==null?i:(t+="",function(){var r=s(this).getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=Co(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var r=arguments.length;if(r<3){if(typeof e!="string"){r<2&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Hf(this,"style."+e,t,o)},Mf.styleTween=function(e,t,n){function r(r,i){var o=t.call(this,r,i,s(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Mf.text=function(e){return Hf(this,"text",e,Bf)},Mf.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Mf.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:(typeof t!="function"&&(t=e.ease.apply(e,arguments)),pt(this,function(e){e[r][n].ease=t}))},Mf.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:pt(this,typeof e=="function"?function(r,i,s){r[n][t].delay=+e.call(r,r.__data__,i,s)}:(e=+e,function(r){r[n][t].delay=e}))},Mf.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:pt(this,typeof e=="function"?function(r,i,s){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,s))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Mf.each=function(t,n){var r=this.id,i=this.namespace;if(arguments.length<2){var s=Pf,o=Df;try{Df=r,pt(this,function(e,n,s){Pf=e[i][r],t.call(e,e.__data__,n,s)})}finally{Pf=s,Df=o}}else pt(this,function(s){var o=s[i][r];(o.event||(o.event=e.dispatch("start","end","interrupt"))).on(t,n)});return this},Mf.transition=function(){var e=this.id,t=++_f,n=this.namespace,r=[],i,s,o,u;for(var a=0,f=this.length;a<f;a++){r.push(i=[]);for(var s=this[a],l=0,c=s.length;l<c;l++){if(o=s[l])u=o[n][e],Ff(o,l,n,t,{time:u.time,ease:u.ease,delay:u.delay+u.duration,duration:u.duration});i.push(o)}}return Of(r,n,t)},e.svg.axis=function(){function l(n){n.each(function(){var n=e.select(this),l=this.__chart__||t,c=this.__chart__=t.copy(),h=a==null?c.ticks?c.ticks.apply(c,u):c.domain():a,p=f==null?c.tickFormat?c.tickFormat.apply(c,u):D:f,d=n.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),m=e.transition(d.exit()).style("opacity",kt).remove(),g=e.transition(d.order()).style("opacity",1),y=Math.max(i,0)+o,b,w=ua(c),E=n.selectAll(".domain").data([0]),S=(E.enter().append("path").attr("class","domain"),e.transition(E));v.append("line"),v.append("text");var x=v.select("line"),T=g.select("line"),N=d.select("text").text(p),C=v.select("text"),k=g.select("text"),L=r==="top"||r==="left"?-1:1,A,O,M,_;r==="bottom"||r==="top"?(b=Rf,A="x",M="y",O="x2",_="y2",N.attr("dy",L<0?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+w[0]+","+L*s+"V0H"+w[1]+"V"+L*s)):(b=Uf,A="y",M="x",O="y2",_="x2",N.attr("dy",".32em").style("text-anchor",L<0?"end":"start"),S.attr("d","M"+L*s+","+w[0]+"H0V"+w[1]+"H"+L*s)),x.attr(_,L*i),C.attr(M,L*y),T.attr(O,0).attr(_,L*i),k.attr(A,0).attr(M,L*y);if(c.rangeBand){var P=c,H=P.rangeBand()/2;l=c=function(e){return P(e)+H}}else l.rangeBand?l=c:m.call(b,c,l);v.call(b,l,c),g.call(b,c,c)})}var t=e.scale.linear(),r=If,i=6,s=6,o=3,u=[10],a=null,f;return l.scale=function(e){return arguments.length?(t=e,l):t},l.orient=function(e){return arguments.length?(r=e in qf?e+"":If,l):r},l.ticks=function(){return arguments.length?(u=n(arguments),l):u},l.tickValues=function(e){return arguments.length?(a=e,l):a},l.tickFormat=function(e){return arguments.length?(f=e,l):f},l.tickSize=function(e){var t=arguments.length;return t?(i=+e,s=+arguments[t-1],l):i},l.innerTickSize=function(e){return arguments.length?(i=+e,l):i},l.outerTickSize=function(e){return arguments.length?(s=+e,l):s},l.tickPadding=function(e){return arguments.length?(o=+e,l):o},l.tickSubdivide=function(){return arguments.length&&l},l};var If="bottom",qf={top:1,right:1,bottom:1,left:1};e.svg.brush=function(){function h(t){t.each(function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),i=t.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(c,D);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return zf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",h.empty()?"none":null);var o=e.transition(t),u=e.transition(i),a;n&&(a=ua(n),u.attr("x",a[0]).attr("width",a[1]-a[0]),d(o)),r&&(a=ua(r),u.attr("y",a[0]).attr("height",a[1]-a[0]),v(o)),p(o)})}function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+i[+/e$/.test(e)]+","+o[+/^s/.test(e)]+")"})}function d(e){e.select(".extent").attr("x",i[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",i[1]-i[0])}function v(e){e.select(".extent").attr("y",o[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",o[1]-o[0])}function m(){function O(){e.event.keyCode==32&&(S||(T=null,N[0]-=i[1],N[1]-=o[1],S=2),q())}function M(){e.event.keyCode==32&&S==2&&(N[0]+=i[1],N[1]+=o[1],S=0,q())}function _(){var t=e.mouse(c),s=!1;C&&(t[0]+=C[0],t[1]+=C[1]),S||(e.event.altKey?(T||(T=[(i[0]+i[1])/2,(o[0]+o[1])/2]),N[0]=i[+(t[0]<T[0])],N[1]=o[+(t[1]<T[1])]):T=null),w&&D(t,n,0)&&(d(y),s=!0),E&&D(t,r,1)&&(v(y),s=!0),s&&(p(y),g({type:"brush",mode:S?"move":"resize"}))}function D(e,t,n){var r=ua(t),s=r[0],c=r[1],h=N[n],p=n?o:i,d=p[1]-p[0],v,m;S&&(s-=h,c-=d+h),v=(n?l:f)?Math.max(s,Math.min(c,e[n])):e[n],S?m=(v+=h)+d:(T&&(h=Math.max(s,Math.min(c,2*T[n]-v))),h<v?(m=v,v=h):m=h);if(p[0]!=v||p[1]!=m)return n?a=null:u=null,p[0]=v,p[1]=m,!0}function P(){_(),y.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),e.select("body").style("cursor",null),k.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),x(),g({type:"brushend"})}var c=this,m=e.select(e.event.target),g=t.of(c,arguments),y=e.select(c),b=m.datum(),w=!/^(n|s)$/.test(b)&&n,E=!/^(e|w)$/.test(b)&&r,S=m.classed("extent"),x=xt(c),T,N=e.mouse(c),C,k=e.select(s(c)).on("keydown.brush",O).on("keyup.brush",M);e.event.changedTouches?k.on("touchmove.brush",_).on("touchend.brush",P):k.on("mousemove.brush",_).on("mouseup.brush",P),y.interrupt().selectAll("*").interrupt();if(S)N[0]=i[0]-N[0],N[1]=o[0]-N[1];else if(b){var L=+/w$/.test(b),A=+/^n/.test(b);C=[i[1-L]-N[0],o[1-A]-N[1]],N[0]=i[L],N[1]=o[A]}else e.event.altKey&&(T=N.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",m.style("cursor")),g({type:"brushstart"}),_()}var t=U(h,"brushstart","brush","brushend"),n=null,r=null,i=[0,0],o=[0,0],u,a,f=!0,l=!0,c=Wf[0];return h.event=function(n){n.each(function(){var n=t.of(this,arguments),r={x:i,y:o,i:u,j:a},s=this.__chart__||r;this.__chart__=r,Df?e.select(this).transition().each("start.brush",function(){u=s.i,a=s.j,i=s.x,o=s.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=ko(i,r.x),t=ko(o,r.y);return u=a=null,function(s){i=r.x=e(s),o=r.y=t(s),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){u=r.i,a=r.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},h.x=function(e){return arguments.length?(n=e,c=Wf[!n<<1|!r],h):n},h.y=function(e){return arguments.length?(r=e,c=Wf[!n<<1|!r],h):r},h.clamp=function(e){return arguments.length?(n&&r?(f=!!e[0],l=!!e[1]):n?f=!!e:r&&(l=!!e),h):n&&r?[f,l]:n?f:r?l:null},h.extent=function(e){var t,s,f,l,c;if(!arguments.length)return n&&(u?(t=u[0],s=u[1]):(t=i[0],s=i[1],n.invert&&(t=n.invert(t),s=n.invert(s)),s<t&&(c=t,t=s,s=c))),r&&(a?(f=a[0],l=a[1]):(f=o[0],l=o[1],r.invert&&(f=r.invert(f),l=r.invert(l)),l<f&&(c=f,f=l,l=c))),n&&r?[[t,f],[s,l]]:n?[t,s]:r&&[f,l];if(n){t=e[0],s=e[1],r&&(t=t[0],s=s[0]),u=[t,s],n.invert&&(t=n(t),s=n(s)),s<t&&(c=t,t=s,s=c);if(t!=i[0]||s!=i[1])i=[t,s]}if(r){f=e[0],l=e[1],n&&(f=f[1],l=l[1]),a=[f,l],r.invert&&(f=r(f),l=r(l)),l<f&&(c=f,f=l,l=c);if(f!=o[0]||l!=o[1])o=[f,l]}return h},h.clear=function(){return h.empty()||(i=[0,0],o=[0,0],u=a=null),h},h.empty=function(){return!!n&&i[0]==i[1]||!!r&&o[0]==o[1]},e.rebind(h,t,"on")};var zf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xf=Vn.format=Sr.timeFormat,Vf=Xf.utc,$f=Vf("%Y-%m-%dT%H:%M:%S.%LZ");Xf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?Jf:$f,Jf.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Jf.toString=$f.toString,Vn.second=Qn(function(e){return new $n(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()}),Vn.seconds=Vn.second.range,Vn.seconds.utc=Vn.second.utc.range,Vn.minute=Qn(function(e){return new $n(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()}),Vn.minutes=Vn.minute.range,Vn.minutes.utc=Vn.minute.utc.range,Vn.hour=Qn(function(e){var t=e.getTimezoneOffset()/60;return new $n((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()}),Vn.hours=Vn.hour.range,Vn.hours.utc=Vn.hour.utc.range,Vn.month=Qn(function(e){return e=Vn.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Vn.months=Vn.month.range,Vn.months.utc=Vn.month.utc.range;var Gf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yf=[[Vn.second,1],[Vn.second,5],[Vn.second,15],[Vn.second,30],[Vn.minute,1],[Vn.minute,5],[Vn.minute,15],[Vn.minute,30],[Vn.hour,1],[Vn.hour,3],[Vn.hour,6],[Vn.hour,12],[Vn.day,1],[Vn.day,2],[Vn.week,1],[Vn.month,1],[Vn.month,3],[Vn.year,1]],Zf=Xf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",ui]]),el={range:function(t,n,r){return e.range(Math.ceil(t/r)*r,+n,r).map(Qf)},floor:D,ceil:D};Yf.year=Vn.year,Vn.scale=function(){return Kf(e.scale.linear(),Yf,Zf)};var tl=Yf.map(function(e){return[e[0].utc,e[1]]}),nl=Vf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",ui]]);tl.year=Vn.year.utc,Vn.scale.utc=function(){return Kf(e.scale.linear(),tl,nl)},e.text=Cn(function(e){return e.responseText}),e.json=function(e,t){return kn(e,"application/json",rl,t)},e.html=function(e,t){return kn(e,"text/html",il,t)},e.xml=Cn(function(e){return e.responseXML}),typeof define=="function"&&define.amd?(this.d3=e,define("d3",e)):typeof module=="object"&&module.exports?module.exports=e:this.d3=e}(),function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define("topojson",["exports"],t):t(e.topojson={})}(this,function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],s=e.scale[1],o=e.translate[0],u=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*i+o,e[1]=(r+=e[1])*s+u}}function r(e){if(!e)return t;var n,r,i=e.scale[0],s=e.scale[1],o=e.translate[0],u=e.translate[1];return function(e,t){t||(n=r=0);var a=(e[0]-o)/i|0,f=(e[1]-u)/s|0;e[0]=a-n,e[1]=f-r,n=a,r=f}}function i(e,t){var n,r=e.length,i=r-t;while(i<--r)n=e[i],e[i++]=e[r],e[r]=n}function s(e,t){var n=0,r=e.length;while(n<r){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function o(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(t){return u(e,t)})}:u(e,t)}function u(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:a(e,t)};return t.id==null&&delete n.id,n}function a(e,t){function o(e,t){t.length&&t.pop();for(var n=s[e<0?~e:e],o=0,u=n.length,a;o<u;++o)t.push(a=n[o].slice()),r(a,o);e<0&&i(t,u)}function u(e){return e=e.slice(),r(e,0),e}function a(e){var t=[];for(var n=0,r=e.length;n<r;++n)o(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function f(e){var t=a(e);while(t.length<4)t.push(t[0].slice());return t}function l(e){return e.map(f)}function c(e){var t=e.type;return t==="GeometryCollection"?{type:t,geometries:e.geometries.map(c)}:t in h?{type:t,coordinates:h[t](e)}:null}var r=n(e.transform),s=e.arcs,h={Point:function(e){return u(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(u)},LineString:function(e){return a(e.arcs)},MultiLineString:function(e){return e.arcs.map(a)},Polygon:function(e){return l(e.arcs)},MultiPolygon:function(e){return e.arcs.map(l)}};return c(t)}function f(e,t){function u(t){var n=e.arcs[t<0?~t:t],r=n[0],i;return e.transform?(i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]})):i=n[n.length-1],t<0?[i,r]:[r,i]}function a(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[e<0?~e:e]=1}),s.push(i)}}var n={},r={},i={},s=[],o=-1;return t.forEach(function(n,r){var i=e.arcs[n<0?~n:n],s;i.length<3&&!i[1][0]&&!i[1][1]&&(s=t[++o],t[o]=n,t[r]=s)}),t.forEach(function(e){var t=u(e),n=t[0],s=t[1],o,a;if(o=i[n]){delete i[o.end],o.push(e),o.end=s;if(a=r[s]){delete r[a.start];var f=a===o?o:o.concat(a);r[f.start=o.start]=i[f.end=a.end]=f}else r[o.start]=i[o.end]=o}else if(o=r[s]){delete r[o.start],o.unshift(e),o.start=n;if(a=i[n]){delete i[a.end];var l=a===o?o:a.concat(o);r[l.start=a.start]=i[l.end=o.end]=l}else r[o.start]=i[o.end]=o}else o=[e],r[o.start=n]=i[o.end=s]=o}),a(i,r),a(r,i),t.forEach(function(e){n[e<0?~e:e]||s.push([e])}),s}function l(e){return a(e,c.apply(this,arguments))}function c(e,t,n){function i(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:l})}function s(e){e.forEach(i)}function o(e){e.forEach(s)}function u(e){e.type==="GeometryCollection"?e.geometries.forEach(u):e.type in c&&(l=e,c[e.type](e.arcs))}var r=[];if(arguments.length>1){var a=[],l,c={LineString:s,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};u(t),a.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&r.push(e[0].i)})}else for(var h=0,p=e.arcs.length;h<p;++h)r.push(h);return{type:"MultiLineString",arcs:f(e,r)}}function h(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function p(e){var t=-1,n=e.length,r,i=e[n-1],s=0;while(++t<n)r=i,i=e[t],s+=r[0]*i[1]-r[1]*i[0];return s/2}function d(e){return a(e,v.apply(this,arguments))}function v(e,t){function s(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})}),r.push(e)}function o(t){return p(a(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var n={},r=[],i=[];return t.forEach(function(e){e.type==="Polygon"?s(e.arcs):e.type==="MultiPolygon"&&e.arcs.forEach(s)}),r.forEach(function(e){if(!e._){var t=[],r=[e];e._=1,i.push(t);while(e=r.pop())t.push(e),e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(t){var r=[],i;t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].length<2&&r.push(e)})})}),r=f(e,r);if((i=r.length)>1){var s=o(t[0][0]);for(var u=0,a;u<i;++u)if(s===o(r[u])){a=r[0],r[0]=r[u],r[u]=a;break}}return r})}}function m(e){function r(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function i(e,t){e.forEach(function(e){r(e,t)})}function o(e,t){e.type==="GeometryCollection"?e.geometries.forEach(function(e){o(e,t)}):e.type in u&&u[e.type](e.arcs,t)}var t={},n=e.map(function(){return[]}),u={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};e.forEach(o);for(var a in t)for(var f=t[a],l=f.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var p=f[c],d=f[h],v;(v=n[p])[a=s(v,d)]!==d&&v.splice(a,0,d),(v=n[d])[a=s(v,p)]!==p&&v.splice(a,0,p)}return n}function g(e,t){return e[1][2]-t[1][2]}function y(){function r(e,n){while(n>0){var r=(n+1>>1)-1,i=t[r];if(g(e,i)>=0)break;t[i._=n]=i,t[e._=n=r]=e}}function i(e,r){for(;;){var i=r+1<<1,s=i-1,o=r,u=t[o];s<n&&g(t[s],u)<0&&(u=t[o=s]),i<n&&g(t[i],u)<0&&(u=t[o=i]);if(o===r)break;t[u._=r]=u,t[e._=r=o]=e}}var e={},t=[],n=0;return e.push=function(e){return r(t[e._=n]=e,n++),n},e.pop=function(){if(n<=0)return;var e=t[0],r;return--n>0&&(r=t[n],i(t[r._=0]=r,0)),e},e.remove=function(e){var s=e._,o;if(t[s]!==e)return;return s!==--n&&(o=t[n],(g(o,e)<0?r:i)(t[o._=s]=o,s)),s},e}function b(e,t){function u(e){o.remove(e),e[1][2]=t(e),o.push(e)}var i=n(e.transform),s=r(e.transform),o=y();return t||(t=h),e.arcs.forEach(function(e){var n=[],r=0,a,f,l,c;for(f=0,l=e.length;f<l;++f)c=e[f],i(e[f]=[c[0],c[1],Infinity],f);for(f=1,l=e.length-1;f<l;++f)a=e.slice(f-1,f+2),a[1][2]=t(a),n.push(a),o.push(a);for(f=0,l=n.length;f<l;++f)a=n[f],a.previous=n[f-1],a.next=n[f+1];while(a=o.pop()){var h=a.previous,p=a.next;a[1][2]<r?a[1][2]=r:r=a[1][2],h&&(h.next=p,h[2]=a[2],u(h)),p&&(p.previous=h,p[0]=a[0],u(p))}e.forEach(s)}),e}var w="1.6.24";e.version=w,e.mesh=l,e.meshArcs=c,e.merge=d,e.mergeArcs=v,e.feature=o,e.neighbors=m,e.presimplify=b}),define("lib/common/atCommon",["angular","jquery"],function(e,t){e.module("atCommon",[]).directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){if(t.which===13){if(t.shiftKey)return;e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault()}})}}).directive("scrollStick",["$window",function(t){return{link:function(n,r){var i=r.offset().top;e.element(t).bind("scroll",function(){this.pageYOffset>=i?r.addClass("stick"):r.removeClass("stick")})}}}]).filter("shrinkLink",function(){return function(e){return e==undefined?"...":e.indexOf("http")==0?e.substr(e.lastIndexOf("/")+1):e}}).service("spinSvc",["spinItem",function(e){var t=this;t.ids={},t.register=function(n){return n in t.ids||(t.ids[n]=new e),t.ids[n]},t.ready=function(e){return e in t.ids}}]).factory("spinItem",["$timeout",function(e){var n=.5,r=function(){this.skip=!1,this.elem=undefined,this.show=!1};return r.prototype.off=function(r){var i=this;i.skip=!1,r=r==undefined?n:r,e(function(){i.skip||(t(i.elem).hide(),i.show=!1)},r*1e3)},r.prototype.on=function(){var e=this;e.skip=!0,e.show=!0,e.elem!=undefined&&t(e.elem).show()},r.prototype.setElem=function(e){var t=this;t.elem=e,t.show==1?t.on():t.off(0)},r}]).directive("spinner",["spinSvc",function(e){return{template:['<div class="spinner">','<div class="rect1"></div>','<div class="rect2"></div>','<div class="rect3"></div>','<div class="rect4"></div>','<div class="rect5"></div>',"</div>"].join(""),replace:!0,scope:{spinId:"@"},link:function(t,n){function i(){t.spin=e.ids[t.spinId],t.spin.setElem(n)}var r=t.$watch(function(){return e.ready(t.spinId)},function(e,t){if(e==undefined)return;e===!0&&(i(),r())})}}}]).filter("highlight",function(e){return function(t,n){return n&&t&&(t=t.replace(new RegExp("("+n+")","gi"),'<span class="highlight">$1</span>')),e.trustAsHtml(t)}}).service("atGen",[function(){var e=this;e.elemId=function(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return"at"+e()+e()}}]).directive("atMenu",["$location",function(e){return{template:['<ul class="menu">','<li ng-repeat="( name, url ) in link">','<a ng-class="style( url )" href="#/{{ url }}">{{ name }}</a>',"</li>",'<li><i class="fa fa-{{ last() }}"></i></li>',"</ul>"].join(""),scope:{link:"="},replace:!0,link:function(t,n){t.last=function(){return e.url().substr(e.url().lastIndexOf("/")+1)},t.style=function(t){return{selected:e.url().lastIndexOf(t)!=-1}}}}}]).directive("atYear",[function(){return{template:'<span class="at-date">{{ time | date: "yyyy" }}</span>',replace:!0,link:function(e,t){e.time=Date.now()}}}]).directive("atVersion",[function(){return{template:'<div class="at-version">v<span app-version></span></div>',replace:!0}}])}),define("lib/maps/atMaps",["angular","jquery","d3","topojson","lib/common/atCommon"],function(e,t,n,r){e.module("atMaps",["atCommon"]).directive("atMapOverlay",[function(){}]).factory("mapOverlay",[function(){var e=function(){};return e}]).directive("atWorldMap",["atGen",function(e){return{replace:!0,template:"<div></div>",scope:{country:"@",scale:"@"},link:function(i,s){i.scale=i.scale?i.scale:1;var o=400*i.scale,u=260*i.scale,a=n.geo.mercator().center([0,0]).scale(50*i.scale).translate([200*i.scale,150*i.scale]).rotate([-10,0]),f=e.elemId();t(s).attr("id",f),t(s).attr("class","at-world-map");var l=function(){return"#"+f},c=n.select(l()).append("svg").attr("width",o).attr("height",u),h=n.geo.path().projection(a),p=c.append("g");n.json("assets/json/world-110m2.json",function(e,t){p.selectAll("path").data(r.feature(t,t.objects.countries).features).enter().append("path").attr("d",h)})}}}]).service("atWorldMapSvc",[function(){}]).service("atWorldFacts",[function(){var e=this;e.countries={},e.countries.data={af:"Afghanistan",al:"Albania",dz:"Algeria",as:"American Samoa",ad:"Andorra",ao:"Angola",ai:"Anguilla",aq:"Antarctica",ag:"Antigua and Barbuda",ar:"Argentina",am:"Armenia",aw:"Aruba",au:"Australia",at:"Austria",az:"Azerbaijan",bx:"Bahamas",bh:"Bahrain",bd:"Bangladesh",bb:"Barbados",by:"Belarus",be:"Belgium",bz:"Belize",bj:"Benin",bm:"Bermuda",bt:"Bhutan",bo:"Bolivia",ba:"Bosnia and Herzegovina",bw:"Botswana",br:"Brazil",io:"British Indian Ocean Territory",vg:"British Virgin Islands",bn:"Brunei",bg:"Bulgaria",bf:"Burkina Faso",bi:"Burundi",kh:"Cambodia",cm:"Cameroon",ca:"Canada",cv:"Cape Verde",ky:"Cayman Islands",cf:"Central African Republic",td:"Chad",cl:"Chile",cn:"China",cx:"Christmas Island",cc:"Cocos Islands",co:"Colombia",km:"Comoros",ck:"Cook Islands",cr:"Costa Rica",hr:"Croatia",cu:"Cuba",cy:"Cyprus",cz:"Czech Republic",cd:"Democratic Republic of the Congo",dk:"Denmark",dj:"Djibouti",dm:"Dominica","do":"Dominican Republic",tl:"East Timor",ec:"Ecuador",eg:"Egypt",sv:"El Salvador",gq:"Equatorial Guinea",er:"Eritrea",ee:"Estonia",et:"Ethiopia",fk:"Falkland Islands",fo:"Faroe Islands",fj:"Fiji",fi:"Finland",fr:"France",pf:"French Polynesia",ga:"Gabon",gm:"Gambia",ge:"Georgia",de:"Germany",gh:"Ghana",gi:"Gibraltar",gr:"Greece",gl:"Greenland",gd:"Grenada",gu:"Guam",gt:"Guatemala",gn:"Guinea",gw:"Guinea-Bissau",gy:"Guyana",ht:"Haiti",hn:"Honduras",hk:"Hong Kong",hu:"Hungary",is:"Iceland","in":"India",id:"Indonesia",ir:"Iran",iq:"Iraq",ie:"Ireland",im:"Isle of Man",il:"Israel",it:"Italy",ci:"Ivory Coast",jm:"Jamaica",jp:"Japan",je:"Jersey",jo:"Jordan",kz:"Kazakhstan",ke:"Kenya",ki:"Kiribati",kw:"Kuwait",kg:"Kyrgyzstan",la:"Laos",lv:"Latvia",lb:"Lebanon",ls:"Lesotho",lr:"Liberia",lY:"Libya",li:"Liechtenstein",lt:"Lithuania",lu:"Luxembourg",mo:"Macao",mk:"Macedonia",mg:"Madagascar",mw:"Malawi",my:"Malaysia",mv:"Maldives",ml:"Mali",mt:"Malta",mh:"Marshall Islands",mr:"Mauritania",mu:"Mauritius",yt:"Mayotte",mx:"Mexico",fm:"Micronesia",md:"Moldova",mc:"Monaco",mn:"Mongolia",me:"Montenegro",ms:"Montserrat",ma:"Morocco",mz:"Mozambique",mm:"Myanmar",na:"Namibia",nr:"Nauru",np:"Nepal",nl:"Netherlands",an:"Netherlands Antilles",nc:"New Caledonia",nz:"New Zealand",ni:"Nicaragua",ne:"Niger",ng:"Nigeria",nu:"Niue",kp:"North Korea",mp:"Northern Mariana Islands",no:"Norway",om:"Oman",pk:"Pakistan",pw:"Palau",pa:"Panama",pg:"Papua New Guinea",py:"Paraguay",pe:"Peru",ph:"Philippines",pn:"Pitcairn",pl:"Poland",pt:"Portugal",pr:"Puerto Rico",qa:"Qatar",cg:"Republic of the Congo",ro:"Romania",ru:"Russia",rw:"Rwanda",bl:"Saint Barthelemy",sh:"Saint Helena",kn:"Saint Kitts and Nevis",lc:"Saint Lucia",mf:"Saint Martin",pm:"Saint Pierre and Miquelon",vc:"Saint Vincent and the Grenadines",ws:"Samoa",sm:"San Marino",st:"Sao Tome and Principe",sa:"Saudi Arabia",sn:"Senegal",rs:"Serbia",sc:"Seychelles",sl:"Sierra Leone",sg:"Singapore",sk:"Slovakia",si:"Slovenia",sb:"Solomon Islands",so:"Somalia",za:"South Africa",gs:"South Georgia and the South Sandwich Islands",kr:"South Korea",es:"Spain",lk:"Sri Lanka",sd:"Sudan",sr:"Suriname",sj:"Svalbard and Jan Mayen",sz:"Swaziland",se:"Sweden",ch:"Switzerland",sy:"Syria",tw:"Taiwan",tj:"Tajikistan",tz:"Tanzania",th:"Thailand",tg:"Togo",tk:"Tokelau",to:"Tonga",tt:"Trinidad and Tobago",tn:"Tunisia",tr:"Turkey",tm:"Turkmenistan",tc:"Turks and Caicos Islands",tv:"Tuvalu",vi:"U.S. Virgin Islands",ug:"Uganda",ua:"Ukraine",ae:"United Arab Emirates",gb:"United Kingdom",us:"United States",uy:"Uruguay",uz:"Uzbekistan",vu:"Vanuatu",va:"Vatican",ve:"Venezuela",vn:"Vietnam",wf:"Wallis and Futuna",eh:"Western Sahara",ye:"Yemen",zm:"Zambia",zw:"Zimbabwe"}}])}),define("view/specierch/specierch",["angular","lib/dbpedia/dbpedia","angularRoute","lib/maps/atMaps"],function(e,t){e.module("myApp.view.specierch",["ngRoute","dbpedia","atMaps"]).config(["$routeProvider",function(e){e.when("/specierch",{templateUrl:"view/specierch/specierch.html",controller:"SpecierchCtrl"})}]).controller("SpecierchCtrl",[function(){}])}),function(e){"function"==typeof define&&define.amd?define("jqueryUi",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o)):!1):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function r(e){for(var t,n;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(g.inline?g.dpDiv.parent()[0]:g.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function u(t,n){e.extend(t,n);for(var r in n)null==n[r]&&(t[r]=n[r]);return t}function a(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&"static"===t.css("position")?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function r(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,r,i=e(this[0]);i.length&&i[0]!==document;){if(n=i.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(s&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;s.length>i;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};var f=0,l=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;null!=(i=n[s]);s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){return e.isFunction(r)?(a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,s=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=s,t}}(),void 0):(a[t]=r,void 0)}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,i=l.call(arguments,1),s=0,o=i.length;o>s;s++)for(n in i[s])r=i[s][n],i[s].hasOwnProperty(n)&&void 0!==r&&(t[n]=e.isPlainObject(r)?e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(i){var s="string"==typeof i,o=l.call(arguments,1),u=this;return s?this.each(function(){var n,s=e.data(this,r);return"instance"===i?(u=s,!1):s?e.isFunction(s[i])&&"_"!==i.charAt(0)?(n=s[i].apply(s,o),n!==s&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+i+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+i+"'")}):(o.length&&(i=e.widget.extend.apply(null,[i].concat(o))),this.each(function(){var t=e.data(this,r);t?(t.option(i||{}),t._init&&t._init()):e.data(this,r,new n(i,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=f++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},r=t.split("."),t=r.shift(),r.length){for(i=o[t]=e.widget.extend({},this.options[t]),s=0;r.length-1>s;s++)i[r[s]]=i[r[s]]||{},i=i[r[s]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.widget;var c=!1;e(document).mouseup(function(){c=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,i="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return r&&!i&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),c=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function r(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var i,s,o=Math.max,u=Math.abs,a=Math.round,f=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==i)return i;var t,n,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return e("body").append(r),t=s.offsetWidth,r.css("overflow","scroll"),n=s.offsetWidth,t===n&&(n=r[0].clientWidth),r.remove(),i=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r||i?n.width():n.outerWidth(),height:r||i?n.height():n.outerHeight()}}},e.fn.position=function(i){if(!i||!i.of)return d.apply(this,arguments);i=e.extend({},i);var p,v,m,g,y,b,w=e(i.of),E=e.position.getWithinInfo(i.within),S=e.position.getScrollInfo(E),x=(i.collision||"flip").split(" "),T={};return b=r(w),w[0].preventDefault&&(i.at="left top"),v=b.width,m=b.height,g=b.offset,y=e.extend({},g),e.each(["my","at"],function(){var e,t,n=(i[this]||"").split(" ");1===n.length&&(n=f.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=f.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",e=c.exec(n[0]),t=c.exec(n[1]),T[this]=[e?e[0]:0,t?t[0]:0],i[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===i.at[0]?y.left+=v:"center"===i.at[0]&&(y.left+=v/2),"bottom"===i.at[1]?y.top+=m:"center"===i.at[1]&&(y.top+=m/2),p=t(T.at,v,m),y.left+=p[0],y.top+=p[1],this.each(function(){var r,f,l=e(this),c=l.outerWidth(),h=l.outerHeight(),d=n(this,"marginLeft"),b=n(this,"marginTop"),N=c+d+n(this,"marginRight")+S.width,C=h+b+n(this,"marginBottom")+S.height,L=e.extend({},y),A=t(T.my,l.outerWidth(),l.outerHeight());"right"===i.my[0]?L.left-=c:"center"===i.my[0]&&(L.left-=c/2),"bottom"===i.my[1]?L.top-=h:"center"===i.my[1]&&(L.top-=h/2),L.left+=A[0],L.top+=A[1],s||(L.left=a(L.left),L.top=a(L.top)),r={marginLeft:d,marginTop:b},e.each(["left","top"],function(t,n){e.ui.position[x[t]]&&e.ui.position[x[t]][n](L,{targetWidth:v,targetHeight:m,elemWidth:c,elemHeight:h,collisionPosition:r,collisionWidth:N,collisionHeight:C,offset:[p[0]+A[0],p[1]+A[1]],my:i.my,at:i.at,within:E,elem:l})}),i.using&&(f=function(e){var t=g.left-L.left,n=t+v-c,r=g.top-L.top,s=r+m-h,a={target:{element:w,left:g.left,top:g.top,width:v,height:m},element:{element:l,left:L.left,top:L.top,width:c,height:h},horizontal:0>n?"left":t>0?"right":"center",vertical:0>s?"top":r>0?"bottom":"middle"};c>v&&v>u(t+n)&&(a.horizontal="center"),h>m&&m>u(r+s)&&(a.vertical="middle"),a.important=o(u(t),u(n))>o(u(r),u(s))?"horizontal":"vertical",i.using.call(this,e,a)}),l.offset(e.extend(L,{using:f}))})},e.ui.position={fit:{left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,u=e.left-t.collisionPosition.marginLeft,a=i-u,f=u+t.collisionWidth-s-i;t.collisionWidth>s?a>0&&0>=f?(n=e.left+a+t.collisionWidth-s-i,e.left+=a-n):e.left=f>0&&0>=a?i:a>f?i+s-t.collisionWidth:i:a>0?e.left+=a:f>0?e.left-=f:e.left=o(e.left-u,e.left)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,u=e.top-t.collisionPosition.marginTop,a=i-u,f=u+t.collisionHeight-s-i;t.collisionHeight>s?a>0&&0>=f?(n=e.top+a+t.collisionHeight-s-i,e.top+=a-n):e.top=f>0&&0>=a?i:a>f?i+s-t.collisionHeight:i:a>0?e.top+=a:f>0?e.top-=f:e.top=o(e.top-u,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,s=i.offset.left+i.scrollLeft,o=i.width,a=i.isWindow?i.scrollLeft:i.offset.left,f=e.left-t.collisionPosition.marginLeft,l=f-a,c=f+t.collisionWidth-o-a,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0];0>l?(n=e.left+h+p+d+t.collisionWidth-o-s,(0>n||u(l)>n)&&(e.left+=h+p+d)):c>0&&(r=e.left-t.collisionPosition.marginLeft+h+p+d-a,(r>0||c>u(r))&&(e.left+=h+p+d))},top:function(e,t){var n,r,i=t.within,s=i.offset.top+i.scrollTop,o=i.height,a=i.isWindow?i.scrollTop:i.offset.top,f=e.top-t.collisionPosition.marginTop,l=f-a,c=f+t.collisionHeight-o-a,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,v=-2*t.offset[1];0>l?(r=e.top+p+d+v+t.collisionHeight-o-s,(0>r||u(l)>r)&&(e.top+=p+d+v)):c>0&&(n=e.top-t.collisionPosition.marginTop+p+d+v-a,(n>0||c>u(n))&&(e.top+=p+d+v))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,o,u=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(u?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},u&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in r)t.style[o]=r[o];t.appendChild(a),n=u||document.documentElement,n.insertBefore(t,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",i=e(a).offset().left,s=i>10&&11>i,t.innerHTML="",n.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,n=this.options,r=n.heightStyle,i=this.element.parent();this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),r=t.next(),i=r.uniqueId().attr("id");t.attr("aria-controls",i),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===r?(t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");"absolute"!==r&&"fixed"!==r&&(t-=n.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault(),s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1||(n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-hidden":"true"}),r.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&r.length?r.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var r,i,s,o=this,u=0,a=e.css("box-sizing"),f=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},c=f&&l.down||l,h=function(){o._toggleComplete(n)};return"number"==typeof c&&(s=c),"string"==typeof c&&(i=c),i=i||c.easing||l.easing,s=s||c.duration||l.duration,t.length?e.length?(r=e.show().outerHeight(),t.animate(this.hideProps,{duration:s,easing:i,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:s,easing:i,complete:h,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?"content-box"===a&&(u+=n.now):"content"!==o.options.heightStyle&&(n.now=Math.round(r-t.outerHeight()-u),u=0)}}),void 0):t.animate(this.hideProps,s,i,h):e.animate(this.showProps,s,i,h)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,r,i,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,n=this._filterMenuItems(i),n=s&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),n=this._filterMenuItems(i)),n.length?(this.focus(t,n),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,r=this,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),t=s.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);r._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.outerHeight(),0>i?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]()),this.focus(n,r)},nextPage:function(t){var n,r,i;return this.active?(this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),0>n.offset().top-r-i}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var n,r,i;return this.active?(this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s="textarea"===i,o="input"===i;this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,r=!0,n=!0,void 0;t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault(),void 0;if(!n){var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}}},input:function(e){return r?(r=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===n||e.contains(n,r.target)||t.close()})})},menufocus:function(t,n){var r,i;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(i=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),r=n.item.attr("aria-label")||i.value,r&&e.trim(r).length&&(this.liveRegion.children().hide(),e("<div>").text(r).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!n&&!r)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete;var h,p="ui-button ui-widget ui-state-default ui-corner-all",d="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",v=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},m=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),i=r?e(r).find("[name='"+n+"'][type=radio]"):e("[name='"+n+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,v),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,r="checkbox"===this.type||"radio"===this.type,i=r?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===h&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||e(this).removeClass(i)}).bind("click"+this.eventNamespace,function(e){n.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return n.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var r=t.element[0];m(r).not(r).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return n.disabled?!1:(e(this).addClass("ui-state-active"),h=this,t.document.one("mouseup",function(){h=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return n.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return n.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+d).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?m(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(d),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),n=this.element.find(this.options.items),r=n.filter(":ui-button");n.not(":ui-button").button(),r.button("refresh"),this.buttons=n.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var g;e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i="div"===r||"span"===r,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),"input"===r?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]),r.hasClass(this.markerClassName)||(this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),("focus"===r||"both"===r)&&t.focus(this._showDatepicker),("button"===r||"both"===r)&&(i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,r=0,i=0;e.length>i;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,r,i,s){var o,a,f,l,c,h=this._dialogInst;return h||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},e.data(this._dialogInput[0],"datepicker",h)),u(h.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(a=document.documentElement.clientWidth,f=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+l,f/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var n,r=e(t),i=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===n?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&r.removeClass(this.markerClassName).empty(),g===i&&(g=null))},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,r){var i,s,o,a,f=this._getInst(t);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):f?"all"===n?e.extend({},f.settings):this._get(f,n):null:(i=n||{},"string"==typeof n&&(i={},i[n]=r),f&&(this._curInst===f&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),a=this._getMinMaxDate(f,"max"),u(f.settings,i),null!==o&&void 0!==i.dateFormat&&void 0===i.minDate&&(f.settings.minDate=this._formatDate(f,o)),null!==a&&void 0!==i.dateFormat&&void 0===i.maxDate&&(f.settings.maxDate=this._formatDate(f,a)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),f),this._autoSize(f),this._setDate(f,s),this._updateAlternate(f),this._updateDatepicker(f)),void 0)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);return e.datepicker._get(i,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">r||!n||n.indexOf(r)>-1):void 0},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,i,s,o,a,f,l;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(n,"beforeShow"),s=i?i.apply(t,[t,n]):{},s!==!1&&(u(n.settings,s),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),a=e.datepicker._checkOffset(n,a,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(f=e.datepicker._get(n,"showAnim"),l=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",r(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[f]?n.dpDiv.show(f,e.datepicker._get(n,"showOptions"),l):n.dpDiv[f||"show"](f?l:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,g=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,r=this._getNumberOfMonths(t),i=r[1],s=17,u=t.dpDiv.find("."+this._dayOverClass+" a");u.length>0&&o.apply(u.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){for(var n,r=this._getInst(t),i=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(o,"showAnim"),r=this._get(o,"duration"),i=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),r,i):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(s,n+("M"===r?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s))},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+("M"===r?"Month":"Year")]=s["draw"+("M"===r?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=null!=n?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(null==t||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var i,s,o,u,a=0,f=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof f?f:(new Date).getFullYear()%100+parseInt(f,10),c=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,h=(r?r.dayNames:null)||this._defaults.dayNames,p=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,d=(r?r.monthNames:null)||this._defaults.monthNames,v=-1,m=-1,g=-1,y=-1,b=!1,w=function(e){var n=t.length>i+1&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i="y"===e?r:1,s=RegExp("^\\d{"+i+","+r+"}"),o=n.substring(a).match(s);if(!o)throw"Missing number at position "+a;return a+=o[0].length,parseInt(o[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var r=t[1];return n.substr(a,r.length).toLowerCase()===r.toLowerCase()?(s=t[0],a+=r.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+a},x=function(){if(n.charAt(a)!==t.charAt(i))throw"Unexpected literal at position "+a;a++};for(i=0;t.length>i;i++)if(b)"'"!==t.charAt(i)||w("'")?x():b=!1;else switch(t.charAt(i)){case"d":g=E("d");break;case"D":S("D",c,h);break;case"o":y=E("o");break;case"m":m=E("m");break;case"M":m=S("M",p,d);break;case"y":v=E("y");break;case"@":u=new Date(E("@")),v=u.getFullYear(),m=u.getMonth()+1,g=u.getDate();break;case"!":u=new Date((E("!")-this._ticksTo1970)/1e4),v=u.getFullYear(),m=u.getMonth()+1,g=u.getDate();break;case"'":w("'")?x():b=!0;break;default:x()}if(n.length>a&&(o=n.substr(a),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===v?v=(new Date).getFullYear():100>v&&(v+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=v?0:-100)),y>-1)for(m=1,g=y;;){if(s=this._getDaysInMonth(v,m-1),s>=g)break;m++,g-=s}if(u=this._daylightSavingAdjust(new Date(v,m-1,g)),u.getFullYear()!==v||u.getMonth()+1!==m||u.getDate()!==g)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=e.length>r+1&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))for(;n>r.length;)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;e.length>r;r++)if(h)"'"!==e.charAt(r)||a("'")?c+=e.charAt(r):h=!1;else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=e.length>t+1&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;e.length>t;t++)if(r)"'"!==e.charAt(t)||i("'")?n+=e.charAt(t):r=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);f;){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=7*parseInt(f[1],10);break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=null==n||""===n?r:"string"==typeof n?s(n):"number"==typeof n?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&"Invalid Date"==""+o?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),i===e.selectedMonth&&s===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;if(0>Z&&(Z+=12,et--),Y)for(t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&G>t?G:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",S=0;V[0]>S;S++){for(x="",this.maxRows=4,T=0;V[1]>T;T++){if(N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="",K){if(k+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===S?U?s:r:"")+(/all|right/.test(C)&&0===S?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",E=0;7>E;E++)A=(E+l)%7,L+="<th scope='col'"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";for(k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M)),H=0;D>H;H++){for(k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"",E=0;7>E;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&G>P||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(F&&!g||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;12>l;l++)(!a||l>=r.getMonth())&&(!f||i.getMonth()>=l)&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}if(y||(b+=w+(!s&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";v>=d;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!s&&m&&g?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&n>t?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(0>t?t:i[0]*i[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||u>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(this.handleElement.is(t.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(r){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===i.containment?(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):i.containment.constructor===Array?(this.containment=i.containment,void 0):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0],r&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;return u&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(a=this.originalPageX),"x"===o.axis&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,r._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];o!==u&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--)a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height,a-v>g||m>f+v||l-v>b||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)?(r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1):("inner"!==d.snapMode&&(i=v>=Math.abs(l-b),s=v>=Math.abs(c-y),o=v>=Math.abs(a-g),u=v>=Math.abs(f-m),i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,"outer"!==d.snapMode&&(i=v>=Math.abs(l-y),s=v>=Math.abs(c-b),o=v>=Math.abs(a-m),u=v>=Math.abs(f-g),i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});o.length&&(i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n,r,i,s,o=this,u=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){u.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){u.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];return this._updatePrevProperties(),a?(n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),s.maxWidth>n&&(s.maxWidth=n),s.maxHeight>i&&(s.maxHeight=i)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.position.top+this.size.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseInt(r[t],10)||0,n[t]+=parseInt(i[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;h&&(a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u}))},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(u[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a="number"==typeof r.grid?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&p>r.maxWidth,m=r.maxHeight&&d>r.maxHeight,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l),/^(se|s|e)$/.test(u)?(n.size.width=p,n.size.height=d):/^(ne)$/.test(u)?(n.size.width=p,n.size.height=d,n.position.top=o.top-h):/^(sw)$/.test(u)?(n.size.width=p,n.size.height=d,n.position.left=o.left-c):((0>=d-l||0>=p-f)&&(t=n._getPaddingPlusBorderDimensions(this)),d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=f-t.width,n.size.width=p,n.position.left=o.left+s.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n,r=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{n=this.document[0].activeElement,n&&"body"!==n.nodeName.toLowerCase()&&e(n).blur()}catch(i){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var r=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),s=Math.max.apply(null,i);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),r=!0),r&&!n&&this._trigger("focus",t),r},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.focus()}),t.preventDefault()):(this._delay(function(){r.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,i){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",r,t(i))},drag:function(e,r){n._trigger("drag",e,t(r))},stop:function(i,s){var o=s.offset.left-n.document.scrollLeft(),u=s.offset.top-n.document.scrollTop();r.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(u>=0?"+":"")+u,of:n.window},e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",i,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,r=this.options,i=r.resizable,s=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(r,i){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",r,t(i))},resize:function(e,r){n._trigger("resize",e,t(r))},stop:function(i,s){var o=n.uiDialog.offset(),u=o.left-n.document.scrollLeft(),a=o.top-n.document.scrollTop();r.height=n.uiDialog.height(),r.width=n.uiDialog.width(),r.position={my:"left top",at:"left"+(u>=0?"+":"")+u+" "+"top"+(a>=0?"+":"")+a,of:n.window},e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",i,t(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,r=!1,i={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(r=!0),e in n.resizableRelatedOptions&&(i[e]=t)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(e,t){var n,r,i=this.uiDialog;"dialogClass"===e&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&t+n>e}return function(t,n,r,i){if(!n.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,u=s+t.helperProportions.width,a=o+t.helperProportions.height,f=n.offset.left,l=n.offset.top,c=f+n.proportions().width,h=l+n.proportions().height;switch(r){case"fit":return s>=f&&c>=u&&o>=l&&h>=a;case"intersect":return s+t.helperProportions.width/2>f&&c>u-t.helperProportions.width/2&&o+t.helperProportions.height/2>l&&h>a-t.helperProportions.height/2;case"pointer":return e(i.pageY,l,n.proportions().height)&&e(i.pageX,f,n.proportions().width);case"touch":return(o>=l&&h>=o||a>=l&&h>=a||l>o&&a>h)&&(s>=f&&c>=s||u>=f&&c>=u||f>s&&u>c);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;s.length>r;r++)if(!(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))){for(i=0;u.length>i;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible="none"!==s[r].element.css("display"),s[r].visible&&("mousedown"===o&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}))}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance,n),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),s.length&&(r=e(s[0]).droppable("instance"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,n),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function n(e,t,n){var r=c[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:e>r.max?r.max:e)}function r(n){var r=f(),i=r._rgba=[];return n=n.toLowerCase(),d(a,function(e,s){var o,u=s.re.exec(n),a=u&&s.parse(u),f=s.space||"rgba";return a?(o=r[f](a),r[l[f].cache]=o[l[f].cache],i=r._rgba=o._rgba,!1):t}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),r):s[n]}function i(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",u=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=f.support={},p=e("<p>")[0],d=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,d(l,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.fn=e.extend(f.prototype,{parse:function(i,o,u,a){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(o),o=t);var c=this,h=e.type(i),p=this._rgba=[];return o!==t&&(i=[i,o,u,a],h="array"),"string"===h?this.parse(r(i)||s._default):"array"===h?(d(l.rgba.props,function(e,t){p[t.idx]=n(i[t.idx],t)}),this):"object"===h?(i instanceof f?d(l,function(e,t){i[t.cache]&&(c[t.cache]=i[t.cache].slice())}):d(l,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!c[s]&&r.to){if("alpha"===e||null==i[e])return;c[s]=r.to(c._rgba)}c[s][t.idx]=n(i[e],t,!0)}),c[s]&&0>e.inArray(null,c[s].slice(0,3))&&(c[s][3]=1,r.from&&(c._rgba=r.from(c[s])))}),this):t},is:function(e){var n=f(e),r=!0,i=this;return d(l,function(e,s){var o,u=n[s.cache];return u&&(o=i[s.cache]||s.to&&s.to(i._rgba)||[],d(s.props,function(e,n){return null!=u[n.idx]?r=u[n.idx]===o[n.idx]:t})),r}),r},_space:function(){var e=[],t=this;return d(l,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=f(e),i=r._space(),s=l[i],o=0===this.alpha()?f("transparent"):this,u=o[s.cache]||s.to(o._rgba),a=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],f=r[s],l=c[i.type]||{};null!==f&&(null===o?a[s]=f:(l.mod&&(f-o>l.mod/2?o+=l.mod:o-f>l.mod/2&&(o-=l.mod)),a[s]=n((f-o)*t+o,i)))}),this[i](a)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=f(t)._rgba;return f(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(255*r)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,l.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,r=e[0]/255,i=e[1]/255,s=e[2]/255,o=e[3],u=Math.max(r,i,s),a=Math.min(r,i,s),f=u-a,l=u+a,c=.5*l;return t=a===u?0:r===u?60*(i-s)/f+360:i===u?60*(s-r)/f+120:60*(r-i)/f+240,n=0===f?0:.5>=c?f/l:f/(2-l),[Math.round(t)%360,n,c,null==o?1:o]},l.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=.5>=r?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(255*i(u,o,t+1/3)),Math.round(255*i(u,o,t)),Math.round(255*i(u,o,t-1/3)),s]},d(l,function(r,i){var s=i.props,o=i.cache,a=i.to,l=i.from;f.fn[r]=function(r){if(a&&!this[o]&&(this[o]=a(this._rgba)),r===t)return this[o].slice();var i,u=e.type(r),c="array"===u||"object"===u?r:arguments,h=this[o].slice();return d(s,function(e,t){var r=c["object"===u?e:t.idx];null==r&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=f(l(h)),i[o]=h,i):f(h)},d(s,function(t,n){f.fn[t]||(f.fn[t]=function(i){var s,o=e.type(i),a="alpha"===t?this._hsla?"hsla":"rgba":r,f=this[a](),l=f[n.idx];return"undefined"===o?l:("function"===o&&(i=i.call(this,l),o=e.type(i)),null==i&&n.empty?this:("string"===o&&(s=u.exec(i),s&&(i=l+parseFloat(s[2])*("+"===s[1]?1:-1))),f[n.idx]=i,this[a](f)))})})}),f.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if("transparent"!==i&&("string"!==e.type(i)||(s=r(i)))){if(i=f(s||i),!h.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===u||"transparent"===u)&&o&&o.style;)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(a){}i=i.blend(u&&"transparent"!==u?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(a){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=f(t.elem,n),t.end=f(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(s[e.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(s[n]=i[n]);return s}function n(t,n){var r,s,o={};for(r in n)s=n[r],t[r]!==s&&(i[r]||(e.fx.step[r]||!isNaN(parseFloat(s)))&&(o[r]=s));return o}var r=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(i,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s,o=e(this),u=o.attr("class")||"",f=a.children?o.find("*").addBack():o;f=f.map(function(){var n=e(this);return{el:n,start:t(this)}}),s=function(){e.each(r,function(e,t){i[t]&&o[t+"Class"](i[t])})},s(),f=f.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",u),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,r,i,s,o){return"boolean"==typeof r||void 0===r?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,i,s)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function t(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(y+t[n],e[0].style[t[n]])},restore:function(e,t){var n,r;for(r=0;t.length>r;r++)null!==t[r]&&(n=e.data(y+t[r]),void 0===n&&(n=""),e.css(t[r],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function n(t){function n(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=r.complete,u=r.mode;(i.is(":hidden")?"hide"===u:"show"===u)?(i[u](),n()):o.call(i[0],r,n)}var r=t.apply(this,arguments),i=r.mode,s=r.queue,o=e.effects.effect[r.effect];return e.fx.off||!o?i?this[i](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)}):s===!1?this.each(n):this.queue(s||"fx",n)},show:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(r){if(n(r)||"boolean"==typeof r)return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,n){var r,i,s,o=e(this),u=/up|down|vertical/,a=/up|left|vertical|horizontal/,f=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"hide"),c=t.direction||"up",h=u.test(c),p=h?"height":"width",d=h?"top":"left",v=a.test(c),m={},g="show"===l;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),f):e.effects.save(o,f),o.show(),r=e.effects.createWrapper(o).css({overflow:"hidden"}),i=r[p](),s=parseFloat(r.css(d))||0,m[p]=g?i:0,v||(o.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),m[d]=g?s:i+s),g&&(r.css(p,0),v||r.css(d,s+i)),r.animate(m,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===l&&o.hide(),e.effects.restore(o,f),e.effects.removeWrapper(o),n()}})},e.effects.effect.bounce=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"effect"),f="hide"===a,l="show"===a,c=t.direction||"up",h=t.distance,p=t.times||5,d=2*p+(l||f?1:0),v=t.duration/d,m=t.easing,g="up"===c||"down"===c?"top":"left",y="up"===c||"left"===c,b=o.queue(),w=b.length;for((l||f)&&u.push("opacity"),e.effects.save(o,u),o.show(),e.effects.createWrapper(o),h||(h=o["top"===g?"outerHeight":"outerWidth"]()/3),l&&(s={opacity:1},s[g]=0,o.css("opacity",0).css(g,y?2*-h:2*h).animate(s,v,m)),f&&(h/=Math.pow(2,p-1)),s={},s[g]=0,r=0;p>r;r++)i={},i[g]=(y?"-=":"+=")+h,o.animate(i,v,m).animate(s,v,m),h=f?2*h:h/2;f&&(i={opacity:0},i[g]=(y?"-=":"+=")+h,o.animate(i,v,m)),o.queue(function(){f&&o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,d+1))),o.dequeue()},e.effects.effect.clip=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"hide"),f="show"===a,l=t.direction||"vertical",c="vertical"===l,h=c?"height":"width",p=c?"top":"left",d={};e.effects.save(o,u),o.show(),r=e.effects.createWrapper(o).css({overflow:"hidden"}),i="IMG"===o[0].tagName?r:o,s=i[h](),f&&(i.css(h,0),i.css(p,s/2)),d[h]=f?s:0,d[p]=f?0:s/2,i.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f||o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),n()}})},e.effects.effect.drop=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(i,t.mode||"hide"),u="show"===o,a=t.direction||"left",f="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a?"pos":"neg",c={opacity:u?1:0};e.effects.save(i,s),i.show(),e.effects.createWrapper(i),r=t.distance||i["top"===f?"outerHeight":"outerWidth"](!0)/2,u&&i.css("opacity",0).css(f,"pos"===l?-r:r),c[f]=(u?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+r,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}})},e.effects.effect.explode=function(t,n){function r(){b.push(this),b.length===c*h&&i()}function i(){p.css({visibility:"visible"}),e(b).remove(),v||p.hide(),n()}var s,o,u,a,f,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=c,p=e(this),d=e.effects.setMode(p,t.mode||"hide"),v="show"===d,m=p.show().css("visibility","hidden").offset(),g=Math.ceil(p.outerWidth()/h),y=Math.ceil(p.outerHeight()/c),b=[];for(s=0;c>s;s++)for(a=m.top+s*y,l=s-(c-1)/2,o=0;h>o;o++)u=m.left+o*g,f=o-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*g,top:-s*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:y,left:u+(v?f*g:0),top:a+(v?l*y:0),opacity:v?0:1}).animate({left:u+(v?0:f*g),top:a+(v?0:l*y),opacity:v?1:0},t.duration||500,t.easing,r)},e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})},e.effects.effect.fold=function(t,n){var r,i,s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a="show"===u,f="hide"===u,l=t.size||15,c=/([0-9]+)%/.exec(l),h=!!t.horizFirst,p=a!==h,d=p?["width","height"]:["height","width"],v=t.duration/2,m={},g={};e.effects.save(s,o),s.show(),r=e.effects.createWrapper(s).css({overflow:"hidden"}),i=p?[r.width(),r.height()]:[r.height(),r.width()],c&&(l=parseInt(c[1],10)/100*i[f?0:1]),a&&r.css(h?{height:0,width:l}:{height:l,width:0}),m[d[0]]=a?i[0]:l,g[d[1]]=a?i[1]:0,r.animate(m,v,t.easing).animate(g,v,t.easing,function(){f&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),n()})},e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};"hide"===s&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&r.hide(),e.effects.restore(r,i),n()}})},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||"effect"!==p,v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||("show"===p?b:r),o.to=t.to||("hide"===p?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}},("box"===v||"both"===v)&&(s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to))),("content"===v||"both"===v)&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from),("content"===v||"both"===v)&&(c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),d||("static"===g?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return"auto"===n?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:"horizontal"!==u?o/100:1,x:"vertical"!==u?o/100:1};i.effect="size",i.queue=!1,i.complete=n,"effect"!==s&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&("show"===s&&(i.from.opacity=0,i.to.opacity=1),"hide"===s&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s="hide"===i,o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.pulsate=function(t,n){var r,i=e(this),s=e.effects.setMode(i,t.mode||"show"),o="show"===s,u="hide"===s,a=o||"hide"===s,f=2*(t.times||5)+(a?1:0),l=t.duration/f,c=0,h=i.queue(),p=h.length;for((o||!i.is(":visible"))&&(i.css("opacity",0).show(),c=1),r=1;f>r;r++)i.animate({opacity:c},l,t.easing),c=1-c;i.animate({opacity:c},l,t.easing),i.queue(function(){u&&i.hide(),n()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,f+1))),i.dequeue()},e.effects.effect.shake=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(i,t.mode||"effect"),u=t.direction||"left",a=t.distance||20,f=t.times||3,l=2*f+1,c=Math.round(t.duration/l),h="up"===u||"down"===u?"top":"left",p="up"===u||"left"===u,d={},v={},m={},g=i.queue(),y=g.length;for(e.effects.save(i,s),i.show(),e.effects.createWrapper(i),d[h]=(p?"-=":"+=")+a,v[h]=(p?"+=":"-=")+2*a,m[h]=(p?"-=":"+=")+2*a,i.animate(d,c,t.easing),r=1;f>r;r++)i.animate(v,c,t.easing).animate(m,c,t.easing);i.animate(v,c,t.easing).animate(d,c/2,t.easing).queue(function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,l+1))),i.dequeue()},e.effects.effect.slide=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(i,t.mode||"show"),u="show"===o,a=t.direction||"left",f="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a,c={};e.effects.save(i,s),i.show(),r=t.distance||i["top"===f?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(i).css({overflow:"hidden"}),u&&i.css(f,l?isNaN(r)?"-"+r:-r:r),c[f]=(u?l?"+=":"-=":l?"-=":"+=")+r,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}})},e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s="fixed"===i.css("position"),o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");return i?(r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;n&&n.element!==r.element[0]&&("touch"===i.tolerance?f=!(n.left>u||s>n.right||n.top>a||o>n.bottom):"fit"===i.tolerance&&(f=n.left>s&&u>n.right&&n.top>o&&a>n.bottom),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var r=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&r.index!==t.focusIndex&&(t._trigger("focus",e,{item:r}),t.isOpen||t._select(r,e)),t.focusIndex=r.index,t.button.attr("aria-activedescendant",t.menuItems.eq(r.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,n){var r=this,i="";e.each(n,function(n,s){s.optgroup!==i&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(s.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:s.optgroup}).appendTo(t),i=s.optgroup),r._renderItemData(t,s)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var r=e("<li>");return n.disabled&&r.addClass("ui-state-disabled"),this._setText(r,n.label),r.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,r,i=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex):(n=this.menuItems.eq(this.element[0].selectedIndex),i+=":not(.ui-state-disabled)"),r="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](i).eq(-1):n[e+"All"](i).eq(0),r.length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var n=[];t.each(function(t,r){var i=e(r),s=i.parent("optgroup");n.push({element:i,index:t,value:i.val(),label:i.text(),optgroup:s.attr("label")||"",disabled:s.prop("disabled")||i.prop("disabled")})}),this.items=n},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;n>t;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))&&(i=n,s=e(this),o=t)}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),0>r&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>r||1===t&&r>n)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var r,i,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(r=this.options.values,i=arguments[0],s=0;r.length>s;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;i>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),r=0;n.length>r;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,r=Math.floor(+(e-t).toFixed(this._precision())/n)*n;e=r+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=100*((a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())),l["horizontal"===a.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&("horizontal"===a.orientation?(0===r&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(0===r&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?100*((r-i)/(s-i)):0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),"max"===o&&"horizontal"===this.orientation&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),"max"===o&&"vertical"===this.orientation&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var n,r,i,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,o),n===!1))return}switch(s=this.options.step,r=i=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-s)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r?!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,r){var i,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?u=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(u=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?u=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(u=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c="x"===this.options.axis||r+f>u&&a>r+f,h="y"===this.options.axis||t+l>s&&o>t+l,p=c&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>s&&o>n-this.helperProportions.width/2&&r+this.helperProportions.height/2>u&&a>i-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){u.push(this)}var r,i,s,o,u=[],a=[],f=this._connectWith();if(f&&t)for(r=f.length-1;r>=0;r--)for(s=e(f[r],this.document[0]),i=s.length-1;i>=0;i--)o=e.data(s[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=a.length-1;r>=0;r--)a[r][0].each(n);return e(u)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n],this.document[0]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"clientX":"clientY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[p].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),i>Math.abs(t[c]-a)&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function n(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)("auto"===this._storedCSS[r]||"static"===this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)t||i.push(n("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(n("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;i.length>r;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);void 0!==i&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r}))}var r;r=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=null!==r.min?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==r.max&&e>r.max?r.max:null!==r.min&&r.min>e?r.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:a(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:a(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:a(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:a(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:a(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(a(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,r;t=t.cloneNode(!1),n=t.href.replace(e,""),r=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(i){}try{r=decodeURIComponent(r)}catch(i){}return t.hash.length>1&&n===r}}(),_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);return null===t&&(r&&this.tabs.each(function(n,i){return e(i).attr("aria-controls")===r?(t=n,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(r),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function r(){return t>i&&(t=0),0>t&&(t=i),t}for(var i=this.tabs.length-1;-1!==e.inArray(r(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,r=this.anchors,i=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,s,o,u=e(r).uniqueId().attr("id"),a=e(r).closest("li"),f=a.attr("aria-controls");t._isLocal(r)?(i=r.hash,o=i.substring(1),s=t.element.find(t._sanitizeSelector(i))):(o=a.attr("aria-controls")||e({}).uniqueId()[0].id,i="#"+o,s=t.element.find(i),s.length||(s=t._createPanel(o),s.insertAfter(t.panels[n-1]||t.tablist)),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),f&&a.data("ui-tabs-aria-controls",f),a.attr({"aria-controls":o,"aria-labelledby":u}),s.attr("aria-labelledby",u)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),n&&(this._off(n.not(this.tabs)),this._off(r.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,r=0;n=this.tabs[r];r++)t===!0||-1!==e.inArray(r,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();"fill"===t?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1||(n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),f.length||a.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l))},_toggle:function(t,n){function r(){s.running=!1,s._trigger("activate",t,n)}function i(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,r):(o.show(),r())}var s=this,o=n.newPanel,u=n.oldPanel;this.running=!0,u.length&&this.options.hide?this._hide(u,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u.hide(),i()),u.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&u.length?n.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);r[0]!==this.active[0]&&(r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;n!==!1&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setupDisabled(n))},disable:function(t){var n=this.options.disabled;if(n!==!0){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),s=i.find(".ui-tabs-anchor"),o=this._getPanelForTab(i),u={tab:i,panel:o},a=function(e,t){"abort"===t&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr};this._isLocal(s[0])||(this.xhr=e.ajax(this._ajaxSettings(s,n,u)),this.xhr&&"canceled"!==this.xhr.statusText&&(i.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){o.html(e),r._trigger("load",n,u),a(i,t)},1)}).fail(function(e,t){setTimeout(function(){a(e,t)},1)})))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);-1!==i&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,n){var r=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){r._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r.element[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);r.length&&!r.data("ui-tooltip-id")&&(r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&r.parents().each(function(){var t,r=e(this);r.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),r.attr("title")&&(r.uniqueId(),n.parents[this.id]={element:this,title:r.attr("title")},r.attr("title",""))}),this._registerCloseHandlers(t,r),this._updateContent(r,t))},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;return"string"==typeof r?this._open(t,e,r):(n=r.call(e[0],function(n){i._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=s),this._open(t,e,n))})}),n&&this._open(t,e,n),void 0)},_open:function(t,n,r){function i(e){f.of=e,o.is(":hidden")||o.position(f)}var s,o,u,a,f=e.extend({},this.options.position);if(r){if(s=this._find(n))return s.tooltip.find(".ui-tooltip-content").html(r),void 0;n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),s=this._tooltip(n),o=s.tooltip,this._addDescribedBy(n,o.attr("id")),o.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),r.clone?(a=r.clone(),a.removeAttr("id").find("[id]").removeAttr("id")):a=r,e("<div>").html(a).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:i}),i(t)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){o.is(":visible")&&(i(f.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,n){var r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var r=e.Event(t);r.currentTarget=n[0],this.close(r,!0)}}};n[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(r.mouseleave="close"),t&&"focusin"!==t.type||(r.focusout="close"),this._on(!0,n,r)},close:function(t){var n,r=this,i=e(t?t.currentTarget:this.element),s=this._find(i);return s?(n=s.tooltip,s.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),s.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){r._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),s.closing=!0,this._trigger("close",t,{tooltip:n}),s.hiding||(s.closing=!1)),void 0):(i.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var n=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),r=n.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[r]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur"),s=r.element;i.target=i.currentTarget=s[0],t.close(i,!0),e("#"+n).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),angular.module("ui.bootstrap",["ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(e,t,n,r){var i=r.has("$animateCss")?r.get("$animateCss"):null;return{link:function(r,s,o){function u(){s.hasClass("collapse")&&s.hasClass("in")||t.resolve(p(r)).then(function(){s.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),i?i(s,{addClass:"in",easing:"ease",to:{height:s[0].scrollHeight+"px"}}).start()["finally"](f):e.addClass(s,"in",{to:{height:s[0].scrollHeight+"px"}}).then(f)})}function f(){s.removeClass("collapsing").addClass("collapse").css({height:"auto"}),d(r)}function l(){return s.hasClass("collapse")||s.hasClass("in")?void t.resolve(v(r)).then(function(){s.css({height:s[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),i?i(s,{removeClass:"in",to:{height:"0"}}).start()["finally"](h):e.removeClass(s,"in",{to:{height:"0"}}).then(h)}):h()}function h(){s.css({height:"0"}),s.removeClass("collapsing").addClass("collapse"),m(r)}var p=n(o.expanding),d=n(o.expanded),v=n(o.collapsing),m=n(o.collapsed);r.$eval(o.uibCollapse)||s.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css({height:"auto"}),r.$watch(o.uibCollapse,function(e){e?l():u()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(r){var i=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;i&&angular.forEach(this.groups,function(e){e!==r&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,r){r.addGroup(e),e.openClass=n.openClass||"panel-open",e.panelClass=n.panelClass||"panel-default",e.$watch("isOpen",function(n){t.toggleClass(e.openClass,!!n),n&&r.closeOthers(e)}),e.toggleOpen=function(t){e.isDisabled||t&&32!==t.which||(e.isOpen=!e.isOpen)};var i="accordiongroup-"+e.$id+"-"+Math.floor(1e4*Math.random());e.headingId=i+"-tab",e.panelId=i+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,r,i){r.setHeading(i(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(e,t,n,r){e.$watch(function(){return r[n.uibAccordionTransclude]},function(e){if(e){var n=angular.element(t[0].querySelector("[uib-accordion-header]"));n.html(""),n.append(e)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(e,t,n,r){e.closeable=!!t.close;var i=angular.isDefined(t.dismissOnTimeout)?n(t.dismissOnTimeout)(e.$parent):null;i&&r(function(){e.close()},parseInt(i,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(e){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(t,n,r,i){var s=i[0],o=i[1],u=e(r.uibUncheckable);n.find("input").css({display:"none"}),o.$render=function(){n.toggleClass(s.activeClass,angular.equals(o.$modelValue,t.$eval(r.uibBtnRadio)))},n.on(s.toggleEvent,function(){if(!r.disabled){var e=n.hasClass(s.activeClass);(!e||angular.isDefined(r.uncheckable))&&t.$apply(function(){o.$setViewValue(e?null:t.$eval(r.uibBtnRadio)),o.$render()})}}),r.uibUncheckable&&t.$watch(u,function(e){r.$set("uncheckable",e?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(e,t,n,r){function i(){return o(n.btnCheckboxTrue,!0)}function s(){return o(n.btnCheckboxFalse,!1)}function o(t,n){return angular.isDefined(t)?e.$eval(t):n}var u=r[0],a=r[1];t.find("input").css({display:"none"}),a.$render=function(){t.toggleClass(u.activeClass,angular.equals(a.$modelValue,i()))},t.on(u.toggleEvent,function(){n.disabled||e.$apply(function(){a.$setViewValue(t.hasClass(u.activeClass)?s():i()),a.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(e,t,n,r,i){function s(){for(;b.length;)b.shift()}function o(e){for(var t=0;t<m.length;t++)m[t].slide.active=t===e}function u(n,r,a){if(!w){if(angular.extend(n,{direction:a}),angular.extend(m[y].slide||{},{direction:a}),i.enabled(t)&&!e.$currentTransition&&m[r].element&&v.slides.length>1){m[r].element.data(g,n.direction);var f=v.getCurrentIndex();angular.isNumber(f)&&m[f].element&&m[f].element.data(g,n.direction),e.$currentTransition=!0,i.on("addClass",m[r].element,function(t,n){if("close"===n&&(e.$currentTransition=null,i.off("addClass",t),b.length)){var r=b.pop().slide,o=r.index,a=o>v.getCurrentIndex()?"next":"prev";s(),u(r,o,a)}})}e.active=n.index,y=n.index,o(r),c()}}function a(e){for(var t=0;t<m.length;t++)if(m[t].slide===e)return t}function f(){p&&(n.cancel(p),p=null)}function l(t){t.length||(e.$currentTransition=null,s())}function c(){f();var t=+e.interval;!isNaN(t)&&t>0&&(p=n(h,t))}function h(){var t=+e.interval;d&&!isNaN(t)&&t>0&&m.length?e.next():e.pause()}var p,d,v=this,m=v.slides=e.slides=[],g="uib-slideDirection",y=e.active,b=[],w=!1;v.addSlide=function(t,n){m.push({slide:t,element:n}),m.sort(function(e,t){return+e.slide.index>+t.slide.index}),(t.index===e.active||1===m.length&&!angular.isNumber(e.active))&&(e.$currentTransition&&(e.$currentTransition=null),y=t.index,e.active=t.index,o(y),v.select(m[a(t)]),1===m.length&&e.play())},v.getCurrentIndex=function(){for(var e=0;e<m.length;e++)if(m[e].slide.index===y)return e},v.next=e.next=function(){var t=(v.getCurrentIndex()+1)%m.length;return 0===t&&e.noWrap()?void e.pause():v.select(m[t],"next")},v.prev=e.prev=function(){var t=v.getCurrentIndex()-1<0?m.length-1:v.getCurrentIndex()-1;return e.noWrap()&&t===m.length-1?void e.pause():v.select(m[t],"prev")},v.removeSlide=function(t){var n=a(t),r=b.indexOf(m[n]);-1!==r&&b.splice(r,1),m.splice(n,1),m.length>0&&y===n?n>=m.length?(y=m.length-1,e.active=y,o(y),v.select(m[m.length-1])):(y=n,e.active=y,o(y),v.select(m[n])):y>n&&(y--,e.active=y),0===m.length&&(y=null,e.active=null,s())},v.select=e.select=function(t,n){var r=a(t.slide);void 0===n&&(n=r>v.getCurrentIndex()?"next":"prev"),t.slide.index===y||e.$currentTransition?t&&t.slide.index!==y&&e.$currentTransition&&b.push(m[r]):u(t.slide,r,n)},e.indexOfSlide=function(e){return+e.slide.index},e.isActive=function(t){return e.active===t.slide.index},e.pause=function(){e.noPause||(d=!1,f())},e.play=function(){d||(d=!0,c())},e.$on("$destroy",function(){w=!0,f()}),e.$watch("noTransition",function(e){i.enabled(t,!e)}),e.$watch("interval",c),e.$watchCollection("slides",l),e.$watch("active",function(e){if(angular.isNumber(e)&&y!==e){for(var t=0;t<m.length;t++)if(m[t].slide.index===e){e=t;break}var n=m[e];n&&(y=e,o(e),v.select(m[e]))}})}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(e,t,n,r){r.addSlide(e,t),e.$on("$destroy",function(){r.removeSlide(e)})}}}).animation(".item",["$animateCss",function(e){function t(e,t,n){e.removeClass(t),n&&n()}var n="uib-slideDirection";return{beforeAddClass:function(r,i,s){if("active"===i){var o=!1,u=r.data(n),f="next"===u?"left":"right",l=t.bind(this,r,f+" "+u,s);return r.addClass(u),e(r,{addClass:f}).start().done(l),function(){o=!0}}s()},beforeRemoveClass:function(r,i,s){if("active"===i){var o=!1,u=r.data(n),f="next"===u?"left":"right",l=t.bind(this,r,f,s);return e(r,{addClass:f}).start().done(l),function(){o=!0}}s()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(e,t,n,r){function i(e,t){var n=[],i=e.split(""),s=e.indexOf("'");if(s>-1){var o=!1;e=e.split("");for(var u=s;u<e.length;u++)o?("'"===e[u]&&(u+1<e.length&&"'"===e[u+1]?(e[u+1]="$",i[u+1]=""):(i[u]="",o=!1)),e[u]="$"):"'"===e[u]&&(e[u]="$",i[u]="",o=!0);e=e.join("")}return angular.forEach(p,function(r){var s=e.indexOf(r.key);if(s>-1){e=e.split(""),i[s]="("+r.regex+")",e[s]="$";for(var o=s+1,u=s+r.key.length;u>o;o++)i[o]="",e[o]="$";e=e.join(""),n.push({index:s,key:r.key,apply:r[t],matcher:r.regex})}}),{regex:new RegExp("^"+i.join("")+"$"),map:r(n,"index")}}function s(e,t,n){return 1>n?!1:1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}function o(e){return parseInt(e,10)}function u(e,t){return e&&t?c(e,t):e}function a(e,t){return e&&t?c(e,t,!0):e}function f(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function l(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function c(e,t,n){n=n?-1:1;var r=f(t,e.getTimezoneOffset());return l(e,n*(r-e.getTimezoneOffset()))}var h,p,d=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){h=t.id,this.parsers={},this.formatters={},p=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){this.year=+e+2e3},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){var t=e.getMonth();return/^[0-9]$/.test(t)?n(e,"MM"):n(e,"M")}},{key:"MMMM",regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return n(e,"MMMM")}},{key:"MMM",regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return n(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){var t=e.getDate();return/^[1-9]$/.test(t)?n(e,"dd"):n(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"d")}},{key:"EEEE",regex:t.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return n(e,"EEEE")}},{key:"EEE",regex:t.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return n(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return n(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"s")}},{key:"a",regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return n(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var t=e.match(/([+-])(\d{2})(\d{2})/),n=t[1],r=t[2],i=t[3];this.hours+=o(n+r),this.minutes+=o(n+i)},formatter:function(e){return n(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return n(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return n(e,"w")}},{key:"GGGG",regex:t.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return n(e,"GGGG")}},{key:"GGG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GGG")}},{key:"GG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GG")}},{key:"G",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"G")}}]},this.init(),this.filter=function(e,n){if(!angular.isDate(e)||isNaN(e)||!n)return"";n=t.DATETIME_FORMATS[n]||n,t.id!==h&&this.init(),this.formatters[n]||(this.formatters[n]=i(n,"formatter"));var r=this.formatters[n],s=r.map,o=n;return s.reduce(function(t,n,r){var i=o.match(new RegExp("(.*)"+n.key));i&&angular.isString(i[1])&&(t+=i[1],o=o.replace(i[1]+n.key,""));var u=r===s.length-1?o:"";return n.apply?t+n.apply.call(null,e)+u:t+u},"")},this.parse=function(n,r,o){if(!angular.isString(n)||!r)return n;r=t.DATETIME_FORMATS[r]||r,r=r.replace(d,"\\$&"),t.id!==h&&this.init(),this.parsers[r]||(this.parsers[r]=i(r,"apply"));var u=this.parsers[r],a=u.regex,f=u.map,l=n.match(a),c=!1;if(l&&l.length){var p,v;angular.isDate(o)&&!isNaN(o.getTime())?p={year:o.getFullYear(),month:o.getMonth(),date:o.getDate(),hours:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),milliseconds:o.getMilliseconds()}:(o&&e.warn("dateparser:","baseDate is not a valid date"),p={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var g=1,y=l.length;y>g;g++){var w=f[g-1];"Z"===w.matcher&&(c=!0),w.apply&&w.apply.call(p,l[g])}var E=c?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,S=c?Date.prototype.setUTCHours:Date.prototype.setHours;return s(p.year,p.month,p.date)&&(!angular.isDate(o)||isNaN(o.getTime())||c?(v=new Date(0),E.call(v,p.year,p.month,p.date),S.call(v,p.hours||0,p.minutes||0,p.seconds||0,p.milliseconds||0)):(v=new Date(o),E.call(v,p.year,p.month,p.date),S.call(v,p.hours,p.minutes,p.seconds,p.milliseconds))),v}},this.toTimezone=u,this.fromTimezone=a,this.timezoneToOffset=f,this.addDateMinutes=l,this.convertTimezoneToLocal=c}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(e){var t=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,n=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(r,i){function s(e,t,n){f.push(e),l.push({scope:e,element:t}),m.forEach(function(t,n){o(t,e)}),e.$on("$destroy",u)}function o(t,r){var i=t.match(n),s=r.$eval(i[1]),o=i[2],u=h[t];if(!u){var f=function(t){var n=null;l.some(function(e){var r=e.scope.$eval(d);return r===t?(n=e,!0):void 0}),u.lastActivated!==n&&(u.lastActivated&&e.removeClass(u.lastActivated.element,s),n&&e.addClass(n.element,s),u.lastActivated=n)};h[t]=u={lastActivated:null,scope:r,watchFn:f,compareWithExp:o,watcher:r.$watch(o,f)}}u.watchFn(r.$eval(o))}function u(e){var t=e.targetScope,n=f.indexOf(t);if(f.splice(n,1),l.splice(n,1),f.length){var r=f[0];angular.forEach(h,function(e){e.scope===t&&(e.watcher=r.$watch(e.compareWithExp,e.watchFn),e.scope=r)})}else h={}}var f=[],l=[],h={},p=i.uibIsClass.match(t),d=p[2],v=p[1],m=v.split(",");return s}}}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){var n,r={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},i={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(n){function r(e){return"static"===(t.getComputedStyle(e).position||"static")}n=this.getRawNode(n);for(var i=n.offsetParent||e[0].documentElement;i&&i!==e[0].documentElement&&r(i);)i=i.offsetParent;return i||e[0].documentElement},scrollbarWidth:function(){if(angular.isUndefined(n)){var t=angular.element('<div class="uib-position-scrollbar-measure"></div>');e.find("body").append(t),n=t[0].offsetWidth-t[0].clientWidth,n=isFinite(n)?n:0,t.remove()}return n},isScrollable:function(e,n){e=this.getRawNode(e);var i=n?r.hidden:r.normal,s=t.getComputedStyle(e);return i.test(s.overflow+s.overflowY+s.overflowX)},scrollParent:function(n,i){n=this.getRawNode(n);var s=i?r.hidden:r.normal,o=e[0].documentElement,u=t.getComputedStyle(n),f="absolute"===u.position,l=n.parentElement||o;if(l===o||"fixed"===u.position)return o;for(;l.parentElement&&l!==o;){var c=t.getComputedStyle(l);if(f&&"static"!==c.position&&(f=!1),!f&&s.test(c.overflow+c.overflowY+c.overflowX))break;l=l.parentElement}return l},position:function(n,r){n=this.getRawNode(n);var i=this.offset(n);if(r){var s=t.getComputedStyle(n);i.top-=this.parseStyle(s.marginTop),i.left-=this.parseStyle(s.marginLeft)}var o=this.offsetParent(n),u={top:0,left:0};return o!==e[0].documentElement&&(u=this.offset(o),u.top+=o.clientTop-o.scrollTop,u.left+=o.clientLeft-o.scrollLeft),{width:Math.round(angular.isNumber(i.width)?i.width:n.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:n.offsetHeight),top:Math.round(i.top-u.top),left:Math.round(i.left-u.left)}},offset:function(n){n=this.getRawNode(n);var r=n.getBoundingClientRect();return{width:Math.round(angular.isNumber(r.width)?r.width:n.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:n.offsetHeight),top:Math.round(r.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(r.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(n,r,i){n=this.getRawNode(n),i=i!==!1?!0:!1;var s=n.getBoundingClientRect(),o={top:0,left:0,bottom:0,right:0},u=r?e[0].documentElement:this.scrollParent(n),f=u.getBoundingClientRect();if(o.top=f.top+u.clientTop,o.left=f.left+u.clientLeft,u===e[0].documentElement&&(o.top+=t.pageYOffset,o.left+=t.pageXOffset),o.bottom=o.top+u.clientHeight,o.right=o.left+u.clientWidth,i){var l=t.getComputedStyle(u);o.top+=this.parseStyle(l.paddingTop),o.bottom-=this.parseStyle(l.paddingBottom),o.left+=this.parseStyle(l.paddingLeft),o.right-=this.parseStyle(l.paddingRight)}return{top:Math.round(s.top-o.top),bottom:Math.round(o.bottom-s.bottom),left:Math.round(s.left-o.left),right:Math.round(o.right-s.right)}},parsePlacement:function(e){var t=i.auto.test(e);return t&&(e=e.replace(i.auto,"")),e=e.split("-"),e[0]=e[0]||"top",i.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",i.secondary.test(e[1])||(e[1]="center"),t?e[2]=!0:e[2]=!1,e},positionElements:function(e,n,r,s){e=this.getRawNode(e),n=this.getRawNode(n);var o=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),u=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");r=this.parsePlacement(r);var a=s?this.offset(e):this.position(e),f={top:0,left:0,placement:""};if(r[2]){var l=this.viewportOffset(e,s),c=t.getComputedStyle(n),h={width:o+Math.round(Math.abs(this.parseStyle(c.marginLeft)+this.parseStyle(c.marginRight))),height:u+Math.round(Math.abs(this.parseStyle(c.marginTop)+this.parseStyle(c.marginBottom)))};if(r[0]="top"===r[0]&&h.height>l.top&&h.height<=l.bottom?"bottom":"bottom"===r[0]&&h.height>l.bottom&&h.height<=l.top?"top":"left"===r[0]&&h.width>l.left&&h.width<=l.right?"right":"right"===r[0]&&h.width>l.right&&h.width<=l.left?"left":r[0],r[1]="top"===r[1]&&h.height-a.height>l.bottom&&h.height-a.height<=l.top?"bottom":"bottom"===r[1]&&h.height-a.height>l.top&&h.height-a.height<=l.bottom?"top":"left"===r[1]&&h.width-a.width>l.right&&h.width-a.width<=l.left?"right":"right"===r[1]&&h.width-a.width>l.left&&h.width-a.width<=l.right?"left":r[1],"center"===r[1])if(i.vertical.test(r[0])){var p=a.width/2-o/2;l.left+p<0&&h.width-a.width<=l.right?r[1]="left":l.right+p<0&&h.width-a.width<=l.left&&(r[1]="right")}else{var d=a.height/2-h.height/2;l.top+d<0&&h.height-a.height<=l.bottom?r[1]="top":l.bottom+d<0&&h.height-a.height<=l.top&&(r[1]="bottom")}}switch(r[0]){case"top":f.top=a.top-u;break;case"bottom":f.top=a.top+a.height;break;case"left":f.left=a.left-o;break;case"right":f.left=a.left+a.width}switch(r[1]){case"top":f.top=a.top;break;case"bottom":f.top=a.top+a.height-u;break;case"left":f.left=a.left;break;case"right":f.left=a.left+a.width-o;break;case"center":i.vertical.test(r[0])?f.left=a.left+a.width/2-o/2:f.top=a.top+a.height/2-u/2}return f.top=Math.round(f.top),f.left=Math.round(f.left),f.placement="center"===r[1]?r[0]:r[0]+"-"+r[1],f},positionArrow:function(e,n){e=this.getRawNode(e);var r=e.querySelector(".tooltip-inner, .popover-inner");if(r){var s=angular.element(r).hasClass("tooltip-inner"),o=s?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(o){var u={top:"",bottom:"",left:"",right:""};if(n=this.parsePlacement(n),"center"===n[1])return void angular.element(o).css(u);var a="border-"+n[0]+"-width",f=t.getComputedStyle(o)[a],l="border-";l+=i.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],l+="-radius";var c=t.getComputedStyle(s?r:e)[l];switch(n[0]){case"top":u.bottom=s?"0":"-"+f;break;case"bottom":u.top=s?"0":"-"+f;break;case"left":u.right=s?"0":"-"+f;break;case"right":u.left=s?"0":"-"+f}u[n[1]]=c,angular.element(o).css(u)}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).value("uibDatepickerAttributeWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","uibDatepickerAttributeWarning","uibDateParser",function(e,t,n,r,i,s,o,u,a,f,l){function c(t){e.datepickerMode=t,m&&(e.datepickerOptions.datepickerMode=t)}var h=this,p={$setViewValue:angular.noop},d={},v=[],m=!!t.datepickerOptions;if(this.modes=["day","month","year"],m)["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","initDate","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":e[t]=e.datepickerOptions[t]||angular.noop;break;case"datepickerMode":e.datepickerMode=angular.isDefined(e.datepickerOptions.datepickerMode)?e.datepickerOptions.datepickerMode:u.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":h[t]=angular.isDefined(e.datepickerOptions[t])?r(e.datepickerOptions[t])(e.$parent):u[t];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":h[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:u[t];break;case"startingDay":angular.isDefined(e.datepickerOptions.startingDay)?h.startingDay=e.datepickerOptions.startingDay:angular.isNumber(u.startingDay)?h.startingDay=u.startingDay:h.startingDay=(i.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(e){e?angular.isDate(e)?h[t]=l.fromTimezone(new Date(e),d.timezone):h[t]=new Date(o(e,"medium")):h[t]=null,h.refreshView()}):h[t]=u[t]?l.fromTimezone(new Date(u[t]),d.timezone):null;break;case"maxMode":case"minMode":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(n){h[t]=e[t]=angular.isDefined(n)?n:datepickerOptions[t],("minMode"===t&&h.modes.indexOf(e.datepickerOptions.datepickerMode)<h.modes.indexOf(h[t])||"maxMode"===t&&h.modes.indexOf(e.datepickerOptions.datepickerMode)>h.modes.indexOf(h[t]))&&(e.datepickerMode=h[t],e.datepickerOptions.datepickerMode=h[t])}):h[t]=e[t]=u[t]||null;break;case"initDate":e.datepickerOptions.initDate?(h.activeDate=l.fromTimezone(e.datepickerOptions.initDate,d.timezone)||new Date,e.$watch(function(){return e.datepickerOptions.initDate},function(e){e&&(p.$isEmpty(p.$modelValue)||p.$invalid)&&(h.activeDate=l.fromTimezone(e,d.timezone),h.refreshView())})):h.activeDate=new Date}});else{if(angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle"],function(n){h[n]=angular.isDefined(t[n])?r(t[n])(e.$parent):u[n],angular.isDefined(t[n])&&f&&s.warn("uib-datepicker "+n+" attribute usage is deprecated, use datepicker-options attribute instead")}),angular.forEach(["showWeeks","yearRows","yearColumns","shortcutPropagation"],function(n){h[n]=angular.isDefined(t[n])?e.$parent.$eval(t[n]):u[n],angular.isDefined(t[n])&&f&&s.warn("uib-datepicker "+n+" attribute usage is deprecated, use datepicker-options attribute instead")}),angular.forEach(["dateDisabled","customClass"],function(e){angular.isDefined(t[e])&&f&&s.warn("uib-datepicker "+e+" attribute usage is deprecated, use datepicker-options attribute instead")}),angular.isDefined(t.startingDay)?(f&&s.warn("uib-datepicker startingDay attribute usage is deprecated, use datepicker-options attribute instead"),h.startingDay=e.$parent.$eval(t.startingDay)):angular.isNumber(u.startingDay)?h.startingDay=u.startingDay:h.startingDay=(i.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7,angular.forEach(["minDate","maxDate"],function(n){t[n]?(f&&s.warn("uib-datepicker "+n+" attribute usage is deprecated, use datepicker-options attribute instead"),v.push(e.$parent.$watch(t[n],function(e){e?angular.isDate(e)?h[n]=l.fromTimezone(new Date(e),d.timezone):h[n]=new Date(o(e,"medium")):h[n]=null,h.refreshView()}))):h[n]=u[n]?l.fromTimezone(new Date(u[n]),d.timezone):null}),angular.forEach(["minMode","maxMode"],function(n){t[n]?(f&&s.warn("uib-datepicker "+n+" attribute usage is deprecated, use datepicker-options attribute instead"),v.push(e.$parent.$watch(t[n],function(r){h[n]=e[n]=angular.isDefined(r)?r:t[n],("minMode"===n&&h.modes.indexOf(e.datepickerMode)<h.modes.indexOf(h[n])||"maxMode"===n&&h.modes.indexOf(e.datepickerMode)>h.modes.indexOf(h[n]))&&(e.datepickerMode=h[n])}))):h[n]=e[n]=u[n]||null}),angular.isDefined(t.initDate)){f&&s.warn("uib-datepicker initDate attribute usage is deprecated, use datepicker-options attribute instead");var g=l.fromTimezone(e.$parent.$eval(t.initDate),d.timezone);this.activeDate=isNaN(g)?new Date:g,v.push(e.$parent.$watch(t.initDate,function(e){e&&(p.$isEmpty(p.$modelValue)||p.$invalid)&&(e=l.fromTimezone(e,d.timezone),h.activeDate=isNaN(e)?new Date:e,h.refreshView())}))}else this.activeDate=new Date;t.datepickerMode&&f&&s.warn("uib-datepicker datepickerMode attribute usage is deprecated, use datepicker-options attribute instead"),e.datepickerMode=e.datepickerMode||u.datepickerMode}e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),e.disabled=angular.isDefined(t.disabled)||!1,angular.isDefined(t.ngDisabled)&&v.push(e.$parent.$watch(t.ngDisabled,function(t){e.disabled=t,h.refreshView()})),e.isActive=function(t){return 0===h.compare(t.date,h.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){p=e,d=e.$options||u.ngModelOptions,this.activeDate=p.$modelValue||new Date,p.$render=function(){h.render()}},this.render=function(){if(p.$viewValue){var e=new Date(p.$viewValue),t=!isNaN(e);t?this.activeDate=l.fromTimezone(e,d.timezone):a||s.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){e.selectedDt=null,this._refreshView(),e.activeDt&&(e.activeDateId=e.activeDt.uid);var t=p.$viewValue?new Date(p.$viewValue):null;t=l.fromTimezone(t,d.timezone),p.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,n){var r=p.$viewValue?new Date(p.$viewValue):null;r=l.fromTimezone(r,d.timezone);var i=new Date;i=l.fromTimezone(i,d.timezone);var s=this.compare(t,i),o={date:t,label:l.filter(t,n),selected:r&&0===this.compare(t,r),disabled:this.isDisabled(t),past:0>s,current:0===s,future:s>0,customClass:this.customClass(t)||null};return r&&0===this.compare(t,r)&&(e.selectedDt=o),h.activeDate&&0===this.compare(o.date,h.activeDate)&&(e.activeDt=o),o},this.isDisabled=function(t){return e.disabled||this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===h.minMode){var n=p.$viewValue?l.fromTimezone(new Date(p.$viewValue),d.timezone):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n=l.toTimezone(n,d.timezone),p.$setViewValue(n),p.$render()}else h.activeDate=t,c(h.modes[h.modes.indexOf(e.datepickerMode)-1]),e.$emit("uib:datepicker.mode")},e.move=function(e){var t=h.activeDate.getFullYear()+e*(h.step.years||0),n=h.activeDate.getMonth()+e*(h.step.months||0);h.activeDate.setFullYear(t,n,1),h.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===h.maxMode&&1===t||e.datepickerMode===h.minMode&&-1===t||(c(h.modes[h.modes.indexOf(e.datepickerMode)+t]),e.$emit("uib:datepicker.mode"))},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var y=function(){h.element[0].focus()};e.$on("uib:datepicker.focus",y),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey&&!e.disabled)if(t.preventDefault(),h.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(h.isDisabled(h.activeDate))return;e.select(h.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(h.handleKeyDown(n,t),h.refreshView()):e.toggleMode("up"===n?1:-1)},e.$on("$destroy",function(){for(;v.length;)v.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,n){function r(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?s[t]:29}function i(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}var s=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var n,r=new Array(t),i=new Date(e),s=0;t>s;)n=new Date(i),r[s++]=n,i.setDate(i.getDate()+1);return r},this._refreshView=function(){var t=this.activeDate.getFullYear(),r=this.activeDate.getMonth(),s=new Date(this.activeDate);s.setFullYear(t,r,1);var o=this.startingDay-s.getDay(),u=o>0?7-o:-o,f=new Date(s);u>0&&f.setDate(-u+1);for(var l=this.getDates(f,42),h=0;42>h;h++)l[h]=angular.extend(this.createDateObject(l[h],this.formatDay),{secondary:l[h].getMonth()!==r,uid:e.uniqueId+"-"+h});e.labels=new Array(7);for(var p=0;7>p;p++)e.labels[p]={abbr:n(l[p].date,this.formatDayHeader),full:n(l[p].date,"EEEE")};if(e.title=n(this.activeDate,this.formatDayTitle),e.rows=this.split(l,7),e.showWeeks){e.weekNumbers=[];for(var d=(11-this.startingDay)%7,v=e.rows.length,m=0;v>m;m++)e.weekNumbers.push(i(e.rows[m][d].date))}},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n=this.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(i,1),n=Math.min(r(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=r(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,n){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,r=new Array(12),i=this.activeDate.getFullYear(),s=0;12>s;s++)t=new Date(this.activeDate),t.setFullYear(i,s,1),r[s]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+s});e.title=n(this.activeDate,this.formatMonthTitle),e.rows=this.split(r,3)},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth()),r=new Date(t.getFullYear(),t.getMonth());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n=this.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var r=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(r)}else"home"===e?n=0:"end"===e&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t,n){function r(e){return parseInt((e-1)/s,10)*s+1}var i,s;this.element=t,this.yearpickerInit=function(){i=this.yearColumns,s=this.yearRows*i,this.step={years:s}},this._refreshView=function(){for(var t,n=new Array(s),o=0,u=r(this.activeDate.getFullYear());s>o;o++)t=new Date(this.activeDate),t.setFullYear(u+o,0,1),n[o]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+o});e.title=[n[0].label,n[s-1].label].join(" - "),e.rows=this.split(n,i),e.columns=i},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var n=this.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=i:"right"===e?n+=1:"down"===e?n+=i:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*s:"home"===e?n=r(this.activeDate.getFullYear()):"end"===e&&(n=r(this.activeDate.getFullYear())+s-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",datepickerOptions:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,r){var i=r[0],s=r[1];i.init(s)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(e,t,n,r){var i=r[0],s=r[1];s.init(i)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(e,t,n,r){var i=r[0],s=r[1];s.init(i)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(e,t,n,r){var i=r[0];angular.extend(i,r[1]),i.yearpickerInit(),i.refreshView()}}}).value("uibDatepickerPopupAttributeWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepicker/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","uibDatepickerPopupAttributeWarning",function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){function m(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function g(t){var n=c.parse(t,x,e.date);if(isNaN(n))for(var r=0;r<H.length;r++)if(n=c.parse(t,H[r],e.date),!isNaN(n))return n;return n}function y(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=g(e);if(!isNaN(t))return c.toTimezone(t,D.timezone)}return _.$options&&_.$options.allowInvalid?e:void 0}function b(e,t){var r=e||t;return n.ngRequired||r?(angular.isNumber(r)&&(r=new Date(r)),r?angular.isDate(r)&&!isNaN(r)?!0:angular.isString(r)?!isNaN(g(t)):!1:!0):!0}function w(n){if(e.isOpen||!e.disabled){var r=P[0],i=t[0].contains(n.target),s=void 0!==r.contains&&r.contains(n.target);!e.isOpen||i||s||e.$apply(function(){e.isOpen=!1})}}function E(n){27===n.which&&e.isOpen?(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==n.which||e.isOpen||(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}function S(){if(e.isOpen){var r=angular.element(P[0].querySelector(".uib-datepicker-popup")),i=n.popupPlacement?n.popupPlacement:h.placement,s=f.positionElements(t,r,i,N);r.css({top:s.top+"px",left:s.left+"px"}),r.hasClass("uib-position-measure")&&r.removeClass("uib-position-measure")}}var x,T,N,C,k,L,A,O,M,_,D,P,H,B={},j=!1,F=[];e.watchData={},this.init=function(f){if(_=f,D=f.$options||d.ngModelOptions,T=angular.isDefined(n.closeOnDateSelection)?e.$parent.$eval(n.closeOnDateSelection):h.closeOnDateSelection,N=angular.isDefined(n.datepickerAppendToBody)?e.$parent.$eval(n.datepickerAppendToBody):h.appendToBody,C=angular.isDefined(n.onOpenFocus)?e.$parent.$eval(n.onOpenFocus):h.onOpenFocus,k=angular.isDefined(n.datepickerPopupTemplateUrl)?n.datepickerPopupTemplateUrl:h.datepickerPopupTemplateUrl,L=angular.isDefined(n.datepickerTemplateUrl)?n.datepickerTemplateUrl:h.datepickerTemplateUrl,H=angular.isDefined(n.altInputFormats)?e.$parent.$eval(n.altInputFormats):h.altInputFormats,e.showButtonBar=angular.isDefined(n.showButtonBar)?e.$parent.$eval(n.showButtonBar):h.showButtonBar,h.html5Types[n.type]?(x=h.html5Types[n.type],j=!0):(x=n.uibDatepickerPopup||h.datepickerPopup,n.$observe("uibDatepickerPopup",function(e,t){var n=e||h.datepickerPopup;if(n!==x&&(x=n,_.$modelValue=null,!x))throw new Error("uibDatepickerPopup must have a date format specified.")})),!x)throw new Error("uibDatepickerPopup must have a date format specified.");if(j&&n.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");A=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),e.ngModelOptions=angular.copy(D),e.ngModelOptions.timezone=null,e.ngModelOptions.updateOnDefault===!0&&(e.ngModelOptions.updateOn=e.ngModelOptions.updateOn?e.ngModelOptions.updateOn+" default":"default"),A.attr({"ng-model":"date","ng-model-options":"ngModelOptions","ng-change":"dateSelection(date)","template-url":k}),O=angular.element(A.children()[0]),O.attr("template-url",L),j&&"month"===n.type&&(O.attr("datepicker-mode",'"month"'),O.attr("min-mode","month")),e.datepickerOptions&&O.attr("datepicker-options","datepickerOptions"),angular.forEach(["minMode","maxMode","datepickerMode","shortcutPropagation"],function(t){if(n[t]){v&&i.warn("uib-datepicker settings via uib-datepicker-popup attributes are deprecated and will be removed in UI Bootstrap 1.3, use datepicker-options attribute instead");var r=s(n[t]),o={get:function(){return r(e.$parent)}};if(O.attr(m(t),"watchData."+t),"datepickerMode"===t){var u=r.assign;o.set=function(t){u(e.$parent,t)}}Object.defineProperty(e.watchData,t,o)}}),angular.forEach(["minDate","maxDate","initDate"],function(t){if(n[t]){v&&i.warn("uib-datepicker settings via uib-datepicker-popup attributes are deprecated and will be removed in UI Bootstrap 1.3, use datepicker-options attribute instead");var r=s(n[t]);F.push(e.$parent.$watch(r,function(n){if("minDate"===t||"maxDate"===t)null===n?B[t]=null:angular.isDate(n)?B[t]=c.fromTimezone(new Date(n),D.timezone):B[t]=new Date(l(n,"medium")),e.watchData[t]=null===n?null:B[t];else{var r=n?new Date(n):new Date;e.watchData[t]=c.fromTimezone(r,D.timezone)}})),O.attr(m(t),"watchData."+t)}}),n.dateDisabled&&(v&&i.warn("uib-datepicker settings via uib-datepicker-popup attributes are deprecated and will be removed in UI Bootstrap 1.3, use datepicker-options attribute instead"),O.attr("date-disabled","dateDisabled({ date: date, mode: mode })")),angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRows","yearColumns"],function(e){angular.isDefined(n[e])&&(v&&i.warn("uib-datepicker settings via uib-datepicker-popup attributes are deprecated and will be removed in UI Bootstrap 1.3, use datepicker-options attribute instead"),O.attr(m(e),n[e]))}),n.customClass&&(v&&i.warn("uib-datepicker settings via uib-datepicker-popup attributes are deprecated and will be removed in UI Bootstrap 1.3, use datepicker-options attribute instead"),O.attr("custom-class","customClass({ date: date, mode: mode })")),j?_.$formatters.push(function(t){return e.date=c.fromTimezone(t,D.timezone),t}):(_.$$parserName="date",_.$validators.date=b,_.$parsers.unshift(y),_.$formatters.push(function(t){return _.$isEmpty(t)?(e.date=t,t):(e.date=c.fromTimezone(t,D.timezone),angular.isNumber(e.date)&&(e.date=new Date(e.date)),c.filter(e.date,x))})),_.$viewChangeListeners.push(function(){e.date=g(_.$viewValue)}),t.on("keydown",E),P=r(A)(e),A.remove(),N?u.find("body").append(P):t.after(P),e.$on("$destroy",function(){for(e.isOpen===!0&&(a.$$phase||e.$apply(function(){e.isOpen=!1})),P.remove(),t.off("keydown",E),u.off("click",w),M&&M.off("scroll",S),angular.element(o).off("resize",S);F.length;)F.shift()()})},e.getText=function(t){return e[t+"Text"]||h[t+"Text"]},e.isDisabled=function(t){return"today"===t&&(t=new Date),e.watchData.minDate&&e.compare(t,B.minDate)<0||e.watchData.maxDate&&e.compare(t,B.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(n){angular.isDefined(n)&&(e.date=n);var r=e.date?c.filter(e.date,x):null;t.val(r),_.$setViewValue(r),T&&(e.isOpen=!1,t[0].focus())},e.keydown=function(n){27===n.which&&(n.stopPropagation(),e.isOpen=!1,t[0].focus())},e.select=function(t,n){if(n.stopPropagation(),"today"===t){var r=new Date;angular.isDate(e.date)?(t=new Date(e.date),t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate())):t=new Date(r.setHours(0,0,0,0))}e.dateSelection(t)},e.close=function(n){n.stopPropagation(),e.isOpen=!1,t[0].focus()},e.disabled=angular.isDefined(n.disabled)||!1,n.ngDisabled&&F.push(e.$parent.$watch(s(n.ngDisabled),function(t){e.disabled=t})),e.$watch("isOpen",function(r){r?e.disabled?e.isOpen=!1:p(function(){S(),C&&e.$broadcast("uib:datepicker.focus"),u.on("click",w);var r=n.popupPlacement?n.popupPlacement:h.placement;N||f.parsePlacement(r)[2]?(M=M||angular.element(f.scrollParent(t)),M&&M.on("scroll",S)):M=null,angular.element(o).on("resize",S)},0,!1):(u.off("click",w),M&&M.off("scroll",S),angular.element(o).off("resize",S))}),e.$on("uib:datepicker.mode",function(){p(S,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(e,t,n,r){var i=r[0],s=r[1];s.init(i)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(e){return function(t,n){var r;return function(){var i=this,s=Array.prototype.slice.call(arguments);r&&e.cancel(r),r=e(function(){t.apply(i,s)},n)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t){n||(e.on("click",r),e.on("keydown",i)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t){n===t&&(n=null,e.off("click",r),e.off("keydown",i))};var r=function(e){if(n&&!(e&&"disabled"===n.getAutoClose()||e&&3===e.which)){var r=n.getToggleElement();if(!(e&&r&&r[0].contains(e.target))){var i=n.getDropdownElement();e&&"outsideClick"===n.getAutoClose()&&i&&i[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},i=function(e){27===e.which?(n.focusToggleElement(),r()):n.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.focusDropdownEntry(e.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,r,i,s,o,u,a,f,l){var c,h,p=this,d=e.$new(),v=i.appendToOpenClass,m=i.openClass,g=angular.noop,y=n.onToggle?r(n.onToggle):angular.noop,b=!1,w=null,E=!1,S=a.find("body");t.addClass("dropdown"),this.init=function(){if(n.isOpen&&(h=r(n.isOpen),g=h.assign,e.$watch(h,function(e){d.isOpen=!!e})),angular.isDefined(n.dropdownAppendTo)){var i=r(n.dropdownAppendTo)(d);i&&(w=angular.element(i))}b=angular.isDefined(n.dropdownAppendToBody),E=angular.isDefined(n.keyboardNav),b&&!w&&(w=S),w&&p.dropdownMenu&&(w.append(p.dropdownMenu),t.on("$destroy",function(){p.dropdownMenu.remove()}))},this.toggle=function(e){return d.isOpen=arguments.length?!!e:!d.isOpen,angular.isFunction(g)&&g(d,d.isOpen),d.isOpen},this.isOpen=function(){return d.isOpen},d.getToggleElement=function(){return p.toggleElement},d.getAutoClose=function(){return n.autoClose||"always"},d.getElement=function(){return t},d.isKeynavEnabled=function(){return E},d.focusDropdownEntry=function(e){var n=p.dropdownMenu?angular.element(p.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(p.selectedOption)?p.selectedOption=p.selectedOption===n.length-1?p.selectedOption:p.selectedOption+1:p.selectedOption=0;break;case 38:angular.isNumber(p.selectedOption)?p.selectedOption=0===p.selectedOption?0:p.selectedOption-1:p.selectedOption=n.length-1}n[p.selectedOption].focus()},d.getDropdownElement=function(){return p.dropdownMenu},d.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},d.$watch("isOpen",function(n,r){if(w&&p.dropdownMenu){var i,a,h=u.positionElements(t,p.dropdownMenu,"bottom-left",!0);if(i={top:h.top+"px",display:n?"block":"none"},a=p.dropdownMenu.hasClass("dropdown-menu-right"),a?(i.left="auto",i.right=window.innerWidth-(h.left+t.prop("offsetWidth"))+"px"):(i.left=h.left+"px",i.right="auto"),!b){var E=u.offset(w);i.top=h.top-E.top+"px",a?i.right=window.innerWidth-(h.left-E.left+t.prop("offsetWidth"))+"px":i.left=h.left-E.left+"px"}p.dropdownMenu.css(i)}var S=w?w:t,x=S.hasClass(w?v:m);if(x===!n&&o[n?"addClass":"removeClass"](S,w?v:m).then(function(){angular.isDefined(n)&&n!==r&&y(e,{open:!!n})}),n)p.dropdownMenuTemplateUrl&&l(p.dropdownMenuTemplateUrl).then(function(e){c=d.$new(),f(e.trim())(c,function(e){var t=e;p.dropdownMenu.replaceWith(t),p.dropdownMenu=t})}),d.focusToggleElement(),s.open(d);else{if(p.dropdownMenuTemplateUrl){c&&c.$destroy();var T=angular.element('<ul class="dropdown-menu"></ul>');p.dropdownMenu.replaceWith(T),p.dropdownMenu=T}s.close(d),p.selectedOption=null}angular.isFunction(g)&&g(e,n)}),e.$on("$locationChangeSuccess",function(){"disabled"!==d.getAutoClose()&&(d.isOpen=!1)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,r){if(r&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var i=n.templateUrl;i&&(r.dropdownMenuTemplateUrl=i),r.dropdownMenu||(r.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,r){if(r){t.addClass("dropdown-toggle"),r.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){r.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(r.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t===e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,r=0;r<e.length;r++)if(t===e[r].key){n=r;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},remove:function(t,n){var r=e[t];if(r){var i=r.indexOf(n);-1!==i&&r.splice(i,1),r.length||delete e[t]}}}}}}).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(t,n){var r=e.resolver?t.get(e.resolver):null;return{resolve:function(e,i,s,o){if(r)return r.resolve(e,i,s,o);var u=[];return angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?u.push(n.resolve(t.invoke(e))):angular.isString(e)?u.push(n.resolve(t.get(e))):u.push(n.resolve(e))}),n.all(u).then(function(t){var n={},r=0;return angular.forEach(e,function(e,i){n[i]=t[r++]}),n})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,n){function r(t,r,i){i.modalInClass&&(e.addClass(r,i.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(n,s){var o=s();t.modalOptions.animation?e.removeClass(r,i.modalInClass).then(o):o()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(e,t){return e.addClass(t.backdropClass),r}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(e,t,n,r){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(i,s,o){s.addClass(o.windowClass||""),s.addClass(o.windowTopClass||""),i.size=o.size,i.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},s.on("click",i.close),i.$isRendered=!0;var u=t.defer();o.$observe("modalRender",function(e){"true"===e&&u.resolve()}),u.promise.then(function(){var u=null;o.modalInClass&&(u=n(s,{addClass:o.modalInClass}).start(),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var r=t();n(s,{removeClass:o.modalInClass}).start().then(r)})),t.when(u).then(function(){var t=e.getTop();if(t&&e.modalRendered(t.key),!r[0].activeElement||!s[0].contains(r[0].activeElement)){var n=s[0].querySelector("[autofocus]");n?n.focus():s[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(e,t,n,r,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap",function(e,t,n,r,i,s,o,u){function a(){for(var e=-1,t=b.keys(),n=0;n<t.length;n++)b.get(t[n]).value.backdrop&&(e=n);return e}function f(e,t){var n=b.get(e).value,r=n.appendTo;b.remove(e),h(n.modalDomEl,n.modalScope,function(){var t=n.openedClass||y;w.remove(t,e),r.toggleClass(t,w.hasKey(t)),l(!0)},n.closedDeferred),c(),t&&t.focus?t.focus():r.focus&&r.focus()}function l(e){var t;b.length()>0&&(t=b.top().value,t.modalDomEl.toggleClass(t.windowTopClass||"",e))}function c(){if(v&&-1===a()){var e=m;h(v,m,function(){e=null}),v=void 0,m=void 0}}function h(t,n,r,i){function o(){o.done||(o.done=!0,e.leave(t).then(function(){t.remove(),i&&i.resolve()}),n.$destroy(),r&&r())}var u,a=null,f=function(){return u||(u=s.defer(),a=u.promise),function(){u.resolve()}};return n.$broadcast(E.NOW_CLOSING_EVENT,f),s.when(a).then(o)}function p(e){if(e.isDefaultPrevented())return e;var t=b.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),i.$apply(function(){E.dismiss(t.key,"escape key press")}));break;case 9:E.loadFocusElementList(t);var n=!1;e.shiftKey?(E.isFocusInFirstItem(e)||E.isModalFocused(e,t))&&(n=E.focusLastFocusableElement()):E.isFocusInLastItem(e)&&(n=E.focusFirstFocusableElement()),n&&(e.preventDefault(),e.stopPropagation())}}function d(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}var v,m,g,y="modal-open",b=u.createNew(),w=o.createNew(),E={NOW_CLOSING_EVENT:"modal.stack.now-closing"},S=0,x="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return i.$watch(a,function(e){m&&(m.index=e)}),n.on("keydown",p),i.$on("$destroy",function(){n.off("keydown",p)}),E.open=function(t,s){var o=n[0].activeElement,u=s.openedClass||y;l(!1),b.add(t,{deferred:s.deferred,renderDeferred:s.renderDeferred,closedDeferred:s.closedDeferred,modalScope:s.scope,backdrop:s.backdrop,keyboard:s.keyboard,openedClass:s.openedClass,windowTopClass:s.windowTopClass,animation:s.animation,appendTo:s.appendTo}),w.put(u,t);var f=s.appendTo,c=a();if(!f.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");c>=0&&!v&&(m=i.$new(!0),m.modalOptions=s,m.index=c,v=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),v.attr("backdrop-class",s.backdropClass),s.animation&&v.attr("modal-animation","true"),r(v)(m),e.enter(v,f));var h=angular.element('<div uib-modal-window="modal-window"></div>');h.attr({"template-url":s.windowTemplateUrl,"window-class":s.windowClass,"window-top-class":s.windowTopClass,size:s.size,index:b.length()-1,animate:"animate"}).html(s.content),s.animation&&h.attr("modal-animation","true"),e.enter(r(h)(s.scope),f).then(function(){s.scope.$$uibDestructionScheduled||e.addClass(f,u)}),b.top().value.modalDomEl=h,b.top().value.modalOpener=o,E.clearFocusListCache()},E.close=function(e,t){var n=b.get(e);return n&&d(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),f(e,n.value.modalOpener),!0):!n},E.dismiss=function(e,t){var n=b.get(e);return n&&d(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),f(e,n.value.modalOpener),!0):!n},E.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},E.getTop=function(){return b.top()},E.modalRendered=function(e){var t=b.get(e);t&&t.value.renderDeferred.resolve()},E.focusFirstFocusableElement=function(){return g.length>0?(g[0].focus(),!0):!1},E.focusLastFocusableElement=function(){return g.length>0?(g[g.length-1].focus(),!0):!1},E.isModalFocused=function(e,t){if(e&&t){var n=t.value.modalDomEl;if(n&&n.length)return(e.target||e.srcElement)===n[0]}return!1},E.isFocusInFirstItem=function(e){return g.length>0?(e.target||e.srcElement)===g[0]:!1},E.isFocusInLastItem=function(e){return g.length>0?(e.target||e.srcElement)===g[g.length-1]:!1},E.clearFocusListCache=function(){g=[],S=0},E.loadFocusElementList=function(e){if((void 0===g||!g.length)&&e){var t=e.value.modalDomEl;t&&t.length&&(g=t[0].querySelectorAll(x))}},E}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(t,n,r,i,s,o,u){function f(e){return e.template?n.when(e.template):i(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}var l={},c=null;return l.getPromiseChain=function(){return c},l.open=function(i){function l(){return S}var p=n.defer(),v=n.defer(),m=n.defer(),y=n.defer(),w={result:p.promise,opened:v.promise,closed:m.promise,rendered:y.promise,close:function(e){return u.close(w,e)},dismiss:function(e){return u.dismiss(w,e)}};if(i=angular.extend({},e.options,i),i.resolve=i.resolve||{},i.appendTo=i.appendTo||r.find("body").eq(0),!i.template&&!i.templateUrl)throw new Error("One of template or templateUrl options is required.");var E,S=n.all([f(i),o.resolve(i.resolve,{},null,null)]);return E=c=n.all([c]).then(l,l).then(function(e){var n=i.scope||t,r=n.$new();r.$close=w.close,r.$dismiss=w.dismiss,r.$on("$destroy",function(){r.$$uibDestructionScheduled||r.$dismiss("$uibUnscheduledDestruction")});var o,a,f={};i.controller&&(f.$scope=r,f.$uibModalInstance=w,angular.forEach(e[1],function(e,t){f[t]=e}),a=s(i.controller,f,!0),i.controllerAs?(o=a.instance,i.bindToController&&(o.$close=r.$close,o.$dismiss=r.$dismiss,angular.extend(o,n)),o=a(),r[i.controllerAs]=o):o=a(),angular.isFunction(o.$onInit)&&o.$onInit()),u.open(w,{scope:r,deferred:p,renderDeferred:y,closedDeferred:m,content:e[0],animation:i.animation,backdrop:i.backdrop,keyboard:i.keyboard,backdropClass:i.backdropClass,windowTopClass:i.windowTopClass,windowClass:i.windowClass,windowTemplateUrl:i.windowTemplateUrl,size:i.size,openedClass:i.openedClass,appendTo:i.appendTo}),v.resolve(!0)},function(e){v.reject(e),p.reject(e)})["finally"](function(){c===E&&(c=null)}),w},l}]};return e}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(e){return{create:function(t,n,r){t.setNumPages=r.numPages?e(r.numPages).assign:angular.noop,t.ngModelCtrl={$setViewValue:angular.noop},t._watchers=[],t.init=function(e,i){t.ngModelCtrl=e,t.config=i,e.$render=function(){t.render()},r.itemsPerPage?t._watchers.push(n.$parent.$watch(r.itemsPerPage,function(e){t.itemsPerPage=parseInt(e,10),n.totalPages=t.calculateTotalPages(),t.updatePage()})):t.itemsPerPage=i.itemsPerPage,n.$watch("totalItems",function(e,r){(angular.isDefined(e)||e!==r)&&(n.totalPages=t.calculateTotalPages(),t.updatePage())})},t.calculateTotalPages=function(){var e=t.itemsPerPage<1?1:Math.ceil(n.totalItems/t.itemsPerPage);return Math.max(e||0,1)},t.render=function(){n.page=parseInt(t.ngModelCtrl.$viewValue,10)||1},n.selectPage=function(e,r){r&&r.preventDefault();var i=!n.ngDisabled||!r;i&&n.page!==e&&e>0&&e<=n.totalPages&&(r&&r.target&&r.target.blur(),t.ngModelCtrl.$setViewValue(e),t.ngModelCtrl.$render())},n.getText=function(e){return n[e+"Text"]||t.config[e+"Text"]},n.noPrevious=function(){return 1===n.page},n.noNext=function(){return n.page===n.totalPages},t.updatePage=function(){t.setNumPages(n.$parent,n.totalPages),n.page>n.totalPages?n.selectPage(n.totalPages):t.ngModelCtrl.$render()},n.$on("$destroy",function(){for(;t._watchers.length;)t._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(e,t,n,r){e.align=angular.isDefined(t.align)?e.$parent.$eval(t.align):r.align,n.create(this,e,t)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(e){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(e,t){return t.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(t,n,r,i){var s=i[0],o=i[1];o&&s.init(o,e)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(e,t,n,r,i){function s(e,t,n){return{number:e,text:t,active:n}}function o(e,t){var n=[],r=1,i=t,o=angular.isDefined(a)&&t>a;o&&(f?(r=Math.max(e-Math.floor(a/2),1),i=r+a-1,i>t&&(i=t,r=i-a+1)):(r=(Math.ceil(e/a)-1)*a+1,i=Math.min(r+a-1,t)));for(var u=r;i>=u;u++){var p=s(u,h(u),u===e);n.push(p)}if(o&&a>0&&(!f||l||c)){if(r>1){if(!c||r>3){var d=s(r-1,"...",!1);n.unshift(d)}if(c){if(3===r){var v=s(2,"2",!1);n.unshift(v)}var g=s(1,"1",!1);n.unshift(g)}}if(t>i){if(!c||t-2>i){var y=s(i+1,"...",!1);n.push(y)}if(c){if(i===t-2){var b=s(t-1,t-1,!1);n.push(b)}var w=s(t,t,!1);n.push(w)}}}return n}var u=this,a=angular.isDefined(t.maxSize)?e.$parent.$eval(t.maxSize):i.maxSize,f=angular.isDefined(t.rotate)?e.$parent.$eval(t.rotate):i.rotate,l=angular.isDefined(t.forceEllipses)?e.$parent.$eval(t.forceEllipses):i.forceEllipses,c=angular.isDefined(t.boundaryLinkNumbers)?e.$parent.$eval(t.boundaryLinkNumbers):i.boundaryLinkNumbers,h=angular.isDefined(t.pageLabel)?function(n){return e.$parent.$eval(t.pageLabel,{$page:n})}:angular.identity;e.boundaryLinks=angular.isDefined(t.boundaryLinks)?e.$parent.$eval(t.boundaryLinks):i.boundaryLinks,e.directionLinks=angular.isDefined(t.directionLinks)?e.$parent.$eval(t.directionLinks):i.directionLinks,r.create(this,e,t),t.maxSize&&u._watchers.push(e.$parent.$watch(n(t.maxSize),function(e){a=parseInt(e,10),u.render()}));var p=this.render;this.render=function(){p(),e.page>0&&e.page<=e.totalPages&&(e.pages=o(e.page,e.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,t){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(e,n,r,i){var s=i[0],o=i[1];o&&s.init(o,t)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},n={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},r={};this.options=function(e){angular.extend(r,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(i,s,o,u,f,l,h,p,v){function m(e){if(27===e.which){var t=g.top();t&&(t.value.close(),g.removeTop(),t=null)}}var g=v.createNew();return u.on("keypress",m),h.$on("$destroy",function(){u.off("keypress",m)}),function(i,h,v,m){function y(e){var t=(e||m.trigger||v).split(" "),r=t.map(function(e){return n[e]||e});return{show:t,hide:r}}m=angular.extend({},t,r,m);var w=e(i),E=l.startSymbol(),S=l.endSymbol(),x="<div "+w+'-popup title="'+E+"title"+S+'" '+(m.useContentExp?'content-exp="contentExp()" ':'content="'+E+"content"+S+'" ')+'placement="'+E+"placement"+S+'" popup-class="'+E+"popupClass"+S+'" animation="animation" is-open="isOpen"origin-scope="origScope" class="uib-position-measure"></div>';return{compile:function(e,t){var n=s(x);return function(e,t,r,s){function a(){R.isOpen?d():l()}function l(){(!q||e.$eval(r[h+"Enable"]))&&(E(),T(),R.popupDelay?P||(P=o(v,R.popupDelay,!1)):v())}function d(){b(),R.popupCloseDelay?H||(H=o(w,R.popupCloseDelay,!1)):w()}function v(){return b(),E(),R.content?(S(),void R.$evalAsync(function(){R.isOpen=!0,N(!0),V()})):angular.noop}function b(){P&&(o.cancel(P),P=null),B&&(o.cancel(B),B=null)}function w(){R&&R.$evalAsync(function(){R&&(R.isOpen=!1,N(!1),R.animation?D||(D=o(x,150,!1)):x())})}function E(){H&&(o.cancel(H),H=null),D&&(o.cancel(D),D=null)}function S(){M||(_=R.$new(),M=n(_,function(e){F?u.find("body").append(e):t.after(e)}),C())}function x(){b(),E(),L(),M&&(M.remove(),M=null),_&&(_.$destroy(),_=null)}function T(){R.title=r[h+"Title"],W?R.content=W(e):R.content=r[i],R.popupClass=r[h+"Class"],R.placement=angular.isDefined(r[h+"Placement"])?r[h+"Placement"]:m.placement;var t=f.parsePlacement(R.placement);j=t[1]?t[0]+"-"+t[1]:t[0];var n=parseInt(r[h+"PopupDelay"],10),s=parseInt(r[h+"PopupCloseDelay"],10);R.popupDelay=isNaN(n)?m.popupDelay:n,R.popupCloseDelay=isNaN(s)?m.popupCloseDelay:s}function N(t){z&&angular.isFunction(z.assign)&&z.assign(e,t)}function C(){X.length=0,W?(X.push(e.$watch(W,function(e){R.content=e,!e&&R.isOpen&&w()})),X.push(_.$watch(function(){U||(U=!0,_.$$postDigest(function(){U=!1,R&&R.isOpen&&V()}))}))):X.push(r.$observe(i,function(e){R.content=e,!e&&R.isOpen?w():V()})),X.push(r.$observe(h+"Title",function(e){R.title=e,R.isOpen&&V()})),X.push(r.$observe(h+"Placement",function(e){R.placement=e?e:m.placement;var t=f.parsePlacement(R.placement);j=t[1]?t[0]+"-"+t[1]:t[0],R.isOpen&&V()}))}function L(){X.length&&(angular.forEach(X,function(e){e()}),X.length=0)}function A(e){R&&R.isOpen&&M&&(t[0].contains(e.target)||M[0].contains(e.target)||d())}function O(){var e=r[h+"Trigger"];$(),I=y(e),"none"!==I.show&&I.show.forEach(function(e,n){"outsideClick"===e?(t.on("click",a),u.on("click",A)):e===I.hide[n]?t.on(e,a):e&&(t.on(e,l),t.on(I.hide[n],d)),t.on("keypress",function(e){27===e.which&&d()})})}var M,_,D,P,H,B,j,F=angular.isDefined(m.appendToBody)?m.appendToBody:!1,I=y(void 0),q=angular.isDefined(r[h+"Enable"]),R=e.$new(!0),U=!1,z=angular.isDefined(r[h+"IsOpen"])?p(r[h+"IsOpen"]):!1,W=m.useContentExp?p(r[i]):!1,X=[],V=function(){M&&M.html()&&(B||(B=o(function(){var e=f.positionElements(t,M,R.placement,F);M.css({top:e.top+"px",left:e.left+"px"}),M.hasClass(e.placement.split("-")[0])||(M.removeClass(j.split("-")[0]),M.addClass(e.placement.split("-")[0])),M.hasClass(m.placementClassPrefix+e.placement)||(M.removeClass(m.placementClassPrefix+j),M.addClass(m.placementClassPrefix+e.placement)),M.hasClass("uib-position-measure")?(f.positionArrow(M,e.placement),M.removeClass("uib-position-measure")):j!==e.placement&&f.positionArrow(M,e.placement),j=e.placement,B=null},0,!1)))};R.origScope=e,R.isOpen=!1,g.add(R,{close:w}),R.contentExp=function(){return R.content},r.$observe("disabled",function(e){e&&b(),e&&R.isOpen&&w()}),z&&e.$watch(z,function(e){R&&!e===R.isOpen&&a()});var $=function(){I.show.forEach(function(e){"outsideClick"===e?t.off("click",a):(t.off(e,l),t.off(e,a))}),I.hide.forEach(function(e){"outsideClick"===e?u.off("click",A):t.off(e,d)})};O();var J=e.$eval(r[h+"Animation"]);R.animation=angular.isDefined(J)?!!J:m.animation;var K,Q=h+"AppendToBody";K=Q in r&&void 0===r[Q]?!0:e.$eval(r[Q]),F=angular.isDefined(K)?K:F,e.$on("$destroy",function(){$(),x(),g.remove(R),R=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,r){return{link:function(i,s,o){var u,f,l,h=i.$eval(o.tooltipTemplateTranscludeScope),p=0,v=function(){f&&(f.remove(),f=null),u&&(u.$destroy(),u=null),l&&(e.leave(l).then(function(){f=null}),f=l,l=null)};i.$watch(t.parseAsResourceUrl(o.uibTooltipTemplateTransclude),function(t){var o=++p;t?(r(t,!0).then(function(r){if(o===p){var i=h.$new(),f=r,d=n(f)(i,function(t){v(),e.enter(t,s)});u=i,l=d,u.$emit("$includeContentLoaded",t)}},function(){o===p&&(v(),i.$emit("$includeContentError",t))}),i.$emit("$includeContentRequested",t)):v()}),i.$on("$destroy",v)}}}]).directive("uibTooltipClasses",["$uibPosition",function(e){return{restrict:"A",link:function(t,n,r){if(t.placement){var i=e.parsePlacement(t.placement);n.addClass(i[0])}t.popupClass&&n.addClass(t.popupClass),t.animation()&&n.addClass(r.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){function r(){return angular.isDefined(e.maxParam)?e.maxParam:n.max}var i=this,s=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=r(),this.addBar=function(e,t,n){s||t.css({transition:"none"}),this.bars.push(e),e.max=r(),e.title=n&&angular.isDefined(n.title)?n.title:"progressbar",e.$watch("value",function(t){e.recalculatePercentage()}),e.recalculatePercentage=function(){var t=i.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);t>100&&(e.percent-=t-100)},e.$on("$destroy",function(){t=null,i.removeBar(e)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){i.bars.forEach(function(e){e.max=r(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(e,t,n){var r={$setViewValue:angular.noop},i=this;this.init=function(i){r=i,r.$render=this.render,r.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var s=angular.isDefined(t.titles)?e.$parent.$eval(t.titles):n.titles;this.titles=angular.isArray(s)&&s.length>0?s:n.titles;var o=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(o)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(r.$setViewValue(r.$viewValue===t?0:t),r.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=r.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=r.$viewValue,e.title=i.getTitle(e.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(e,t,n,r){var i=r[0],s=r[1];i.init(s)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){function t(e){for(var t=0;t<r.tabs.length;t++)if(r.tabs[t].index===e)return t}var n,r=this;r.tabs=[],r.select=function(e){if(!i){var s=t(n),o=r.tabs[s];o&&(o.tab.onDeselect(),o.tab.active=!1);var u=r.tabs[e];u?(u.tab.onSelect(),u.tab.active=!0,r.active=u.index,n=u.index):!u&&angular.isNumber(n)&&(r.active=null,n=null)}},r.addTab=function(e){if(r.tabs.push({tab:e,index:e.index}),r.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===r.active||!angular.isNumber(r.active)&&1===r.tabs.length){var n=t(e.index);r.select(n)}},r.removeTab=function(e){var n=t(e.index);if(e.index===r.active){var i=n===r.tabs.length-1?n-1:n+1%r.tabs.length;r.select(i)}r.tabs.splice(n,1)},e.$watch("tabset.active",function(e){angular.isNumber(e)&&e!==n&&r.select(t(e))});var i;e.$on("$destroy",function(){i=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1,angular.isUndefined(n.active)&&(e.active=0)}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(t,n,r,i,s){t.disabled=!1,r.disable&&t.$parent.$watch(e(r.disable),function(e){t.disabled=!!e}),angular.isUndefined(r.index)&&(i.tabs&&i.tabs.length?t.index=Math.max.apply(null,i.tabs.map(function(e){return e.index}))+1:t.index=0),angular.isUndefined(r.classes)&&(t.classes=""),t.select=function(){if(!t.disabled){for(var e,n=0;n<i.tabs.length;n++)if(i.tabs[n].tab===t){e=n;break}i.select(e)}},i.addTab(t),t.$on("$destroy",function(){i.removeTab(t)}),t.$transcludeFn=s}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(t,n,r){var i=t.$eval(r.uibTabContentTransclude).tab;i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(e,t,n,r,i,s,o){function u(){var t=+e.hours,n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===w[1]&&(t+=12)),t):void 0}function a(){var t=+e.minutes;return t>=0&&60>t?t:void 0}function f(){var t=+e.seconds;return t>=0&&60>t?t:void 0}function l(e){return null===e?"":angular.isDefined(e)&&e.toString().length<2?"0"+e:e.toString()}function c(e){h(),b.$setViewValue(new Date(g)),p(e)}function h(){b.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1,e.invalidSeconds=!1}function p(t){if(b.$modelValue){var n=g.getHours(),r=g.getMinutes(),i=g.getSeconds();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:l(n),"m"!==t&&(e.minutes=l(r)),e.meridian=g.getHours()<12?w[0]:w[1],"s"!==t&&(e.seconds=l(i)),e.meridian=g.getHours()<12?w[0]:w[1]}else e.hours=null,e.minutes=null,e.seconds=null,e.meridian=w[0]}function d(e){g=m(g,e),c()}function v(e,t){return m(e,60*t)}function m(e,t){var n=new Date(e.getTime()+1e3*t),r=new Date(e);return r.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),r}var g=new Date,y=[],b={$setViewValue:angular.noop},w=angular.isDefined(n.meridians)?e.$parent.$eval(n.meridians):o.meridians||s.DATETIME_FORMATS.AMPMS;e.tabindex=angular.isDefined(n.tabindex)?n.tabindex:0,t.removeAttr("tabindex"),this.init=function(t,r){b=t,b.$render=this.render,b.$formatters.unshift(function(e){return e?new Date(e):null});var i=r.eq(0),s=r.eq(1),u=r.eq(2),a=angular.isDefined(n.mousewheel)?e.$parent.$eval(n.mousewheel):o.mousewheel;a&&this.setupMousewheelEvents(i,s,u);var f=angular.isDefined(n.arrowkeys)?e.$parent.$eval(n.arrowkeys):o.arrowkeys;f&&this.setupArrowkeyEvents(i,s,u),e.readonlyInput=angular.isDefined(n.readonlyInput)?e.$parent.$eval(n.readonlyInput):o.readonlyInput,this.setupInputEvents(i,s,u)};var E=o.hourStep;n.hourStep&&y.push(e.$parent.$watch(r(n.hourStep),function(e){E=+e}));var S=o.minuteStep;n.minuteStep&&y.push(e.$parent.$watch(r(n.minuteStep),function(e){S=+e}));var x;y.push(e.$parent.$watch(r(n.min),function(e){var t=new Date(e);x=isNaN(t)?void 0:t}));var T;y.push(e.$parent.$watch(r(n.max),function(e){var t=new Date(e);T=isNaN(t)?void 0:t}));var N=!1;n.ngDisabled&&y.push(e.$parent.$watch(r(n.ngDisabled),function(e){N=e})),e.noIncrementHours=function(){var e=v(g,60*E);return N||e>T||g>e&&x>e},e.noDecrementHours=function(){var e=v(g,60*-E);return N||x>e||e>g&&e>T},e.noIncrementMinutes=function(){var e=v(g,S);return N||e>T||g>e&&x>e},e.noDecrementMinutes=function(){var e=v(g,-S);return N||x>e||e>g&&e>T},e.noIncrementSeconds=function(){var e=m(g,C);return N||e>T||g>e&&x>e},e.noDecrementSeconds=function(){var e=m(g,-C);return N||x>e||e>g&&e>T},e.noToggleMeridian=function(){return g.getHours()<12?N||v(g,720)>T:N||v(g,-720)<x};var C=o.secondStep;n.secondStep&&y.push(e.$parent.$watch(r(n.secondStep),function(e){C=+e})),e.showSeconds=o.showSeconds,n.showSeconds&&y.push(e.$parent.$watch(r(n.showSeconds),function(t){e.showSeconds=!!t})),e.showMeridian=o.showMeridian,n.showMeridian&&y.push(e.$parent.$watch(r(n.showMeridian),function(t){if(e.showMeridian=!!t,b.$error.time){var n=u(),r=a();angular.isDefined(n)&&angular.isDefined(r)&&(g.setHours(n),c())}else p()})),this.setupMousewheelEvents=function(t,n,r){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){N||e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){N||e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()}),r.bind("mousewheel wheel",function(t){N||e.$apply(i(t)?e.incrementSeconds():e.decrementSeconds()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,n,r){t.bind("keydown",function(t){N||(38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply()))}),n.bind("keydown",function(t){N||(38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply()))}),r.bind("keydown",function(t){N||(38===t.which?(t.preventDefault(),e.incrementSeconds(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementSeconds(),e.$apply()))})},this.setupInputEvents=function(t,n,r){if(e.readonlyInput)return e.updateHours=angular.noop,e.updateMinutes=angular.noop,void (e.updateSeconds=angular.noop);var i=function(t,n,r){b.$setViewValue(null),b.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n),angular.isDefined(r)&&(e.invalidSeconds=r)};e.updateHours=function(){var e=u(),t=a();b.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(g.setHours(e),g.setMinutes(t),x>g||g>T?i(!0):c("h")):i(!0)},t.bind("blur",function(t){b.$setTouched(),null===e.hours||""===e.hours?i(!0):!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=a(),t=u();b.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(g.setHours(t),g.setMinutes(e),x>g||g>T?i(void 0,!0):c("m")):i(void 0,!0)},n.bind("blur",function(t){b.$setTouched(),null===e.minutes?i(void 0,!0):!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})}),e.updateSeconds=function(){var e=f();b.$setDirty(),angular.isDefined(e)?(g.setSeconds(e),c("s")):i(void 0,void 0,!0)},r.bind("blur",function(t){!e.invalidSeconds&&e.seconds<10&&e.$apply(function(){e.seconds=l(e.seconds)})})},this.render=function(){var t=b.$viewValue;isNaN(t)?(b.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(t&&(g=t),x>g||g>T?(b.$setValidity("time",!1),e.invalidHours=!0,e.invalidMinutes=!0):h(),p())},e.showSpinners=angular.isDefined(n.showSpinners)?e.$parent.$eval(n.showSpinners):o.showSpinners,e.incrementHours=function(){e.noIncrementHours()||d(60*E*60)},e.decrementHours=function(){e.noDecrementHours()||d(60*-E*60)},e.incrementMinutes=function(){e.noIncrementMinutes()||d(60*S)},e.decrementMinutes=function(){e.noDecrementMinutes()||d(60*-S)},e.incrementSeconds=function(){e.noIncrementSeconds()||d(C)},e.decrementSeconds=function(){e.noDecrementSeconds()||d(-C)},e.toggleMeridian=function(){var t=a(),n=u();e.noToggleMeridian()||(angular.isDefined(t)&&angular.isDefined(n)?d(720*(g.getHours()<12?60:-60)):e.meridian=e.meridian===w[0]?w[1]:w[0])},e.blur=function(){b.$setTouched()},e.$on("$destroy",function(){for(;y.length;)y.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(e){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(t,n){return n.templateUrl||e.templateUrl},link:function(e,t,n,r){var i=r[0],s=r[1];s&&i.init(s,t.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var r=n.match(t);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:r[3],source:e(r[4]),viewMapper:e(r[2]||r[1]),modelMapper:e(r[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(){I.moveInProgress||(I.moveInProgress=!0,I.$digest()),Q()}function d(){I.position=A?c.offset(t):c.position(t),I.position.top+=t.prop("offsetHeight")}var v,m,g=[9,13,27,38,40],y=200,b=e.$eval(n.typeaheadMinLength);b||0===b||(b=1),e.$watch(n.typeaheadMinLength,function(e){b=e||0===e?e:1});var w=e.$eval(n.typeaheadWaitMs)||0,E=e.$eval(n.typeaheadEditable)!==!1;e.$watch(n.typeaheadEditable,function(e){E=e!==!1});var S,x,T=i(n.typeaheadLoading).assign||angular.noop,N=i(n.typeaheadOnSelect),C=angular.isDefined(n.typeaheadSelectOnBlur)?e.$eval(n.typeaheadSelectOnBlur):!1,k=i(n.typeaheadNoResults).assign||angular.noop,L=n.typeaheadInputFormatter?i(n.typeaheadInputFormatter):void 0,A=n.typeaheadAppendToBody?e.$eval(n.typeaheadAppendToBody):!1,O=n.typeaheadAppendTo?e.$eval(n.typeaheadAppendTo):null,M=e.$eval(n.typeaheadFocusFirst)!==!1,_=n.typeaheadSelectOnExact?e.$eval(n.typeaheadSelectOnExact):!1,D=i(n.typeaheadIsOpen).assign||angular.noop,P=e.$eval(n.typeaheadShowHint)||!1,H=i(n.ngModel),B=i(n.ngModel+"($$$p)"),j=function(t,n){return angular.isFunction(H(e))&&m&&m.$options&&m.$options.getterSetter?B(t,{$$$p:n}):H.assign(t,n)},F=h.parse(n.uibTypeahead),I=e.$new(),q=e.$on("$destroy",function(){I.$destroy()});I.$on("$destroy",q);var R="typeahead-"+I.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":R});var U,z;P&&(U=angular.element("<div></div>"),U.css("position","relative"),t.after(U),z=t.clone(),z.attr("placeholder",""),z.attr("tabindex","-1"),z.val(""),z.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),t.css({position:"relative","vertical-align":"top","background-color":"transparent"}),U.append(z),z.after(t));var W=angular.element("<div uib-typeahead-popup></div>");W.attr({id:R,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(n.typeaheadTemplateUrl)&&W.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&W.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var X=function(){P&&z.val("")},V=function(){I.matches=[],I.activeIdx=-1,t.attr("aria-expanded",!1),X()},$=function(e){return R+"-option-"+e};I.$watch("activeIdx",function(e){0>e?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",$(e))});var J=function(e,t){return I.matches.length>t&&e?e.toUpperCase()===I.matches[t].label.toUpperCase():!1},K=function(n,r){var i={$viewValue:n};T(e,!0),k(e,!1),s.when(F.source(e,i)).then(function(s){var o=n===v.$viewValue;if(o&&S)if(s&&s.length>0){I.activeIdx=M?0:-1,k(e,!1),I.matches.length=0;for(var u=0;u<s.length;u++)i[F.itemName]=s[u],I.matches.push({id:$(u),label:F.viewMapper(I,i),model:s[u]});if(I.query=n,d(),t.attr("aria-expanded",!0),_&&1===I.matches.length&&J(n,0)&&(angular.isNumber(I.debounceUpdate)||angular.isObject(I.debounceUpdate)?l(function(){I.select(0,r)},angular.isNumber(I.debounceUpdate)?I.debounceUpdate:I.debounceUpdate["default"]):I.select(0,r)),P){var a=I.matches[0].label;angular.isString(n)&&n.length>0&&a.slice(0,n.length).toUpperCase()===n.toUpperCase()?z.val(n+a.slice(n.length)):z.val("")}}else V(),k(e,!0);o&&T(e,!1)},function(){V(),T(e,!1),k(e,!0)})};A&&(angular.element(a).on("resize",p),u.find("body").on("scroll",p));var Q=l(function(){I.matches.length&&d(),I.moveInProgress=!1},y);I.moveInProgress=!1,I.query=void 0;var G,Y=function(e){G=o(function(){K(e)},w)},Z=function(){G&&o.cancel(G)};V(),I.assignIsOpen=function(t){D(e,t)},I.select=function(r,i){var s,u,a={};x=!0,a[F.itemName]=u=I.matches[r].model,s=F.modelMapper(e,a),j(e,s),v.$setValidity("editable",!0),v.$setValidity("parse",!0),N(e,{$item:u,$model:s,$label:F.viewMapper(e,a),$event:i}),V(),I.$eval(n.typeaheadFocusOnSelect)!==!1&&o(function(){t[0].focus()},0,!1)},t.on("keydown",function(t){if(0!==I.matches.length&&-1!==g.indexOf(t.which)){if(-1===I.activeIdx&&(9===t.which||13===t.which)||9===t.which&&t.shiftKey)return V(),void I.$digest();t.preventDefault();var n;switch(t.which){case 9:case 13:I.$apply(function(){angular.isNumber(I.debounceUpdate)||angular.isObject(I.debounceUpdate)?l(function(){I.select(I.activeIdx,t)},angular.isNumber(I.debounceUpdate)?I.debounceUpdate:I.debounceUpdate["default"]):I.select(I.activeIdx,t)});break;case 27:t.stopPropagation(),V(),e.$digest();break;case 38:I.activeIdx=(I.activeIdx>0?I.activeIdx:I.matches.length)-1,I.$digest(),n=W.find("li")[I.activeIdx],n.parentNode.scrollTop=n.offsetTop;break;case 40:I.activeIdx=(I.activeIdx+1)%I.matches.length,I.$digest(),n=W.find("li")[I.activeIdx],n.parentNode.scrollTop=n.offsetTop}}}),t.bind("focus",function(e){S=!0,0!==b||v.$viewValue||o(function(){K(v.$viewValue,e)},0)}),t.bind("blur",function(e){C&&I.matches.length&&-1!==I.activeIdx&&!x&&(x=!0,I.$apply(function(){angular.isObject(I.debounceUpdate)&&angular.isNumber(I.debounceUpdate.blur)?l(function(){I.select(I.activeIdx,e)},I.debounceUpdate.blur):I.select(I.activeIdx,e)})),!E&&v.$error.editable&&(v.$viewValue="",t.val("")),S=!1,x=!1});var et=function(n){t[0]!==n.target&&3!==n.which&&0!==I.matches.length&&(V(),f.$$phase||e.$digest())};u.on("click",et),e.$on("$destroy",function(){u.off("click",et),(A||O)&&tt.remove(),A&&(angular.element(a).off("resize",p),u.find("body").off("scroll",p)),W.remove(),P&&U.remove()});var tt=r(W)(I);A?u.find("body").append(tt):O?angular.element(O).eq(0).append(tt):t.after(tt),this.init=function(t,n){v=t,m=n,I.debounceUpdate=v.$options&&i(v.$options.debounce)(e),v.$parsers.unshift(function(t){return S=!0,0===b||t&&t.length>=b?w>0?(Z(),Y(t)):K(t):(T(e,!1),Z(),V()),E?t:t?void v.$setValidity("editable",!1):(v.$setValidity("editable",!0),null)}),v.$formatters.push(function(t){var n,r,i={};return E||v.$setValidity("editable",!0),L?(i.$model=t,L(e,i)):(i[F.itemName]=t,n=F.viewMapper(e,i),i[F.itemName]=void 0,r=F.viewMapper(e,i),n!==r?n:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(e,t,n,r){r[2].init(r[0],r[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(e){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(t,n,r){t.templateUrl=r.templateUrl,t.isOpen=function(){var e=t.matches.length>0;return t.assignIsOpen({isOpen:e}),e},t.isActive=function(e){return t.active===e},t.selectActive=function(e){t.active=e},t.selectMatch=function(n,r){var i=t.debounce();angular.isNumber(i)||angular.isObject(i)?e(function(){t.select({activeIdx:n,evt:r})},angular.isNumber(i)?i:i["default"]):t.select({activeIdx:n,evt:r})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{scope:{index:"=",match:"=",query:"="},link:function(r,i,s){var o=n(s.templateUrl)(r.$parent)||"uib/template/typeahead/typeahead-match.html";e(o).then(function(e){var n=angular.element(e.trim());i.replaceWith(n),t(n)(r)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(e,t,n){function r(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function i(e){return/<.*>/g.test(e)}var s;return s=t.has("$sanitize"),function(t,o){return!s&&i(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=o?(""+t).replace(new RegExp(r(o),"gi"),"<strong>$&</strong>"):t,s||(t=e.trustAsHtml(t)),t}}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),define("bootstrap",["angular"],function(){}),angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(e){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return t.bind(e)("I")?e.parentNode:e},getOffset:function(e,t){for(var n=0,r=0,i=e.getBoundingClientRect();e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t||"BODY"!==e.tagName?(n+=e.scrollLeft,r+=e.scrollTop):(n+=document.documentElement.scrollLeft||e.scrollLeft,r+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:i.top+window.pageYOffset,left:i.left+window.pageXOffset,scrollX:n,scrollY:r}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,t,n,r){e/=255,t/=255,n/=255;var i,s,o,u;return o=Math.max(e,t,n),u=o-Math.min(e,t,n),i=0===u?null:o===e?(t-n)/u:o===t?(n-e)/u+2:(e-t)/u+4,i=(i+360)%6*60/360,s=0===u?0:u/o,{h:i||1,s:s,b:o,a:r||1}},setColor:function(t){t=t?t.toLowerCase():t;for(var n in e.stringParsers)if(e.stringParsers.hasOwnProperty(n)){var r=e.stringParsers[n],i=r.re.exec(t),s=i&&r.parse(i);if(s)return this.value=this.RGBtoHSB.apply(null,s),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,r){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var i,s,o,u,a;return e=e%360/60,a=n*t,u=a*(1-Math.abs(e%2-1)),i=s=o=n-a,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],{r:Math.round(255*i),g:Math.round(255*s),b:Math.round(255*o),a:r||this.value.a}},toHex:function(e,t,n,r){var i=this.toRGB(e,t,n,r);return"#"+(1<<24|parseInt(i.r,10)<<16|parseInt(i.g,10)<<8|parseInt(i.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){"use strict";var t={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},n={};return{getSlider:function(){return t},getLeftPosition:function(e){return Math.max(0,Math.min(t.maxLeft,t.left+((e.pageX||n.left)-n.left)))},getTopPosition:function(e){return Math.max(0,Math.min(t.maxTop,t.top+((e.pageY||n.top)-n.top)))},setSlider:function(r,i){var s=e.closestSlider(r.target),u=e.getOffset(s,i),a=s.getBoundingClientRect(),f=r.clientX-a.left,l=r.clientY-a.top;t.knob=s.children[0].style,t.left=r.pageX-u.left-window.pageXOffset+u.scrollX,t.top=r.pageY-u.top-window.pageYOffset+u.scrollY,n={left:r.pageX-(f-t.left),top:r.pageY-(l-t.top)}},setSaturation:function(e,n){t={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,n)},setHue:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(e,n)},setAlpha:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,n)},setKnob:function(e,n){t.knob.top=e+"px",t.knob.left=n+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,t,n,r,i){"use strict";return{require:"?ngModel",restrict:"A",link:function(s,u,a,f){function l(){e.on("mousemove",h),e.on("mouseup",p)}function c(){try{P.css("backgroundColor",M[E]())}catch(e){P.css("backgroundColor",M.toHex())}D.css("backgroundColor",M.toHex(M.value.h,1,1,1)),"rgba"===E&&(w.css.backgroundColor=M.toHex())}function h(e){var t=r.getLeftPosition(e),n=r.getTopPosition(e),i=r.getSlider();r.setKnob(n,t),i.callLeft&&M[i.callLeft].call(M,t/100),i.callTop&&M[i.callTop].call(M,n/100),c();var o=M[E]();return u.val(o),f&&s.$apply(f.$setViewValue(o)),C&&B.val(o),!1}function p(){y("colorpicker-selected"),e.off("mousemove",h),e.off("mouseup",p)}function d(e){M.setColor(u.val()),C&&!e&&B.val(u.val()),H.eq(0).css({left:100*M.value.s+"px",top:100-100*M.value.b+"px"}),H.eq(1).css("top",100*(1-M.value.h)+"px"),H.eq(2).css("top",100*(1-M.value.a)+"px"),c()}function v(){var e,t=i.getOffset(u[0]);return angular.isDefined(a.colorpickerParent)&&(t.left=0,t.top=0),"top"===S?e={top:t.top-147,left:t.left}:"right"===S?e={top:t.top,left:t.left+126}:"bottom"===S?e={top:t.top+u[0].offsetHeight+2,left:t.left}:"left"===S&&(e={top:t.top,left:t.left-150}),{top:e.top+"px",left:e.left+"px"}}function m(){b()}function g(){O.hasClass("colorpicker-visible")||(d(),O.addClass("colorpicker-visible").css(v()),y("colorpicker-shown"),x===!1&&e.on("mousedown",m),a.colorpickerIsOpen&&(s[a.colorpickerIsOpen]=!0,s.$$phase||s.$digest()))}function y(e){f&&s.$emit(e,{name:a.ngModel,value:f.$modelValue})}function b(){O.hasClass("colorpicker-visible")&&(O.removeClass("colorpicker-visible"),y("colorpicker-closed"),e.off("mousedown",m),a.colorpickerIsOpen&&(s[a.colorpickerIsOpen]=!1,s.$$phase||s.$digest()))}var w,E=a.colorpicker?a.colorpicker:"hex",S=angular.isDefined(a.colorpickerPosition)?a.colorpickerPosition:"bottom",x=angular.isDefined(a.colorpickerInline)?a.colorpickerInline:!1,T=angular.isDefined(a.colorpickerFixedPosition)?a.colorpickerFixedPosition:!1,N=angular.isDefined(a.colorpickerParent)?u.parent():angular.element(document.body),C=angular.isDefined(a.colorpickerWithInput)?a.colorpickerWithInput:!1,k=C?'<input type="text" name="colorpicker-input" spellcheck="false">':"",L=x?"":'<button type="button" class="close close-colorpicker">&times;</button>',A='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+k+L+"</div></div>",O=angular.element(A),M=n,_=O.find("colorpicker-hue"),D=O.find("colorpicker-saturation"),P=O.find("colorpicker-preview"),H=O.find("i");if(t(O)(s),C){var B=O.find("input");B.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(){var e=this.value;u.val(e),f&&f.$modelValue!==e&&(s.$apply(f.$setViewValue(e)),d(!0))})}"rgba"===E&&(O.addClass("alpha"),w=O.find("colorpicker-alpha"),w.on("click",function(e){r.setAlpha(e,T),h(e)}).on("mousedown",function(e){r.setAlpha(e,T),l()}).on("mouseup",function(e){y("colorpicker-selected-alpha")})),_.on("click",function(e){r.setHue(e,T),h(e)}).on("mousedown",function(e){r.setHue(e,T),l()}).on("mouseup",function(e){y("colorpicker-selected-hue")}),D.on("click",function(e){r.setSaturation(e,T),h(e),angular.isDefined(a.colorpickerCloseOnSelect)&&b()}).on("mousedown",function(e){r.setSaturation(e,T),l()}).on("mouseup",function(e){y("colorpicker-selected-saturation")}),T&&O.addClass("colorpicker-fixed-position"),O.addClass("colorpicker-position-"+S),"true"===x&&O.addClass("colorpicker-inline"),N.append(O),f&&(f.$render=function(){u.val(f.$viewValue),d()}),u.on("blur keyup change",function(){d()}),u.on("$destroy",function(){O.remove()}),x===!1?u.on("click",g):g(),O.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()}),O.find("button").on("click",function(){b()}),a.colorpickerIsOpen&&s.$watch(a.colorpickerIsOpen,function(e){e===!0?g():e===!1&&b()})}}}]),define("colorpicker.module",["bootstrap"],function(){}),define("lib/windowWrap/windowWrap",["angular","jquery","jqueryUi"],function(e,t){e.module("windowWrap",["atCommon"]).factory("windowItem",["windowHub",function(e){var t=function(t){this.isOn=!1,e.register(t,this)};return t.prototype.toggle=function(){this.isOn=!this.isOn},t.prototype.turnOn=function(){this.isOn=!0},t.prototype.turnOff=function(){this.isOn=!1},t.prototype.location=function(){},t}]).service("windowHub",[function(){var e=this;e.items={},e.error={exists:function(e){return"Window already exists with id="+e}},e.register=function(t,n){if(t in e.items)throw e.error.exists(t);e.items[t]=n},e.get=function(t){return e.items[t]}}]).directive("windowWrap",["windowItem",function(e){return{scope:{windowWrap:"="},transclude:!0,replace:!0,templateUrl:"lib/windowWrap/window-wrap.html",link:function(n,r){n.item=new e(n.windowWrap.id),n.css=function(){return{width:n.windowWrap.width}},t(r).draggable({stack:".window-wrap"})}}}])}),define("lib/money/atMoney",["angular","lodash","d3"],function(e,t,n){e.module("atMoney",[]).factory("barComp",[function(){var e=function(e){var t=this;t.elem=e.elem,t.data=e.data,$(t.elem).addClass("bar-comp")};return e.prototype.amounts=function(){var e=this;return e.data.map(function(e){return e.amount})},e.prototype.buildRange=function(){var e=this;e.translate=n.scale.linear().domain([0,n.max(e.amounts())]).range([0,$(e.elem).innerWidth()])},e.prototype.plot=function(){var e=this;n.select(e.elem).selectAll("div").data(e.data).enter().append("div").insert("span").classed({bar:!0}).style("width",function(t){return e.translate(t.amount)+"px"}).append("span").classed({name:!0}).text(function(e){return e.label+":"+e.amount})},e.prototype.build=function(){var e=this;$(e.elem).empty(),e.buildRange(),e.plot()},e}]).service("taxRates",[function(){var e=function(){function t(e,t,n){return e>=t&&n&&e<=n}var e=this;e.rates=[{percent:10,single:function(e){return t(e,0,9275)},joint:function(e){return t(e,0,18550)},head:function(e){return t(e,0,13250)}},{percent:15,single:function(e){return t(e,9275,37650)},joint:function(e){return t(e,18550,75300)},head:function(e){return t(e,13250,50,400)}},{percent:25,single:function(e){return t(e,37650,91150)},joint:function(e){return t(e,75300,151900)},head:function(e){return t(e,50400,130150)}},{percent:28,single:function(e){return t(e,91150,190150)},joint:function(e){return t(e,151900,231450)},head:function(e){return t(e,130150,210800)}},{percent:33,single:function(e){return t(e,190150,413350)},joint:function(e){return t(e,231450,413350)},head:function(e){return t(e,210800,413350)}},{percent:35,single:function(e){return t(e,413350,415050)},joint:function(e){return t(e,413350,466950)},head:function(e){return t(e,413350,441e3)}},{percent:39.6,single:function(e){return t(e,415050)},joint:function(e){return t(e,466950)},head:function(e){return t(e,441e3)}}]};return e}]).service("myBudget",["atBudget","atStream","atMoney",function(e,n,r){var i=this;i.me=new r({name:"Adam",salary:9e4,age:32}),i.budget=new e;var s=[new n({label:"rent",amount:-2e3}),new n({label:"gas",amount:-100}),new n({label:"elec",amount:-25}),new n({label:"internet",amount:-80}),new n({label:"food",amount:-30,period:"day"})];t.each(s,function(e){i.budget.addStream(e)})}]).factory("atBudget",[function(){var e=function(e){var t=this;t.streams=[]};return e.prototype.addStream=function(e){this.streams.push(e)},e.prototype.perYear=function(){var e=0;return t.each(this.streams,function(t){e+=t.perYear()}),e},e}]).factory("atMoney",[function(){var e=function(e){var t=this;t.salary=e.salary,t.age=e.age};return e.prototype.perWeek=function(){return this.salary/52},e.prototype.perMonth=function(){return this.salary/12},e.prototype.perDay=function(){return this.salary/365},e.prototype.perHour=function(){return this.perDay()/24},e.prototype.perWorkHour=function(){return this.perWeek()/40},e.prototype.perWorkHourTuffWk=function(){return this.perWeek()/60},e}]).factory("atStream",[function(){var e=function(e){var t=this;t.label=e.label,t.amount=e.amount;if(!("period"in e))return;switch(e.period){case"day":t.amount=t.amount*31;break;case"year":t.amount=t.amount/12}};return e.prototype.isExpense=function(){return this.amount<0},e.prototype.isIncome=function(){return this.amount>0},e.prototype.perYear=function(){return this.amount*12},e}])}),define("view/mapper/mapper",["angular","lodash","jqueryUi","angularRoute","colorpicker.module","lib/maps/atMaps","lib/windowWrap/windowWrap","lib/money/atMoney"],function(e,t){e.module("myApp.view.mapper",["ngRoute","atMaps","colorpicker.module","windowWrap","atMoney"]).config(["$routeProvider",function(e){var t={templateUrl:"view/mapper/mapper.html",controller:"viewMapperCtrl"};e.when("/mapper",t),e.when("/mapper/:id",t)}]).controller("viewMapperCtrl",[function(){}]).service("mouseHelper",[function(){var e=this;e.relative=function(e){return{x:e.offsetX,y:e.offsetY}},e.diff=function(e,t){return{x:t.x-e.x,y:t.y-e.y}}}]).factory("notator",["highlite","mouseHelper","notateHub",function(e,t,n){var r=function(r){var i=this;i.elem=r,i.previewLite=new e,i.pressed=!1;var s=null;$(i.elem).on("touchstart mousedown",function(e){i.pressed=!0,s=t.relative(e)}).on("touchend mouseup",function(e){i.pressed=!1}).on("touchmove mousemove",function(e){if(!i.pressed)return;var r=t.diff(s,t.relative(e)),o=i.elem.width(),u=i.elem.height();i.previewLite.update({x:s.x/o,y:s.y/u,width:r.x/o,height:r.y/u,color:n.color.hex})})};return r}]).factory("highlite",[function(){var n=function(){this.updates=[],this.x=this.y=this.width=this.height=this.color=null};return n.prototype.update=function(n){e.extend(this,n),t.each(this.updates,function(e){e()})},n.prototype.onUpdate=function(e){this.updates.push(e)},n}]).directive("highlite",[function(){return{scope:{highlite:"=",parentElem:"="},replace:!0,link:function(e,t){function n(){return e.parentElem.width()}function r(){return e.parentElem.height()}t.addClass("lite"),e.highlite.onUpdate(function(){var i=n(),s=r();$(t).css({left:e.highlite.x*i,top:e.highlite.y*s,width:e.highlite.width*i,height:e.highlite.height*s,"background-color":e.highlite.color?e.highlite.color:"yellow"})}),t.bind("touchstart mousedown",function(e){e.stopPropagation()}),$(t).draggable({stack:".lite",stop:function(){e.highlite.update({x:$(t).css("left")/n(),y:$(t).css("top")/r()})}})}}}]).directive("colorSwatch",[function(){return{scope:{colorSwatch:"="},template:'<span ng-style="style()"></span>',link:function(e,t){e.style=function(){return{display:"inline-block",width:"25px",height:"25px","background-color":e.colorSwatch}}}}}]).service("notateHub",[function(){var e=this;e.color={hex:"#FFFF00"}}]).directive("elemNotate",["notator","windowHub","notateHub",function(e,t,n){return{scope:{elemNotate:"="},transclude:!0,replace:!0,templateUrl:"view/mapper/elem-notate.html",link:function(r,i){r.notator=new e(i),r.color=n.color,r.window=function(){return t.get("lite-color")}}}}])}),define("view/view2/view2",["angular","angularRoute"],function(e){e.module("myApp.view2",["ngRoute"]).config(["$routeProvider",function(e){e.when("/view2",{templateUrl:"view/view2/view2.html",controller:"View2Ctrl"})}]).controller("View2Ctrl",[function(){}])});var THREE={REVISION:"74"};typeof define=="function"&&define.amd?define("three",THREE):"undefined"!=typeof exports&&"undefined"!=typeof module&&(module.exports=THREE),Number.EPSILON===undefined&&(Number.EPSILON=Math.pow(2,-52)),Math.sign===undefined&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),Function.prototype.name===undefined&&Object.defineProperty!==undefined&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),Object.assign===undefined&&Object.defineProperty(Object,"assign",{writable:!0,configurable:!0,value:function(e){"use strict";if(e===undefined||e===null)throw new TypeError("Cannot convert first argument to object");var t=Object(e);for(var n=1,r=arguments.length;n!==r;++n){var i=arguments[n];if(i===undefined||i===null)continue;i=Object(i);var s=Object.keys(i);for(var o=0,u=s.length;o!==u;++o){var a=s[o],f=Object.getOwnPropertyDescriptor(i,a);f!==undefined&&f.enumerable&&(t[a]=i[a])}}return t}}),THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.NeverDepth=0,THREE.AlwaysDepth=1,THREE.LessDepth=2,THREE.LessEqualDepth=3,THREE.EqualDepth=4,THREE.GreaterEqualDepth=5,THREE.GreaterDepth=6,THREE.NotEqualDepth=7,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=300,THREE.CubeReflectionMapping=301,THREE.CubeRefractionMapping=302,THREE.EquirectangularReflectionMapping=303,THREE.EquirectangularRefractionMapping=304,THREE.SphericalReflectionMapping=305,THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.HalfFloatType=1025,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGBEFormat=THREE.RGBAFormat,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.RGB_ETC1_Format=2151,THREE.LoopOnce=2200,THREE.LoopRepeat=2201,THREE.LoopPingPong=2202,THREE.InterpolateDiscrete=2300,THREE.InterpolateLinear=2301,THREE.InterpolateSmooth=2302,THREE.ZeroCurvatureEnding=2400,THREE.ZeroSlopeEnding=2401,THREE.WrapAroundEnding=2402,THREE.TrianglesDrawMode=0,THREE.TriangleStripDrawMode=1,THREE.TriangleFanDrawMode=2,THREE.Color=function(e){return arguments.length===3?this.fromArray(arguments):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){this.r=e,this.g=e,this.b=e},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}return function(t,n,r){t=THREE.Math.euclideanModulo(t,1),n=THREE.Math.clamp(n,0,1),r=THREE.Math.clamp(r,0,1);if(n===0)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,s=2*r-i;this.r=e(s,i,t+1/3),this.g=e(s,i,t),this.b=e(s,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){if(t===undefined)return;parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],s=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var o=parseFloat(r[1])/360,u=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,u,a)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var f=n[1],l=f.length;if(l===3)return this.r=parseInt(f.charAt(0)+f.charAt(0),16)/255,this.g=parseInt(f.charAt(1)+f.charAt(1),16)/255,this.b=parseInt(f.charAt(2)+f.charAt(2),16)/255,this;if(l===6)return this.r=parseInt(f.charAt(0)+f.charAt(1),16)/255,this.g=parseInt(f.charAt(2)+f.charAt(3),16)/255,this.b=parseInt(f.charAt(4)+f.charAt(5),16)/255,this}if(e&&e.length>0){var f=THREE.ColorKeywords[e];f!==undefined?this.setHex(f):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===undefined&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===undefined&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},n=this.r,r=this.g,i=this.b,s=Math.max(n,r,i),o=Math.min(n,r,i),u,a,f=(o+s)/2;if(o===s)u=0,a=0;else{var l=s-o;a=f<=.5?l/(s+o):l/(2-s-o);switch(s){case n:u=(r-i)/l+(r<i?6:0);break;case r:u=(i-n)/l+2;break;case i:u=(n-r)/l+4}u/=6}return t.h=u,t.s=a,t.l=f,t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===undefined&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===undefined&&(e=[]),t===undefined&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=r!==undefined?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof THREE.Euler==0)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),s=Math.sin(e._x/2),o=Math.sin(e._y/2),u=Math.sin(e._z/2),a=e.order;return a==="XYZ"?(this._x=s*r*i+n*o*u,this._y=n*o*i-s*r*u,this._z=n*r*u+s*o*i,this._w=n*r*i-s*o*u):a==="YXZ"?(this._x=s*r*i+n*o*u,this._y=n*o*i-s*r*u,this._z=n*r*u-s*o*i,this._w=n*r*i+s*o*u):a==="ZXY"?(this._x=s*r*i-n*o*u,this._y=n*o*i+s*r*u,this._z=n*r*u+s*o*i,this._w=n*r*i-s*o*u):a==="ZYX"?(this._x=s*r*i-n*o*u,this._y=n*o*i+s*r*u,this._z=n*r*u-s*o*i,this._w=n*r*i+s*o*u):a==="YZX"?(this._x=s*r*i+n*o*u,this._y=n*o*i+s*r*u,this._z=n*r*u-s*o*i,this._w=n*r*i-s*o*u):a==="XZY"&&(this._x=s*r*i-n*o*u,this._y=n*o*i-s*r*u,this._z=n*r*u+s*o*i,this._w=n*r*i+s*o*u),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],u=t[9],a=t[2],f=t[6],l=t[10],c=n+o+l,h;return c>0?(h=.5/Math.sqrt(c+1),this._w=.25/h,this._x=(f-u)*h,this._y=(i-a)*h,this._z=(s-r)*h):n>o&&n>l?(h=2*Math.sqrt(1+n-o-l),this._w=(f-u)/h,this._x=.25*h,this._y=(r+s)/h,this._z=(i+a)/h):o>l?(h=2*Math.sqrt(1+o-n-l),this._w=(i-a)/h,this._x=(r+s)/h,this._y=.25*h,this._z=(u+f)/h):(h=2*Math.sqrt(1+l-n-o),this._w=(s-r)/h,this._x=(i+a)/h,this._y=(u+f)/h,this._z=.25*h),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,n=1e-6;return function(i,s){return e===undefined&&(e=new THREE.Vector3),t=i.dot(s)+1,t<n?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,s),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return t!==undefined?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,u=t._y,a=t._z,f=t._w;return this._x=n*f+s*o+r*a-i*u,this._y=r*f+s*u+i*o-n*a,this._z=i*f+s*a+n*u-r*o,this._w=s*f-n*o-r*u-i*a,this.onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var n=this._x,r=this._y,i=this._z,s=this._w,o=s*e._w+n*e._x+r*e._y+i*e._z;o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e);if(o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;var u=Math.sqrt(1-o*o);if(Math.abs(u)<.001)return this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var a=Math.atan2(u,o),f=Math.sin((1-t)*a)/u,l=Math.sin(t*a)/u;return this._w=s*f+this._w*l,this._x=n*f+this._x*l,this._y=r*f+this._y*l,this._z=i*f+this._z*l,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===undefined&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return e===undefined&&(e=[]),t===undefined&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(THREE.Quaternion,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,s,o){var u=n[r+0],a=n[r+1],f=n[r+2],l=n[r+3],c=i[s+0],h=i[s+1],p=i[s+2],d=i[s+3];if(l!==d||u!==c||a!==h||f!==p){var v=1-o,m=u*c+a*h+f*p+l*d,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),w=Math.atan2(b,m*g);v=Math.sin(v*w)/b,o=Math.sin(o*w)/b}var E=o*g;u=u*v+c*E,a=a*v+h*E,f=f*v+p*E,l=l*v+d*E;if(v===1-o){var S=1/Math.sqrt(u*u+a*a+f*f+l*l);u*=S,a*=S,f*=S,l*=S}}e[t]=u,e[t+1]=a,e[t+2]=f,e[t+3]=l}}),THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==undefined?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==undefined?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(r,i){return e===undefined&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(r,r),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===undefined&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===undefined&&(e=[]),t===undefined&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return n===undefined&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==undefined?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==undefined?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==undefined?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(n){return n instanceof THREE.Euler==0&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),e===undefined&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(n)),this}}(),applyAxisAngle:function(){var e;return function(n,r){return e===undefined&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(n,r)),this}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,u=e.w,a=u*t+s*r-o*n,f=u*n+o*t-i*r,l=u*r+i*n-s*t,c=-i*t-s*n-o*r;return this.x=a*u+c*-i+f*-o-l*-s,this.y=f*u+c*-s+l*-i-a*-o,this.z=l*u+c*-o+a*-s-f*-i,this},project:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.multiplyMatrices(n.projectionMatrix,e.getInverse(n.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.multiplyMatrices(n.matrixWorld,e.getInverse(n.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,i){return e===undefined&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},cross:function(e,t){if(t!==undefined)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,u=t.z;return this.x=r*u-i*o,this.y=i*s-n*u,this.z=n*o-r*s,this},projectOnVector:function(){var e,t;return function(r){return e===undefined&&(e=new THREE.Vector3),e.copy(r).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(n){return e===undefined&&(e=new THREE.Vector3),e.copy(this).projectOnVector(n),this.sub(e)}}(),reflect:function(){var e;return function(n){return e===undefined&&(e=new THREE.Vector3),this.sub(e.copy(n).multiplyScalar(2*this.dot(n)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),n=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){var n=e*4,r=t.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===undefined&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===undefined&&(e=[]),t===undefined&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return n===undefined&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this}},THREE.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r!==undefined?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==undefined?e.w:1,this},add:function(e,t){return t!==undefined?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==undefined?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,s=.01,o=.1,u=e.elements,a=u[0],f=u[4],l=u[8],c=u[1],h=u[5],p=u[9],d=u[2],v=u[6],m=u[10];if(Math.abs(f-c)<s&&Math.abs(l-d)<s&&Math.abs(p-v)<s){if(Math.abs(f+c)<o&&Math.abs(l+d)<o&&Math.abs(p+v)<o&&Math.abs(a+h+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(a+1)/2,y=(h+1)/2,b=(m+1)/2,w=(f+c)/4,E=(l+d)/4,S=(p+v)/4;return g>y&&g>b?g<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=w/n,i=E/n):y>b?y<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=w/r,i=S/r):b<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=E/i,r=S/i),this.set(n,r,i,t),this}var x=Math.sqrt((v-p)*(v-p)+(l-d)*(l-d)+(c-f)*(c-f));return Math.abs(x)<.001&&(x=1),this.x=(v-p)/x,this.y=(l-d)/x,this.z=(c-f)/x,this.w=Math.acos((a+h+m-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,i){return e===undefined&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===undefined&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===undefined&&(e=[]),t===undefined&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return n===undefined&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this}},THREE.Euler=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=THREE.Math.clamp,i=e.elements,s=i[0],o=i[4],u=i[8],a=i[1],f=i[5],l=i[9],c=i[2],h=i[6],p=i[10];return t=t||this._order,t==="XYZ"?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,f),this._z=0)):t==="YXZ"?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(u,p),this._z=Math.atan2(a,f)):(this._y=Math.atan2(-c,s),this._z=0)):t==="ZXY"?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(a,s))):t==="ZYX"?(this._y=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(h,p),this._z=Math.atan2(a,s)):(this._x=0,this._z=Math.atan2(-o,f))):t==="YZX"?(this._z=Math.asin(r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-l,f),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(u,p))):t==="XZY"?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(h,f),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-l,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return e===undefined&&(e=new THREE.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r),this}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==undefined&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return e===undefined&&(e=[]),t===undefined&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},THREE.Line3=function(e,t){this.start=e!==undefined?e:new THREE.Vector3,this.end=t!==undefined?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new THREE.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),s=t.dot(e),o=s/i;return r&&(o=THREE.Math.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new THREE.Vector3;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},THREE.Box2=function(e,t){this.min=e!==undefined?e:new THREE.Vector2(+Infinity,+Infinity),this.max=t!==undefined?t:new THREE.Vector2(-Infinity,-Infinity)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new THREE.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var n=t||new THREE.Vector2;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var n=t||new THREE.Vector2;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},THREE.Box3=function(e,t){this.min=e!==undefined?e:new THREE.Vector3(+Infinity,+Infinity,+Infinity),this.max=t!==undefined?t:new THREE.Vector3(-Infinity,-Infinity,-Infinity)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){this.makeEmpty();var t=+Infinity,n=+Infinity,r=+Infinity,i=-Infinity,s=-Infinity,o=-Infinity;for(var u=0,a=e.length;u<a;u+=3){var f=e[u],l=e[u+1],c=e[u+2];f<t&&(t=f),l<n&&(n=l),c<r&&(r=c),f>i&&(i=f),l>s&&(s=l),c>o&&(o=c)}this.min.set(t,n,r),this.max.set(i,s,o)},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e;return function(t){e===undefined&&(e=new THREE.Box3);var n=this;return this.makeEmpty(),t.updateMatrixWorld(!0),t.traverse(function(t){var r=t.geometry;r!==undefined&&(r.boundingBox===null&&r.computeBoundingBox(),e.copy(r.boundingBox),e.applyMatrix4(t.matrixWorld),n.union(e))}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var n=t||new THREE.Vector3;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},intersectsSphere:function(){var e;return function(n){return e===undefined&&(e=new THREE.Vector3),this.clampPoint(n.center,e),e.distanceToSquared(n.center)<=n.radius*n.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new THREE.Vector3;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){var n=t||new THREE.Sphere;return n.center=this.center(),n.radius=this.size(e).length()*.5,n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,n,r,i,s,o,u,a){var f=this.elements;return f[0]=e,f[3]=t,f[6]=n,f[1]=r,f[4]=i,f[7]=s,f[2]=o,f[5]=u,f[8]=a,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},applyToVector3Array:function(){var e;return function(t,n,r){e===undefined&&(e=new THREE.Vector3),n===undefined&&(n=0),r===undefined&&(r=t.length);for(var i=0,s=n;i<r;i+=3,s+=3)e.fromArray(t,s),e.applyMatrix3(this),e.toArray(t,s);return t}}(),applyToBuffer:function(){var e;return function(n,r,i){e===undefined&&(e=new THREE.Vector3),r===undefined&&(r=0),i===undefined&&(i=n.length/n.itemSize);for(var s=0,o=r;s<i;s++,o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),e.applyMatrix3(this),n.setXYZ(e.x,e.y,e.z);return n}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*s*f-t*o*a-n*i*f+n*o*u+r*i*a-r*s*u},getInverse:function(e,t){var n=e.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var i=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(i===0){var s="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t||!1)throw new Error(s);return console.warn(s),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=s,m[9]=o,m[13]=u,m[2]=a,m[6]=f,m[10]=l,m[14]=c,m[3]=h,m[7]=p,m[11]=d,m[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){var r=this.elements;return e.set(r[0],r[1],r[2]),t.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){e===undefined&&(e=new THREE.Vector3);var n=this.elements,r=t.elements,i=1/e.set(r[0],r[1],r[2]).length(),s=1/e.set(r[4],r[5],r[6]).length(),o=1/e.set(r[8],r[9],r[10]).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,this}}(),makeRotationFromEuler:function(e){e instanceof THREE.Euler==0&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),u=Math.cos(r),a=Math.sin(r),f=Math.cos(i),l=Math.sin(i);if(e.order==="XYZ"){var c=s*f,h=s*l,p=o*f,d=o*l;t[0]=u*f,t[4]=-u*l,t[8]=a,t[1]=h+p*a,t[5]=c-d*a,t[9]=-o*u,t[2]=d-c*a,t[6]=p+h*a,t[10]=s*u}else if(e.order==="YXZ"){var v=u*f,m=u*l,g=a*f,y=a*l;t[0]=v+y*o,t[4]=g*o-m,t[8]=s*a,t[1]=s*l,t[5]=s*f,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=s*u}else if(e.order==="ZXY"){var v=u*f,m=u*l,g=a*f,y=a*l;t[0]=v-y*o,t[4]=-s*l,t[8]=g+m*o,t[1]=m+g*o,t[5]=s*f,t[9]=y-v*o,t[2]=-s*a,t[6]=o,t[10]=s*u}else if(e.order==="ZYX"){var c=s*f,h=s*l,p=o*f,d=o*l;t[0]=u*f,t[4]=p*a-h,t[8]=c*a+d,t[1]=u*l,t[5]=d*a+c,t[9]=h*a-p,t[2]=-a,t[6]=o*u,t[10]=s*u}else if(e.order==="YZX"){var b=s*u,w=s*a,E=o*u,S=o*a;t[0]=u*f,t[4]=S-b*l,t[8]=E*l+w,t[1]=l,t[5]=s*f,t[9]=-o*f,t[2]=-a*f,t[6]=w*l+E,t[10]=b-S*l}else if(e.order==="XZY"){var b=s*u,w=s*a,E=o*u,S=o*a;t[0]=u*f,t[4]=-l,t[8]=a*f,t[1]=b*l+S,t[5]=s*f,t[9]=w*l-E,t[2]=E*l-w,t[6]=o*f,t[10]=S*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,s=e.w,o=n+n,u=r+r,a=i+i,f=n*o,l=n*u,c=n*a,h=r*u,p=r*a,d=i*a,v=s*o,m=s*u,g=s*a;return t[0]=1-(h+d),t[4]=l-g,t[8]=c+m,t[1]=l+g,t[5]=1-(f+d),t[9]=p-v,t[2]=c-m,t[6]=p+v,t[10]=1-(f+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,n;return function(r,i,s){e===undefined&&(e=new THREE.Vector3),t===undefined&&(t=new THREE.Vector3),n===undefined&&(n=new THREE.Vector3);var o=this.elements;return n.subVectors(r,i).normalize(),n.lengthSq()===0&&(n.z=1),e.crossVectors(s,n).normalize(),e.lengthSq()===0&&(n.x+=1e-4,e.crossVectors(s,n).normalize()),t.crossVectors(n,e),o[0]=e.x,o[4]=t.x,o[8]=n.x,o[1]=e.y,o[5]=t.y,o[9]=n.y,o[2]=e.z,o[6]=t.z,o[10]=n.z,this}}(),multiply:function(e,t){return t!==undefined?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],u=n[8],a=n[12],f=n[1],l=n[5],c=n[9],h=n[13],p=n[2],d=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],w=n[15],E=r[0],S=r[4],x=r[8],T=r[12],N=r[1],C=r[5],k=r[9],L=r[13],A=r[2],O=r[6],M=r[10],_=r[14],D=r[3],P=r[7],H=r[11],B=r[15];return i[0]=s*E+o*N+u*A+a*D,i[4]=s*S+o*C+u*O+a*P,i[8]=s*x+o*k+u*M+a*H,i[12]=s*T+o*L+u*_+a*B,i[1]=f*E+l*N+c*A+h*D,i[5]=f*S+l*C+c*O+h*P,i[9]=f*x+l*k+c*M+h*H,i[13]=f*T+l*L+c*_+h*B,i[2]=p*E+d*N+v*A+m*D,i[6]=p*S+d*C+v*O+m*P,i[10]=p*x+d*k+v*M+m*H,i[14]=p*T+d*L+v*_+m*B,i[3]=g*E+y*N+b*A+w*D,i[7]=g*S+y*C+b*O+w*P,i[11]=g*x+y*k+b*M+w*H,i[15]=g*T+y*L+b*_+w*B,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToVector3Array:function(){var e;return function(t,n,r){e===undefined&&(e=new THREE.Vector3),n===undefined&&(n=0),r===undefined&&(r=t.length);for(var i=0,s=n;i<r;i+=3,s+=3)e.fromArray(t,s),e.applyMatrix4(this),e.toArray(t,s);return t}}(),applyToBuffer:function(){var e;return function(n,r,i){e===undefined&&(e=new THREE.Vector3),r===undefined&&(r=0),i===undefined&&(i=n.length/n.itemSize);for(var s=0,o=r;s<i;s++,o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),e.applyMatrix4(this),n.setXYZ(e.x,e.y,e.z);return n}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],u=e[9],a=e[13],f=e[2],l=e[6],c=e[10],h=e[14],p=e[3],d=e[7],v=e[11],m=e[15];return p*(+i*u*l-r*a*l-i*o*c+n*a*c+r*o*h-n*u*h)+d*(+t*u*h-t*a*c+i*s*c-r*s*h+r*a*f-i*u*f)+v*(+t*a*l-t*o*h-i*s*l+n*s*h+i*o*f-n*a*f)+m*(-r*o*f-t*u*l+t*o*c+r*s*l-n*s*c+n*u*f)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(e,t){var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},getPosition:function(){var e;return function(){e===undefined&&(e=new THREE.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],s=r[4],o=r[8],u=r[12],a=r[1],f=r[5],l=r[9],c=r[13],h=r[2],p=r[6],d=r[10],v=r[14],m=r[3],g=r[7],y=r[11],b=r[15];n[0]=l*v*g-c*d*g+c*p*y-f*v*y-l*p*b+f*d*b,n[4]=u*d*g-o*v*g-u*p*y+s*v*y+o*p*b-s*d*b,n[8]=o*c*g-u*l*g+u*f*y-s*c*y-o*f*b+s*l*b,n[12]=u*l*p-o*c*p-u*f*d+s*c*d+o*f*v-s*l*v,n[1]=c*d*m-l*v*m-c*h*y+a*v*y+l*h*b-a*d*b,n[5]=o*v*m-u*d*m+u*h*y-i*v*y-o*h*b+i*d*b,n[9]=u*l*m-o*c*m-u*a*y+i*c*y+o*a*b-i*l*b,n[13]=o*c*h-u*l*h+u*a*d-i*c*d-o*a*v+i*l*v,n[2]=f*v*m-c*p*m+c*h*g-a*v*g-f*h*b+a*p*b,n[6]=u*p*m-s*v*m-u*h*g+i*v*g+s*h*b-i*p*b,n[10]=s*c*m-u*f*m+u*a*g-i*c*g-s*a*b+i*f*b,n[14]=u*f*h-s*c*h-u*a*p+i*c*p+s*a*v-i*f*v,n[3]=l*p*m-f*d*m-l*h*g+a*d*g+f*h*y-a*p*y,n[7]=s*d*m-o*p*m+o*h*g-i*d*g-s*h*y+i*p*y,n[11]=o*f*m-s*l*m-o*a*g+i*l*g+s*a*y-i*f*y,n[15]=s*l*h-o*f*h+o*a*p-i*l*p-s*a*d+i*f*d;var w=i*n[0]+a*n[4]+h*n[8]+m*n[12];if(w===0){var E="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t||!1)throw new Error(E);return console.warn(E),this.identity(),this}return this.multiplyScalar(1/w),this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,u=e.z,a=i*s,f=i*o;return this.set(a*s+n,a*o-r*u,a*u+r*o,0,a*o+r*u,f*o+n,f*u-r*s,0,a*u-r*o,f*u+r*s,i*u*u+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,t;return function(n,r,i){e===undefined&&(e=new THREE.Vector3),t===undefined&&(t=new THREE.Matrix4);var s=this.elements,o=e.set(s[0],s[1],s[2]).length(),u=e.set(s[4],s[5],s[6]).length(),a=e.set(s[8],s[9],s[10]).length(),f=this.determinant();f<0&&(o=-o),n.x=s[12],n.y=s[13],n.z=s[14],t.elements.set(this.elements);var l=1/o,c=1/u,h=1/a;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=c,t.elements[5]*=c,t.elements[6]*=c,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=o,i.y=u,i.z=a,this}}(),makeFrustum:function(e,t,n,r,i,s){var o=this.elements,u=2*i/(t-e),a=2*i/(r-n),f=(t+e)/(t-e),l=(r+n)/(r-n),c=-(s+i)/(s-i),h=-2*s*i/(s-i);return o[0]=u,o[4]=0,o[8]=f,o[12]=0,o[1]=0,o[5]=a,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,n,r){var i=n*Math.tan(THREE.Math.degToRad(e*.5)),s=-i,o=s*t,u=i*t;return this.makeFrustum(o,u,s,i,n,r)},makeOrthographic:function(e,t,n,r,i,s){var o=this.elements,u=t-e,a=n-r,f=s-i,l=(t+e)/u,c=(n+r)/a,h=(s+i)/f;return o[0]=2/u,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2/a,o[9]=0,o[13]=-c,o[2]=0,o[6]=0,o[10]=-2/f,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){var t=this.elements,n=e.elements;for(var r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}},THREE.Ray=function(e,t){this.origin=e!==undefined?e:new THREE.Vector3,this.direction=t!==undefined?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new THREE.Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){this.direction.copy(e).sub(this.origin).normalize()},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new THREE.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new THREE.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,s,o){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var u=r.distanceTo(i)*.5,a=-this.direction.dot(t),f=n.dot(this.direction),l=-n.dot(t),c=n.lengthSq(),h=Math.abs(1-a*a),p,d,v,m;if(h>0){p=a*l-f,d=a*f-l,m=u*h;if(p>=0)if(d>=-m)if(d<=m){var g=1/h;p*=g,d*=g,v=p*(p+a*d+2*f)+d*(a*p+d+2*l)+c}else d=u,p=Math.max(0,-(a*d+f)),v=-p*p+d*(d+2*l)+c;else d=-u,p=Math.max(0,-(a*d+f)),v=-p*p+d*(d+2*l)+c;else d<=-m?(p=Math.max(0,-(-a*u+f)),d=p>0?-u:Math.min(Math.max(-u,-l),u),v=-p*p+d*(d+2*l)+c):d<=m?(p=0,d=Math.min(Math.max(-u,-l),u),v=d*(d+2*l)+c):(p=Math.max(0,-(a*u+f)),d=p>0?u:Math.min(Math.max(-u,-l),u),v=-p*p+d*(d+2*l)+c)}else d=a>0?-u:u,p=Math.max(0,-(a*d+f)),v=-p*p+d*(d+2*l)+c;return s&&s.copy(this.direction).multiplyScalar(p).add(this.origin),o&&o.copy(t).multiplyScalar(d).add(e),v}}(),intersectSphere:function(){var e=new THREE.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,s=t.radius*t.radius;if(i>s)return null;var o=Math.sqrt(s-i),u=r-o,a=r+o;return u<0&&a<0?null:u<0?this.at(a,n):this.at(u,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return n===null?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0)return!0;var n=e.normal.dot(this.direction);return n*t<0?!0:!1},intersectBox:function(e,t){var n,r,i,s,o,u,a=1/this.direction.x,f=1/this.direction.y,l=1/this.direction.z,c=this.origin;a>=0?(n=(e.min.x-c.x)*a,r=(e.max.x-c.x)*a):(n=(e.max.x-c.x)*a,r=(e.min.x-c.x)*a),f>=0?(i=(e.min.y-c.y)*f,s=(e.max.y-c.y)*f):(i=(e.max.y-c.y)*f,s=(e.min.y-c.y)*f);if(n>s||i>r)return null;if(i>n||n!==n)n=i;if(s<r||r!==r)r=s;l>=0?(o=(e.min.z-c.z)*l,u=(e.max.z-c.z)*l):(o=(e.max.z-c.z)*l,u=(e.min.z-c.z)*l);if(n>u||o>r)return null;if(o>n||n!==n)n=o;if(u<r||r!==r)r=u;return r<0?null:this.at(n>=0?n:r,t)},intersectsBox:function(){var e=new THREE.Vector3;return function(t){return this.intersectBox(t,e)!==null}}(),intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(i,s,o,u,a){t.subVectors(s,i),n.subVectors(o,i),r.crossVectors(t,n);var f=this.direction.dot(r),l;if(f>0){if(u)return null;l=1}else{if(!(f<0))return null;l=-1,f=-f}e.subVectors(this.origin,i);var c=l*this.direction.dot(n.crossVectors(e,n));if(c<0)return null;var h=l*this.direction.dot(t.cross(e));if(h<0)return null;if(c+h>f)return null;var p=-l*e.dot(r);return p<0?null:this.at(p/f,a)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},THREE.Sphere=function(e,t){this.center=e!==undefined?e:new THREE.Vector3,this.radius=t!==undefined?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,n){var r=this.center;n!==undefined?r.copy(n):e.setFromPoints(t).center(r);var i=0;for(var s=0,o=t.length;s<o;s++)i=Math.max(i,r.distanceToSquared(t[s]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new THREE.Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new THREE.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},THREE.Frustum=function(e,t,n,r,i,s){this.planes=[e!==undefined?e:new THREE.Plane,t!==undefined?t:new THREE.Plane,n!==undefined?n:new THREE.Plane,r!==undefined?r:new THREE.Plane,i!==undefined?i:new THREE.Plane,s!==undefined?s:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,n,r,i,s){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){var t=this.planes;for(var n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],a=n[5],f=n[6],l=n[7],c=n[8],h=n[9],p=n[10],d=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,l-u,d-c,y-v).normalize(),t[1].setComponents(o+r,l+u,d+c,y+v).normalize(),t[2].setComponents(o+i,l+a,d+h,y+m).normalize(),t[3].setComponents(o-i,l-a,d-h,y-m).normalize(),t[4].setComponents(o-s,l-f,d-p,y-g).normalize(),t[5].setComponents(o+s,l+f,d+p,y+g).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var n=t.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),e.copy(n.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,n=e.center,r=-e.radius;for(var i=0;i<6;i++){var s=t[i].distanceToPoint(n);if(s<r)return!1}return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){var r=this.planes;for(var i=0;i<6;i++){var s=r[i];e.x=s.normal.x>0?n.min.x:n.max.x,t.x=s.normal.x>0?n.max.x:n.min.x,e.y=s.normal.y>0?n.min.y:n.max.y,t.y=s.normal.y>0?n.max.y:n.min.y,e.z=s.normal.z>0?n.min.z:n.max.z,t.z=s.normal.z>0?n.max.z:n.min.z;var o=s.distanceToPoint(e),u=s.distanceToPoint(t);if(o<0&&u<0)return!1}return!0}}(),containsPoint:function(e){var t=this.planes;for(var n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},THREE.Plane=function(e,t){this.normal=e!==undefined?e:new THREE.Vector3(1,0,0),this.constant=t!==undefined?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n,r,i){var s=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(s,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e),r=t||new THREE.Vector3;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new THREE.Vector3;return function(t,n){var r=n||new THREE.Vector3,i=t.delta(e),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(t.start)===0?r.copy(t.start):undefined;var o=-(t.start.dot(this.normal)+this.constant)/s;return o<0||o>1?undefined:r.copy(i).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new THREE.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(r,i){var s=i||n.getNormalMatrix(r),o=e.copy(this.normal).applyMatrix3(s),u=this.coplanarPoint(t);return u.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(o,u),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},THREE.Math={generateUUID:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=new Array(36),n=0,r;return function(){for(var i=0;i<36;i++)i===8||i===13||i===18||i===23?t[i]="-":i===14?t[i]="4":(n<=2&&(n=33554432+Math.random()*16777216|0),r=n&15,n>>=4,t[i]=e[i===19?r&3|8:r]);return t.join("")}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}},THREE.Spline=function(e){function h(e,t,n,r,i,s,o){var u=(n-e)*.5,a=(r-t)*.5;return(2*(t-n)+u+a)*o+(-3*(t-n)-2*u-a)*s+u*i+t}this.points=e;var t=[],n={x:0,y:0,z:0},r,i,s,o,u,a,f,l,c;this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return r=(this.points.length-1)*e,i=Math.floor(r),s=r-i,t[0]=i===0?i:i-1,t[1]=i,t[2]=i>this.points.length-2?this.points.length-1:i+1,t[3]=i>this.points.length-3?this.points.length-1:i+2,a=this.points[t[0]],f=this.points[t[1]],l=this.points[t[2]],c=this.points[t[3]],o=s*s,u=s*o,n.x=h(a.x,f.x,l.x,c.x,s,o,u),n.y=h(a.y,f.y,l.y,c.y,s,o,u),n.z=h(a.z,f.z,l.z,c.z,s,o,u),n},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i,s=0,o=0,u=0,a=new THREE.Vector3,f=new THREE.Vector3,l=[],c=0;l[0]=0,e||(e=100),r=this.points.length*e,a.copy(this.points[0]);for(t=1;t<r;t++)n=t/r,i=this.getPoint(n),f.copy(i),c+=f.distanceTo(a),a.copy(i),s=(this.points.length-1)*n,o=Math.floor(s),o!==u&&(l[o]=c,u=o);return l[l.length]=c,{chunks:l,total:c}},this.reparametrizeByArcLength=function(e){var t,n,r,i,s,o,u,a,f=[],l=new THREE.Vector3,c=this.getLength();f.push(l.copy(this.points[0]).clone());for(t=1;t<this.points.length;t++){o=c.chunks[t]-c.chunks[t-1],u=Math.ceil(e*o/c.total),i=(t-1)/(this.points.length-1),s=t/(this.points.length-1);for(n=1;n<u-1;n++)r=i+n*(1/u)*(s-i),a=this.getPoint(r),f.push(l.copy(a).clone());f.push(l.copy(this.points[t]).clone())}this.points=f}},THREE.Triangle=function(e,t,n){this.a=e!==undefined?e:new THREE.Vector3,this.b=t!==undefined?t:new THREE.Vector3,this.c=n!==undefined?n:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,n,r,i){var s=i||new THREE.Vector3;s.subVectors(r,n),e.subVectors(t,n),s.cross(e);var o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(r,i,s,o,u){e.subVectors(o,i),t.subVectors(s,i),n.subVectors(r,i);var a=e.dot(e),f=e.dot(t),l=e.dot(n),c=t.dot(t),h=t.dot(n),p=a*c-f*f,d=u||new THREE.Vector3;if(p===0)return d.set(-2,-1,-1);var v=1/p,m=(c*l-f*h)*v,g=(a*h-f*l)*v;return d.set(1-m-g,g,m)}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,n,r,i){var s=THREE.Triangle.barycoordFromPoint(t,n,r,i,e);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new THREE.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},THREE.Interpolant=function(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==undefined?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n},THREE.Interpolant.prototype={constructor:THREE.Interpolant,evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var s;n:{r:if(!(e<r)){for(var o=n+2;;){if(r===undefined){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;i=r,r=t[++n];if(e<r)break t}s=t.length;break n}if(e>=i)break e;var u=t[1];e<u&&(n=2,i=u);for(var o=n-2;;){if(i===undefined)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;r=i,i=t[--n-1];if(e>=i)break t}s=n,n=0;break n}while(n<s){var a=n+s>>>1;e<t[a]?s=a:n=a+1}r=t[n],i=t[n-1];if(i===undefined)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===undefined)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(var s=0;s!==r;++s)t[s]=n[i+s];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}},Object.assign(THREE.Interpolant.prototype,{beforeStart_:THREE.Interpolant.prototype.copySampleValue_,afterEnd_:THREE.Interpolant.prototype.copySampleValue_}),THREE.CubicInterpolant=function(e,t,n,r){THREE.Interpolant.call(this,e,t,n,r),this._weightPrev=0,this._offsetPrev=0,this._weightNext=0,this._offsetNext=0},THREE.CubicInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.CubicInterpolant,DefaultSettings_:{endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,s=e+1,o=r[i],u=r[s];if(o===undefined)switch(this.getSettings_().endingStart){case THREE.ZeroSlopeEnding:i=e,o=2*t-n;break;case THREE.WrapAroundEnding:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(u===undefined)switch(this.getSettings_().endingEnd){case THREE.ZeroSlopeEnding:s=e,u=2*n-t;break;case THREE.WrapAroundEnding:s=1,u=n+r[1]-r[0];break;default:s=e-1,u=t}var a=(n-t)*.5,f=this.valueSize;this._weightPrev=a/(t-o),this._weightNext=a/(u-n),this._offsetPrev=i*f,this._offsetNext=s*f},interpolate_:function(e,t,n,r){var i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=e*o,a=u-o,f=this._offsetPrev,l=this._offsetNext,c=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),d=p*p,v=d*p,m=-c*v+2*c*d-c*p,g=(1+c)*v+(-1.5-2*c)*d+(-0.5+c)*p+1,y=(-1-h)*v+(1.5+h)*d+.5*p,b=h*v-h*d;for(var w=0;w!==o;++w)i[w]=m*s[f+w]+g*s[a+w]+y*s[u+w]+b*s[l+w];return i}}),THREE.DiscreteInterpolant=function(e,t,n,r){THREE.Interpolant.call(this,e,t,n,r)},THREE.DiscreteInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.DiscreteInterpolant,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}}),THREE.LinearInterpolant=function(e,t,n,r){THREE.Interpolant.call(this,e,t,n,r)},THREE.LinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.LinearInterpolant,interpolate_:function(e,t,n,r){var i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=e*o,a=u-o,f=(n-t)/(r-t),l=1-f;for(var c=0;c!==o;++c)i[c]=s[a+c]*l+s[u+c]*f;return i}}),THREE.QuaternionLinearInterpolant=function(e,t,n,r){THREE.Interpolant.call(this,e,t,n,r)},THREE.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(THREE.Interpolant.prototype),{constructor:THREE.QuaternionLinearInterpolant,interpolate_:function(e,t,n,r){var i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=e*o,a=(n-t)/(r-t);for(var f=u+o;u!==f;u+=4)THREE.Quaternion.slerpFlat(i,0,s,u-o,s,u,a);return i}}),THREE.Clock=function(e){this.autoStart=e!==undefined?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=performance.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;this.autoStart&&!this.running&&this.start();if(this.running){var t=performance.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){this._listeners===undefined&&(this._listeners={});var n=this._listeners;n[e]===undefined&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===undefined)return!1;var n=this._listeners;return n[e]!==undefined&&n[e].indexOf(t)!==-1?!0:!1},removeEventListener:function(e,t){if(this._listeners===undefined)return;var n=this._listeners,r=n[e];if(r!==undefined){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}},dispatchEvent:function(e){if(this._listeners===undefined)return;var t=this._listeners,n=t[e.type];if(n!==undefined){e.target=this;var r=[],i=n.length;for(var s=0;s<i;s++)r[s]=n[s];for(var s=0;s<i;s++)r[s].call(this,e)}}},THREE.Layers=function(){this.mask=1},THREE.Layers.prototype={constructor:THREE.Layers,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return(this.mask&e.mask)!==0}},function(e){function t(e,t){return e.distance-t.distance}function n(e,t,r,i){if(e.visible===!1)return;e.raycast(t,r);if(i===!0){var s=e.children;for(var o=0,u=s.length;o<u;o++)n(s[o],t,r,!0)}}e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||Infinity,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},e.Raycaster.prototype={constructor:e.Raycaster,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,n){n instanceof e.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize()):n instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(e,r){var i=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var s=0,o=e.length;s<o;s++)n(e[s],this,i,r);return i.sort(t),i}}}(THREE),THREE.Object3D=function(){function i(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,undefined,!1)}Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var e=new THREE.Vector3,t=new THREE.Euler,n=new THREE.Quaternion,r=new THREE.Vector3(1,1,1);t.onChange(i),n.onChange(s),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new THREE.Matrix4},normalMatrix:{value:new THREE.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new THREE.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.DefaultMatrixAutoUpdate=!0,THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e instanceof THREE.Object3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],s=i.getObjectByProperty(e,t);if(s!==undefined)return s}return undefined},getWorldPosition:function(e){var t=e||new THREE.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(n){var r=n||new THREE.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new THREE.Quaternion;return function(t){var n=t||new THREE.Euler;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new THREE.Vector3,t=new THREE.Quaternion;return function(n){var r=n||new THREE.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new THREE.Quaternion;return function(t){var n=t||new THREE.Vector3;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);var t=this.children;for(var n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible===!1)return;e(this);var t=this.children;for(var n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){var t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix();if(this.matrixWorldNeedsUpdate===!0||e===!0)this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0;for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(e){function f(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var t=e===undefined,n={};t&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),r.matrix=this.matrix.toArray(),this.geometry!==undefined&&(e.geometries[this.geometry.uuid]===undefined&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),r.geometry=this.geometry.uuid),this.material!==undefined&&(e.materials[this.material.uuid]===undefined&&(e.materials[this.material.uuid]=this.material.toJSON(e)),r.material=this.material.uuid);if(this.children.length>0){r.children=[];for(var i=0;i<this.children.length;i++)r.children.push(this.children[i].toJSON(e).object)}if(t){var s=f(e.geometries),o=f(e.materials),u=f(e.textures),a=f(e.images);s.length>0&&(n.geometries=s),o.length>0&&(n.materials=o),u.length>0&&(n.textures=u),a.length>0&&(n.images=a)}return n.object=r,n},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){t===undefined&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.rotationAutoUpdate=e.rotationAutoUpdate,this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData));if(t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Face3=function(e,t,n,r,i,s){this.a=e,this.b=t,this.c=n,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=i instanceof THREE.Color?i:new THREE.Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=s!==undefined?s:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},THREE.BufferAttribute=function(e,t){this.uuid=THREE.Math.generateUUID(),this.array=e,this.itemSize=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(e){e===!0&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){var t=this.array,n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===undefined&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new THREE.Color),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this},copyIndicesArray:function(e){var t=this.array,n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];t[n++]=s.a,t[n++]=s.b,t[n++]=s.c}return this},copyVector2sArray:function(e){var t=this.array,n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===undefined&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new THREE.Vector2),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){var t=this.array,n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===undefined&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new THREE.Vector3),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this},copyVector4sArray:function(e){var t=this.array,n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===undefined&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new THREE.Vector4),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this},set:function(e,t){return t===undefined&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},THREE.Int8Attribute=function(e,t){return new THREE.BufferAttribute(new Int8Array(e),t)},THREE.Uint8Attribute=function(e,t){return new THREE.BufferAttribute(new Uint8Array(e),t)},THREE.Uint8ClampedAttribute=function(e,t){return new THREE.BufferAttribute(new Uint8ClampedArray(e),t)},THREE.Int16Attribute=function(e,t){return new THREE.BufferAttribute(new Int16Array(e),t)},THREE.Uint16Attribute=function(e,t){return new THREE.BufferAttribute(new Uint16Array(e),t)},THREE.Int32Attribute=function(e,t){return new THREE.BufferAttribute(new Int32Array(e),t)},THREE.Uint32Attribute=function(e,t){return new THREE.BufferAttribute(new Uint32Array(e),t)},THREE.Float32Attribute=function(e,t){return new THREE.BufferAttribute(new Float32Array(e),t)},THREE.Float64Attribute=function(e,t){return new THREE.BufferAttribute(new Float64Array(e),t)},THREE.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),(new THREE.BufferAttribute(e,t)).setDynamic(!0)},THREE.InstancedBufferAttribute=function(e,t,n){THREE.BufferAttribute.call(this,e,t),this.meshPerAttribute=n||1},THREE.InstancedBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.InstancedBufferAttribute.prototype.constructor=THREE.InstancedBufferAttribute,THREE.InstancedBufferAttribute.prototype.copy=function(e){return THREE.BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},THREE.InterleavedBuffer=function(e,t){this.uuid=THREE.Math.generateUUID(),this.array=e,this.stride=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},THREE.InterleavedBuffer.prototype={constructor:THREE.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(e){e===!0&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return t===undefined&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)}},THREE.InstancedInterleavedBuffer=function(e,t,n){THREE.InterleavedBuffer.call(this,e,t),this.meshPerAttribute=n||1},THREE.InstancedInterleavedBuffer.prototype=Object.create(THREE.InterleavedBuffer.prototype),THREE.InstancedInterleavedBuffer.prototype.constructor=THREE.InstancedInterleavedBuffer,THREE.InstancedInterleavedBuffer.prototype.copy=function(e){return THREE.InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},THREE.InterleavedBufferAttribute=function(e,t,n){this.uuid=THREE.Math.generateUUID(),this.data=e,this.itemSize=t,this.offset=n},THREE.InterleavedBufferAttribute.prototype={constructor:THREE.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.count},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){var t=(new THREE.Matrix3).getNormalMatrix(e);for(var n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var s=this.faces[n];s.normal.applyMatrix3(t).normalize();for(var o=0,u=s.vertexNormals.length;o<u;o++)s.vertexNormals[o].applyMatrix3(t).normalize()}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0},rotateX:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e;return function(n,r,i){return e===undefined&&(e=new THREE.Matrix4),e.makeTranslation(n,r,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(n,r,i){return e===undefined&&(e=new THREE.Matrix4),e.makeScale(n,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(n){e===undefined&&(e=new THREE.Object3D),e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function d(e,n,r){var i=s!==undefined?[f[e].clone(),f[n].clone(),f[r].clone()]:[],h=o!==undefined?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],p=new THREE.Face3(e,n,r,i,h);t.faces.push(p),u!==undefined&&t.faceVertexUvs[0].push([l[e].clone(),l[n].clone(),l[r].clone()]),a!==undefined&&t.faceVertexUvs[1].push([c[e].clone(),c[n].clone(),c[r].clone()])}var t=this,n=e.index!==null?e.index.array:undefined,r=e.attributes,i=r.position.array,s=r.normal!==undefined?r.normal.array:undefined,o=r.color!==undefined?r.color.array:undefined,u=r.uv!==undefined?r.uv.array:undefined,a=r.uv2!==undefined?r.uv2.array:undefined;a!==undefined&&(this.faceVertexUvs[1]=[]);var f=[],l=[],c=[];for(var h=0,p=0;h<i.length;h+=3,p+=2)t.vertices.push(new THREE.Vector3(i[h],i[h+1],i[h+2])),s!==undefined&&f.push(new THREE.Vector3(s[h],s[h+1],s[h+2])),o!==undefined&&t.colors.push(new THREE.Color(o[h],o[h+1],o[h+2])),u!==undefined&&l.push(new THREE.Vector2(u[p],u[p+1])),a!==undefined&&c.push(new THREE.Vector2(a[p],a[p+1]));if(n!==undefined){var v=e.groups;if(v.length>0)for(var h=0;h<v.length;h++){var m=v[h],g=m.start,y=m.count;for(var p=g,b=g+y;p<b;p+=3)d(n[p],n[p+1],n[p+2])}else for(var h=0;h<n.length;h+=3)d(n[h],n[h+1],n[h+2])}else for(var h=0;h<i.length/3;h+=3)d(h,h+1,h+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,r=new THREE.Matrix4;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){var e=new THREE.Vector3,t=new THREE.Vector3;for(var n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],s=this.vertices[i.a],o=this.vertices[i.b],u=this.vertices[i.c];e.subVectors(u,o),t.subVectors(s,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){e===undefined&&(e=!0);var t,n,r,i,s,o;o=new Array(this.vertices.length);for(t=0,n=this.vertices.length;t<n;t++)o[t]=new THREE.Vector3;if(e){var u,a,f,l=new THREE.Vector3,c=new THREE.Vector3;for(r=0,i=this.faces.length;r<i;r++)s=this.faces[r],u=this.vertices[s.a],a=this.vertices[s.b],f=this.vertices[s.c],l.subVectors(f,a),c.subVectors(u,a),l.cross(c),o[s.a].add(l),o[s.b].add(l),o[s.c].add(l)}else for(r=0,i=this.faces.length;r<i;r++)s=this.faces[r],o[s.a].add(s.normal),o[s.b].add(s.normal),o[s.c].add(s.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(r=0,i=this.faces.length;r<i;r++){s=this.faces[r];var h=s.vertexNormals;h.length===3?(h[0].copy(o[s.a]),h[1].copy(o[s.b]),h[2].copy(o[s.c])):(h[0]=o[s.a].clone(),h[1]=o[s.b].clone(),h[2]=o[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone()}var s=new THREE.Geometry;s.faces=this.faces;for(e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,u=this.morphNormals[e].vertexNormals,a,f;for(n=0,r=this.faces.length;n<r;n++)a=new THREE.Vector3,f={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},o.push(a),u.push(f)}var l=this.morphNormals[e];s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals();var a,f;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],a=l.faceNormals[n],f=l.vertexNormals[n],a.copy(i.normal),f.a.copy(i.vertexNormals[0]),f.b.copy(i.vertexNormals[1]),f.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){var e=0,t=this.vertices;for(var n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e instanceof THREE.Geometry==0){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,i=this.vertices.length,s=this.vertices,o=e.vertices,u=this.faces,a=e.faces,f=this.faceVertexUvs[0],l=e.faceVertexUvs[0];n===undefined&&(n=0),t!==undefined&&(r=(new THREE.Matrix3).getNormalMatrix(t));for(var c=0,h=o.length;c<h;c++){var p=o[c],d=p.clone();t!==undefined&&d.applyMatrix4(t),s.push(d)}for(c=0,h=a.length;c<h;c++){var v=a[c],m,g,y,b=v.vertexNormals,w=v.vertexColors;m=new THREE.Face3(v.a+i,v.b+i,v.c+i),m.normal.copy(v.normal),r!==undefined&&m.normal.applyMatrix3(r).normalize();for(var E=0,S=b.length;E<S;E++)g=b[E].clone(),r!==undefined&&g.applyMatrix3(r).normalize(),m.vertexNormals.push(g);m.color.copy(v.color);for(var E=0,S=w.length;E<S;E++)y=w[E],m.vertexColors.push(y.clone());m.materialIndex=v.materialIndex+n,u.push(m)}for(c=0,h=l.length;c<h;c++){var x=l[c],T=[];if(x===undefined)continue;for(var E=0,S=x.length;E<S;E++)T.push(x[E].clone());f.push(T)}},mergeMesh:function(e){if(e instanceof THREE.Mesh==0){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={},t=[],n=[],r,i,s=4,o=Math.pow(10,s),u,a,f,l,c,h;for(u=0,a=this.vertices.length;u<a;u++)r=this.vertices[u],i=Math.round(r.x*o)+"_"+Math.round(r.y*o)+"_"+Math.round(r.z*o),e[i]===undefined?(e[i]=u,t.push(this.vertices[u]),n[u]=t.length-1):n[u]=n[e[i]];var p=[];for(u=0,a=this.faces.length;u<a;u++){f=this.faces[u],f.a=n[f.a],f.b=n[f.b],f.c=n[f.c],l=[f.a,f.b,f.c];var d=-1;for(var v=0;v<3;v++)if(l[v]===l[(v+1)%3]){d=v,p.push(u);break}}for(u=p.length-1;u>=0;u--){var m=p[u];this.faces.splice(m,1);for(c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(m,1)}var g=this.vertices.length-t.length;return this.vertices=t,g},sortFacesByMaterialIndex:function(){function r(e,t){return e.materialIndex-t.materialIndex}var e=this.faces,t=e.length;for(var n=0;n<t;n++)e[n]._id=n;e.sort(r);var i=this.faceVertexUvs[0],s=this.faceVertexUvs[1],o,u;i&&i.length===t&&(o=[]),s&&s.length===t&&(u=[]);for(var n=0;n<t;n++){var a=e[n]._id;o&&o.push(i[a]),u&&u.push(s[a])}o&&(this.faceVertexUvs[0]=o),u&&(this.faceVertexUvs[1]=u)},toJSON:function(){function N(e,t,n){return n?e|1<<t:e&~(1<<t)}function C(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return a[t]!==undefined?a[t]:(a[t]=u.length/3,u.push(e.x,e.y,e.z),a[t])}function k(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return l[t]!==undefined?l[t]:(l[t]=f.length,f.push(e.getHex()),l[t])}function L(e){var t=e.x.toString()+e.y.toString();return h[t]!==undefined?h[t]:(h[t]=c.length/2,c.push(e.x,e.y),h[t])}var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name);if(this.parameters!==undefined){var t=this.parameters;for(var n in t)t[n]!==undefined&&(e[n]=t[n]);return e}var r=[];for(var i=0;i<this.vertices.length;i++){var s=this.vertices[i];r.push(s.x,s.y,s.z)}var o=[],u=[],a={},f=[],l={},c=[],h={};for(var i=0;i<this.faces.length;i++){var p=this.faces[i],d=!0,v=!1,m=this.faceVertexUvs[0][i]!==undefined,g=p.normal.length()>0,y=p.vertexNormals.length>0,b=p.color.r!==1||p.color.g!==1||p.color.b!==1,w=p.vertexColors.length>0,E=0;E=N(E,0,0),E=N(E,1,d),E=N(E,2,v),E=N(E,3,m),E=N(E,4,g),E=N(E,5,y),E=N(E,6,b),E=N(E,7,w),o.push(E),o.push(p.a,p.b,p.c),o.push(p.materialIndex);if(m){var S=this.faceVertexUvs[0][i];o.push(L(S[0]),L(S[1]),L(S[2]))}g&&o.push(C(p.normal));if(y){var x=p.vertexNormals;o.push(C(x[0]),C(x[1]),C(x[2]))}b&&o.push(k(p.color));if(w){var T=p.vertexColors;o.push(k(T[0]),k(T[1]),k(T[2]))}}return e.data={},e.data.vertices=r,e.data.normals=u,f.length>0&&(e.data.colors=f),c.length>0&&(e.data.uvs=[c]),e.data.faces=o,e},clone:function(){return(new THREE.Geometry).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];var t=e.vertices;for(var n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());var i=e.faces;for(var n=0,r=i.length;n<r;n++)this.faces.push(i[n].clone());for(var n=0,r=e.faceVertexUvs.length;n<r;n++){var s=e.faceVertexUvs[n];this.faceVertexUvs[n]===undefined&&(this.faceVertexUvs[n]=[]);for(var o=0,u=s.length;o<u;o++){var a=s[o],f=[];for(var l=0,c=a.length;l<c;l++){var h=a[l];f.push(h.clone())}this.faceVertexUvs[n].push(f)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.DirectGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},THREE.DirectGeometry.prototype={constructor:THREE.DirectGeometry,computeBoundingBox:THREE.Geometry.prototype.computeBoundingBox,computeBoundingSphere:THREE.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(e){var t,n=[],r,i=e.faces;for(var s=0;s<i.length;s++){var o=i[s];o.materialIndex!==r&&(r=o.materialIndex,t!==undefined&&(t.count=s*3-t.start,n.push(t)),t={start:s*3,materialIndex:r})}t!==undefined&&(t.count=s*3-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,o=e.morphTargets,u=o.length,a;if(u>0){a=[];for(var f=0;f<u;f++)a[f]=[];this.morphTargets.position=a}var l=e.morphNormals,c=l.length,h;if(c>0){h=[];for(var f=0;f<c;f++)h[f]=[];this.morphTargets.normal=h}var p=e.skinIndices,d=e.skinWeights,v=p.length===n.length,m=d.length===n.length;for(var f=0;f<t.length;f++){var g=t[f];this.vertices.push(n[g.a],n[g.b],n[g.c]);var y=g.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var w=g.vertexColors;if(w.length===3)this.colors.push(w[0],w[1],w[2]);else{var E=g.color;this.colors.push(E,E,E)}if(i===!0){var S=r[0][f];S!==undefined?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",f),this.uvs.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2))}if(s===!0){var S=r[1][f];S!==undefined?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",f),this.uvs2.push(new THREE.Vector2,new THREE.Vector2,new THREE.Vector2))}for(var x=0;x<u;x++){var T=o[x].vertices;a[x].push(T[g.a],T[g.b],T[g.c])}for(var x=0;x<c;x++){var N=l[x].vertexNormals[f];h[x].push(N.a,N.b,N.c)}v&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),m&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.DirectGeometry.prototype),THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity}},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){if(t instanceof THREE.BufferAttribute==0&&t instanceof THREE.InterleavedBufferAttribute==0){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new THREE.BufferAttribute(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t);return}return this.attributes[e]=t,this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==undefined?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;t!==undefined&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var n=this.attributes.normal;if(n!==undefined){var r=(new THREE.Matrix3).getNormalMatrix(e);r.applyToVector3Array(n.array),n.needsUpdate=!0}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()},rotateX:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(n){return e===undefined&&(e=new THREE.Matrix4),e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e;return function(n,r,i){return e===undefined&&(e=new THREE.Matrix4),e.makeTranslation(n,r,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(n,r,i){return e===undefined&&(e=new THREE.Matrix4),e.makeScale(n,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(n){e===undefined&&(e=new THREE.Object3D),e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e instanceof THREE.Points||e instanceof THREE.Line){var n=new THREE.Float32Attribute(t.vertices.length*3,3),r=new THREE.Float32Attribute(t.colors.length*3,3);this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors));if(t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new THREE.Float32Attribute(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e instanceof THREE.Mesh&&t instanceof THREE.Geometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e instanceof THREE.Mesh){var n=t.__directGeometry;if(n===undefined)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(t.verticesNeedUpdate===!0){var r=this.attributes.position;r!==undefined&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1}if(t.normalsNeedUpdate===!0){var r=this.attributes.normal;r!==undefined&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1}if(t.colorsNeedUpdate===!0){var r=this.attributes.color;r!==undefined&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){var r=this.attributes.uv;r!==undefined&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){var r=this.attributes.lineDistance;r!==undefined&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new THREE.DirectGeometry).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);this.addAttribute("position",(new THREE.BufferAttribute(t,3)).copyVector3sArray(e.vertices));if(e.normals.length>0){var n=new Float32Array(e.normals.length*3);this.addAttribute("normal",(new THREE.BufferAttribute(n,3)).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(e.colors.length*3);this.addAttribute("color",(new THREE.BufferAttribute(r,3)).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(e.uvs.length*2);this.addAttribute("uv",(new THREE.BufferAttribute(i,2)).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var s=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",(new THREE.BufferAttribute(s,2)).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=e.vertices.length>65535?Uint32Array:Uint16Array,u=new o(e.indices.length*3);this.setIndex((new THREE.BufferAttribute(u,1)).copyIndicesArray(e.indices))}this.groups=e.groups;for(var a in e.morphTargets){var f=[],l=e.morphTargets[a];for(var c=0,h=l.length;c<h;c++){var p=l[c],d=new THREE.Float32Attribute(p.length*3,3);f.push(d.copyVector3sArray(p))}this.morphAttributes[a]=f}if(e.skinIndices.length>0){var v=new THREE.Float32Attribute(e.skinIndices.length*4,4);this.addAttribute("skinIndex",v.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new THREE.Float32Attribute(e.skinWeights.length*4,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new THREE.Vector3;return function(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;e&&this.boundingBox.setFromArray(e);if(e===undefined||e.length===0)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0);(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var n=this.attributes.position.array;if(n){var r=this.boundingSphere.center;e.setFromArray(n),e.center(r);var i=0;for(var s=0,o=n.length;s<o;s+=3)t.fromArray(n,s),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(t.normal===undefined)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(r.length),3));else{var i=t.normal.array;for(var s=0,o=i.length;s<o;s++)i[s]=0}var u=t.normal.array,a,f,l,c=new THREE.Vector3,h=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector3,v=new THREE.Vector3;if(e){var m=e.array;n.length===0&&this.addGroup(0,m.length);for(var g=0,y=n.length;g<y;++g){var b=n[g],w=b.start,E=b.count;for(var s=w,o=w+E;s<o;s+=3)a=m[s+0]*3,f=m[s+1]*3,l=m[s+2]*3,c.fromArray(r,a),h.fromArray(r,f),p.fromArray(r,l),d.subVectors(p,h),v.subVectors(c,h),d.cross(v),u[a]+=d.x,u[a+1]+=d.y,u[a+2]+=d.z,u[f]+=d.x,u[f+1]+=d.y,u[f+2]+=d.z,u[l]+=d.x,u[l+1]+=d.y,u[l+2]+=d.z}}else for(var s=0,o=r.length;s<o;s+=9)c.fromArray(r,s),h.fromArray(r,s+3),p.fromArray(r,s+6),d.subVectors(p,h),v.subVectors(c,h),d.cross(v),u[s]=d.x,u[s+1]=d.y,u[s+2]=d.z,u[s+3]=d.x,u[s+4]=d.y,u[s+5]=d.z,u[s+6]=d.x,u[s+7]=d.y,u[s+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e instanceof THREE.BufferGeometry==0){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===undefined&&(t=0);var n=this.attributes;for(var r in n){if(e.attributes[r]===undefined)continue;var i=n[r],s=i.array,o=e.attributes[r],u=o.array,a=o.itemSize;for(var f=0,l=a*t;f<u.length;f++,l++)s[l]=u[f]}return this},normalizeNormals:function(){var e=this.attributes.normal.array,t,n,r,i;for(var s=0,o=e.length;s<o;s+=3)t=e[s],n=e[s+1],r=e[s+2],i=1/Math.sqrt(t*t+n*n+r*r),e[s]*=i,e[s+1]*=i,e[s+2]*=i},toNonIndexed:function(){if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new THREE.BufferGeometry,t=this.index.array,n=this.attributes;for(var r in n){var i=n[r],s=i.array,o=i.itemSize,u=new s.constructor(t.length*o),a=0,f=0;for(var l=0,c=t.length;l<c;l++){a=t[l]*o;for(var h=0;h<o;h++)u[f++]=s[a++]}e.addAttribute(r,new THREE.BufferAttribute(u,o))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name);if(this.parameters!==undefined){var t=this.parameters;for(var n in t)t[n]!==undefined&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(r!==null){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var s=this.attributes;for(var n in s){var o=s[n],i=Array.prototype.slice.call(o.array);e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:i}}var u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));var a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e},clone:function(){return(new THREE.BufferGeometry).copy(this)},copy:function(e){var t=e.index;t!==null&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}var s=e.groups;for(var o=0,u=s.length;o<u;o++){var a=s[o];this.addGroup(a.start,a.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.BufferGeometry.MaxIndex=65535,THREE.InstancedBufferGeometry=function(){THREE.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=undefined},THREE.InstancedBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.InstancedBufferGeometry.prototype.constructor=THREE.InstancedBufferGeometry,THREE.InstancedBufferGeometry.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,instances:n})},THREE.InstancedBufferGeometry.prototype.copy=function(e){var t=e.index;t!==null&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}var s=e.groups;for(var o=0,u=s.length;o<u;o++){var a=s[o];this.addGroup(a.start,a.count,a.instances)}return this},THREE.EventDispatcher.prototype.apply(THREE.InstancedBufferGeometry.prototype),THREE.Uniform=function(e,t){this.type=e,this.value=t,this.dynamic=!1},THREE.Uniform.prototype={constructor:THREE.Uniform,onUpdate:function(e){return this.dynamic=!0,this.onUpdateCallback=e,this}},THREE.AnimationClip=function(e,t,n){this.name=e||THREE.Math.generateUUID(),this.tracks=n,this.duration=t!==undefined?t:-1,this.duration<0&&this.resetDuration(),this.trim(),this.optimize()},THREE.AnimationClip.prototype={constructor:THREE.AnimationClip,resetDuration:function(){var e=this.tracks,t=0;for(var n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(THREE.AnimationClip,{parse:function(e){var t=[],n=e.tracks,r=1/(e.fps||1);for(var i=0,s=n.length;i!==s;++i)t.push(THREE.KeyframeTrack.parse(n[i]).scale(r));return new THREE.AnimationClip(e.name,e.duration,t)},toJSON:function(e){var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t};for(var i=0,s=n.length;i!==s;++i)t.push(THREE.KeyframeTrack.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n){var r=t.length,i=[];for(var s=0;s<r;s++){var o=[],u=[];o.push((s+r-1)%r,s,(s+1)%r),u.push(0,1,0);var a=THREE.AnimationUtils.getKeyframeOrder(o);o=THREE.AnimationUtils.sortedArray(o,1,a),u=THREE.AnimationUtils.sortedArray(u,1,a),o[0]===0&&(o.push(r),u.push(u[0])),i.push((new THREE.NumberKeyframeTrack(".morphTargetInfluences["+t[s].name+"]",o,u)).scale(1/n))}return new THREE.AnimationClip(e,-1,i)},findByName:function(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},CreateClipsFromMorphTargetSequences:function(e,t){var n={},r=/^([\w-]*?)([\d]+)$/;for(var i=0,s=e.length;i<s;i++){var o=e[i],u=o.name.match(r);if(u&&u.length>1){var a=u[1],f=n[a];f||(n[a]=f=[]),f.push(o)}}var l=[];for(var a in n)l.push(THREE.AnimationClip.CreateFromMorphTargetSequence(a,n[a],t));return l},parseAnimation:function(e,t,n){if(!e)return console.error("  no animation in JSONLoader data"),null;var r=function(e,t,n,r,i){if(n.length!==0){var s=[],o=[];THREE.AnimationUtils.flattenJSON(n,s,o,r),s.length!==0&&i.push(new e(t,s,o))}},i=[],s=e.name||"default",o=e.length||-1,u=e.fps||30,a=e.hierarchy||[];for(var f=0;f<a.length;f++){var l=a[f].keys;if(!l||l.length==0)continue;if(l[0].morphTargets){var c={};for(var h=0;h<l.length;h++)if(l[h].morphTargets)for(var p=0;p<l[h].morphTargets.length;p++)c[l[h].morphTargets[p]]=-1;for(var d in c){var v=[],m=[];for(var p=0;p!==l[h].morphTargets.length;++p){var g=l[h];v.push(g.time),m.push(g.morphTarget===d?1:0)}i.push(new THREE.NumberKeyframeTrack(".morphTargetInfluence["+d+"]",v,m))}o=c.length*(u||1)}else{var y=".bones["+t[f].name+"]";r(THREE.VectorKeyframeTrack,y+".position",l,"pos",i),r(THREE.QuaternionKeyframeTrack,y+".quaternion",l,"rot",i),r(THREE.VectorKeyframeTrack,y+".scale",l,"scl",i)}}if(i.length===0)return null;var b=new THREE.AnimationClip(s,o,i);return b}}),THREE.AnimationMixer=function(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1},THREE.AnimationMixer.prototype={constructor:THREE.AnimationMixer,clipAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?e:e.name,s=e!==i?e:null,o=this._actionsByClip[i],u;if(o!==undefined){var a=o.actionByRoot[r];if(a!==undefined)return a;u=o.knownActions[0],s=u._clip;if(e!==i&&e!==s)throw new Error("Different clips with the same name detected!")}if(s===null)return null;var f=new THREE.AnimationMixer._Action(this,s,t);return this._bindAction(f,u),this._addInactiveAction(f,i,r),f},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?e:e.name,s=this._actionsByClip[i];return s!==undefined?s.actionByRoot[r]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(var o=0;o!==n;++o){var u=t[o];u.enabled&&u._update(r,e,i,s)}var a=this._bindings,f=this._nActiveBindings;for(var o=0;o!==f;++o)a[o].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.name,r=this._actionsByClip,i=r[n];if(i!==undefined){var s=i.knownActions;for(var o=0,u=s.length;o!==u;++o){var a=s[o];this._deactivateAction(a);var f=a._cacheIndex,l=t[t.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,l._cacheIndex=f,t[f]=l,t.pop(),this._removeInactiveBindingsForAction(a)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,s=i[t];s!==undefined&&(this._deactivateAction(s),this._removeInactiveAction(s))}var o=this._bindingsByRootAndName,u=o[t];if(u!==undefined)for(var a in u){var f=u[a];f.restoreOriginalState(),this._removeInactiveBinding(f)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}},THREE.EventDispatcher.prototype.apply(THREE.AnimationMixer.prototype),THREE.AnimationMixer._Action=function(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;var r=t.tracks,i=r.length,s=new Array(i),o={endingStart:THREE.ZeroCurvatureEnding,endingEnd:THREE.ZeroCurvatureEnding};for(var u=0;u!==i;++u){var a=r[u].createInterpolant(null);s[u]=a,a.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=THREE.LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0},THREE.AnimationMixer._Action.prototype={constructor:THREE.AnimationMixer._Action,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){var e=this._startTime;return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){var r=this._mixer;e.fadeOut(t),this.fadeIn(t);if(n){var i=this._clip.duration,s=e._clip.duration,o=s/i,u=i/s;e.warp(1,o,t),this.warp(u,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._currentTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,s=this._timeScaleInterpolant,o=this.timeScale;s===null&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);var u=s.parameterPositions,a=s.sampleValues;return u[0]=i,u[1]=i+n,a[0]=e/o,a[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){var i=this._startTime;if(i!==null){var s=(e-i)*n;if(s<0||n===0)return;this._startTime=null,t=n*s}t*=this._updateTimeScale(e);var o=this._updateTime(t),u=this._updateWeight(e);if(u>0){var a=this._interpolants,f=this._propertyBindings;for(var l=0,c=a.length;l!==c;++l)a[l].evaluate(o),f[l].accumulate(r,u)}},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.pause=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount,s=!1;switch(r){case THREE.LoopOnce:i===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));if(t>=n)t=n;else{if(!(t<0))break;t=0}this.clampWhenFinished?this.pause=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1});break;case THREE.LoopPingPong:s=!0;case THREE.LoopRepeat:i===-1&&(e>0?(i=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s));if(t>=n||t<0){var o=Math.floor(t/n);t-=n*o,i+=Math.abs(o);var u=this.repetitions-i;if(u<0){this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});break}if(u===0){var a=e<0;this._setEndings(a,!a,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}if(r===THREE.LoopPingPong&&(i&1)===1)return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=THREE.ZeroSlopeEnding,r.endingEnd=THREE.ZeroSlopeEnding):(e?r.endingStart=this.zeroSlopeAtStart?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:r.endingStart=THREE.WrapAroundEnding,t?r.endingEnd=this.zeroSlopeAtEnd?THREE.ZeroSlopeEnding:THREE.ZeroCurvatureEnding:r.endingEnd=THREE.WrapAroundEnding)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);var o=s.parameterPositions,u=s.sampleValues;return o[0]=i,u[0]=t,o[1]=i+e,u[1]=n,this}},Object.assign(THREE.AnimationMixer.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,o=e._interpolants,u=n.uuid,a=this._bindingsByRootAndName,f=a[u];f===undefined&&(f={},a[u]=f);for(var l=0;l!==i;++l){var c=r[l],h=c.name,p=f[h];if(p!==undefined)s[l]=p;else{p=s[l];if(p!==undefined){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,u,h));continue}var d=t&&t._propertyBindings[l].binding.parsedPath;p=new THREE.PropertyMixer(THREE.PropertyBinding.create(n,h,d),c.ValueTypeName,c.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,u,h),s[l]=p}o[l].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,n=e._clip.name,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}var i=e._propertyBindings;for(var s=0,o=i.length;s!==o;++s){var u=i[s];u.useCount++===0&&(this._lendBinding(u),u.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){var t=e._propertyBindings;for(var n=0,r=t.length;n!==r;++n){var i=t[n];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,s=i[t];if(s===undefined)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{var o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.name,s=this._actionsByClip,o=s[i],u=o.knownActions,a=u[u.length-1],f=e._byClipCacheIndex;a._byClipCacheIndex=f,u[f]=a,u.pop(),e._byClipCacheIndex=null;var l=o.actionByRoot,c=(t._localRoot||this._root).uuid;delete l[c],u.length===0&&delete s[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){var t=e._propertyBindings;for(var n=0,r=t.length;n!==r;++n){var i=t[n];--i.referenceCount===0&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],s=this._bindings;i===undefined&&(i={},r[t]=i),i[n]=e,e._cacheIndex=s.length,s.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,o=s[r],u=t[t.length-1],a=e._cacheIndex;u._cacheIndex=a,t[a]=u,t.pop(),delete o[i];e:{for(var f in o)break e;delete s[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return n===undefined&&(n=new THREE.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),THREE.AnimationObjectGroup=function(e){this.uuid=THREE.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}},THREE.AnimationObjectGroup.prototype={constructor:THREE.AnimationObjectGroup,add:function(e){var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,s=this._paths,o=this._parsedPaths,u=this._bindings,a=u.length;for(var f=0,l=arguments.length;f!==l;++f){var c=arguments[f],h=c.uuid,p=i[h];if(p===undefined){p=n++,i[h]=p,t.push(c);for(var d=0,v=a;d!==v;++d)u[d].push(new THREE.PropertyBinding(c,s[d],o[d]))}else if(p<r){var m=t[p],g=--r,y=t[g];i[y.uuid]=p,t[p]=y,i[h]=g,t[g]=c;for(var d=0,v=a;d!==v;++d){var b=u[d],w=b[g],E=b[p];b[p]=w,E===undefined&&(E=new THREE.PropertyBinding(c,s[d],o[d])),b[g]=E}}else t[p]!==m&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,s=this._bindings,o=s.length;for(var u=0,a=arguments.length;u!==a;++u){var f=arguments[u],l=f.uuid,c=i[l];if(c!==undefined&&c>=r){var h=r++,p=t[h];i[p.uuid]=c,t[c]=p,i[l]=h,t[h]=f;for(var d=0,v=o;d!==v;++d){var m=s[d],g=m[h],y=m[c];m[c]=g,m[h]=y}}}this.nCachedObjects_=r},uncache:function(e){var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,s=this._bindings,o=s.length;for(var u=0,a=arguments.length;u!==a;++u){var f=arguments[u],l=f.uuid,c=i[l];if(c!==undefined){delete i[l];if(c<r){var h=--r,p=t[h],d=--n,v=t[d];i[p.uuid]=c,t[c]=p,i[v.uuid]=h,t[h]=v,t.pop();for(var m=0,g=o;m!==g;++m){var y=s[m],b=y[h],w=y[d];y[c]=b,y[h]=w,y.pop()}}else{var d=--n,v=t[d];i[v.uuid]=c,t[c]=v,t.pop();for(var m=0,g=o;m!==g;++m){var y=s[m];y[c]=y[d],y.pop()}}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(r!==undefined)return i[r];var s=this._paths,o=this._parsedPaths,u=this._objects,a=u.length,f=this.nCachedObjects_,l=new Array(a);r=i.length,n[e]=r,s.push(e),o.push(t),i.push(l);for(var c=f,h=u.length;c!==h;++c){var p=u[c];l[c]=new THREE.PropertyBinding(p,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(n!==undefined){var r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length-1,u=s[o],a=e[o];t[a]=n,s[n]=u,s.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}},THREE.AnimationUtils={arraySlice:function(e,t,n){return THREE.AnimationUtils.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}var n=e.length,r=new Array(n);for(var i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){var r=e.length,i=new e.constructor(r);for(var s=0,o=0;o!==r;++s){var u=n[s]*t;for(var a=0;a!==t;++a)i[o++]=e[u+a]}return i},flattenJSON:function(e,t,n,r){var i=1,s=e[0];while(s!==undefined&&s[r]===undefined)s=e[i++];if(s===undefined)return;var o=s[r];if(o===undefined)return;if(Array.isArray(o)){do o=s[r],o!==undefined&&(t.push(s.time),n.push.apply(n,o)),s=e[i++];while(s!==undefined)}else if(o.toArray!==undefined){do o=s[r],o!==undefined&&(t.push(s.time),o.toArray(n,n.length)),s=e[i++];while(s!==undefined)}else do o=s[r],o!==undefined&&(t.push(s.time),n.push(o)),s=e[i++];while(s!==undefined)}},THREE.KeyframeTrack=function(e,t,n,r){if(e===undefined)throw new Error("track name is undefined");if(t===undefined||t.length===0)throw new Error("no keyframes in track named "+e);this.name=e,this.times=THREE.AnimationUtils.convertArray(t,this.TimeBufferType),this.values=THREE.AnimationUtils.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()},THREE.KeyframeTrack.prototype={constructor:THREE.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(e){return new THREE.DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new THREE.LinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new THREE.CubicInterpolant(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t=undefined;switch(e){case THREE.InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case THREE.InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case THREE.InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth}if(t===undefined){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===undefined){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn(n);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return THREE.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return THREE.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return THREE.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){var t=this.times;for(var n=0,r=t.length;n!==r;++n)t[n]+=e}return this},scale:function(e){if(e!==1){var t=this.times;for(var n=0,r=t.length;n!==r;++n)t[n]*=e}return this},trim:function(e,t){var n=this.times,r=n.length,i=0,s=r-1;while(i!==r&&n[i]<e)++i;while(s!==-1&&n[s]>t)--s;++s;if(i!==0||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);var o=this.getValueSize();this.times=THREE.AnimationUtils.arraySlice(n,i,s),this.values=THREE.AnimationUtils.arraySlice(this.values,i*o,s*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("invalid value size in track",this),e=!1);var n=this.times,r=this.values,i=n.length;i===0&&(console.error("track is empty",this),e=!1);var s=null;for(var o=0;o!==i;o++){var u=n[o];if(typeof u=="number"&&isNaN(u)){console.error("time is not a valid number",this,o,u),e=!1;break}if(s!==null&&s>u){console.error("out of order keys",this,o,u,s),e=!1;break}s=u}if(r!==undefined&&THREE.AnimationUtils.isTypedArray(r))for(var o=0,a=r.length;o!==a;++o){var f=r[o];if(isNaN(f)){console.error("value is not a valid number",this,o,f),e=!1;break}}return e},optimize:function(){var e=this.times,t=this.values,n=this.getValueSize(),r=1;for(var i=1,s=e.length-1;i<=s;++i){var o=!1,u=e[i],a=e[i+1];if(u!==a&&(i!==1||u!==u[0])){var f=i*n,l=f-n,c=f+n;for(var h=0;h!==n;++h){var p=t[f+h];if(p!==t[l+h]||p!==t[c+h]){o=!0;break}}}if(o){if(i!==r){e[r]=e[i];var d=i*n,v=r*n;for(var h=0;h!==n;++h)t[v+h]=t[d+h]}++r}}return r!==e.length&&(this.times=THREE.AnimationUtils.arraySlice(e,0,r),this.values=THREE.AnimationUtils.arraySlice(t,0,r*n)),this}},Object.assign(THREE.KeyframeTrack,{parse:function(e){if(e.type===undefined)throw new Error("track type undefined, can not parse");var t=THREE.KeyframeTrack._getTrackTypeForValueTypeName(e.type);if(e.times===undefined){console.warn("legacy JSON format detected, converting");var n=[],r=[];THREE.AnimationUtils.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==undefined?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor,n;if(t.toJSON!==undefined)n=t.toJSON(e);else{n={name:e.name,times:THREE.AnimationUtils.convertArray(e.times,Array),values:THREE.AnimationUtils.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return THREE.NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return THREE.VectorKeyframeTrack;case"color":return THREE.ColorKeyframeTrack;case"quaternion":return THREE.QuaternionKeyframeTrack;case"bool":case"boolean":return THREE.BooleanKeyframeTrack;case"string":return THREE.StringKeyframeTrack}throw new Error("Unsupported typeName: "+e)}}),THREE.PropertyBinding=function(e,t,n){this.path=t,this.parsedPath=n||THREE.PropertyBinding.parseTrackName(t),this.node=THREE.PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e},THREE.PropertyBinding.prototype={constructor:THREE.PropertyBinding,getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;e||(e=THREE.PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable;if(!e){console.error("  trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){var s=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("  can not bind to material as node does not have a material",this);return}if(!e.material.materials){console.error("  can not bind to material.materials as node.material does not have a materials array",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("  can not bind to bones as node does not have a skeleton",this);return}e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===s){s=o;break}break;default:if(e[n]===undefined){console.error("  can not bind to objectName of node, undefined",this);return}e=e[n]}if(s!==undefined){if(e[s]===undefined){console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);return}e=e[s]}}var u=e[r];if(!u){var a=t.nodeName;console.error("  trying to update property for track: "+a+"."+r+" but it wasn't found.",e);return}var f=this.Versioning.None;e.needsUpdate!==undefined?(f=this.Versioning.NeedsUpdate,this.targetObject=e):e.matrixWorldNeedsUpdate!==undefined&&(f=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(i!==undefined){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);return}if(!e.geometry.morphTargets){console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);return}for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}l=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=i}else u.fromArray!==undefined&&u.toArray!==undefined?(l=this.BindingType.HasFromToArray,this.resolvedProperty=u):u.length!==undefined?(l=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][f]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(THREE.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:THREE.PropertyBinding.prototype.getValue,_setValue_unbound:THREE.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){var r=this.resolvedProperty;for(var i=0,s=r.length;i!==s;++i)t[n++]=r[i]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.node[this.propertyName]=t[n]},function(t,n){this.node[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.node[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){var r=this.resolvedProperty;for(var i=0,s=r.length;i!==s;++i)r[i]=t[n++]},function(t,n){var r=this.resolvedProperty;for(var i=0,s=r.length;i!==s;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){var r=this.resolvedProperty;for(var i=0,s=r.length;i!==s;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),THREE.PropertyBinding.Composite=function(e,t,n){var r=n||THREE.PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)},THREE.PropertyBinding.Composite.prototype={constructor:THREE.PropertyBinding.Composite,getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==undefined&&r.getValue(e,t)},setValue:function(e,t){var n=this._bindings;for(var r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){var e=this._bindings;for(var t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},THREE.PropertyBinding.create=function(e,t,n){return e instanceof THREE.AnimationObjectGroup?new THREE.PropertyBinding.Composite(e,t,n):new THREE.PropertyBinding(e,t,n)},THREE.PropertyBinding.parseTrackName=function(e){var t=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_. ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,n=t.exec(e);if(!n)throw new Error("cannot parse trackName at all: "+e);n.index===t.lastIndex&&t.lastIndex++;var r={nodeName:n[3],objectName:n[5],objectIndex:n[7],propertyName:n[9],propertyIndex:n[11]};if(r.propertyName===null||r.propertyName.length===0)throw new Error("can not parse propertyName from trackName: "+e);return r},THREE.PropertyBinding.findNode=function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];if(r.name===t)return r}return null},r=n(e.skeleton);if(r)return r}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var s=i(r.children);if(s)return s}return null},s=i(e.children);if(s)return s}return null},THREE.PropertyMixer=function(e,t,n){this.binding=e,this.valueSize=n;var r=Float64Array,i;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(n*4),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0},THREE.PropertyMixer.prototype={constructor:THREE.PropertyMixer,accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,s=this.cumulativeWeight;if(s===0){for(var o=0;o!==r;++o)n[i+o]=n[o];s=t}else{s+=t;var u=t/s;this._mixBufferRegion(n,i,0,u,r)}this.cumulativeWeight=s},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.binding;this.cumulativeWeight=0;if(i<1){var o=t*3;this._mixBufferRegion(n,r,o,1-i,t)}for(var u=t,a=t+t;u!==a;++u)if(n[u]!==n[u+t]){s.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*3;e.getValue(t,r);for(var i=n,s=r;i!==s;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var s=0;s!==i;++s)e[t+s]=e[n+s]},_slerp:function(e,t,n,r,i){THREE.Quaternion.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){var s=1-r;for(var o=0;o!==i;++o){var u=t+o;e[u]=e[u]*s+e[n+o]*r}}},THREE.BooleanKeyframeTrack=function(e,t,n){THREE.KeyframeTrack.call(this,e,t,n)},THREE.BooleanKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:THREE.IntepolateDiscrete,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined}),THREE.NumberKeyframeTrack=function(e,t,n,r){THREE.KeyframeTrack.call(this,e,t,n,r)},THREE.NumberKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.NumberKeyframeTrack,ValueTypeName:"number"}),THREE.QuaternionKeyframeTrack=function(e,t,n,r){THREE.KeyframeTrack.call(this,e,t,n,r)},THREE.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:THREE.InterpolateLinear,InterpolantFactoryMethodLinear:function(e){return new THREE.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:undefined}),THREE.StringKeyframeTrack=function(e,t,n,r){THREE.KeyframeTrack.call(this,e,t,n,r)},THREE.StringKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:THREE.IntepolateDiscrete,InterpolantFactoryMethodLinear:undefined,InterpolantFactoryMethodSmooth:undefined}),THREE.VectorKeyframeTrack=function(e,t,n,r){THREE.KeyframeTrack.call(this,e,t,n,r)},THREE.VectorKeyframeTrack.prototype=Object.assign(Object.create(THREE.KeyframeTrack.prototype),{constructor:THREE.VectorKeyframeTrack,ValueTypeName:"vector"}),THREE.Audio=function(e){THREE.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filter=null},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.constructor=THREE.Audio,THREE.Audio.prototype.getOutput=function(){return this.gain},THREE.Audio.prototype.load=function(e){var t=new THREE.AudioBuffer(this.context);return t.load(e),this.setBuffer(t),this},THREE.Audio.prototype.setNodeSource=function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},THREE.Audio.prototype.setBuffer=function(e){var t=this;return e.onReady(function(e){t.source.buffer=e,t.sourceType="buffer",t.autoplay&&t.play()}),this},THREE.Audio.prototype.play=function(){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.start(0,this.startTime),e.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=e,this.connect()},THREE.Audio.prototype.pause=function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop(),this.startTime=this.context.currentTime},THREE.Audio.prototype.stop=function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop(),this.startTime=0},THREE.Audio.prototype.connect=function(){this.filter!==null?(this.source.connect(this.filter),this.filter.connect(this.getOutput())):this.source.connect(this.getOutput())},THREE.Audio.prototype.disconnect=function(){this.filter!==null?(this.source.disconnect(this.filter),this.filter.disconnect(this.getOutput())):this.source.disconnect(this.getOutput())},THREE.Audio.prototype.getFilter=function(){return this.filter},THREE.Audio.prototype.setFilter=function(e){e===undefined&&(e=null),this.isPlaying===!0?(this.disconnect(),this.filter=e,this.connect()):this.filter=e},THREE.Audio.prototype.setPlaybackRate=function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this.playbackRate=e,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate)},THREE.Audio.prototype.getPlaybackRate=function(){return this.playbackRate},THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1},THREE.Audio.prototype.setLoop=function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.loop=e},THREE.Audio.prototype.getLoop=function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},THREE.Audio.prototype.setVolume=function(e){this.gain.gain.value=e},THREE.Audio.prototype.getVolume=function(){return this.gain.gain.value},THREE.AudioAnalyser=function(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==undefined?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)},THREE.AudioAnalyser.prototype={constructor:THREE.AudioAnalyser,getData:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},THREE.AudioBuffer=function(e){this.context=e,this.ready=!1,this.readyCallbacks=[]},THREE.AudioBuffer.prototype.load=function(e){var t=this,n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(e){t.context.decodeAudioData(this.response,function(e){t.buffer=e,t.ready=!0;for(var n=0;n<t.readyCallbacks.length;n++)t.readyCallbacks[n](t.buffer);t.readyCallbacks=[]})},n.send(),this},THREE.AudioBuffer.prototype.onReady=function(e){this.ready?e(this.buffer):this.readyCallbacks.push(e)},THREE.PositionalAudio=function(e){THREE.Audio.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},THREE.PositionalAudio.prototype=Object.create(THREE.Audio.prototype),THREE.PositionalAudio.prototype.constructor=THREE.PositionalAudio,THREE.PositionalAudio.prototype.getOutput=function(){return this.panner},THREE.PositionalAudio.prototype.setRefDistance=function(e){this.panner.refDistance=e},THREE.PositionalAudio.prototype.getRefDistance=function(){return this.panner.refDistance},THREE.PositionalAudio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},THREE.PositionalAudio.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor},THREE.PositionalAudio.prototype.setDistanceModel=function(e){this.panner.distanceModel=e},THREE.PositionalAudio.prototype.getDistanceModel=function(){return this.panner.distanceModel},THREE.PositionalAudio.prototype.setMaxDistance=function(e){this.panner.maxDistance=e},THREE.PositionalAudio.prototype.getMaxDistance=function(){return this.panner.maxDistance},THREE.PositionalAudio.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;return function(n){THREE.Object3D.prototype.updateMatrixWorld.call(this,n),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.constructor=THREE.AudioListener,THREE.AudioListener.prototype.getInput=function(){return this.gain},THREE.AudioListener.prototype.removeFilter=function(){this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},THREE.AudioListener.prototype.setFilter=function(e){this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},THREE.AudioListener.prototype.getFilter=function(){return this.filter},THREE.AudioListener.prototype.setMasterVolume=function(e){this.gain.gain.value=e},THREE.AudioListener.prototype.getMasterVolume=function(){return this.gain.gain.value},THREE.AudioListener.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,n=new THREE.Vector3,r=new THREE.Vector3;return function(s){THREE.Object3D.prototype.updateMatrixWorld.call(this,s);var o=this.context.listener,u=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,u.x,u.y,u.z)}}(),THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.getWorldDirection=function(){var e=new THREE.Quaternion;return function(t){var n=t||new THREE.Vector3;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},THREE.Camera.prototype.copy=function(e){return THREE.Object3D.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},THREE.CubeCamera=function(e,t,n){THREE.Object3D.call(this),this.type="CubeCamera";var r=90,i=1,s=new THREE.PerspectiveCamera(r,i,e,t);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(1,0,0)),this.add(s);var o=new THREE.PerspectiveCamera(r,i,e,t);o.up.set(0,-1,0),o.lookAt(new THREE.Vector3(-1,0,0)),this.add(o);var u=new THREE.PerspectiveCamera(r,i,e,t);u.up.set(0,0,1),u.lookAt(new THREE.Vector3(0,1,0)),this.add(u);var a=new THREE.PerspectiveCamera(r,i,e,t);a.up.set(0,0,-1),a.lookAt(new THREE.Vector3(0,-1,0)),this.add(a);var f=new THREE.PerspectiveCamera(r,i,e,t);f.up.set(0,-1,0),f.lookAt(new THREE.Vector3(0,0,1)),this.add(f);var l=new THREE.PerspectiveCamera(r,i,e,t);l.up.set(0,-1,0),l.lookAt(new THREE.Vector3(0,0,-1)),this.add(l);var c={format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter};this.renderTarget=new THREE.WebGLRenderTargetCube(n,n,c),this.updateCubeMap=function(e,t){this.parent===null&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,s,n),n.activeCubeFace=1,e.render(t,o,n),n.activeCubeFace=2,e.render(t,u,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,f,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CubeCamera.prototype.constructor=THREE.CubeCamera,THREE.OrthographicCamera=function(e,t,n,r,i,s){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i!==undefined?i:.1,this.far=s!==undefined?s:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(n-e,n+e,r+t,r-t,this.near,this.far)},THREE.OrthographicCamera.prototype.copy=function(e){return THREE.Camera.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this},THREE.OrthographicCamera.prototype.toJSON=function(e){var t=THREE.Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,t},THREE.PerspectiveCamera=function(e,t,n,r){THREE.Camera.call(this),this.type="PerspectiveCamera",this.focalLength=10,this.zoom=1,this.fov=e!==undefined?e:50,this.aspect=t!==undefined?t:1,this.near=n!==undefined?n:.1,this.far=r!==undefined?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(e,t){t===undefined&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(e*2))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,r,i,s){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=r,this.width=i,this.height=s,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=THREE.Math.radToDeg(2*Math.atan(Math.tan(THREE.Math.degToRad(this.fov)*.5)/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,n=Math.tan(THREE.Math.degToRad(e*.5))*this.near,r=-n,i=t*r,s=t*n,o=Math.abs(s-i),u=Math.abs(n-r);this.projectionMatrix.makeFrustum(i+this.x*o/this.fullWidth,i+(this.x+this.width)*o/this.fullWidth,n-(this.y+this.height)*u/this.fullHeight,n-this.y*u/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.copy=function(e){return THREE.Camera.prototype.copy.call(this,e),this.focalLength=e.focalLength,this.zoom=e.zoom,this.fov=e.fov,this.aspect=e.aspect,this.near=e.near,this.far=e.far,this},THREE.PerspectiveCamera.prototype.toJSON=function(e){var t=THREE.Object3D.prototype.toJSON.call(this,e);return t.object.focalLength=this.focalLength,t.object.zoom=this.zoom,t.object.fov=this.fov,t.object.aspect=this.aspect,t.object.near=this.near,t.object.far=this.far,t},THREE.StereoCamera=function(){this.type="StereoCamera",this.aspect=1,this.cameraL=new THREE.PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new THREE.PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1},THREE.StereoCamera.prototype={constructor:THREE.StereoCamera,update:function(){var e,t,n,r,i,s=new THREE.Matrix4,o=new THREE.Matrix4;return function(a){var f=e!==a.focalLength||t!==a.fov||n!==a.aspect*this.aspect||r!==a.near||i!==a.far;if(f){e=a.focalLength,t=a.fov,n=a.aspect*this.aspect,r=a.near,i=a.far;var l=a.projectionMatrix.clone(),c=.032,h=c*r/e,p=r*Math.tan(THREE.Math.degToRad(t*.5)),d,v;o.elements[12]=-c,s.elements[12]=c,d=-p*n+h,v=p*n+h,l.elements[0]=2*r/(v-d),l.elements[8]=(v+d)/(v-d),this.cameraL.projectionMatrix.copy(l),d=-p*n-h,v=p*n-h,l.elements[0]=2*r/(v-d),l.elements[8]=(v+d)/(v-d),this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(o),this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(s)}}()},THREE.Light=function(e,t){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(e),this.intensity=t!==undefined?t:1,this.receiveShadow=undefined},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.copy=function(e){return THREE.Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},THREE.Light.prototype.toJSON=function(e){var t=THREE.Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==undefined&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==undefined&&(t.object.distance=this.distance),this.angle!==undefined&&(t.object.angle=this.angle),this.decay!==undefined&&(t.object.decay=this.decay),this.penumbra!==undefined&&(t.object.penumbra=this.penumbra),t},THREE.LightShadow=function(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new THREE.Vector2(512,512),this.map=null,this.matrix=new THREE.Matrix4},THREE.LightShadow.prototype={constructor:THREE.LightShadow,copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)}},THREE.AmbientLight=function(e,t){THREE.Light.call(this,e,t),this.type="AmbientLight",this.castShadow=undefined},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e,t),this.type="DirectionalLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new THREE.Object3D,this.shadow=new THREE.LightShadow(new THREE.OrthographicCamera(-5,5,5,-5,.5,500))},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.DirectionalLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this},THREE.HemisphereLight=function(e,t,n){THREE.Light.call(this,e,n),this.type="HemisphereLight",this.castShadow=undefined,this.position.set(0,1,0),this.updateMatrix(),this.groundColor=new THREE.Color(t)},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight,THREE.HemisphereLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this},THREE.PointLight=function(e,t,n,r){THREE.Light.call(this,e,t),this.type="PointLight",this.distance=n!==undefined?n:0,this.decay=r!==undefined?r:1,this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(90,1,.5,500))},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.PointLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this},THREE.SpotLight=function(e,t,n,r,i,s){THREE.Light.call(this,e,t),this.type="SpotLight",this.position.set(0,1,0),this.updateMatrix(),this.target=new THREE.Object3D,this.distance=n!==undefined?n:0,this.angle=r!==undefined?r:Math.PI/3,this.penumbra=i!==undefined?i:0,this.decay=s!==undefined?s:1,this.shadow=new THREE.LightShadow(new THREE.PerspectiveCamera(50,1,.5,500))},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.SpotLight.prototype.copy=function(e){return THREE.Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this},THREE.Cache={enabled:!1,files:{},add:function(e,t){if(this.enabled===!1)return;this.files[e]=t},get:function(e){if(this.enabled===!1)return;return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},THREE.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:undefined,extractUrlBase:function(e){var t=e.split("/");return t.length===1?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){var r=[];for(var i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e,t,n;return function(r,i,s){function u(e,n,r,u,a){var f=i+e,l=THREE.Loader.Handlers.get(f),c;l!==null?c=l.load(f):(t.setCrossOrigin(s),c=t.load(f)),n!==undefined&&(c.repeat.fromArray(n),n[0]!==1&&(c.wrapS=THREE.RepeatWrapping),n[1]!==1&&(c.wrapT=THREE.RepeatWrapping)),r!==undefined&&c.offset.fromArray(r),u!==undefined&&(u[0]==="repeat"&&(c.wrapS=THREE.RepeatWrapping),u[0]==="mirror"&&(c.wrapS=THREE.MirroredRepeatWrapping),u[1]==="repeat"&&(c.wrapT=THREE.RepeatWrapping),u[1]==="mirror"&&(c.wrapT=THREE.MirroredRepeatWrapping)),a!==undefined&&(c.anisotropy=a);var h=THREE.Math.generateUUID();return o[h]=c,h}e===undefined&&(e=new THREE.Color),t===undefined&&(t=new THREE.TextureLoader),n===undefined&&(n=new THREE.MaterialLoader);var o={},a={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"};for(var f in r){var l=r[f];switch(f){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=l;break;case"blending":a.blending=THREE[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",f,"is no longer supported.");break;case"colorDiffuse":a.color=e.fromArray(l).getHex();break;case"colorSpecular":a.specular=e.fromArray(l).getHex();break;case"colorEmissive":a.emissive=e.fromArray(l).getHex();break;case"specularCoef":a.shininess=l;break;case"shading":l.toLowerCase()==="basic"&&(a.type="MeshBasicMaterial"),l.toLowerCase()==="phong"&&(a.type="MeshPhongMaterial");break;case"mapDiffuse":a.map=u(l,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapLight":a.lightMap=u(l,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=u(l,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=u(l,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=u(l,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=[l,l];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=u(l,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapAlpha":a.alphaMap=u(l,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=THREE.BackSide;break;case"doubleSided":a.side=THREE.DoubleSide;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[f]=l;break;case"vertexColors":l===!0&&(a.vertexColors=THREE.VertexColors),l==="face"&&(a.vertexColors=THREE.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",f,l)}}return a.type==="MeshBasicMaterial"&&delete a.emissive,a.type!=="MeshPhongMaterial"&&delete a.specular,a.opacity<1&&(a.transparent=!0),n.setTextures(o),n.parse(a)}}()},THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){var t=this.handlers;for(var n=0,r=t.length;n<r;n+=2){var i=t[n],s=t[n+1];if(i.test(e))return s}return null}},THREE.XHRLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,n,r){this.path!==undefined&&(e=this.path+e);var i=this,s=THREE.Cache.get(e);if(s!==undefined)return t&&setTimeout(function(){t(s)},0),s;var o=new XMLHttpRequest;return o.overrideMimeType("text/plain"),o.open("GET",e,!0),o.addEventListener("load",function(n){var s=n.target.response;THREE.Cache.add(e,s),this.status===200?(t&&t(s),i.manager.itemEnd(e)):this.status===0?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),t&&t(s),i.manager.itemEnd(e)):(r&&r(n),i.manager.itemError(e))},!1),n!==undefined&&o.addEventListener("progress",function(e){n(e)},!1),o.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),this.responseType!==undefined&&(o.responseType=this.responseType),this.withCredentials!==undefined&&(o.withCredentials=this.withCredentials),o.send(null),i.manager.itemStart(e),o},setPath:function(e){this.path=e},setResponseType:function(e){this.responseType=e},setWithCredentials:function(e){this.withCredentials=e}},THREE.FontLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager},THREE.FontLoader.prototype={constructor:THREE.FontLoader,load:function(e,t,n,r){var i=new THREE.XHRLoader(this.manager);i.load(e,function(e){t(new THREE.Font(JSON.parse(e.substring(65,e.length-2))))},n,r)}},THREE.ImageLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,n,r){this.path!==undefined&&(e=this.path+e);var i=this,s=THREE.Cache.get(e);if(s!==undefined)return i.manager.itemStart(e),t?setTimeout(function(){t(s),i.manager.itemEnd(e)},0):i.manager.itemEnd(e),s;var o=document.createElement("img");return o.addEventListener("load",function(n){THREE.Cache.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),n!==undefined&&o.addEventListener("progress",function(e){n(e)},!1),o.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),this.crossOrigin!==undefined&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){this.crossOrigin=e},setPath:function(e){this.path=e}},THREE.JSONLoader=function(e){typeof e=="boolean"&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=undefined),this.manager=e!==undefined?e:THREE.DefaultLoadingManager,this.withCredentials=!1},THREE.JSONLoader.prototype={constructor:THREE.JSONLoader,get statusDomElement(){return this._statusDomElement===undefined&&(this._statusDomElement=document.createElement("div")),console.warn("THREE.JSONLoader: .statusDomElement has been removed."),this._statusDomElement},load:function(e,t,n,r){var i=this,s=this.texturePath&&typeof this.texturePath=="string"?this.texturePath:THREE.Loader.prototype.extractUrlBase(e),o=new THREE.XHRLoader(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(n){var r=JSON.parse(n),o=r.metadata;if(o!==undefined){var u=o.type;if(u!==undefined){if(u.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(u.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var a=i.parse(r,s);t(a.geometry,a.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){function i(t){function r(e,t){return e&1<<t}var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M=e.faces,_=e.vertices,D=e.normals,P=e.colors,H=0;if(e.uvs!==undefined){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&H++;for(i=0;i<H;i++)n.faceVertexUvs[i]=[]}u=0,a=_.length;while(u<a)E=new THREE.Vector3,E.x=_[u++]*t,E.y=_[u++]*t,E.z=_[u++]*t,n.vertices.push(E);u=0,a=M.length;while(u<a){p=M[u++],d=r(p,0),v=r(p,1),m=r(p,3),g=r(p,4),y=r(p,5),b=r(p,6),w=r(p,7);if(d){x=new THREE.Face3,x.a=M[u],x.b=M[u+1],x.c=M[u+3],T=new THREE.Face3,T.a=M[u+1],T.b=M[u+2],T.c=M[u+3],u+=4,v&&(h=M[u++],x.materialIndex=h,T.materialIndex=h),o=n.faces.length;if(m)for(i=0;i<H;i++){k=e.uvs[i],n.faceVertexUvs[i][o]=[],n.faceVertexUvs[i][o+1]=[];for(s=0;s<4;s++)c=M[u++],A=k[c*2],O=k[c*2+1],L=new THREE.Vector2(A,O),s!==2&&n.faceVertexUvs[i][o].push(L),s!==0&&n.faceVertexUvs[i][o+1].push(L)}g&&(l=M[u++]*3,x.normal.set(D[l++],D[l++],D[l]),T.normal.copy(x.normal));if(y)for(i=0;i<4;i++)l=M[u++]*3,C=new THREE.Vector3(D[l++],D[l++],D[l]),i!==2&&x.vertexNormals.push(C),i!==0&&T.vertexNormals.push(C);b&&(f=M[u++],N=P[f],x.color.setHex(N),T.color.setHex(N));if(w)for(i=0;i<4;i++)f=M[u++],N=P[f],i!==2&&x.vertexColors.push(new THREE.Color(N)),i!==0&&T.vertexColors.push(new THREE.Color(N));n.faces.push(x),n.faces.push(T)}else{S=new THREE.Face3,S.a=M[u++],S.b=M[u++],S.c=M[u++],v&&(h=M[u++],S.materialIndex=h),o=n.faces.length;if(m)for(i=0;i<H;i++){k=e.uvs[i],n.faceVertexUvs[i][o]=[];for(s=0;s<3;s++)c=M[u++],A=k[c*2],O=k[c*2+1],L=new THREE.Vector2(A,O),n.faceVertexUvs[i][o].push(L)}g&&(l=M[u++]*3,S.normal.set(D[l++],D[l++],D[l]));if(y)for(i=0;i<3;i++)l=M[u++]*3,C=new THREE.Vector3(D[l++],D[l++],D[l]),S.vertexNormals.push(C);b&&(f=M[u++],S.color.setHex(P[f]));if(w)for(i=0;i<3;i++)f=M[u++],S.vertexColors.push(new THREE.Color(P[f]));n.faces.push(S)}}}function s(){var t=e.influencesPerVertex!==undefined?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=t){var s=e.skinWeights[r],o=t>1?e.skinWeights[r+1]:0,u=t>2?e.skinWeights[r+2]:0,a=t>3?e.skinWeights[r+3]:0;n.skinWeights.push(new THREE.Vector4(s,o,u,a))}if(e.skinIndices)for(var r=0,i=e.skinIndices.length;r<i;r+=t){var f=e.skinIndices[r],l=t>1?e.skinIndices[r+1]:0,c=t>2?e.skinIndices[r+2]:0,h=t>3?e.skinIndices[r+3]:0;n.skinIndices.push(new THREE.Vector4(f,l,c,h))}n.bones=e.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}function o(t){if(e.morphTargets!==undefined)for(var r=0,i=e.morphTargets.length;r<i;r++){n.morphTargets[r]={},n.morphTargets[r].name=e.morphTargets[r].name,n.morphTargets[r].vertices=[];var s=n.morphTargets[r].vertices,o=e.morphTargets[r].vertices;for(var u=0,a=o.length;u<a;u+=3){var f=new THREE.Vector3;f.x=o[u]*t,f.y=o[u+1]*t,f.z=o[u+2]*t,s.push(f)}}if(e.morphColors!==undefined&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var l=n.faces,c=e.morphColors[0].colors;for(var r=0,i=l.length;r<i;r++)l[r].color.fromArray(c,r*3)}}function u(){var t=[],r=[];e.animation!==undefined&&r.push(e.animation),e.animations!==undefined&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var s=THREE.AnimationClip.parseAnimation(r[i],n.bones);s&&t.push(s)}if(n.morphTargets){var o=THREE.AnimationClip.CreateClipsFromMorphTargetSequences(n.morphTargets,10);t=t.concat(o)}t.length>0&&(n.animations=t)}var n=new THREE.Geometry,r=e.scale!==undefined?1/e.scale:1;i(r),s(),o(r),u(),n.computeFaceNormals(),n.computeBoundingSphere();if(e.materials===undefined||e.materials.length===0)return{geometry:n};var a=THREE.Loader.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:a}}},THREE.LoadingManager=function(e,t,n){var r=this,i=!1,s=0,o=0;this.onStart=undefined,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,i===!1&&r.onStart!==undefined&&r.onStart(e,s,o),i=!0},this.itemEnd=function(e){s++,r.onProgress!==undefined&&r.onProgress(e,s,o),s===o&&(i=!1,r.onLoad!==undefined&&r.onLoad())},this.itemError=function(e){r.onError!==undefined&&r.onError(e)}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,n,r){var i=this,s=new THREE.XHRLoader(i.manager);s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new THREE.BufferGeometry,n=e.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(n!==undefined){var i=new r[n.type](n.array);t.setIndex(new THREE.BufferAttribute(i,1))}var s=e.data.attributes;for(var o in s){var u=s[o],i=new r[u.type](u.array);t.addAttribute(o,new THREE.BufferAttribute(i,u.itemSize))}var a=e.data.groups||e.data.drawcalls||e.data.offsets;if(a!==undefined)for(var f=0,l=a.length;f!==l;++f){var c=a[f];t.addGroup(c.start,c.count,c.materialIndex)}var h=e.data.boundingSphere;if(h!==undefined){var p=new THREE.Vector3;h.center!==undefined&&p.fromArray(h.center),t.boundingSphere=new THREE.Sphere(p,h.radius)}return t}},THREE.MaterialLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager,this.textures={}},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,n,r){var i=this,s=new THREE.XHRLoader(i.manager);s.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},getTexture:function(e){var t=this.textures;return t[e]===undefined&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]},parse:function(e){var t=new THREE[e.type];e.uuid!==undefined&&(t.uuid=e.uuid),e.name!==undefined&&(t.name=e.name),e.color!==undefined&&t.color.setHex(e.color),e.roughness!==undefined&&(t.roughness=e.roughness),e.metalness!==undefined&&(t.metalness=e.metalness),e.emissive!==undefined&&t.emissive.setHex(e.emissive),e.specular!==undefined&&t.specular.setHex(e.specular),e.shininess!==undefined&&(t.shininess=e.shininess),e.uniforms!==undefined&&(t.uniforms=e.uniforms),e.vertexShader!==undefined&&(t.vertexShader=e.vertexShader),e.fragmentShader!==undefined&&(t.fragmentShader=e.fragmentShader),e.vertexColors!==undefined&&(t.vertexColors=e.vertexColors),e.shading!==undefined&&(t.shading=e.shading),e.blending!==undefined&&(t.blending=e.blending),e.side!==undefined&&(t.side=e.side),e.opacity!==undefined&&(t.opacity=e.opacity),e.transparent!==undefined&&(t.transparent=e.transparent),e.alphaTest!==undefined&&(t.alphaTest=e.alphaTest),e.depthTest!==undefined&&(t.depthTest=e.depthTest),e.depthWrite!==undefined&&(t.depthWrite=e.depthWrite),e.colorWrite!==undefined&&(t.colorWrite=e.colorWrite),e.wireframe!==undefined&&(t.wireframe=e.wireframe),e.wireframeLinewidth!==undefined&&(t.wireframeLinewidth=e.wireframeLinewidth),e.size!==undefined&&(t.size=e.size),e.sizeAttenuation!==undefined&&(t.sizeAttenuation=e.sizeAttenuation),e.map!==undefined&&(t.map=this.getTexture(e.map)),e.alphaMap!==undefined&&(t.alphaMap=this.getTexture(e.alphaMap),t.transparent=!0),e.bumpMap!==undefined&&(t.bumpMap=this.getTexture(e.bumpMap)),e.bumpScale!==undefined&&(t.bumpScale=e.bumpScale),e.normalMap!==undefined&&(t.normalMap=this.getTexture(e.normalMap));if(e.normalScale!==undefined){var n=e.normalScale;Array.isArray(n)===!1&&(n=[n,n]),t.normalScale=(new THREE.Vector2).fromArray(n)}e.displacementMap!==undefined&&(t.displacementMap=this.getTexture(e.displacementMap)),e.displacementScale!==undefined&&(t.displacementScale=e.displacementScale),e.displacementBias!==undefined&&(t.displacementBias=e.displacementBias),e.roughnessMap!==undefined&&(t.roughnessMap=this.getTexture(e.roughnessMap)),e.metalnessMap!==undefined&&(t.metalnessMap=this.getTexture(e.metalnessMap)),e.emissiveMap!==undefined&&(t.emissiveMap=this.getTexture(e.emissiveMap)),e.emissiveIntensity!==undefined&&(t.emissiveIntensity=e.emissiveIntensity),e.specularMap!==undefined&&(t.specularMap=this.getTexture(e.specularMap)),e.envMap!==undefined&&(t.envMap=this.getTexture(e.envMap),t.combine=THREE.MultiplyOperation),e.reflectivity&&(t.reflectivity=e.reflectivity),e.lightMap!==undefined&&(t.lightMap=this.getTexture(e.lightMap)),e.lightMapIntensity!==undefined&&(t.lightMapIntensity=e.lightMapIntensity),e.aoMap!==undefined&&(t.aoMap=this.getTexture(e.aoMap)),e.aoMapIntensity!==undefined&&(t.aoMapIntensity=e.aoMapIntensity);if(e.materials!==undefined)for(var r=0,i=e.materials.length;r<i;r++)t.materials.push(this.parse(e.materials[r]));return t}},THREE.ObjectLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,n,r){this.texturePath===""&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,s=new THREE.XHRLoader(i.manager);s.load(e,function(e){i.parse(JSON.parse(e),t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){t!==undefined&&t(o)}),i=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,i),o=this.parseObject(e.object,n,s);return e.animations&&(o.animations=this.parseAnimations(e.animations)),(e.images===undefined||e.images.length===0)&&t!==undefined&&t(o),o},parseGeometries:function(e){var t={};if(e!==undefined){var n=new THREE.JSONLoader,r=new THREE.BufferGeometryLoader;for(var i=0,s=e.length;i<s;i++){var o,u=e[i];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new THREE[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"CubeGeometry":o=new THREE.BoxGeometry(u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleBufferGeometry":o=new THREE.CircleBufferGeometry(u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CircleGeometry":o=new THREE.CircleGeometry(u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":o=new THREE.CylinderGeometry(u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":o=new THREE.SphereGeometry(u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"SphereBufferGeometry":o=new THREE.SphereBufferGeometry(u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":o=new THREE.DodecahedronGeometry(u.radius,u.detail);break;case"IcosahedronGeometry":o=new THREE.IcosahedronGeometry(u.radius,u.detail);break;case"OctahedronGeometry":o=new THREE.OctahedronGeometry(u.radius,u.detail);break;case"TetrahedronGeometry":o=new THREE.TetrahedronGeometry(u.radius,u.detail);break;case"RingGeometry":o=new THREE.RingGeometry(u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":o=new THREE.TorusGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":o=new THREE.TorusKnotGeometry(u.radius,u.tube,u.radialSegments,u.tubularSegments,u.p,u.q,u.heightScale);break;case"LatheGeometry":o=new THREE.LatheGeometry(u.points,u.segments,u.phiStart,u.phiLength);break;case"BufferGeometry":o=r.parse(u);break;case"Geometry":o=n.parse(u.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}o.uuid=u.uuid,u.name!==undefined&&(o.name=u.name),t[u.uuid]=o}}return t},parseMaterials:function(e,t){var n={};if(e!==undefined){var r=new THREE.MaterialLoader;r.setTextures(t);for(var i=0,s=e.length;i<s;i++){var o=r.parse(e[i]);n[o.uuid]=o}}return n},parseAnimations:function(e){var t=[];for(var n=0;n<e.length;n++){var r=THREE.AnimationClip.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)})}var n=this,r={};if(e!==undefined&&e.length>0){var s=new THREE.LoadingManager(t),o=new THREE.ImageLoader(s);o.setCrossOrigin(this.crossOrigin);for(var u=0,a=e.length;u<a;u++){var f=e[u],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f.url)?f.url:n.texturePath+f.url;r[f.uuid]=i(l)}}return r},parseTextures:function(e,t){function n(e){return typeof e=="number"?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),THREE[e])}var r={};if(e!==undefined)for(var i=0,s=e.length;i<s;i++){var o=e[i];o.image===undefined&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===undefined&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var u=new THREE.Texture(t[o.image]);u.needsUpdate=!0,u.uuid=o.uuid,o.name!==undefined&&(u.name=o.name),o.mapping!==undefined&&(u.mapping=n(o.mapping)),o.offset!==undefined&&(u.offset=new THREE.Vector2(o.offset[0],o.offset[1])),o.repeat!==undefined&&(u.repeat=new THREE.Vector2(o.repeat[0],o.repeat[1])),o.minFilter!==undefined&&(u.minFilter=n(o.minFilter)),o.magFilter!==undefined&&(u.magFilter=n(o.magFilter)),o.anisotropy!==undefined&&(u.anisotropy=o.anisotropy),Array.isArray(o.wrap)&&(u.wrapS=n(o.wrap[0]),u.wrapT=n(o.wrap[1])),r[o.uuid]=u}return r},parseObject:function(){var e=new THREE.Matrix4;return function(t,n,r){function s(e){return n[e]===undefined&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function o(e){return e===undefined?undefined:(r[e]===undefined&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e])}var i;switch(t.type){case"Scene":i=new THREE.Scene;break;case"PerspectiveCamera":i=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":i=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":i=new THREE.AmbientLight(t.color,t.intensity);break;case"DirectionalLight":i=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":i=new THREE.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":i=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var u=s(t.geometry),a=o(t.material);u.bones&&u.bones.length>0?i=new THREE.SkinnedMesh(u,a):i=new THREE.Mesh(u,a);break;case"LOD":i=new THREE.LOD;break;case"Line":i=new THREE.Line(s(t.geometry),o(t.material),t.mode);break;case"PointCloud":case"Points":i=new THREE.Points(s(t.geometry),o(t.material));break;case"Sprite":i=new THREE.Sprite(o(t.material));break;case"Group":i=new THREE.Group;break;default:i=new THREE.Object3D}i.uuid=t.uuid,t.name!==undefined&&(i.name=t.name),t.matrix!==undefined?(e.fromArray(t.matrix),e.decompose(i.position,i.quaternion,i.scale)):(t.position!==undefined&&i.position.fromArray(t.position),t.rotation!==undefined&&i.rotation.fromArray(t.rotation),t.scale!==undefined&&i.scale.fromArray(t.scale)),t.castShadow!==undefined&&(i.castShadow=t.castShadow),t.receiveShadow!==undefined&&(i.receiveShadow=t.receiveShadow),t.visible!==undefined&&(i.visible=t.visible),t.userData!==undefined&&(i.userData=t.userData);if(t.children!==undefined)for(var f in t.children)i.add(this.parseObject(t.children[f],n,r));if(t.type==="LOD"){var l=t.levels;for(var c=0;c<l.length;c++){var h=l[c],f=i.getObjectByProperty("uuid",h.object);f!==undefined&&i.addLevel(f,h.distance)}}return i}}()},THREE.TextureLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,n,r){var i=new THREE.Texture,s=new THREE.ImageLoader(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(e){i.image=e,i.needsUpdate=!0,t!==undefined&&t(i)},n,r),i},setCrossOrigin:function(e){this.crossOrigin=e},setPath:function(e){this.path=e}},THREE.CubeTextureLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager},THREE.CubeTextureLoader.prototype={constructor:THREE.CubeTextureLoader,load:function(e,t,n,r){function u(n){s.load(e[n],function(e){i.images[n]=e,o++,o===6&&(i.needsUpdate=!0,t&&t(i))},undefined,r)}var i=new THREE.CubeTexture([]),s=new THREE.ImageLoader(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var o=0;for(var a=0;a<e.length;++a)u(a);return i},setCrossOrigin:function(e){this.crossOrigin=e},setPath:function(e){this.path=e}},THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager,this._parser=null},THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(e,t,n,r){var i=this,s=new THREE.DataTexture,o=new THREE.XHRLoader(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var n=i._parser(e);if(!n)return;undefined!==n.image?s.image=n.image:undefined!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=undefined!==n.wrapS?n.wrapS:THREE.ClampToEdgeWrapping,s.wrapT=undefined!==n.wrapT?n.wrapT:THREE.ClampToEdgeWrapping,s.magFilter=undefined!==n.magFilter?n.magFilter:THREE.LinearFilter,s.minFilter=undefined!==n.minFilter?n.minFilter:THREE.LinearMipMapLinearFilter,s.anisotropy=undefined!==n.anisotropy?n.anisotropy:1,undefined!==n.format&&(s.format=n.format),undefined!==n.type&&(s.type=n.type),undefined!==n.mipmaps&&(s.mipmaps=n.mipmaps),1===n.mipmapCount&&(s.minFilter=THREE.LinearFilter),s.needsUpdate=!0,t&&t(s,n)},n,r),s}},THREE.CompressedTextureLoader=function(e){this.manager=e!==undefined?e:THREE.DefaultLoadingManager,this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(e,t,n,r){function a(a){u.load(e[a],function(e){var n=i._parser(e,!0);s[a]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},f+=1,f===6&&(n.mipmapCount===1&&(o.minFilter=THREE.LinearFilter),o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,r)}var i=this,s=[],o=new THREE.CompressedTexture;o.image=s;var u=new THREE.XHRLoader(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer");if(Array.isArray(e)){var f=0;for(var l=0,c=e.length;l<c;++l)a(l)}else u.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap){var r=n.mipmaps.length/n.mipmapCount;for(var u=0;u<r;u++){s[u]={mipmaps:[]};for(var a=0;a<n.mipmapCount;a++)s[u].mipmaps.push(n.mipmaps[u*n.mipmapCount+a]),s[u].format=n.format,s[u].width=n.width,s[u].height=n.height}}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;n.mipmapCount===1&&(o.minFilter=THREE.LinearFilter),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,r);return o},setPath:function(e){this.path=e}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=THREE.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(e===undefined)return;for(var t in e){var n=e[t];if(n===undefined){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}var r=this[t];if(r===undefined){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r instanceof THREE.Color?r.set(n):r instanceof THREE.Vector3&&n instanceof THREE.Vector3?r.copy(n):t==="overdraw"?this[t]=Number(n):this[t]=n}},toJSON:function(e){function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var t=e===undefined;t&&(e={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color instanceof THREE.Color&&(n.color=this.color.getHex()),this.roughness!==.5&&(n.roughness=this.roughness),this.metalness!==.5&&(n.metalness=this.metalness),this.emissive instanceof THREE.Color&&(n.emissive=this.emissive.getHex()),this.specular instanceof THREE.Color&&(n.specular=this.specular.getHex()),this.shininess!==undefined&&(n.shininess=this.shininess),this.map instanceof THREE.Texture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap instanceof THREE.Texture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap instanceof THREE.Texture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap instanceof THREE.Texture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap instanceof THREE.Texture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap instanceof THREE.Texture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap instanceof THREE.Texture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap instanceof THREE.Texture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap instanceof THREE.Texture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap instanceof THREE.Texture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap instanceof THREE.Texture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.size!==undefined&&(n.size=this.size),this.sizeAttenuation!==undefined&&(n.sizeAttenuation=this.sizeAttenuation),this.vertexColors!==undefined&&this.vertexColors!==THREE.NoColors&&(n.vertexColors=this.vertexColors),this.shading!==undefined&&this.shading!==THREE.SmoothShading&&(n.shading=this.shading),this.blending!==undefined&&this.blending!==THREE.NormalBlending&&(n.blending=this.blending),this.side!==undefined&&this.side!==THREE.FrontSide&&(n.side=this.side),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth);if(t){var i=r(e.textures),s=r(e.images);i.length>0&&(n.textures=i),s.length>0&&(n.images=s)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.side=e.side,this.opacity=e.opacity,this.transparent=e.transparent,this.blending=e.blending,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.overdraw=e.overdraw,this.visible=e.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.LineBasicMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.vertexColors=e.vertexColors,this.fog=e.fog,this},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial,THREE.LineDashedMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this.vertexColors=e.vertexColors,this.fog=e.fog,this},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshBasicMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new THREE.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshLambertMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.specular=new THREE.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new THREE.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshPhongMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},THREE.MeshStandardMaterial=function(e){THREE.Material.call(this),this.type="MeshStandardMaterial",this.color=new THREE.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new THREE.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshStandardMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshStandardMaterial.prototype.constructor=THREE.MeshStandardMaterial,THREE.MeshStandardMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.fog=e.fog,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshDepthMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshNormalMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},THREE.MultiMaterial=function(e){this.uuid=THREE.Math.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0},THREE.MultiMaterial.prototype={constructor:THREE.MultiMaterial,toJSON:function(e){var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials;for(var r=0,i=n.length;r<i;r++){var s=n[r].toJSON(e);delete s.metadata,t.materials.push(s)}return t.visible=this.visible,t},clone:function(){var e=new this.constructor;for(var t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},THREE.PointsMaterial=function(e){THREE.Material.call(this),this.type="PointsMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.PointsMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointsMaterial.prototype.constructor=THREE.PointsMaterial,THREE.PointsMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.vertexColors=e.vertexColors,this.fog=e.fog,this},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=undefined,e!==undefined&&(e.attributes!==undefined&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.ShaderMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=THREE.UniformsUtils.clone(e.uniforms),this.defines=e.defines,this.shading=e.shading,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.vertexColors=e.vertexColors,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},THREE.ShaderMaterial.prototype.toJSON=function(e){var t=THREE.Material.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial,THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial,THREE.SpriteMaterial.prototype.copy=function(e){return THREE.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.fog=e.fog,this},THREE.Texture=function(e,t,n,r,i,s,o,u,a){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.sourceFile="",this.image=e!==undefined?e:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==undefined?t:THREE.Texture.DEFAULT_MAPPING,this.wrapS=n!==undefined?n:THREE.ClampToEdgeWrapping,this.wrapT=r!==undefined?r:THREE.ClampToEdgeWrapping,this.magFilter=i!==undefined?i:THREE.LinearFilter,this.minFilter=s!==undefined?s:THREE.LinearMipMapLinearFilter,this.anisotropy=a!==undefined?a:1,this.format=o!==undefined?o:THREE.RGBAFormat,this.type=u!==undefined?u:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.version=0,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=undefined,THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,set needsUpdate(e){e===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this},toJSON:function(e){function t(e){var t;return e.toDataURL!==undefined?t=e:(t=document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}if(e.textures[this.uuid]!==undefined)return e.textures[this.uuid];var n={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(this.image!==undefined){var r=this.image;r.uuid===undefined&&(r.uuid=THREE.Math.generateUUID()),e.images[r.uuid]===undefined&&(e.images[r.uuid]={uuid:r.uuid,url:t(r)}),n.image=r.uuid}return e.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==THREE.UVMapping)return;e.multiply(this.repeat),e.add(this.offset);if(e.x<0||e.x>1)switch(this.wrapS){case THREE.RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case THREE.ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case THREE.MirroredRepeatWrapping:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case THREE.RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case THREE.ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case THREE.MirroredRepeatWrapping:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CanvasTexture=function(e,t,n,r,i,s,o,u,a){THREE.Texture.call(this,e,t,n,r,i,s,o,u,a),this.needsUpdate=!0},THREE.CanvasTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CanvasTexture.prototype.constructor=THREE.CanvasTexture,THREE.CubeTexture=function(e,t,n,r,i,s,o,u,a){t=t!==undefined?t:THREE.CubeReflectionMapping,THREE.Texture.call(this,e,t,n,r,i,s,o,u,a),this.images=e,this.flipY=!1},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.prototype.constructor=THREE.CubeTexture,THREE.CubeTexture.prototype.copy=function(e){return THREE.Texture.prototype.copy.call(this,e),this.images=e.images,this},THREE.CompressedTexture=function(e,t,n,r,i,s,o,u,a,f,l){THREE.Texture.call(this,null,s,o,u,a,f,r,i,l),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture,THREE.DataTexture=function(e,t,n,r,i,s,o,u,a,f,l){THREE.Texture.call(this,null,s,o,u,a,f,r,i,l),this.image={data:e,width:t,height:n},this.magFilter=a!==undefined?a:THREE.NearestFilter,this.minFilter=f!==undefined?f:THREE.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.VideoTexture=function(e,t,n,r,i,s,o,u,a){function l(){requestAnimationFrame(l),e.readyState===e.HAVE_ENOUGH_DATA&&(f.needsUpdate=!0)}THREE.Texture.call(this,e,t,n,r,i,s,o,u,a),this.generateMipmaps=!1;var f=this;l()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.VideoTexture.prototype.constructor=THREE.VideoTexture,THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.Group.prototype.constructor=THREE.Group,THREE.Points=function(e,t){THREE.Object3D.call(this),this.type="Points",this.geometry=e!==undefined?e:new THREE.Geometry,this.material=t!==undefined?t:new THREE.PointsMaterial({color:Math.random()*16777215})},THREE.Points.prototype=Object.create(THREE.Object3D.prototype),THREE.Points.prototype.constructor=THREE.Points,THREE.Points.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere;return function(i,s){function p(e,n){var r=t.distanceSqToPoint(e);if(r<c){var u=t.closestPointToPoint(e);u.applyMatrix4(a);var f=i.ray.origin.distanceTo(u);if(f<i.near||f>i.far)return;s.push({distance:f,distanceToRay:Math.sqrt(r),point:u.clone(),index:n,face:null,object:o})}}var o=this,u=this.geometry,a=this.matrixWorld,f=i.params.Points.threshold;u.boundingSphere===null&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(a);if(i.ray.intersectsSphere(n)===!1)return;e.getInverse(a),t.copy(i.ray).applyMatrix4(e);var l=f/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,h=new THREE.Vector3;if(u instanceof THREE.BufferGeometry){var d=u.index,v=u.attributes,m=v.position.array;if(d!==null){var g=d.array;for(var y=0,b=g.length;y<b;y++){var w=g[y];h.fromArray(m,w*3),p(h,w)}}else for(var y=0,E=m.length/3;y<E;y++)h.fromArray(m,y*3),p(h,y)}else{var S=u.vertices;for(var y=0,E=S.length;y<E;y++)p(S[y],y)}}}(),THREE.Points.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)},THREE.Line=function(e,t,n){if(n===1)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new THREE.LineSegments(e,t);THREE.Object3D.call(this),this.type="Line",this.geometry=e!==undefined?e:new THREE.Geometry,this.material=t!==undefined?t:new THREE.LineBasicMaterial({color:Math.random()*16777215})},THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.constructor=THREE.Line,THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere;return function(i,s){var o=i.linePrecision,u=o*o,a=this.geometry,f=this.matrixWorld;a.boundingSphere===null&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(f);if(i.ray.intersectsSphere(n)===!1)return;e.getInverse(f),t.copy(i.ray).applyMatrix4(e);var l=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector3,p=new THREE.Vector3,d=this instanceof THREE.LineSegments?2:1;if(a instanceof THREE.BufferGeometry){var v=a.index,m=a.attributes,g=m.position.array;if(v!==null){var y=v.array;for(var b=0,w=y.length-1;b<w;b+=d){var E=y[b],S=y[b+1];l.fromArray(g,E*3),c.fromArray(g,S*3);var x=t.distanceSqToSegment(l,c,p,h);if(x>u)continue;p.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(p);if(T<i.near||T>i.far)continue;s.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,w=g.length/3-1;b<w;b+=d){l.fromArray(g,3*b),c.fromArray(g,3*b+3);var x=t.distanceSqToSegment(l,c,p,h);if(x>u)continue;p.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(p);if(T<i.near||T>i.far)continue;s.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else if(a instanceof THREE.Geometry){var N=a.vertices,C=N.length;for(var b=0;b<C-1;b+=d){var x=t.distanceSqToSegment(N[b],N[b+1],p,h);if(x>u)continue;p.applyMatrix4(this.matrixWorld);var T=i.ray.origin.distanceTo(p);if(T<i.near||T>i.far)continue;s.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}(),THREE.Line.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)},THREE.LineStrip=0,THREE.LinePieces=1,THREE.LineSegments=function(e,t){THREE.Line.call(this,e,t),this.type="LineSegments"},THREE.LineSegments.prototype=Object.create(THREE.Line.prototype),THREE.LineSegments.prototype.constructor=THREE.LineSegments,THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.type="Mesh",this.geometry=e!==undefined?e:new THREE.Geometry,this.material=t!==undefined?t:new THREE.MeshBasicMaterial({color:Math.random()*16777215}),this.drawMode=THREE.TrianglesDrawMode,this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.setDrawMode=function(e){this.drawMode=e},THREE.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets!==undefined&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return this.morphTargetDictionary[e]!==undefined?this.morphTargetDictionary[e]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){function v(e,t,n,r,i,s,o){return THREE.Triangle.barycoordFromPoint(e,t,n,r,h),i.multiplyScalar(h.x),s.multiplyScalar(h.y),o.multiplyScalar(h.z),i.add(s).add(o),i.clone()}function m(e,t,n,r,i,s,o){var u,a=e.material;a.side===THREE.BackSide?u=n.intersectTriangle(s,i,r,!0,o):u=n.intersectTriangle(r,i,s,a.side!==THREE.DoubleSide,o);if(u===null)return null;d.copy(o),d.applyMatrix4(e.matrixWorld);var f=t.ray.origin.distanceTo(d);return f<t.near||f>t.far?null:{distance:f,point:d.clone(),object:e}}function g(e,t,n,o,u,a,h,d){r.fromArray(o,a*3),i.fromArray(o,h*3),s.fromArray(o,d*3);var g=m(e,t,n,r,i,s,p);return g&&(u&&(f.fromArray(u,a*2),l.fromArray(u,h*2),c.fromArray(u,d*2),g.uv=v(p,r,i,s,f,l,c)),g.face=new THREE.Face3(a,h,d,THREE.Triangle.normal(r,i,s)),g.faceIndex=a),g}var e=new THREE.Matrix4,t=new THREE.Ray,n=new THREE.Sphere,r=new THREE.Vector3,i=new THREE.Vector3,s=new THREE.Vector3,o=new THREE.Vector3,u=new THREE.Vector3,a=new THREE.Vector3,f=new THREE.Vector2,l=new THREE.Vector2,c=new THREE.Vector2,h=new THREE.Vector3,p=new THREE.Vector3,d=new THREE.Vector3;return function(d,y){var b=this.geometry,w=this.material,E=this.matrixWorld;if(w===undefined)return;b.boundingSphere===null&&b.computeBoundingSphere(),n.copy(b.boundingSphere),n.applyMatrix4(E);if(d.ray.intersectsSphere(n)===!1)return;e.getInverse(E),t.copy(d.ray).applyMatrix4(e);if(b.boundingBox!==null&&t.intersectsBox(b.boundingBox)===!1)return;var S,x;if(b instanceof THREE.BufferGeometry){var T,N,C,k=b.index,L=b.attributes,A=L.position.array;L.uv!==undefined&&(S=L.uv.array);if(k!==null){var O=k.array;for(var M=0,_=O.length;M<_;M+=3)T=O[M],N=O[M+1],C=O[M+2],x=g(this,d,t,A,S,T,N,C),x&&(x.faceIndex=Math.floor(M/3),y.push(x))}else for(var M=0,_=A.length;M<_;M+=9)T=M/3,N=T+1,C=T+2,x=g(this,d,t,A,S,T,N,C),x&&(x.index=T,y.push(x))}else if(b instanceof THREE.Geometry){var D,P,H,B=w instanceof THREE.MultiMaterial,j=B===!0?w.materials:null,F=b.vertices,I=b.faces,q=b.faceVertexUvs[0];q.length>0&&(S=q);for(var R=0,U=I.length;R<U;R++){var z=I[R],W=B===!0?j[z.materialIndex]:w;if(W===undefined)continue;D=F[z.a],P=F[z.b],H=F[z.c];if(W.morphTargets===!0){var X=b.morphTargets,V=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),s.set(0,0,0);for(var $=0,J=X.length;$<J;$++){var K=V[$];if(K===0)continue;var Q=X[$].vertices;r.addScaledVector(o.subVectors(Q[z.a],D),K),i.addScaledVector(u.subVectors(Q[z.b],P),K),s.addScaledVector(a.subVectors(Q[z.c],H),K)}r.add(D),i.add(P),s.add(H),D=r,P=i,H=s}x=m(this,d,t,D,P,H,p);if(x){if(S){var G=S[R];f.copy(G[0]),l.copy(G[1]),c.copy(G[2]),x.uv=v(p,D,P,H,f,l,c)}x.face=z,x.faceIndex=R,y.push(x)}}}}}(),THREE.Mesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material)).copy(this)},THREE.Bone=function(e){THREE.Object3D.call(this),this.type="Bone",this.skin=e},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.constructor=THREE.Bone,THREE.Bone.prototype.copy=function(e){return THREE.Object3D.prototype.copy.call(this,e),this.skin=e.skin,this},THREE.Skeleton=function(e,t,n){this.useVertexTexture=n!==undefined?n:!0,this.identityMatrix=new THREE.Matrix4,e=e||[],this.bones=e.slice(0);if(this.useVertexTexture){var r=Math.sqrt(this.bones.length*4);r=THREE.Math.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(t===undefined)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new THREE.Matrix4)}},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new THREE.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},THREE.Skeleton.prototype.pose=function(){var e;for(var t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},THREE.Skeleton.prototype.update=function(){var e=new THREE.Matrix4;return function(){for(var n=0,r=this.bones.length;n<r;n++){var i=this.bones[n]?this.bones[n].matrixWorld:this.identityMatrix;e.multiplyMatrices(i,this.boneInverses[n]),e.flattenToArrayOffset(this.boneMatrices,n*16)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.Skeleton.prototype.clone=function(){return new THREE.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)},THREE.SkinnedMesh=function(e,t,n){THREE.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4;var r=[];if(this.geometry&&this.geometry.bones!==undefined){var i,s;for(var o=0,u=this.geometry.bones.length;o<u;++o)s=this.geometry.bones[o],i=new THREE.Bone(this),r.push(i),i.name=s.name,i.position.fromArray(s.pos),i.quaternion.fromArray(s.rotq),s.scl!==undefined&&i.scale.fromArray(s.scl);for(var o=0,u=this.geometry.bones.length;o<u;++o)s=this.geometry.bones[o],s.parent!==-1&&s.parent!==null?r[s.parent].add(r[o]):this.add(r[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(r,undefined,n),this.matrixWorld)},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh,THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,t===undefined&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();n!==Infinity?t.multiplyScalar(n):t.set(1,0,0,0)}else if(this.geometry instanceof THREE.BufferGeometry){var r=new THREE.Vector4,i=this.geometry.attributes.skinWeight;for(var e=0;e<i.count;e++){r.x=i.getX(e),r.y=i.getY(e),r.z=i.getZ(e),r.w=i.getW(e);var n=1/r.lengthManhattan();n!==Infinity?r.multiplyScalar(n):r.set(1,0,0,0),i.setXYZW(e,r.x,r.y,r.z,r.w)}}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(e){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(){return(new this.constructor(this.geometry,this.material,this.useVertexTexture)).copy(this)},THREE.LOD=function(){THREE.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}})},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.addLevel=function(e,t){t===undefined&&(t=0),t=Math.abs(t);var n=this.levels;for(var r=0;r<n.length;r++)if(t<n[r].distance)break;n.splice(r,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){var t=this.levels;for(var n=1,r=t.length;n<r;n++)if(e<t[n].distance)break;return t[n-1].object},THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(n,r){e.setFromMatrixPosition(this.matrixWorld);var i=n.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(n,r)}}(),THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(r){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var s=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,u=i.length;o<u;o++){if(!(s>=i[o].distance))break;i[o-1].object.visible=!1,i[o].object.visible=!0}for(;o<u;o++)i[o].object.visible=!1}}}(),THREE.LOD.prototype.copy=function(e){THREE.Object3D.prototype.copy.call(this,e,!1);var t=e.levels;for(var n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},THREE.LOD.prototype.toJSON=function(e){var t=THREE.Object3D.prototype.toJSON.call(this,e);t.object.levels=[];var n=this.levels;for(var r=0,i=n.length;r<i;r++){var s=n[r];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t},THREE.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-0.5,-0.5,0,.5,-0.5,0,.5,.5,0,-0.5,.5,0]),n=new Float32Array([0,0,1,0,1,1,0,1]),r=new THREE.BufferGeometry;return r.setIndex(new THREE.BufferAttribute(e,1)),r.addAttribute("position",new THREE.BufferAttribute(t,3)),r.addAttribute("uv",new THREE.BufferAttribute(n,2)),function(t){THREE.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=t!==undefined?t:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(n,r){e.setFromMatrixPosition(this.matrixWorld);var i=n.ray.distanceSqToPoint(e),s=this.scale.x*this.scale.y;if(i>s)return;r.push({distance:Math.sqrt(i),point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(){return(new this.constructor(this.material)).copy(this)},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(e,t,n,r,i){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=undefined,e!==undefined&&this.add(e,t,n,r,i)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.constructor=THREE.LensFlare,THREE.LensFlare.prototype.add=function(e,t,n,r,i,s){t===undefined&&(t=-1),n===undefined&&(n=0),s===undefined&&(s=1),i===undefined&&(i=new THREE.Color(16777215)),r===undefined&&(r=THREE.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:s,color:i,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t=this.lensFlares.length,n,r=-this.positionScreen.x*2,i=-this.positionScreen.y*2;for(e=0;e<t;e++)n=this.lensFlares[e],n.x=this.positionScreen.x+r*n.distance,n.y=this.positionScreen.y+i*n.distance,n.wantedRotation=n.x*Math.PI*.25,n.rotation+=(n.wantedRotation-n.rotation)*.25},THREE.LensFlare.prototype.copy=function(e){THREE.Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.copy=function(e,t){return THREE.Object3D.prototype.copy.call(this,e,t),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},THREE.Fog=function(e,t,n){this.name="",this.color=new THREE.Color(e),this.near=t!==undefined?t:1,this.far=n!==undefined?n:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=t!==undefined?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif\n",THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",THREE.ShaderChunk.ambient_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	return PI * ambientLightColor;\n}\n",THREE.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n	reflectedLight.indirectDiffuse *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n#endif\n",THREE.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",THREE.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",THREE.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",THREE.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n	return any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat calcLightAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	if ( decayExponent > 0.0 ) {\n	  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n	}\n	return 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = alpha * alpha;\n	float gl = dotNL + pow( a2 + ( 1.0 - a2 ) * dotNL * dotNL, 0.5 );\n	float gv = dotNV + pow( a2 + ( 1.0 - a2 ) * dotNV * dotNV, 0.5 );\n	return 1.0 / ( gl * gv );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = alpha * alpha;\n	float denom = dotNH * dotNH * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / ( denom * denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = roughness * roughness;\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_Smith( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n	return specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / square( ggxRoughness + 0.0001 ) - 2.0 );\n}\n",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif\n",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif\n",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat square( const in float x ) { return x*x; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nvec3 inputToLinear( in vec3 a ) {\n	#ifdef GAMMA_INPUT\n		return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n	#else\n		return a;\n	#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n	#ifdef GAMMA_OUTPUT\n		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n	#else\n		return a;\n	#endif\n}\n",THREE.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n	objectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",THREE.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif\n",THREE.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = inputToLinear( emissiveColor.rgb );\n	totalEmissiveLight *= emissiveColor.rgb;\n#endif\n",THREE.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#else\n		float flipNormal = 1.0;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n	envColor.xyz = inputToLinear( envColor.xyz );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif\n",THREE.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( STANDARD )\n	uniform float reflectivity;\n	uniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n	varying vec3 vReflect;\n	uniform float refractionRatio;\n#endif\n",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n	vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	#ifdef ENVMAP_MODE_REFLECTION\n		vReflect = reflect( cameraToVertex, worldNormal );\n	#else\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n	#endif\n#endif\n",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n#endif",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n	uniform vec3 fogColor;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",THREE.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		directLight = getPointDirectLight( pointLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		directLight = getSpotDirectLight( spotLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directLight = getDirectionalDirectLight( directionalLights[ i ], geometry );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif\n",THREE.ShaderChunk.lights_pars="#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	IncidentLight getDirectionalDirectLight( const in DirectionalLight directionalLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n		return directLight;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	IncidentLight getPointDirectLight( const in PointLight pointLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		if ( testLightInRange( lightDistance, pointLight.distance ) ) {\n			directLight.color = pointLight.color;\n			directLight.color *= calcLightAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n		return directLight;\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float angleCos;\n		float penumbra;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	IncidentLight getSpotDirectLight( const in SpotLight spotLight, const in GeometricContext geometry ) {\n		IncidentLight directLight;\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float spotEffect = dot( directLight.direction, spotLight.direction );\n		if ( all( bvec2( spotEffect > spotLight.angleCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n			float spotEffect = dot( spotLight.direction, directLight.direction );\n			spotEffect *= clamp( ( spotEffect - spotLight.angleCos ) / spotLight.penumbra, 0.0, 1.0 );\n			directLight.color = spotLight.color;\n			directLight.color *= ( spotEffect * calcLightAttenuation( lightDistance, spotLight.distance, spotLight.decay ) );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n		return directLight;\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		return PI * mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n	}\n#endif\n#if defined( USE_ENVMAP ) && defined( STANDARD )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		#ifdef DOUBLE_SIDED\n			float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#else\n			float flipNormal = 1.0;\n		#endif\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n		#else\n			vec3 envMapColor = vec3( 0.0 );\n		#endif\n		envMapColor.rgb = inputToLinear( envMapColor.rgb );\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( square( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		#ifdef DOUBLE_SIDED\n			float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n		#else\n			float flipNormal = 1.0;\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n			sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n		#endif\n		envMapColor.rgb = inputToLinear( envMapColor.rgb );\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif\n",THREE.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",THREE.ShaderChunk.lights_phong_pars_fragment="#ifdef USE_ENVMAP\n	varying vec3 vWorldPosition;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * PI * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)\n",THREE.ShaderChunk.lights_phong_pars_vertex="#ifdef USE_ENVMAP\n	varying vec3 vWorldPosition;\n#endif\n",THREE.ShaderChunk.lights_phong_vertex="#ifdef USE_ENVMAP\n	vWorldPosition = worldPosition.xyz;\n#endif\n",THREE.ShaderChunk.lights_standard_fragment="StandardMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\nmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n",THREE.ShaderChunk.lights_standard_pars_fragment="struct StandardMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n};\nvoid RE_Direct_Standard( const in IncidentLight directLight, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * PI * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n}\nvoid RE_IndirectDiffuse_Standard( const in vec3 irradiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Standard( const in vec3 radiance, const in GeometricContext geometry, const in StandardMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n}\n#define RE_Direct				RE_Direct_Standard\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Standard\n#define RE_IndirectSpecular		RE_IndirectSpecular_Standard\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n",THREE.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		directLight = getPointDirectLight( pointLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		directLight = getSpotDirectLight( spotLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		directLight = getDirectionalDirectLight( directionalLight, geometry );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef USE_LIGHTMAP\n		irradiance += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n	RE_IndirectSpecular( radiance, geometry, material, reflectedLight );\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="\n	outgoingLight = linearToOutput( outgoingLight );\n",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n	uniform float logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n	uniform float logDepthBufFC;\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n	#endif\n#endif\n",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n	diffuseColor *= texelColor;\n#endif\n",THREE.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n#endif\n",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n#endif\n",THREE.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.r;\n#endif\n",THREE.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif\n",THREE.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#endif\n#endif\n#ifdef USE_NORMALMAP\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n	}\n#endif\n",THREE.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n	vec4 mvPosition = modelViewMatrix * skinned;\n#else\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",THREE.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.r;\n#endif\n",THREE.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float unpackDepth( const in vec4 rgba_depth ) {\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		return dot( rgba_depth, bit_shift );\n	}\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return 1.0;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		vec3 bd3D = normalize( lightToPosition );\n		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif\n",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif\n",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif\n",THREE.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}\n",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif\n",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n#endif\n",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",THREE.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",THREE.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",THREE.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",THREE.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",THREE.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n#endif\n",THREE.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n	#ifdef USE_SKINNING\n		vec4 worldPosition = modelMatrix * skinned;\n	#else\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n	#endif\n#endif\n",THREE.UniformsUtils={merge:function(e){var t={};for(var n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i instanceof THREE.Color||i instanceof THREE.Vector2||i instanceof THREE.Vector3||i instanceof THREE.Vector4||i instanceof THREE.Matrix3||i instanceof THREE.Matrix4||i instanceof THREE.Texture?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},roughnessmap:{roughnessMap:{type:"t",value:null}},metalnessmap:{metalnessMap:{type:"t",value:null}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},ambient:{ambientLightColor:{type:"fv",value:[]}},lights:{directionalLights:{type:"sa",value:[],properties:{direction:{type:"v3"},color:{type:"c"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},directionalShadowMap:{type:"tv",value:[]},directionalShadowMatrix:{type:"m4v",value:[]},spotLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},direction:{type:"v3"},distance:{type:"f"},angleCos:{type:"f"},penumbra:{type:"f"},decay:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},spotShadowMap:{type:"tv",value:[]},spotShadowMatrix:{type:"m4v",value:[]},pointLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},decay:{type:"f"},distance:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},pointShadowMap:{type:"tv",value:[]},pointShadowMatrix:{type:"m4v",value:[]},hemisphereLights:{type:"sa",value:[],properties:{direction:{type:"v3"},skyColor:{type:"c"},groundColor:{type:"c"}}}},points:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.fog]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	ReflectedLight reflectedLight;","	reflectedLight.directDiffuse = vec3( 0.0 );","	reflectedLight.directSpecular = vec3( 0.0 );","	reflectedLight.indirectDiffuse = diffuseColor.rgb;","	reflectedLight.indirectSpecular = vec3( 0.0 );",THREE.ShaderChunk.aomap_fragment,"	vec3 outgoingLight = reflectedLight.indirectDiffuse;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.fog,THREE.UniformsLib.ambient,THREE.UniformsLib.lights,{emissive:{type:"c",value:new THREE.Color(0)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.bsdfs,THREE.ShaderChunk.lights_pars,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.bsdfs,THREE.ShaderChunk.ambient_pars,THREE.ShaderChunk.lights_pars,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.shadowmask_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec4 diffuseColor = vec4( diffuse, opacity );","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveLight = emissive;",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.emissivemap_fragment,"	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );",THREE.ShaderChunk.lightmap_fragment,"	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );","	#ifdef DOUBLE_SIDED","		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;","	#else","		reflectedLight.directDiffuse = vLightFront;","	#endif","	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();",THREE.ShaderChunk.aomap_fragment,"	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveLight;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.fog,THREE.UniformsLib.ambient,THREE.UniformsLib.lights,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.displacementmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.displacementmap_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.bsdfs,THREE.ShaderChunk.ambient_pars,THREE.ShaderChunk.lights_pars,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec4 diffuseColor = vec4( diffuse, opacity );","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveLight = emissive;",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.normal_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lights_template,THREE.ShaderChunk.aomap_fragment,"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;",THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},standard:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.aomap,THREE.UniformsLib.lightmap,THREE.UniformsLib.emissivemap,THREE.UniformsLib.bumpmap,THREE.UniformsLib.normalmap,THREE.UniformsLib.displacementmap,THREE.UniformsLib.roughnessmap,THREE.UniformsLib.metalnessmap,THREE.UniformsLib.fog,THREE.UniformsLib.ambient,THREE.UniformsLib.lights,{emissive:{type:"c",value:new THREE.Color(0)},roughness:{type:"f",value:.5},metalness:{type:"f",value:0},envMapIntensity:{type:"f",value:1}}]),vertexShader:["#define STANDARD","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.uv_pars_vertex,THREE.ShaderChunk.uv2_pars_vertex,THREE.ShaderChunk.displacementmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.uv_vertex,THREE.ShaderChunk.uv2_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.beginnormal_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED","	vNormal = normalize( transformedNormal );","#endif",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.displacementmap_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = - mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define STANDARD","uniform vec3 diffuse;","uniform vec3 emissive;","uniform float roughness;","uniform float metalness;","uniform float opacity;","uniform float envMapIntensity;","varying vec3 vViewPosition;","#ifndef FLAT_SHADED","	varying vec3 vNormal;","#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.uv_pars_fragment,THREE.ShaderChunk.uv2_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.aomap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.emissivemap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.bsdfs,THREE.ShaderChunk.ambient_pars,THREE.ShaderChunk.lights_pars,THREE.ShaderChunk.lights_standard_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.roughnessmap_pars_fragment,THREE.ShaderChunk.metalnessmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec4 diffuseColor = vec4( diffuse, opacity );","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveLight = emissive;",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.roughnessmap_fragment,THREE.ShaderChunk.metalnessmap_fragment,THREE.ShaderChunk.normal_fragment,THREE.ShaderChunk.emissivemap_fragment,THREE.ShaderChunk.lights_standard_fragment,THREE.ShaderChunk.lights_template,THREE.ShaderChunk.aomap_fragment,"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;",THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},points:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.points,THREE.UniformsLib.fog]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.project_vertex,"	#ifdef USE_SIZEATTENUATION","		gl_PointSize = size * ( scale / - mvPosition.z );","	#else","		gl_PointSize = size;","	#endif",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;","	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	if ( mod( vLineDistance, totalSize ) > dashSize ) {","		discard;","	}","	vec3 outgoingLight = vec3( 0.0 );","	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );","}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		float depth = gl_FragDepthEXT / gl_FragCoord.w;","	#else","		float depth = gl_FragCoord.z / gl_FragCoord.w;","	#endif","	float color = 1.0 - smoothstep( mNear, mFar, depth );","	gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {","	vWorldPosition = transformDirection( position, modelMatrix );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","uniform float tFlip;","varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {","vec3 direction = normalize( vWorldPosition );","vec2 sampleUV;","sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );","sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","gl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {","	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bit_mask;","	return res;","}","void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT","		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );","	#else","		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","	#endif","}"].join("\n")},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new THREE.Vector3(0,0,0)}},vertexShader:["varying vec4 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.begin_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.project_vertex,THREE.ShaderChunk.worldpos_vertex,"vWorldPosition = worldPosition;","}"].join("\n"),fragmentShader:["uniform vec3 lightPos;","varying vec4 vWorldPosition;",THREE.ShaderChunk.common,"vec4 pack1K ( float depth ) {","	depth /= 1000.0;","	const vec4 bitSh = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","	const vec4 bitMsk = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","	vec4 res = mod( depth * bitSh * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );","	res -= res.xxyz * bitMsk;","	return res; ","}","float unpack1K ( vec4 color ) {","	const vec4 bitSh = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","	return dot( color, bitSh ) * 1000.0;","}","void main () {","	gl_FragColor = pack1K( length( vWorldPosition.xyz - lightPos.xyz ) );","}"].join("\n")}},THREE.WebGLRenderer=function(e){function et(){return b===null?_:1}function tt(e,t,n,r){u===!0&&(e*=r,t*=r,n*=r),$.clearColor(e,t,n,r)}function nt(){$.init(),$.scissor(T.copy(D).multiplyScalar(_)),$.viewport(C.copy(H).multiplyScalar(_)),tt(L.r,L.g,L.b,A)}function rt(){y=null,x=null,S="",E=-1,$.reset()}function ut(e){e.preventDefault(),rt(),nt(),J.clear()}function at(e){var t=e.target;t.removeEventListener("dispose",at),ct(t),q.textures--}function ft(e){var t=e.target;t.removeEventListener("dispose",ft),ht(t),q.textures--}function lt(e){var t=e.target;t.removeEventListener("dispose",lt),pt(t)}function ct(e){var t=J.get(e);if(e.image&&t.__image__webglTextureCube)U.deleteTexture(t.__image__webglTextureCube);else{if(t.__webglInit===undefined)return;U.deleteTexture(t.__webglTexture)}J.delete(e)}function ht(e){var t=J.get(e),n=J.get(e.texture);if(!e||n.__webglTexture===undefined)return;U.deleteTexture(n.__webglTexture);if(e instanceof THREE.WebGLRenderTargetCube)for(var r=0;r<6;r++)U.deleteFramebuffer(t.__webglFramebuffer[r]),U.deleteRenderbuffer(t.__webglDepthbuffer[r]);else U.deleteFramebuffer(t.__webglFramebuffer),U.deleteRenderbuffer(t.__webglDepthbuffer);J.delete(e.texture),J.delete(e)}function pt(e){dt(e),J.delete(e)}function dt(e){var t=J.get(e).program;e.program=undefined,t!==undefined&&Q.releaseProgram(t)}function vt(e,t,n,r){var i;if(n instanceof THREE.InstancedBufferGeometry){i=X.get("ANGLE_instanced_arrays");if(i===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}r===undefined&&(r=0),$.initAttributes();var s=n.attributes,o=t.getAttributes(),u=e.defaultAttributeValues;for(var a in o){var f=o[a];if(f>=0){var l=s[a];if(l!==undefined){var c=l.itemSize,h=K.getAttributeBuffer(l);if(l instanceof THREE.InterleavedBufferAttribute){var p=l.data,d=p.stride,v=l.offset;p instanceof THREE.InstancedInterleavedBuffer?($.enableAttributeAndDivisor(f,p.meshPerAttribute,i),n.maxInstancedCount===undefined&&(n.maxInstancedCount=p.meshPerAttribute*p.count)):$.enableAttribute(f),U.bindBuffer(U.ARRAY_BUFFER,h),U.vertexAttribPointer(f,c,U.FLOAT,!1,d*p.array.BYTES_PER_ELEMENT,(r*d+v)*p.array.BYTES_PER_ELEMENT)}else l instanceof THREE.InstancedBufferAttribute?($.enableAttributeAndDivisor(f,l.meshPerAttribute,i),n.maxInstancedCount===undefined&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):$.enableAttribute(f),U.bindBuffer(U.ARRAY_BUFFER,h),U.vertexAttribPointer(f,c,U.FLOAT,!1,0,r*c*4)}else if(u!==undefined){var m=u[a];if(m!==undefined)switch(m.length){case 2:U.vertexAttrib2fv(f,m);break;case 3:U.vertexAttrib3fv(f,m);break;case 4:U.vertexAttrib4fv(f,m);break;default:U.vertexAttrib1fv(f,m)}}}}$.disableUnusedAttributes()}function mt(e,t){return Math.abs(t[0])-Math.abs(e[0])}function gt(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function yt(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function bt(e,t,n,r,i){var s,o;n.transparent?(s=h,o=++p):(s=l,o=++c);var u=s[o];u!==undefined?(u.id=e.id,u.object=e,u.geometry=t,u.material=n,u.z=F.z,u.group=i):(u={id:e.id,object:e,geometry:t,material:n,z:F.z,group:i},s.push(u))}function wt(e,t){if(e.visible===!1)return;if(e.layers.test(t.layers))if(e instanceof THREE.Light)f.push(e);else if(e instanceof THREE.Sprite)(e.frustumCulled===!1||B.intersectsObject(e)===!0)&&v.push(e);else if(e instanceof THREE.LensFlare)m.push(e);else if(e instanceof THREE.ImmediateRenderObject)g.sortObjects===!0&&(F.setFromMatrixPosition(e.matrixWorld),F.applyProjection(j)),bt(e,null,e.material,F.z,null);else if(e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.Points){e instanceof THREE.SkinnedMesh&&e.skeleton.update();if(e.frustumCulled===!1||B.intersectsObject(e)===!0){var n=e.material;if(n.visible===!0){g.sortObjects===!0&&(F.setFromMatrixPosition(e.matrixWorld),F.applyProjection(j));var r=K.update(e);if(n instanceof THREE.MultiMaterial){var i=r.groups,s=n.materials;for(var o=0,u=i.length;o<u;o++){var a=i[o],l=s[a.materialIndex];l.visible===!0&&bt(e,r,l,F.z,a)}}else bt(e,r,n,F.z,null)}}}var c=e.children;for(var o=0,u=c.length;o<u;o++)wt(c[o],t)}function Et(e,t,n,r){for(var i=0,s=e.length;i<s;i++){var o=e[i],u=o.object,a=o.geometry,f=r===undefined?o.material:r,l=o.group;u.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,u.matrixWorld),u.normalMatrix.getNormalMatrix(u.modelViewMatrix);if(u instanceof THREE.ImmediateRenderObject){xt(f);var c=Nt(t,n,f,u);S="",u.render(function(e){g.renderBufferImmediate(e,c,f)})}else g.renderBufferDirect(t,n,a,f,u,l)}}function St(e,t,n){var r=J.get(e),i=Q.getParameters(e,I,t,n),s=Q.getProgramCode(e,i),o=r.program,u=!0;if(o===undefined)e.addEventListener("dispose",lt);else if(o.code!==s)dt(e);else{if(i.shaderID!==undefined)return;u=!1}if(u){if(i.shaderID){var a=THREE.ShaderLib[i.shaderID];r.__webglShader={name:e.type,uniforms:THREE.UniformsUtils.clone(a.uniforms),vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,o=Q.acquireProgram(e,i,s),r.program=o,e.program=o}var f=o.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var l=0;l<g.maxMorphTargets;l++)f["morphTarget"+l]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var l=0;l<g.maxMorphNormals;l++)f["morphNormal"+l]>=0&&e.numSupportedMorphNormals++}r.uniformsList=[];var c=r.__webglShader.uniforms,h=r.program.getUniforms();for(var p in c){var d=h[p];d&&r.uniformsList.push([r.__webglShader.uniforms[p],d])}if(e instanceof THREE.MeshPhongMaterial||e instanceof THREE.MeshLambertMaterial||e instanceof THREE.MeshStandardMaterial||e.lights)r.lightsHash=I.hash,c.ambientLightColor.value=I.ambient,c.directionalLights.value=I.directional,c.spotLights.value=I.spot,c.pointLights.value=I.point,c.hemisphereLights.value=I.hemi,c.directionalShadowMap.value=I.directionalShadowMap,c.directionalShadowMatrix.value=I.directionalShadowMatrix,c.spotShadowMap.value=I.spotShadowMap,c.spotShadowMatrix.value=I.spotShadowMatrix,c.pointShadowMap.value=I.pointShadowMap,c.pointShadowMatrix.value=I.pointShadowMatrix;r.hasDynamicUniforms=!1;for(var v=0,m=r.uniformsList.length;v<m;v++){var y=r.uniformsList[v][0];if(y.dynamic===!0){r.hasDynamicUniforms=!0;break}}}function xt(e){Tt(e),e.transparent===!0?$.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha):$.setBlending(THREE.NoBlending),$.setDepthFunc(e.depthFunc),$.setDepthTest(e.depthTest),$.setDepthWrite(e.depthWrite),$.setColorWrite(e.colorWrite),$.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function Tt(e){e.side!==THREE.DoubleSide?$.enable(U.CULL_FACE):$.disable(U.CULL_FACE),$.setFlipSided(e.side===THREE.BackSide)}function Nt(e,t,n,r){k=0;var i=J.get(n);i.program===undefined&&(n.needsUpdate=!0),i.lightsHash!==undefined&&i.lightsHash!==I.hash&&(n.needsUpdate=!0),n.needsUpdate&&(St(n,t,r),n.needsUpdate=!1);var s=!1,o=!1,u=!1,a=i.program,f=a.getUniforms(),l=i.__webglShader.uniforms;a.id!==y&&(U.useProgram(a.program),y=a.id,s=!0,o=!0,u=!0),n.id!==E&&(E=n.id,o=!0);if(s||e!==x)U.uniformMatrix4fv(f.projectionMatrix,!1,e.projectionMatrix.elements),V.logarithmicDepthBuffer&&U.uniform1f(f.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==x&&(x=e,o=!0,u=!0),(n instanceof THREE.ShaderMaterial||n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshStandardMaterial||n.envMap)&&f.cameraPosition!==undefined&&(F.setFromMatrixPosition(e.matrixWorld),U.uniform3f(f.cameraPosition,F.x,F.y,F.z)),(n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.MeshBasicMaterial||n instanceof THREE.MeshStandardMaterial||n instanceof THREE.ShaderMaterial||n.skinning)&&f.viewMatrix!==undefined&&U.uniformMatrix4fv(f.viewMatrix,!1,e.matrixWorldInverse.elements);if(n.skinning){r.bindMatrix&&f.bindMatrix!==undefined&&U.uniformMatrix4fv(f.bindMatrix,!1,r.bindMatrix.elements),r.bindMatrixInverse&&f.bindMatrixInverse!==undefined&&U.uniformMatrix4fv(f.bindMatrixInverse,!1,r.bindMatrixInverse.elements);if(V.floatVertexTextures&&r.skeleton&&r.skeleton.useVertexTexture){if(f.boneTexture!==undefined){var c=jt();U.uniform1i(f.boneTexture,c),g.setTexture(r.skeleton.boneTexture,c)}f.boneTextureWidth!==undefined&&U.uniform1i(f.boneTextureWidth,r.skeleton.boneTextureWidth),f.boneTextureHeight!==undefined&&U.uniform1i(f.boneTextureHeight,r.skeleton.boneTextureHeight)}else r.skeleton&&r.skeleton.boneMatrices&&f.boneGlobalMatrices!==undefined&&U.uniformMatrix4fv(f.boneGlobalMatrices,!1,r.skeleton.boneMatrices)}return o&&((n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.MeshStandardMaterial||n.lights)&&Ht(l,u),t&&n.fog&&Mt(l,t),(n instanceof THREE.MeshBasicMaterial||n instanceof THREE.MeshLambertMaterial||n instanceof THREE.MeshPhongMaterial||n instanceof THREE.MeshStandardMaterial)&&kt(l,n),n instanceof THREE.LineBasicMaterial?Lt(l,n):n instanceof THREE.LineDashedMaterial?(Lt(l,n),At(l,n)):n instanceof THREE.PointsMaterial?Ot(l,n):n instanceof THREE.MeshLambertMaterial?_t(l,n):n instanceof THREE.MeshPhongMaterial?Dt(l,n):n instanceof THREE.MeshStandardMaterial?Pt(l,n):n instanceof THREE.MeshDepthMaterial?(l.mNear.value=e.near,l.mFar.value=e.far,l.opacity.value=n.opacity):n instanceof THREE.MeshNormalMaterial&&(l.opacity.value=n.opacity),Ft(i.uniformsList)),Bt(f,r),f.modelMatrix!==undefined&&U.uniformMatrix4fv(f.modelMatrix,!1,r.matrixWorld.elements),i.hasDynamicUniforms===!0&&Ct(i.uniformsList,r,e),a}function Ct(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i][0],u=o.onUpdateCallback;u!==undefined&&(u.bind(o)(t,n),r.push(e[i]))}Ft(r)}function kt(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap);if(n!==undefined){n instanceof THREE.WebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function Lt(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function At(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function Ot(e,n){e.diffuse.value=n.color,e.opacity.value=n.opacity,e.size.value=n.size*_,e.scale.value=t.clientHeight/2,e.map.value=n.map;if(n.map!==null){var r=n.map.offset,i=n.map.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}}function Mt(e,t){e.fogColor.value=t.color,t instanceof THREE.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.fogDensity.value=t.density)}function _t(e,t){t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function Dt(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Pt(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function Ht(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Bt(e,t){U.uniformMatrix4fv(e.modelViewMatrix,!1,t.modelViewMatrix.elements),e.normalMatrix&&U.uniformMatrix3fv(e.normalMatrix,!1,t.normalMatrix.elements)}function jt(){var e=k;return e>=V.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+V.maxTextures),k+=1,e}function Ft(e){var t,n;for(var r=0,i=e.length;r<i;r++){var s=e[r][0];if(s.needsUpdate===!1)continue;var o=s.type,u=s.value,a=e[r][1];switch(o){case"1i":U.uniform1i(a,u);break;case"1f":U.uniform1f(a,u);break;case"2f":U.uniform2f(a,u[0],u[1]);break;case"3f":U.uniform3f(a,u[0],u[1],u[2]);break;case"4f":U.uniform4f(a,u[0],u[1],u[2],u[3]);break;case"1iv":U.uniform1iv(a,u);break;case"3iv":U.uniform3iv(a,u);break;case"1fv":U.uniform1fv(a,u);break;case"2fv":U.uniform2fv(a,u);break;case"3fv":U.uniform3fv(a,u);break;case"4fv":U.uniform4fv(a,u);break;case"Matrix2fv":U.uniformMatrix2fv(a,!1,u);break;case"Matrix3fv":U.uniformMatrix3fv(a,!1,u);break;case"Matrix4fv":U.uniformMatrix4fv(a,!1,u);break;case"i":U.uniform1i(a,u);break;case"f":U.uniform1f(a,u);break;case"v2":U.uniform2f(a,u.x,u.y);break;case"v3":U.uniform3f(a,u.x,u.y,u.z);break;case"v4":U.uniform4f(a,u.x,u.y,u.z,u.w);break;case"c":U.uniform3f(a,u.r,u.g,u.b);break;case"sa":for(var f=0;f<u.length;f++)for(var l in s.properties){var c=s.properties[l],h=a[f][l],p=u[f][l];switch(c.type){case"i":U.uniform1i(h,p);break;case"f":U.uniform1f(h,p);break;case"v2":U.uniform2f(h,p.x,p.y);break;case"v3":U.uniform3f(h,p.x,p.y,p.z);break;case"v4":U.uniform4f(h,p.x,p.y,p.z,p.w);break;case"c":U.uniform3f(h,p.r,p.g,p.b);break;case"m4":U.uniformMatrix4fv(h,!1,p.elements)}}break;case"iv1":U.uniform1iv(a,u);break;case"iv":U.uniform3iv(a,u);break;case"fv1":U.uniform1fv(a,u);break;case"fv":U.uniform3fv(a,u);break;case"v2v":s._array===undefined&&(s._array=new Float32Array(2*u.length));for(var f=0,d=0,v=u.length;f<v;f++,d+=2)s._array[d+0]=u[f].x,s._array[d+1]=u[f].y;U.uniform2fv(a,s._array);break;case"v3v":s._array===undefined&&(s._array=new Float32Array(3*u.length));for(var f=0,m=0,v=u.length;f<v;f++,m+=3)s._array[m+0]=u[f].x,s._array[m+1]=u[f].y,s._array[m+2]=u[f].z;U.uniform3fv(a,s._array);break;case"v4v":s._array===undefined&&(s._array=new Float32Array(4*u.length));for(var f=0,y=0,v=u.length;f<v;f++,y+=4)s._array[y+0]=u[f].x,s._array[y+1]=u[f].y,s._array[y+2]=u[f].z,s._array[y+3]=u[f].w;U.uniform4fv(a,s._array);break;case"m2":U.uniformMatrix2fv(a,!1,u.elements);break;case"m3":U.uniformMatrix3fv(a,!1,u.elements);break;case"m3v":s._array===undefined&&(s._array=new Float32Array(9*u.length));for(var f=0,v=u.length;f<v;f++)u[f].flattenToArrayOffset(s._array,f*9);U.uniformMatrix3fv(a,!1,s._array);break;case"m4":U.uniformMatrix4fv(a,!1,u.elements);break;case"m4v":s._array===undefined&&(s._array=new Float32Array(16*u.length));for(var f=0,v=u.length;f<v;f++)u[f].flattenToArrayOffset(s._array,f*16);U.uniformMatrix4fv(a,!1,s._array);break;case"t":t=u,n=jt(),U.uniform1i(a,n);if(!t)continue;t instanceof THREE.CubeTexture||Array.isArray(t.image)&&t.image.length===6?Vt(t,n):t instanceof THREE.WebGLRenderTargetCube?$t(t.texture,n):t instanceof THREE.WebGLRenderTarget?g.setTexture(t.texture,n):g.setTexture(t,n);break;case"tv":s._array===undefined&&(s._array=[]);for(var f=0,v=s.value.length;f<v;f++)s._array[f]=jt();U.uniform1iv(a,s._array);for(var f=0,v=s.value.length;f<v;f++){t=s.value[f],n=s._array[f];if(!t)continue;t instanceof THREE.CubeTexture||t.image instanceof Array&&t.image.length===6?Vt(t,n):t instanceof THREE.WebGLRenderTarget?g.setTexture(t.texture,n):t instanceof THREE.WebGLRenderTargetCube?$t(t.texture,n):g.setTexture(t,n)}break;default:console.warn("THREE.WebGLRenderer: Unknown uniform type: "+o)}}}function It(e,t){var n,r,i,s=0,o=0,u=0,a,f,l,c=t.matrixWorldInverse,h=0,p=0,d=0,v=0,m=0;I.shadowsPointLight=0;for(n=0,r=e.length;n<r;n++){i=e[n],a=i.color,f=i.intensity,l=i.distance;if(i instanceof THREE.AmbientLight)s+=a.r*f,o+=a.g*f,u+=a.b*f;else if(i instanceof THREE.DirectionalLight){var g=G.get(i);g.color.copy(i.color).multiplyScalar(i.intensity),g.direction.setFromMatrixPosition(i.matrixWorld),F.setFromMatrixPosition(i.target.matrixWorld),g.direction.sub(F),g.direction.transformDirection(c),g.shadow=i.castShadow,i.castShadow&&(g.shadowBias=i.shadow.bias,g.shadowRadius=i.shadow.radius,g.shadowMapSize=i.shadow.mapSize,I.shadows[m++]=i),I.directionalShadowMap[h]=i.shadow.map,I.directionalShadowMatrix[h]=i.shadow.matrix,I.directional[h++]=g}else if(i instanceof THREE.SpotLight){var g=G.get(i);g.position.setFromMatrixPosition(i.matrixWorld),g.position.applyMatrix4(c),g.color.copy(a).multiplyScalar(f),g.distance=l,g.direction.setFromMatrixPosition(i.matrixWorld),F.setFromMatrixPosition(i.target.matrixWorld),g.direction.sub(F),g.direction.transformDirection(c),g.angleCos=Math.cos(i.angle),g.penumbra=Math.cos(i.angle)*i.penumbra,g.decay=i.distance===0?0:i.decay,g.shadow=i.castShadow,i.castShadow&&(g.shadowBias=i.shadow.bias,g.shadowRadius=i.shadow.radius,g.shadowMapSize=i.shadow.mapSize,I.shadows[m++]=i),I.spotShadowMap[d]=i.shadow.map,I.spotShadowMatrix[d]=i.shadow.matrix,I.spot[d++]=g}else if(i instanceof THREE.PointLight){var g=G.get(i);g.position.setFromMatrixPosition(i.matrixWorld),g.position.applyMatrix4(c),g.color.copy(i.color).multiplyScalar(i.intensity),g.distance=i.distance,g.decay=i.distance===0?0:i.decay,g.shadow=i.castShadow,i.castShadow&&(g.shadowBias=i.shadow.bias,g.shadowRadius=i.shadow.radius,g.shadowMapSize=i.shadow.mapSize,I.shadows[m++]=i),I.pointShadowMap[p]=i.shadow.map,I.pointShadowMatrix[p]===undefined&&(I.pointShadowMatrix[p]=new THREE.Matrix4),F.setFromMatrixPosition(i.matrixWorld).negate(),I.pointShadowMatrix[p].identity().setPosition(F),I.point[p++]=g}else if(i instanceof THREE.HemisphereLight){var g=G.get(i);g.direction.setFromMatrixPosition(i.matrixWorld),g.direction.transformDirection(c),g.direction.normalize(),g.skyColor.copy(i.color).multiplyScalar(f),g.groundColor.copy(i.groundColor).multiplyScalar(f),I.hemi[v++]=g}}I.ambient[0]=s,I.ambient[1]=o,I.ambient[2]=u,I.directional.length=h,I.spot.length=d,I.point.length=p,I.hemi.length=v,I.shadows.length=m,I.hash=h+","+p+","+d+","+v+","+m}function qt(e,t,n){var r;n?(U.texParameteri(e,U.TEXTURE_WRAP_S,en(t.wrapS)),U.texParameteri(e,U.TEXTURE_WRAP_T,en(t.wrapT)),U.texParameteri(e,U.TEXTURE_MAG_FILTER,en(t.magFilter)),U.texParameteri(e,U.TEXTURE_MIN_FILTER,en(t.minFilter))):(U.texParameteri(e,U.TEXTURE_WRAP_S,U.CLAMP_TO_EDGE),U.texParameteri(e,U.TEXTURE_WRAP_T,U.CLAMP_TO_EDGE),(t.wrapS!==THREE.ClampToEdgeWrapping||t.wrapT!==THREE.ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",t),U.texParameteri(e,U.TEXTURE_MAG_FILTER,Zt(t.magFilter)),U.texParameteri(e,U.TEXTURE_MIN_FILTER,Zt(t.minFilter)),t.minFilter!==THREE.NearestFilter&&t.minFilter!==THREE.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",t)),r=X.get("EXT_texture_filter_anisotropic");if(r){if(t.type===THREE.FloatType&&X.get("OES_texture_float_linear")===null)return;if(t.type===THREE.HalfFloatType&&X.get("OES_texture_half_float_linear")===null)return;if(t.anisotropy>1||J.get(t).__currentAnisotropy)U.texParameterf(e,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,g.getMaxAnisotropy())),J.get(t).__currentAnisotropy=t.anisotropy}}function Rt(e,t,n){e.__webglInit===undefined&&(e.__webglInit=!0,t.addEventListener("dispose",at),e.__webglTexture=U.createTexture(),q.textures++),$.activeTexture(U.TEXTURE0+n),$.bindTexture(U.TEXTURE_2D,e.__webglTexture),U.pixelStorei(U.UNPACK_FLIP_Y_WEBGL,t.flipY),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),U.pixelStorei(U.UNPACK_ALIGNMENT,t.unpackAlignment);var r=Ut(t.image,V.maxTextureSize);Wt(t)&&zt(r)===!1&&(r=Xt(r));var i=zt(r),s=en(t.format),o=en(t.type);qt(U.TEXTURE_2D,t,i);var u,a=t.mipmaps;if(t instanceof THREE.DataTexture)if(a.length>0&&i){for(var f=0,l=a.length;f<l;f++)u=a[f],$.texImage2D(U.TEXTURE_2D,f,s,u.width,u.height,0,s,o,u.data);t.generateMipmaps=!1}else $.texImage2D(U.TEXTURE_2D,0,s,r.width,r.height,0,s,o,r.data);else if(t instanceof THREE.CompressedTexture)for(var f=0,l=a.length;f<l;f++)u=a[f],t.format!==THREE.RGBAFormat&&t.format!==THREE.RGBFormat?$.getCompressedTextureFormats().indexOf(s)>-1?$.compressedTexImage2D(U.TEXTURE_2D,f,s,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$.texImage2D(U.TEXTURE_2D,f,s,u.width,u.height,0,s,o,u.data);else if(a.length>0&&i){for(var f=0,l=a.length;f<l;f++)u=a[f],$.texImage2D(U.TEXTURE_2D,f,s,s,o,u);t.generateMipmaps=!1}else $.texImage2D(U.TEXTURE_2D,0,s,s,o,r);t.generateMipmaps&&i&&U.generateMipmap(U.TEXTURE_2D),e.__version=t.version,t.onUpdate&&t.onUpdate(t)}function Ut(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElement("canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);var i=r.getContext("2d");return i.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function zt(e){return THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height)}function Wt(e){return e.wrapS!==THREE.ClampToEdgeWrapping||e.wrapT!==THREE.ClampToEdgeWrapping?!0:e.minFilter!==THREE.NearestFilter&&e.minFilter!==THREE.LinearFilter?!0:!1}function Xt(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElement("canvas");t.width=THREE.Math.nearestPowerOfTwo(e.width),t.height=THREE.Math.nearestPowerOfTwo(e.height);var n=t.getContext("2d");return n.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function Vt(e,t){var n=J.get(e);if(e.image.length===6)if(e.version>0&&n.__version!==e.version){n.__image__webglTextureCube||(e.addEventListener("dispose",at),n.__image__webglTextureCube=U.createTexture(),q.textures++),$.activeTexture(U.TEXTURE0+t),$.bindTexture(U.TEXTURE_CUBE_MAP,n.__image__webglTextureCube),U.pixelStorei(U.UNPACK_FLIP_Y_WEBGL,e.flipY);var r=e instanceof THREE.CompressedTexture,i=e.image[0]instanceof THREE.DataTexture,s=[];for(var o=0;o<6;o++)g.autoScaleCubemaps&&!r&&!i?s[o]=Ut(e.image[o],V.maxCubemapSize):s[o]=i?e.image[o].image:e.image[o];var u=s[0],a=zt(u),f=en(e.format),l=en(e.type);qt(U.TEXTURE_CUBE_MAP,e,a);for(var o=0;o<6;o++)if(!r)i?$.texImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,f,s[o].width,s[o].height,0,f,l,s[o].data):$.texImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,f,f,l,s[o]);else{var c,h=s[o].mipmaps;for(var p=0,d=h.length;p<d;p++)c=h[p],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?$.getCompressedTextureFormats().indexOf(f)>-1?$.compressedTexImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,f,c.width,c.height,0,c.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):$.texImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+o,p,f,c.width,c.height,0,f,l,c.data)}e.generateMipmaps&&a&&U.generateMipmap(U.TEXTURE_CUBE_MAP),n.__version=e.version,e.onUpdate&&e.onUpdate(e)}else $.activeTexture(U.TEXTURE0+t),$.bindTexture(U.TEXTURE_CUBE_MAP,n.__image__webglTextureCube)}function $t(e,t){$.activeTexture(U.TEXTURE0+t),$.bindTexture(U.TEXTURE_CUBE_MAP,J.get(e).__webglTexture)}function Jt(e,t,n,r){var i=en(t.texture.format),s=en(t.texture.type);$.texImage2D(r,0,i,t.width,t.height,0,i,s,null),U.bindFramebuffer(U.FRAMEBUFFER,e),U.framebufferTexture2D(U.FRAMEBUFFER,n,r,J.get(t.texture).__webglTexture,0),U.bindFramebuffer(U.FRAMEBUFFER,null)}function Kt(e,t){U.bindRenderbuffer(U.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(U.renderbufferStorage(U.RENDERBUFFER,U.DEPTH_COMPONENT16,t.width,t.height),U.framebufferRenderbuffer(U.FRAMEBUFFER,U.DEPTH_ATTACHMENT,U.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(U.renderbufferStorage(U.RENDERBUFFER,U.DEPTH_STENCIL,t.width,t.height),U.framebufferRenderbuffer(U.FRAMEBUFFER,U.DEPTH_STENCIL_ATTACHMENT,U.RENDERBUFFER,e)):U.renderbufferStorage(U.RENDERBUFFER,U.RGBA4,t.width,t.height),U.bindRenderbuffer(U.RENDERBUFFER,null)}function Qt(e){var t=J.get(e),n=e instanceof THREE.WebGLRenderTargetCube;if(n){t.__webglDepthbuffer=[];for(var r=0;r<6;r++)U.bindFramebuffer(U.FRAMEBUFFER,t.__webglFramebuffer[r]),t.__webglDepthbuffer[r]=U.createRenderbuffer(),Kt(t.__webglDepthbuffer[r],e)}else U.bindFramebuffer(U.FRAMEBUFFER,t.__webglFramebuffer),t.__webglDepthbuffer=U.createRenderbuffer(),Kt(t.__webglDepthbuffer,e);U.bindFramebuffer(U.FRAMEBUFFER,null)}function Gt(e){var t=J.get(e),n=J.get(e.texture);e.addEventListener("dispose",ft),n.__webglTexture=U.createTexture(),q.textures++;var r=e instanceof THREE.WebGLRenderTargetCube,i=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height);if(r){t.__webglFramebuffer=[];for(var s=0;s<6;s++)t.__webglFramebuffer[s]=U.createFramebuffer()}else t.__webglFramebuffer=U.createFramebuffer();if(r){$.bindTexture(U.TEXTURE_CUBE_MAP,n.__webglTexture),qt(U.TEXTURE_CUBE_MAP,e.texture,i);for(var s=0;s<6;s++)Jt(t.__webglFramebuffer[s],e,U.COLOR_ATTACHMENT0,U.TEXTURE_CUBE_MAP_POSITIVE_X+s);e.texture.generateMipmaps&&i&&U.generateMipmap(U.TEXTURE_CUBE_MAP),$.bindTexture(U.TEXTURE_CUBE_MAP,null)}else $.bindTexture(U.TEXTURE_2D,n.__webglTexture),qt(U.TEXTURE_2D,e.texture,i),Jt(t.__webglFramebuffer,e,U.COLOR_ATTACHMENT0,U.TEXTURE_2D),e.texture.generateMipmaps&&i&&U.generateMipmap(U.TEXTURE_2D),$.bindTexture(U.TEXTURE_2D,null);e.depthBuffer&&Qt(e)}function Yt(e){var t=e instanceof THREE.WebGLRenderTargetCube?U.TEXTURE_CUBE_MAP:U.TEXTURE_2D,n=J.get(e.texture).__webglTexture;$.bindTexture(t,n),U.generateMipmap(t),$.bindTexture(t,null)}function Zt(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?U.NEAREST:U.LINEAR}function en(e){var t;if(e===THREE.RepeatWrapping)return U.REPEAT;if(e===THREE.ClampToEdgeWrapping)return U.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return U.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return U.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return U.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return U.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return U.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return U.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return U.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return U.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return U.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return U.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return U.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return U.BYTE;if(e===THREE.ShortType)return U.SHORT;if(e===THREE.UnsignedShortType)return U.UNSIGNED_SHORT;if(e===THREE.IntType)return U.INT;if(e===THREE.UnsignedIntType)return U.UNSIGNED_INT;if(e===THREE.FloatType)return U.FLOAT;t=X.get("OES_texture_half_float");if(t!==null&&e===THREE.HalfFloatType)return t.HALF_FLOAT_OES;if(e===THREE.AlphaFormat)return U.ALPHA;if(e===THREE.RGBFormat)return U.RGB;if(e===THREE.RGBAFormat)return U.RGBA;if(e===THREE.LuminanceFormat)return U.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return U.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return U.FUNC_ADD;if(e===THREE.SubtractEquation)return U.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return U.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return U.ZERO;if(e===THREE.OneFactor)return U.ONE;if(e===THREE.SrcColorFactor)return U.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return U.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return U.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return U.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return U.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return U.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return U.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return U.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return U.SRC_ALPHA_SATURATE;t=X.get("WEBGL_compressed_texture_s3tc");if(t!==null){if(e===THREE.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}t=X.get("WEBGL_compressed_texture_pvrtc");if(t!==null){if(e===THREE.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===THREE.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===THREE.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===THREE.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}t=X.get("WEBGL_compressed_texture_etc1");if(t!==null&&e===THREE.RGB_ETC1_Format)return t.COMPRESSED_RGB_ETC1_WEBGL;t=X.get("EXT_blend_minmax");if(t!==null){if(e===THREE.MinEquation)return t.MIN_EXT;if(e===THREE.MaxEquation)return t.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var t=e.canvas!==undefined?e.canvas:document.createElement("canvas"),n=e.context!==undefined?e.context:null,r=e.alpha!==undefined?e.alpha:!1,i=e.depth!==undefined?e.depth:!0,s=e.stencil!==undefined?e.stencil:!0,o=e.antialias!==undefined?e.antialias:!1,u=e.premultipliedAlpha!==undefined?e.premultipliedAlpha:!0,a=e.preserveDrawingBuffer!==undefined?e.preserveDrawingBuffer:!1,f=[],l=[],c=-1,h=[],p=-1,d=new Float32Array(8),v=[],m=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var g=this,y=null,b=null,w=null,E=-1,S="",x=null,T=new THREE.Vector4,N=null,C=new THREE.Vector4,k=0,L=new THREE.Color(0),A=0,O=t.width,M=t.height,_=1,D=new THREE.Vector4(0,0,O,M),P=!1,H=new THREE.Vector4(0,0,O,M),B=new THREE.Frustum,j=new THREE.Matrix4,F=new THREE.Vector3,I={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[],shadowsPointLight:0},q={geometries:0,textures:0},R={calls:0,vertices:0,faces:0,points:0};this.info={render:R,memory:q,programs:null};var U;try{var z={alpha:r,depth:i,stencil:s,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:a};U=n||t.getContext("webgl",z)||t.getContext("experimental-webgl",z);if(U===null)throw t.getContext("webgl")!==null?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";t.addEventListener("webglcontextlost",ut,!1)}catch(W){console.error("THREE.WebGLRenderer: "+W)}var X=new THREE.WebGLExtensions(U);X.get("OES_texture_float"),X.get("OES_texture_float_linear"),X.get("OES_texture_half_float"),X.get("OES_texture_half_float_linear"),X.get("OES_standard_derivatives"),X.get("ANGLE_instanced_arrays"),X.get("OES_element_index_uint")&&(THREE.BufferGeometry.MaxIndex=4294967296);var V=new THREE.WebGLCapabilities(U,X,e),$=new THREE.WebGLState(U,X,en),J=new THREE.WebGLProperties,K=new THREE.WebGLObjects(U,J,this.info),Q=new THREE.WebGLPrograms(this,V),G=new THREE.WebGLLights;this.info.programs=Q.programs;var Y=new THREE.WebGLBufferRenderer(U,X,R),Z=new THREE.WebGLIndexedBufferRenderer(U,X,R);nt(),this.context=U,this.capabilities=V,this.extensions=X,this.properties=J,this.state=$;var it=new THREE.WebGLShadowMap(this,I,K);this.shadowMap=it;var st=new THREE.SpritePlugin(this,v),ot=new THREE.LensFlarePlugin(this,m);this.getContext=function(){return U},this.getContextAttributes=function(){return U.getContextAttributes()},this.forceContextLoss=function(){X.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){var e;return function(){if(e!==undefined)return e;var n=X.get("EXT_texture_filter_anisotropic");return n!==null?e=U.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):e=0,e}}(),this.getPrecision=function(){return V.precision},this.getPixelRatio=function(){return _},this.setPixelRatio=function(e){if(e===undefined)return;_=e,this.setSize(H.z,H.w,!1)},this.getSize=function(){return{width:O,height:M}},this.setSize=function(e,n,r){O=e,M=n,t.width=e*_,t.height=n*_,r!==!1&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n)},this.setViewport=function(e,t,n,r){$.viewport(H.set(e,t,n,r))},this.setScissor=function(e,t,n,r){$.scissor(D.set(e,t,n,r))},this.setScissorTest=function(e){$.setScissorTest(P=e)},this.getClearColor=function(){return L},this.setClearColor=function(e,t){L.set(e),A=t!==undefined?t:1,tt(L.r,L.g,L.b,A)},this.getClearAlpha=function(){return A},this.setClearAlpha=function(e){A=e,tt(L.r,L.g,L.b,A)},this.clear=function(e,t,n){var r=0;if(e===undefined||e)r|=U.COLOR_BUFFER_BIT;if(t===undefined||t)r|=U.DEPTH_BUFFER_BIT;if(n===undefined||n)r|=U.STENCIL_BUFFER_BIT;U.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=rt,this.dispose=function(){t.removeEventListener("webglcontextlost",ut,!1)},this.renderBufferImmediate=function(e,t,n){$.initAttributes();var r=J.get(e);e.hasPositions&&!r.position&&(r.position=U.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=U.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=U.createBuffer()),e.hasColors&&!r.color&&(r.color=U.createBuffer());var i=t.getAttributes();e.hasPositions&&(U.bindBuffer(U.ARRAY_BUFFER,r.position),U.bufferData(U.ARRAY_BUFFER,e.positionArray,U.DYNAMIC_DRAW),$.enableAttribute(i.position),U.vertexAttribPointer(i.position,3,U.FLOAT,!1,0,0));if(e.hasNormals){U.bindBuffer(U.ARRAY_BUFFER,r.normal);if(n.type!=="MeshPhongMaterial"&&n.type!=="MeshStandardMaterial"&&n.shading===THREE.FlatShading)for(var s=0,o=e.count*3;s<o;s+=9){var u=e.normalArray,a=(u[s+0]+u[s+3]+u[s+6])/3,f=(u[s+1]+u[s+4]+u[s+7])/3,l=(u[s+2]+u[s+5]+u[s+8])/3;u[s+0]=a,u[s+1]=f,u[s+2]=l,u[s+3]=a,u[s+4]=f,u[s+5]=l,u[s+6]=a,u[s+7]=f,u[s+8]=l}U.bufferData(U.ARRAY_BUFFER,e.normalArray,U.DYNAMIC_DRAW),$.enableAttribute(i.normal),U.vertexAttribPointer(i.normal,3,U.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(U.bindBuffer(U.ARRAY_BUFFER,r.uv),U.bufferData(U.ARRAY_BUFFER,e.uvArray,U.DYNAMIC_DRAW),$.enableAttribute(i.uv),U.vertexAttribPointer(i.uv,2,U.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==THREE.NoColors&&(U.bindBuffer(U.ARRAY_BUFFER,r.color),U.bufferData(U.ARRAY_BUFFER,e.colorArray,U.DYNAMIC_DRAW),$.enableAttribute(i.color),U.vertexAttribPointer(i.color,3,U.FLOAT,!1,0,0)),$.disableUnusedAttributes(),U.drawArrays(U.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,s){xt(r);var o=Nt(e,t,r,i),u=!1,a=n.id+"_"+o.id+"_"+r.wireframe;a!==S&&(S=a,u=!0);var f=i.morphTargetInfluences;if(f!==undefined){var l=[];for(var c=0,h=f.length;c<h;c++){var p=f[c];l.push([p,c])}l.sort(mt),l.length>8&&(l.length=8);var v=n.morphAttributes;for(var c=0,h=l.length;c<h;c++){var p=l[c];d[c]=p[0];if(p[0]!==0){var m=p[1];r.morphTargets===!0&&v.position&&n.addAttribute("morphTarget"+c,v.position[m]),r.morphNormals===!0&&v.normal&&n.addAttribute("morphNormal"+c,v.normal[m])}else r.morphTargets===!0&&n.removeAttribute("morphTarget"+c),r.morphNormals===!0&&n.removeAttribute("morphNormal"+c)}var g=o.getUniforms();g.morphTargetInfluences!==null&&U.uniform1fv(g.morphTargetInfluences,d),u=!0}var m=n.index,y=n.attributes.position;r.wireframe===!0&&(m=K.getWireframeAttribute(n));var b;m!==null?(b=Z,b.setIndex(m)):b=Y,u&&(vt(r,o,n),m!==null&&U.bindBuffer(U.ELEMENT_ARRAY_BUFFER,K.getAttributeBuffer(m)));var w=0,E=Infinity;m!==null?E=m.count:y!==undefined&&(E=y.count);var x=n.drawRange.start,T=n.drawRange.count,N=s!==null?s.start:0,C=s!==null?s.count:Infinity,k=Math.max(w,x,N),L=Math.min(w+E,x+T,N+C)-1,A=Math.max(0,L-k+1);if(i instanceof THREE.Mesh)if(r.wireframe===!0)$.setLineWidth(r.wireframeLinewidth*et()),b.setMode(U.LINES);else switch(i.drawMode){case THREE.TrianglesDrawMode:b.setMode(U.TRIANGLES);break;case THREE.TriangleStripDrawMode:b.setMode(U.TRIANGLE_STRIP);break;case THREE.TriangleFanDrawMode:b.setMode(U.TRIANGLE_FAN)}else if(i instanceof THREE.Line){var O=r.linewidth;O===undefined&&(O=1),$.setLineWidth(O*et()),i instanceof THREE.LineSegments?b.setMode(U.LINES):b.setMode(U.LINE_STRIP)}else i instanceof THREE.Points&&b.setMode(U.POINTS);n instanceof THREE.InstancedBufferGeometry&&n.maxInstancedCount>0?b.renderInstances(n,k,A):b.render(k,A)},this.render=function(e,t,n,r){if(t instanceof THREE.Camera==0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}var i=e.fog;S="",E=-1,x=null,e.autoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromMatrix(j),f.length=0,c=-1,p=-1,v.length=0,m.length=0,wt(e,t),l.length=c+1,h.length=p+1,g.sortObjects===!0&&(l.sort(gt),h.sort(yt)),It(f,t),it.render(e,t),R.calls=0,R.vertices=0,R.faces=0,R.points=0,n===undefined&&(n=null),this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);if(e.overrideMaterial){var s=e.overrideMaterial;Et(l,t,i,s),Et(h,t,i,s)}else $.setBlending(THREE.NoBlending),Et(l,t,i),Et(h,t,i);st.render(e,t),ot.render(e,t,C);if(n){var o=n.texture;o.generateMipmaps&&zt(n)&&o.minFilter!==THREE.NearestFilter&&o.minFilter!==THREE.LinearFilter&&Yt(n)}$.setDepthTest(!0),$.setDepthWrite(!0),$.setColorWrite(!0)},this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?$.disable(U.CULL_FACE):(t===THREE.FrontFaceDirectionCW?U.frontFace(U.CW):U.frontFace(U.CCW),e===THREE.CullFaceBack?U.cullFace(U.BACK):e===THREE.CullFaceFront?U.cullFace(U.FRONT):U.cullFace(U.FRONT_AND_BACK),$.enable(U.CULL_FACE))},this.setTexture=function(e,t){var n=J.get(e);if(e.version>0&&n.__version!==e.version){var r=e.image;if(r===undefined){console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);return}if(r.complete===!1){console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e);return}Rt(n,e,t);return}$.activeTexture(U.TEXTURE0+t),$.bindTexture(U.TEXTURE_2D,n.__webglTexture)},this.setRenderTarget=function(e){b=e,e&&J.get(e).__webglFramebuffer===undefined&&Gt(e);var t=e instanceof THREE.WebGLRenderTargetCube,n;if(e){var r=J.get(e);t?n=r.__webglFramebuffer[e.activeCubeFace]:n=r.__webglFramebuffer,T.copy(e.scissor),N=e.scissorTest,C.copy(e.viewport)}else n=null,T.copy(D).multiplyScalar(_),N=P,C.copy(H).multiplyScalar(_);w!==n&&(U.bindFramebuffer(U.FRAMEBUFFER,n),w=n),$.scissor(T),$.setScissorTest(N),$.viewport(C);if(t){var i=J.get(e.texture);U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,0)}},this.readRenderTargetPixels=function(e,t,n,r,i,s){if(e instanceof THREE.WebGLRenderTarget==0){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var o=J.get(e).__webglFramebuffer;if(o){var u=!1;o!==w&&(U.bindFramebuffer(U.FRAMEBUFFER,o),u=!0);try{var a=e.texture;if(a.format!==THREE.RGBAFormat&&en(a.format)!==U.getParameter(U.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(a.type!==THREE.UnsignedByteType&&en(a.type)!==U.getParameter(U.IMPLEMENTATION_COLOR_READ_TYPE)&&(a.type!==THREE.FloatType||!X.get("WEBGL_color_buffer_float"))&&(a.type!==THREE.HalfFloatType||!X.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}U.checkFramebufferStatus(U.FRAMEBUFFER)===U.FRAMEBUFFER_COMPLETE?U.readPixels(t,n,r,i,en(a.format),en(a.type),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&U.bindFramebuffer(U.FRAMEBUFFER,w)}}}},THREE.WebGLRenderTarget=function(e,t,n){this.uuid=THREE.Math.generateUUID(),this.width=e,this.height=t,this.scissor=new THREE.Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new THREE.Vector4(0,0,e,t),n=n||{},n.minFilter===undefined&&(n.minFilter=THREE.LinearFilter),this.texture=new THREE.Texture(undefined,undefined,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy),this.depthBuffer=n.depthBuffer!==undefined?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==undefined?n.stencilBuffer:!0},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(e,t){if(this.width!==e||this.height!==t)this.width=e,this.height=t,this.dispose();this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.shareDepthFrom=e.shareDepthFrom,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,n){THREE.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.WebGLBufferRenderer=function(e,t,n){function i(e){r=e}function s(t,i){e.drawArrays(r,t,i),n.calls++,n.vertices+=i,r===e.TRIANGLES&&(n.faces+=i/3)}function o(i){var s=t.get("ANGLE_instanced_arrays");if(s===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var o=i.attributes.position,u=0;o instanceof THREE.InterleavedBufferAttribute?(u=o.data.count,s.drawArraysInstancedANGLE(r,0,u,i.maxInstancedCount)):(u=o.count,s.drawArraysInstancedANGLE(r,0,u,i.maxInstancedCount)),n.calls++,n.vertices+=u*i.maxInstancedCount,r===e.TRIANGLES&&(n.faces+=i.maxInstancedCount*u/3)}var r;this.setMode=i,this.render=s,this.renderInstances=o},THREE.WebGLIndexedBufferRenderer=function(e,t,n){function i(e){r=e}function u(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(s=e.UNSIGNED_INT,o=4):(s=e.UNSIGNED_SHORT,o=2)}function a(t,i){e.drawElements(r,i,s,t*o),n.calls++,n.vertices+=i,r===e.TRIANGLES&&(n.faces+=i/3)}function f(i,u,a){var f=t.get("ANGLE_instanced_arrays");if(f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f.drawElementsInstancedANGLE(r,a,s,u*o,i.maxInstancedCount),n.calls++,n.vertices+=a*i.maxInstancedCount,r===e.TRIANGLES&&(n.faces+=i.maxInstancedCount*a/3)}var r,s,o;this.setMode=i,this.setIndex=u,this.render=a,this.renderInstances=f},THREE.WebGLExtensions=function(e){var t={};this.get=function(n){if(t[n]!==undefined)return t[n];var r;switch(n){case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}},THREE.WebGLCapabilities=function(e,t,n){function r(t){if(t==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return t==="mediump"&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}this.getMaxPrecision=r,this.precision=n.precision!==undefined?n.precision:"highp",this.logarithmicDepthBuffer=n.logarithmicDepthBuffer!==undefined?n.logarithmicDepthBuffer:!1,this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxCubemapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=e.getParameter(e.MAX_VARYING_VECTORS),this.maxFragmentUniforms=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!t.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var i=r(this.precision);i!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",i,"instead."),this.precision=i),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!t.get("EXT_frag_depth"))},THREE.WebGLGeometries=function(e,t,n){function i(e){var t=e.geometry;if(r[t.id]!==undefined)return r[t.id];t.addEventListener("dispose",s);var i;return t instanceof THREE.BufferGeometry?i=t:t instanceof THREE.Geometry&&(t._bufferGeometry===undefined&&(t._bufferGeometry=(new THREE.BufferGeometry).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i}function s(e){var i=e.target,o=r[i.id];o.index!==null&&u(o.index),a(o.attributes),i.removeEventListener("dispose",s),delete r[i.id];var f=t.get(i);f.wireframe&&u(f.wireframe),t.delete(i);var l=t.get(o);l.wireframe&&u(l.wireframe),t.delete(o),n.memory.geometries--}function o(e){return e instanceof THREE.InterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function u(t){var n=o(t);n!==undefined&&(e.deleteBuffer(n),f(t))}function a(e){for(var t in e)u(e[t])}function f(e){e instanceof THREE.InterleavedBufferAttribute?t.delete(e.data):t.delete(e)}var r={};this.get=i},THREE.WebGLLights=function(){var e={};this.get=function(t){if(e[t.id]!==undefined)return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new THREE.Vector3,color:new THREE.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case"SpotLight":n={position:new THREE.Vector3,direction:new THREE.Vector3,color:new THREE.Color,distance:0,angleCos:0,penumbra:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case"PointLight":n={position:new THREE.Vector3,color:new THREE.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new THREE.Vector2};break;case"HemisphereLight":n={direction:new THREE.Vector3,skyColor:new THREE.Color,groundColor:new THREE.Color}}return e[t.id]=n,n}},THREE.WebGLObjects=function(e,t,n){function i(t){var n=r.get(t);t.geometry instanceof THREE.Geometry&&n.updateFromObject(t);var i=n.index,o=n.attributes;i!==null&&s(i,e.ELEMENT_ARRAY_BUFFER);for(var u in o)s(o[u],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var u in a){var f=a[u];for(var l=0,c=f.length;l<c;l++)s(f[l],e.ARRAY_BUFFER)}return n}function s(e,n){var r=e instanceof THREE.InterleavedBufferAttribute?e.data:e,i=t.get(r);i.__webglBuffer===undefined?o(i,r,n):i.version!==r.version&&u(i,r,n)}function o(t,n,r){t.__webglBuffer=e.createBuffer(),e.bindBuffer(r,t.__webglBuffer);var i=n.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(r,n.array,i),t.version=n.version}function u(t,n,r){e.bindBuffer(r,t.__webglBuffer),n.dynamic===!1||n.updateRange.count===-1?e.bufferSubData(r,0,n.array):n.updateRange.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),t.version=n.version}function a(e){return e instanceof THREE.InterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function f(n){var r=t.get(n);if(r.wireframe!==undefined)return r.wireframe;var i=[],o=n.index,u=n.attributes,a=u.position;if(o!==null){var f={},c=o.array;for(var h=0,p=c.length;h<p;h+=3){var d=c[h+0],v=c[h+1],m=c[h+2];l(f,d,v)&&i.push(d,v),l(f,v,m)&&i.push(v,m),l(f,m,d)&&i.push(m,d)}}else{var c=u.position.array;for(var h=0,p=c.length/3-1;h<p;h+=3){var d=h+0,v=h+1,m=h+2;i.push(d,v,v,m,m,d)}}var g=a.count>65535?Uint32Array:Uint16Array,y=new THREE.BufferAttribute(new g(i),1);return s(y,e.ELEMENT_ARRAY_BUFFER),r.wireframe=y,y}function l(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];return i===undefined?(e[t]=[n],!0):i.indexOf(n)===-1?(i.push(n),!0):!1}var r=new THREE.WebGLGeometries(e,t,n);this.getAttributeBuffer=a,this.getWireframeAttribute=f,this.update=i},THREE.WebGLProgram=function(){function i(e,t,n){e=e||{};var r=[e.derivatives||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(a).join("\n")}function s(e){var t=[];for(var n in e){var r=e[n];if(r===!1)continue;t.push("#define "+n+" "+r)}return t.join("\n")}function o(e,i,s){var o={},u=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(var a=0;a<u;a++){var f=e.getActiveUniform(i,a),l=f.name,c=e.getUniformLocation(i,l),h=t.exec(l);if(h){var p=h[1],d=h[2],v=o[p];v||(v=o[p]={}),v[d]=c;continue}h=n.exec(l);if(h){var m=h[1],g=h[2],y=h[3],b=o[m];b||(b=o[m]=[]);var w=b[g];w||(w=b[g]={}),w[y]=c;continue}h=r.exec(l);if(h){var m=h[1];o[m]=c;continue}o[l]=c}return o}function u(e,t,n){var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(var s=0;s<i;s++){var o=e.getActiveAttrib(t,s),u=o.name;r[u]=e.getAttribLocation(t,u)}return r}function a(e){return e!==""}function f(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function l(e){function n(e,t,n,r){var i="";for(var s=parseInt(t);s<parseInt(n);s++)i+=r.replace(/\[ i \]/g,"[ "+s+" ]");return i}var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(t,n)}var e=0,t=/^([\w\d_]+)\.([\w\d_]+)$/,n=/^([\w\d_]+)\[(\d+)\]\.([\w\d_]+)$/,r=/^([\w\d_]+)\[0\]$/;return function(n,r,c,h){var p=n.context,d=c.extensions,v=c.defines,m=c.__webglShader.vertexShader,g=c.__webglShader.fragmentShader,y="SHADOWMAP_TYPE_BASIC";h.shadowMapType===THREE.PCFShadowMap?y="SHADOWMAP_TYPE_PCF":h.shadowMapType===THREE.PCFSoftShadowMap&&(y="SHADOWMAP_TYPE_PCF_SOFT");var b="ENVMAP_TYPE_CUBE",w="ENVMAP_MODE_REFLECTION",E="ENVMAP_BLENDING_MULTIPLY";if(h.envMap){switch(c.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:b="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:b="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:b="ENVMAP_TYPE_SPHERE"}switch(c.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:w="ENVMAP_MODE_REFRACTION"}switch(c.combine){case THREE.MultiplyOperation:E="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:E="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:E="ENVMAP_BLENDING_ADD"}}var S=n.gammaFactor>0?n.gammaFactor:1,x=i(d,h,n.extensions),T=s(v),N=p.createProgram(),C,k;c instanceof THREE.RawShaderMaterial?(C="",k=""):(C=["precision "+h.precision+" float;","precision "+h.precision+" int;","#define SHADER_NAME "+c.__webglShader.name,T,h.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.gammaInput?"#define GAMMA_INPUT":"",n.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+S,"#define MAX_BONES "+h.maxBones,h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+w:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.displacementMap&&h.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals&&h.flatShading===!1?"#define USE_MORPHNORMALS":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+y:"",h.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&n.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(a).join("\n"),k=[x,"precision "+h.precision+" float;","precision "+h.precision+" int;","#define SHADER_NAME "+c.__webglShader.name,T,h.alphaTest?"#define ALPHATEST "+h.alphaTest:"",n.gammaInput?"#define GAMMA_INPUT":"",n.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+S,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+b:"",h.envMap?"#define "+w:"",h.envMap?"#define "+E:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.vertexColors?"#define USE_COLOR":"",h.flatShading?"#define FLAT_SHADED":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+y:"",h.pointLightShadows>0?"#define POINT_LIGHT_SHADOWS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&n.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",h.envMap&&n.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","\n"].filter(a).join("\n")),m=f(m,h),g=f(g,h),c instanceof THREE.ShaderMaterial==0&&(m=l(m),g=l(g));var L=C+m,A=k+g,O=THREE.WebGLShader(p,p.VERTEX_SHADER,L),M=THREE.WebGLShader(p,p.FRAGMENT_SHADER,A);p.attachShader(N,O),p.attachShader(N,M),c.index0AttributeName!==undefined?p.bindAttribLocation(N,0,c.index0AttributeName):h.morphTargets===!0&&p.bindAttribLocation(N,0,"position"),p.linkProgram(N);var _=p.getProgramInfoLog(N),D=p.getShaderInfoLog(O),P=p.getShaderInfoLog(M),H=!0,B=!0;if(p.getProgramParameter(N,p.LINK_STATUS)===!1)H=!1,console.error("THREE.WebGLProgram: shader error: ",p.getError(),"gl.VALIDATE_STATUS",p.getProgramParameter(N,p.VALIDATE_STATUS),"gl.getProgramInfoLog",_,D,P);else if(_!=="")console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",_);else if(D===""||P==="")B=!1;B&&(this.diagnostics={runnable:H,material:c,programLog:_,vertexShader:{log:D,prefix:C},fragmentShader:{log:P,prefix:k}}),p.deleteShader(O),p.deleteShader(M);var j;this.getUniforms=function(){return j===undefined&&(j=o(p,N)),j};var F;return this.getAttributes=function(){return F===undefined&&(F=u(p,N)),F},this.destroy=function(){p.deleteProgram(N),this.program=undefined},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=e++,this.code=r,this.usedTimes=1,this.program=N,this.vertexShader=O,this.fragmentShader=M,this}}(),THREE.WebGLPrograms=function(e,t){function s(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var n=t.maxVertexUniforms,r=Math.floor((n-20)/4),i=r;return e!==undefined&&e instanceof THREE.SkinnedMesh&&(i=Math.min(e.skeleton.bones.length,i),i<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}var n=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"standard",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},i=["precision","supportsVertexTextures","map","envMap","envMapMode","lightMap","aoMap","emissiveMap","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","pointLightShadows","shadowMapType","alphaTest","doubleSided","flipSided"];this.getParameters=function(n,i,o,u){var a=r[n.type],f=s(u),l=e.getPrecision();n.precision!==null&&(l=t.getMaxPrecision(n.precision),l!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",l,"instead."));var c={shaderID:a,precision:l,supportsVertexTextures:t.vertexTextures,map:!!n.map,envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,combine:n.combine,vertexColors:n.vertexColors,fog:o,useFog:n.fog,fogExp:o instanceof THREE.FogExp2,flatShading:n.shading===THREE.FlatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:f,useVertexTexture:t.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numHemiLights:i.hemi.length,pointLightShadows:i.shadowsPointLight,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&i.shadows.length>0,shadowMapType:e.shadowMap.type,alphaTest:n.alphaTest,doubleSided:n.side===THREE.DoubleSide,flipSided:n.side===THREE.BackSide};return c},this.getProgramCode=function(e,t){var n=[];t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader));if(e.defines!==undefined)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var s=0;s<i.length;s++){var o=i[s];n.push(o),n.push(t[o])}return n.join()},this.acquireProgram=function(t,r,i){var s;for(var o=0,u=n.length;o<u;o++){var a=n[o];if(a.code===i){s=a,++s.usedTimes;break}}return s===undefined&&(s=new THREE.WebGLProgram(e,i,t,r),n.push(s)),s},this.releaseProgram=function(e){if(--e.usedTimes===0){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n},THREE.WebGLProperties=function(){var e={};this.get=function(t){var n=t.uuid,r=e[n];return r===undefined&&(r={},e[n]=r),r},this.delete=function(t){delete e[t.uuid]},this.clear=function(){e={}}},THREE.WebGLShader=function(){function e(e){var t=e.split("\n");for(var n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}return function(n,r,i){var s=n.createShader(r);return n.shaderSource(s,i),n.compileShader(s),n.getShaderParameter(s,n.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),n.getShaderInfoLog(s)!==""&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",r===n.VERTEX_SHADER?"vertex":"fragment",n.getShaderInfoLog(s),e(i)),s}}(),THREE.WebGLShadowMap=function(e,t,n){function A(e,t,n,r){var i=e.geometry,s=null,o=d,u=e.customDepthMaterial;n&&(o=v,u=e.customDistanceMaterial);if(!u){var a=i.morphTargets!==undefined&&i.morphTargets.length>0&&t.morphTargets,f=e instanceof THREE.SkinnedMesh&&t.skinning,l=0;a&&(l|=c),f&&(l|=h),s=o[l]}else s=u;return s.visible=t.visible,s.wireframe=t.wireframe,s.wireframeLinewidth=t.wireframeLinewidth,n&&s.uniforms.lightPos!==undefined&&s.uniforms.lightPos.value.copy(r),s}function O(e,t,n){if(e.visible===!1)return;if(e.layers.test(t.layers)&&(e instanceof THREE.Mesh||e instanceof THREE.Line||e instanceof THREE.Points)&&e.castShadow&&(e.frustumCulled===!1||s.intersectsObject(e)===!0)){var r=e.material;r.visible===!0&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),l.push(e))}var i=e.children;for(var o=0,u=i.length;o<u;o++)O(i[o],t,n)}var r=e.context,i=e.state,s=new THREE.Frustum,o=new THREE.Matrix4,u=new THREE.Vector2,a=new THREE.Vector3,f=new THREE.Vector3,l=[],c=1,h=2,p=(c|h)+1,d=new Array(p),v=new Array(p),m=[new THREE.Vector3(1,0,0),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1),new THREE.Vector3(0,1,0),new THREE.Vector3(0,-1,0)],g=[new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(0,0,-1)],y=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],b=THREE.ShaderLib.depthRGBA,w=THREE.UniformsUtils.clone(b.uniforms),E=THREE.ShaderLib.distanceRGBA,S=THREE.UniformsUtils.clone(E.uniforms);for(var x=0;x!==p;++x){var T=(x&c)!==0,N=(x&h)!==0,C=new THREE.ShaderMaterial({uniforms:w,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:T,skinning:N});C._shadowPass=!0,d[x]=C;var k=new THREE.ShaderMaterial({uniforms:S,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,morphTargets:T,skinning:N});k._shadowPass=!0,v[x]=k}var L=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=THREE.PCFShadowMap,this.cullFace=THREE.CullFaceFront,this.render=function(c,h){var p,d;if(L.enabled===!1)return;if(L.autoUpdate===!1&&L.needsUpdate===!1)return;i.clearColor(1,1,1,1),i.disable(r.BLEND),i.enable(r.CULL_FACE),r.frontFace(r.CCW),r.cullFace(L.cullFace===THREE.CullFaceFront?r.FRONT:r.BACK),i.setDepthTest(!0),i.setScissorTest(!1);var v=t.shadows;for(var b=0,w=v.length;b<w;b++){var E=v[b],S=E.shadow,x=S.camera;u.copy(S.mapSize);if(E instanceof THREE.PointLight){p=6,d=!0;var T=u.x,N=u.y;y[0].set(T*2,N,T,N),y[1].set(0,N,T,N),y[2].set(T*3,N,T,N),y[3].set(T,N,T,N),y[4].set(T*3,0,T,N),y[5].set(T,0,T,N),u.x*=4,u.y*=2}else p=1,d=!1;if(S.map===null){var C={minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat};S.map=new THREE.WebGLRenderTarget(u.x,u.y,C),E instanceof THREE.SpotLight&&(x.aspect=u.x/u.y),x.updateProjectionMatrix()}var k=S.map,M=S.matrix;f.setFromMatrixPosition(E.matrixWorld),x.position.copy(f),e.setRenderTarget(k),e.clear();for(var _=0;_<p;_++){if(d){a.copy(x.position),a.add(m[_]),x.up.copy(g[_]),x.lookAt(a);var D=y[_];i.viewport(D)}else a.setFromMatrixPosition(E.target.matrixWorld),x.lookAt(a);x.updateMatrixWorld(),x.matrixWorldInverse.getInverse(x.matrixWorld),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(x.projectionMatrix),M.multiply(x.matrixWorldInverse),o.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),s.setFromMatrix(o),l.length=0,O(c,h,x);for(var P=0,H=l.length;P<H;P++){var B=l[P],j=n.update(B),F=B.material;if(F instanceof THREE.MultiMaterial){var I=j.groups,q=F.materials;for(var R=0,U=I.length;R<U;R++){var z=I[R],W=q[z.materialIndex];if(W.visible===!0){var X=A(B,W,d,f);e.renderBufferDirect(x,null,j,X,B,z)}}}else{var X=A(B,F,d,f);e.renderBufferDirect(x,null,j,X,B,null)}}}e.resetGLState()}var V=e.getClearColor(),$=e.getClearAlpha();e.setClearColor(V,$),i.enable(r.BLEND),L.cullFace===THREE.CullFaceFront&&r.cullFace(r.BACK),e.resetGLState(),L.needsUpdate=!1}},THREE.WebGLState=function(e,t,n){var r=this,i=new THREE.Vector4,s=new Uint8Array(16),o=new Uint8Array(16),u=new Uint8Array(16),a={},f=null,l=null,c=null,h=null,p=null,d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=null,S=null,x=null,T=null,N=null,C=null,k=null,L=null,A=null,O=null,M=null,_=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),D=undefined,P={},H=new THREE.Vector4,B=null,j=null,F=new THREE.Vector4,I=new THREE.Vector4;this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.frontFace(e.CCW),e.cullFace(e.BACK),this.enable(e.CULL_FACE),this.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},this.enableAttribute=function(n){s[n]=1,o[n]===0&&(e.enableVertexAttribArray(n),o[n]=1);if(u[n]!==0){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),u[n]=0}},this.enableAttributeAndDivisor=function(t,n,r){s[t]=1,o[t]===0&&(e.enableVertexAttribArray(t),o[t]=1),u[t]!==n&&(r.vertexAttribDivisorANGLE(t,n),u[t]=n)},this.disableUnusedAttributes=function(){for(var t=0,n=o.length;t<n;t++)o[t]!==s[t]&&(e.disableVertexAttribArray(t),o[t]=0)},this.enable=function(t){a[t]!==!0&&(e.enable(t),a[t]=!0)},this.disable=function(t){a[t]!==!1&&(e.disable(t),a[t]=!1)},this.getCompressedTextureFormats=function(){if(f===null){f=[];if(t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")){var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS);for(var r=0;r<n.length;r++)f.push(n[r])}}return f},this.setBlending=function(t,r,i,s,o,u,a){t===THREE.NoBlending?this.disable(e.BLEND):this.enable(e.BLEND),t!==l&&(t===THREE.AdditiveBlending?(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===THREE.SubtractiveBlending?(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===THREE.MultiplyBlending?(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),l=t);if(t===THREE.CustomBlending){o=o||r,u=u||i,a=a||s;if(r!==c||o!==d)e.blendEquationSeparate(n(r),n(o)),c=r,d=o;if(i!==h||s!==p||u!==v||a!==m)e.blendFuncSeparate(n(i),n(s),n(u),n(a)),h=i,p=s,v=u,m=a}else c=null,h=null,p=null,d=null,v=null,m=null},this.setDepthFunc=function(t){if(g!==t){if(t)switch(t){case THREE.NeverDepth:e.depthFunc(e.NEVER);break;case THREE.AlwaysDepth:e.depthFunc(e.ALWAYS);break;case THREE.LessDepth:e.depthFunc(e.LESS);break;case THREE.LessEqualDepth:e.depthFunc(e.LEQUAL);break;case THREE.EqualDepth:e.depthFunc(e.EQUAL);break;case THREE.GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case THREE.GreaterDepth:e.depthFunc(e.GREATER);break;case THREE.NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);g=t}},this.setDepthTest=function(t){t?this.enable(e.DEPTH_TEST):this.disable(e.DEPTH_TEST)},this.setDepthWrite=function(t){y!==t&&(e.depthMask(t),y=t)},this.setColorWrite=function(t){b!==t&&(e.colorMask(t,t,t,t),b=t)},this.setStencilFunc=function(t,n,r){if(E!==t||S!==n||x!==r)e.stencilFunc(t,n,r),E=t,S=n,x=r},this.setStencilOp=function(t,n,r){if(T!==t||N!==n||C!==r)e.stencilOp(t,n,r),T=t,N=n,C=r},this.setStencilTest=function(t){t?this.enable(e.STENCIL_TEST):this.disable(e.STENCIL_TEST)},this.setStencilWrite=function(t){w!==t&&(e.stencilMask(t),w=t)},this.setFlipSided=function(t){k!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),k=t)},this.setLineWidth=function(t){t!==L&&(e.lineWidth(t),L=t)},this.setPolygonOffset=function(t,n,r){t?this.enable(e.POLYGON_OFFSET_FILL):this.disable(e.POLYGON_OFFSET_FILL),t&&(A!==n||O!==r)&&(e.polygonOffset(n,r),A=n,O=r)},this.getScissorTest=function(){return M},this.setScissorTest=function(t){M=t,t?this.enable(e.SCISSOR_TEST):this.disable(e.SCISSOR_TEST)},this.activeTexture=function(t){t===undefined&&(t=e.TEXTURE0+_-1),D!==t&&(e.activeTexture(t),D=t)},this.bindTexture=function(t,n){D===undefined&&r.activeTexture();var i=P[D];i===undefined&&(i={type:undefined,texture:undefined},P[D]=i);if(i.type!==t||i.texture!==n)e.bindTexture(t,n),i.type=t,i.texture=n},this.compressedTexImage2D=function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error(t)}},this.texImage2D=function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error(t)}},this.clearColor=function(t,n,r,s){i.set(t,n,r,s),H.equals(i)===!1&&(e.clearColor(t,n,r,s),H.copy(i))},this.clearDepth=function(t){B!==t&&(e.clearDepth(t),B=t)},this.clearStencil=function(t){j!==t&&(e.clearStencil(t),j=t)},this.scissor=function(t){F.equals(t)===!1&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},this.viewport=function(t){I.equals(t)===!1&&(e.viewport(t.x,t.y,t.z,t.w),I.copy(t))},this.reset=function(){for(var t=0;t<o.length;t++)o[t]===1&&(e.disableVertexAttribArray(t),o[t]=0);a={},f=null,l=null,b=null,y=null,w=null,k=null}},THREE.LensFlarePlugin=function(e,t){function h(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);i=n.createBuffer(),s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),l=n.createTexture(),c=n.createTexture(),r.bindTexture(n.TEXTURE_2D,l),n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),r.bindTexture(n.TEXTURE_2D,c),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,16,16,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;var h;f?h={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:h={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},o=p(h),u={vertex:n.getAttribLocation(o,"position"),uv:n.getAttribLocation(o,"uv")},a={renderType:n.getUniformLocation(o,"renderType"),map:n.getUniformLocation(o,"map"),occlusionMap:n.getUniformLocation(o,"occlusionMap"),opacity:n.getUniformLocation(o,"opacity"),color:n.getUniformLocation(o,"color"),scale:n.getUniformLocation(o,"scale"),rotation:n.getUniformLocation(o,"rotation"),screenPosition:n.getUniformLocation(o,"screenPosition")}}function p(t){var r=n.createProgram(),i=n.createShader(n.FRAGMENT_SHADER),s=n.createShader(n.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return n.shaderSource(i,o+t.fragmentShader),n.shaderSource(s,o+t.vertexShader),n.compileShader(i),n.compileShader(s),n.attachShader(r,i),n.attachShader(r,s),n.linkProgram(r),r}var n=e.context,r=e.state,i,s,o,u,a,f,l,c;this.render=function(p,d,v){if(t.length===0)return;var m=new THREE.Vector3,g=v.w/v.z,y=v.z*.5,b=v.w*.5,w=16/v.w,E=new THREE.Vector2(w*g,w),S=new THREE.Vector3(1,1,0),x=new THREE.Vector2(1,1);o===undefined&&h(),n.useProgram(o),r.initAttributes(),r.enableAttribute(u.vertex),r.enableAttribute(u.uv),r.disableUnusedAttributes(),n.uniform1i(a.occlusionMap,0),n.uniform1i(a.map,1),n.bindBuffer(n.ARRAY_BUFFER,i),n.vertexAttribPointer(u.vertex,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(u.uv,2,n.FLOAT,!1,16,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s),r.disable(n.CULL_FACE),r.setDepthWrite(!1);for(var T=0,N=t.length;T<N;T++){w=16/v.w,E.set(w*g,w);var C=t[T];m.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),m.applyMatrix4(d.matrixWorldInverse),m.applyProjection(d.projectionMatrix),S.copy(m),x.x=S.x*y+y,x.y=S.y*b+b;if(f||x.x>0&&x.x<v.z&&x.y>0&&x.y<v.w){r.activeTexture(n.TEXTURE0),r.bindTexture(n.TEXTURE_2D,null),r.activeTexture(n.TEXTURE1),r.bindTexture(n.TEXTURE_2D,l),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,v.x+x.x-8,v.y+x.y-8,16,16,0),n.uniform1i(a.renderType,0),n.uniform2f(a.scale,E.x,E.y),n.uniform3f(a.screenPosition,S.x,S.y,S.z),r.disable(n.BLEND),r.enable(n.DEPTH_TEST),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),r.activeTexture(n.TEXTURE0),r.bindTexture(n.TEXTURE_2D,c),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,v.x+x.x-8,v.y+x.y-8,16,16,0),n.uniform1i(a.renderType,1),r.disable(n.DEPTH_TEST),r.activeTexture(n.TEXTURE1),r.bindTexture(n.TEXTURE_2D,l),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),C.positionScreen.copy(S),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),n.uniform1i(a.renderType,2),r.enable(n.BLEND);for(var k=0,L=C.lensFlares.length;k<L;k++){var A=C.lensFlares[k];A.opacity>.001&&A.scale>.001&&(S.x=A.x,S.y=A.y,S.z=A.z,w=A.size*A.scale/v.w,E.x=w*g,E.y=w,n.uniform3f(a.screenPosition,S.x,S.y,S.z),n.uniform2f(a.scale,E.x,E.y),n.uniform1f(a.rotation,A.rotation),n.uniform1f(a.opacity,A.opacity),n.uniform3f(a.color,A.color.r,A.color.g,A.color.b),r.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst),e.setTexture(A.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}}r.enable(n.CULL_FACE),r.enable(n.DEPTH_TEST),r.setDepthWrite(!0),e.resetGLState()}},THREE.SpritePlugin=function(e,t){function p(){var e=new Float32Array([-0.5,-0.5,0,0,.5,-0.5,1,0,.5,.5,1,1,-0.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);i=n.createBuffer(),s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW),o=d(),u={position:n.getAttribLocation(o,"position"),uv:n.getAttribLocation(o,"uv")},a={uvOffset:n.getUniformLocation(o,"uvOffset"),uvScale:n.getUniformLocation(o,"uvScale"),rotation:n.getUniformLocation(o,"rotation"),scale:n.getUniformLocation(o,"scale"),color:n.getUniformLocation(o,"color"),map:n.getUniformLocation(o,"map"),opacity:n.getUniformLocation(o,"opacity"),modelViewMatrix:n.getUniformLocation(o,"modelViewMatrix"),projectionMatrix:n.getUniformLocation(o,"projectionMatrix"),fogType:n.getUniformLocation(o,"fogType"),fogDensity:n.getUniformLocation(o,"fogDensity"),fogNear:n.getUniformLocation(o,"fogNear"),fogFar:n.getUniformLocation(o,"fogFar"),fogColor:n.getUniformLocation(o,"fogColor"),alphaTest:n.getUniformLocation(o,"alphaTest")};var r=document.createElement("canvas");r.width=8,r.height=8;var l=r.getContext("2d");l.fillStyle="white",l.fillRect(0,0,8,8),f=new THREE.Texture(r),f.needsUpdate=!0}function d(){var t=n.createProgram(),r=n.createShader(n.VERTEX_SHADER),i=n.createShader(n.FRAGMENT_SHADER);return n.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),n.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),n.compileShader(r),n.compileShader(i),n.attachShader(t,r),n.attachShader(t,i),n.linkProgram(t),t}function v(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var n=e.context,r=e.state,i,s,o,u,a,f,l=new THREE.Vector3,c=new THREE.Quaternion,h=new THREE.Vector3;this.render=function(d,m){if(t.length===0)return;o===undefined&&p(),n.useProgram(o),r.initAttributes(),r.enableAttribute(u.position),r.enableAttribute(u.uv),r.disableUnusedAttributes(),r.disable(n.CULL_FACE),r.enable(n.BLEND),n.bindBuffer(n.ARRAY_BUFFER,i),n.vertexAttribPointer(u.position,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(u.uv,2,n.FLOAT,!1,16,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s),n.uniformMatrix4fv(a.projectionMatrix,!1,m.projectionMatrix.elements),r.activeTexture(n.TEXTURE0),n.uniform1i(a.map,0);var g=0,y=0,b=d.fog;b?(n.uniform3f(a.fogColor,b.color.r,b.color.g,b.color.b),b instanceof THREE.Fog?(n.uniform1f(a.fogNear,b.near),n.uniform1f(a.fogFar,b.far),n.uniform1i(a.fogType,1),g=1,y=1):b instanceof THREE.FogExp2&&(n.uniform1f(a.fogDensity,b.density),n.uniform1i(a.fogType,2),g=2,y=2)):(n.uniform1i(a.fogType,0),g=0,y=0);for(var w=0,E=t.length;w<E;w++){var S=t[w];S.modelViewMatrix.multiplyMatrices(m.matrixWorldInverse,S.matrixWorld),S.z=-S.modelViewMatrix.elements[14]}t.sort(v);var x=[];for(var w=0,E=t.length;w<E;w++){var S=t[w],T=S.material;n.uniform1f(a.alphaTest,T.alphaTest),n.uniformMatrix4fv(a.modelViewMatrix,!1,S.modelViewMatrix.elements),S.matrixWorld.decompose(l,c,h),x[0]=h.x,x[1]=h.y;var N=0;d.fog&&T.fog&&(N=y),g!==N&&(n.uniform1i(a.fogType,N),g=N),T.map!==null?(n.uniform2f(a.uvOffset,T.map.offset.x,T.map.offset.y),n.uniform2f(a.uvScale,T.map.repeat.x,T.map.repeat.y)):(n.uniform2f(a.uvOffset,0,0),n.uniform2f(a.uvScale,1,1)),n.uniform1f(a.opacity,T.opacity),n.uniform3f(a.color,T.color.r,T.color.g,T.color.b),n.uniform1f(a.rotation,T.rotation),n.uniform2fv(a.scale,x),r.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),r.setDepthTest(T.depthTest),r.setDepthWrite(T.depthWrite),T.map&&T.map.image&&T.map.image.width?e.setTexture(T.map,0):e.setTexture(f,0),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}r.enable(n.CULL_FACE),e.resetGLState()}},Object.defineProperties(THREE.Box2.prototype,{empty:{value:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()}},isIntersectionBox:{value:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)}}}),Object.defineProperties(THREE.Box3.prototype,{empty:{value:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()}},isIntersectionBox:{value:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)}},isIntersectionSphere:{value:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}}),Object.defineProperties(THREE.Matrix3.prototype,{multiplyVector3:{value:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)}},multiplyVector3Array:{value:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)}}}),Object.defineProperties(THREE.Matrix4.prototype,{extractPosition:{value:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)}},setRotationFromQuaternion:{value:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)}},multiplyVector3:{value:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)}},multiplyVector4:{value:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)}},multiplyVector3Array:{value:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)}},rotateAxis:{value:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)}},crossVector:{value:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)}},translate:{value:function(e){console.error("THREE.Matrix4: .translate() has been removed.")}},rotateX:{value:function(e){console.error("THREE.Matrix4: .rotateX() has been removed.")}},rotateY:{value:function(e){console.error("THREE.Matrix4: .rotateY() has been removed.")}},rotateZ:{value:function(e){console.error("THREE.Matrix4: .rotateZ() has been removed.")}},rotateByAxis:{value:function(e,t){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}}),Object.defineProperties(THREE.Plane.prototype,{isIntersectionLine:{value:function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)}}}),Object.defineProperties(THREE.Quaternion.prototype,{multiplyVector3:{value:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)}}}),Object.defineProperties(THREE.Ray.prototype,{isIntersectionBox:{value:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)}},isIntersectionPlane:{value:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)}},isIntersectionSphere:{value:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}}),Object.defineProperties(THREE.Vector3.prototype,{setEulerFromRotationMatrix:{value:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")}},setEulerFromQuaternion:{value:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")}},getPositionFromMatrix:{value:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)}},getScaleFromMatrix:{value:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)}},getColumnFromMatrix:{value:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)}}}),THREE.Face4=function(e,t,n,r,i,s,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,n,i,s,o)},Object.defineProperties(THREE.Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},getChildByName:{value:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)}},renderDepth:{set:function(e){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")}},translate:{value:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(THREE,{PointCloud:{value:function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new THREE.Points(e,t)}},ParticleSystem:{value:function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new THREE.Points(e,t)}}}),Object.defineProperties(THREE.Light.prototype,{onlyShadow:{set:function(e){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(e){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(e){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(THREE.BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.defineProperties(THREE.BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}},addIndex:{value:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)}},addDrawCall:{value:function(e,t,n){n!==undefined&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)}},clearDrawCalls:{value:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()}},computeTangents:{value:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")}},computeOffsets:{value:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}}),Object.defineProperties(THREE.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(e){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new THREE.Color}}}),Object.defineProperties(THREE,{PointCloudMaterial:{value:function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(e)}},ParticleBasicMaterial:{value:function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(e)}},ParticleSystemMaterial:{value:function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new THREE.PointsMaterial(e)}}}),Object.defineProperties(THREE.MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(e){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(THREE.ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.defineProperties(THREE.WebGLRenderer.prototype,{supportsFloatTextures:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")}},supportsHalfFloatTextures:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")}},supportsStandardDerivatives:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")}},supportsCompressedTextureS3TC:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")}},supportsCompressedTexturePVRTC:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")}},supportsBlendMinMax:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")}},supportsVertexTextures:{value:function(){return this.capabilities.vertexTextures}},supportsInstancedArrays:{value:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")}},enableScissorTest:{value:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)}},initMaterial:{value:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")}},addPrePlugin:{value:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")}},addPostPlugin:{value:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")}},updateShadowMap:{value:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(THREE.WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),THREE.GeometryUtils={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},THREE.ImageUtils={crossOrigin:undefined,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new THREE.TextureLoader;i.setCrossOrigin(this.crossOrigin);var s=i.load(e,n,undefined,r);return t&&(s.mapping=t),s},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new THREE.CubeTextureLoader;i.setCrossOrigin(this.crossOrigin);var s=i.load(e,n,undefined,r);return t&&(s.mapping=t),s},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},THREE.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},THREE.MeshFaceMaterial=THREE.MultiMaterial,THREE.CurveUtils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){var s=6*e*e-6*e,o=3*e*e-4*e+1,u=-6*e*e+6*e,a=3*e*e-2*e;return s+o+u+a},interpolate:function(e,t,n,r,i){var s=(n-e)*.5,o=(r-t)*.5,u=i*i,a=i*u;return(2*t-2*n+s+o)*a+(-3*t+3*n-2*s-o)*u+s*i+t}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){var n=new THREE.Group;for(var r=0,i=t.length;r<i;r++)n.add(new THREE.Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new THREE.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},THREE.ShapeUtils={area:function(e){var t=e.length,n=0;for(var r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5},triangulate:function(){function e(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d;u=e[s[t]].x,a=e[s[t]].y,f=e[s[n]].x,l=e[s[n]].y,c=e[s[r]].x,h=e[s[r]].y;if(Number.EPSILON>(f-u)*(h-a)-(l-a)*(c-u))return!1;var v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;v=c-f,m=h-l,g=u-c,y=a-h,b=f-u,w=l-a;for(o=0;o<i;o++){p=e[s[o]].x,d=e[s[o]].y;if(p===u&&d===a||p===f&&d===l||p===c&&d===h)continue;E=p-u,S=d-a,x=p-f,T=d-l,N=p-c,C=d-h,A=v*T-m*x,k=b*S-w*E,L=g*C-y*N;if(A>=-Number.EPSILON&&L>=-Number.EPSILON&&k>=-Number.EPSILON)return!1}return!0}return function(t,n){var r=t.length;if(r<3)return null;var i=[],s=[],o=[],u,a,f;if(THREE.ShapeUtils.area(t)>0)for(a=0;a<r;a++)s[a]=a;else for(a=0;a<r;a++)s[a]=r-1-a;var l=r,c=2*l;for(a=l-1;l>2;){if(c--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?o:i;u=a,l<=u&&(u=0),a=u+1,l<=a&&(a=0),f=a+1,l<=f&&(f=0);if(e(t,u,a,f,l,s)){var h,p,d,v,m;h=s[u],p=s[a],d=s[f],i.push([t[h],t[p],t[d]]),o.push([s[u],s[a],s[f]]);for(v=a,m=a+1;m<l;v++,m++)s[v]=s[m];l--,c=2*l}}return n?o:i}}(),triangulateShape:function(e,t){function n(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function r(e,t,r,i,s){var o=t.x-e.x,u=t.y-e.y,a=i.x-r.x,f=i.y-r.y,l=e.x-r.x,c=e.y-r.y,h=u*a-o*f,p=u*l-o*c;if(Math.abs(h)>Number.EPSILON){var d;if(h>0){if(p<0||p>h)return[];d=f*l-a*c;if(d<0||d>h)return[]}else{if(p>0||p<h)return[];d=f*l-a*c;if(d>0||d<h)return[]}if(d===0)return!s||p!==0&&p!==h?[e]:[];if(d===h)return!s||p!==0&&p!==h?[t]:[];if(p===0)return[r];if(p===h)return[i];var v=d/h;return[{x:e.x+v*o,y:e.y+v*u}]}if(p!==0||f*l!==a*c)return[];var m=o===0&&u===0,g=a===0&&f===0;if(m&&g)return e.x!==r.x||e.y!==r.y?[]:[e];if(m)return n(r,i,e)?[e]:[];if(g)return n(e,t,r)?[r]:[];var y,b,w,E,S,x,T,N;o!==0?(e.x<t.x?(y=e,w=e.x,b=t,E=t.x):(y=t,w=t.x,b=e,E=e.x),r.x<i.x?(S=r,T=r.x,x=i,N=i.x):(S=i,T=i.x,x=r,N=r.x)):(e.y<t.y?(y=e,w=e.y,b=t,E=t.y):(y=t,w=t.y,b=e,E=e.y),r.y<i.y?(S=r,T=r.y,x=i,N=i.y):(S=i,T=i.y,x=r,N=r.y));if(w<=T)return E<T?[]:E===T?s?[]:[S]:E<=N?[S,b]:[S,x];return w>N?[]:w===N?s?[]:[y]:E<=N?[y,b]:[y,x]}function i(e,t,n,r){var i=t.x-e.x,s=t.y-e.y,o=n.x-e.x,u=n.y-e.y,a=r.x-e.x,f=r.y-e.y,l=i*u-s*o,c=i*f-s*a;if(Math.abs(l)>Number.EPSILON){var h=a*u-f*o;return l>0?c>=0&&h>=0:c>=0||h>=0}return c>0}function s(e,t){function o(e,t){var r=n.length-1,o=e-1;o<0&&(o=r);var u=e+1;u>r&&(u=0);var a=i(n[e],n[o],n[u],s[t]);if(!a)return!1;var f=s.length-1,l=t-1;l<0&&(l=f);var c=t+1;return c>f&&(c=0),a=i(s[t],s[l],s[c],n[e]),a?!0:!1}function u(e,t){var i,s,o;for(i=0;i<n.length;i++){s=i+1,s%=n.length,o=r(e,t,n[i],n[s],!0);if(o.length>0)return!0}return!1}function f(e,n){var i,s,o,u,f;for(i=0;i<a.length;i++){s=t[a[i]];for(o=0;o<s.length;o++){u=o+1,u%=s.length,f=r(e,n,s[o],s[u],!0);if(f.length>0)return!0}}return!1}var n=e.concat(),s,a=[],l,c,h,p,d,v,m=[],g,y,b,w;for(var E=0,S=t.length;E<S;E++)a.push(E);var x=0,T=a.length*2;while(a.length>0){T--;if(T<0){console.log("Infinite Loop! Holes left:"+a.length+", Probably Hole outside Shape!");break}for(c=x;c<n.length;c++){h=n[c],l=-1;for(var E=0;E<a.length;E++){d=a[E],v=h.x+":"+h.y+":"+d;if(m[v]!==undefined)continue;s=t[d];for(var N=0;N<s.length;N++){p=s[N];if(!o(c,N))continue;if(u(h,p))continue;if(f(h,p))continue;l=N,a.splice(E,1),g=n.slice(0,c+1),y=n.slice(c),b=s.slice(l),w=s.slice(0,l+1),n=g.concat(b).concat(w).concat(y),x=c;break}if(l>=0)break;m[v]=!0}if(l>=0)break}}return n}var o,u,a,f,l,c,h={},p=e.concat();for(var d=0,v=t.length;d<v;d++)Array.prototype.push.apply(p,t[d]);for(o=0,u=p.length;o<u;o++)l=p[o].x+":"+p[o].y,h[l]!==undefined&&console.warn("THREE.Shape: Duplicate point",l),h[l]=o;var m=s(e,t),g=THREE.ShapeUtils.triangulate(m,!1);for(o=0,u=g.length;o<u;o++){f=g[o];for(a=0;a<3;a++)l=f[a].x+":"+f[a].y,c=h[l],c!==undefined&&(f[a]=c)}return g.concat()},isClockWise:function(e){return THREE.ShapeUtils.area(e)<0},b2:function(){function e(e,t){var n=1-e;return n*n*t}function t(e,t){return 2*(1-e)*e*t}function n(e,t){return e*e*t}return function(r,i,s,o){return e(r,i)+t(r,s)+n(r,o)}}(),b3:function(){function e(e,t){var n=1-e;return n*n*n*t}function t(e,t){var n=1-e;return 3*n*n*e*t}function n(e,t){var n=1-e;return 3*n*e*e*t}function r(e,t){return e*e*e*t}return function(i,s,o,u,a){return e(i,s)+t(i,o)+n(i,u)+r(i,a)}}()},THREE.Curve=function(){},THREE.Curve.prototype={constructor:THREE.Curve,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPoint(t/e));return n},getSpacedPoints:function(e){e||(e=5);var t,n=[];for(t=0;t<=e;t++)n.push(this.getPointAt(t/e));return n},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n,r=this.getPoint(0),i,s=0;t.push(0);for(i=1;i<=e;i++)n=this.getPoint(i/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=0,i=n.length,s;t?s=t:s=e*n[i-1];var o=0,u=i-1,a;while(o<=u){r=Math.floor(o+(u-o)/2),a=n[r]-s;if(a<0)o=r+1;else{if(!(a>0)){u=r;break}u=r-1}}r=u;if(n[r]===s){var f=r/(i-1);return f}var l=n[r],c=n[r+1],h=c-l,p=(s-l)/h,f=(r+p)/(i-1);return f},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),s=this.getPoint(r),o=s.clone().sub(i);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.constructor=THREE.CurvePath,THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){var t=e*this.getLength(),n=this.getCurveLengths(),r=0;while(r<n.length){if(n[r]>=t){var i=n[r]-t,s=this.curves[r],o=1-i/s.getLength();return s.getPointAt(o)}r++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var e=[],t=0;for(var n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e);return this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(e){var t=new THREE.Geometry;for(var n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new THREE.Vector3(i.x,i.y,i.z||0))}return t},THREE.Font=function(e){this.data=e},THREE.Font.prototype={constructor:THREE.Font,generateShapes:function(e,t,n){function r(e){var n=String(e).split(""),r=t/s.resolution,o=0,u=[];for(var a=0;a<n.length;a++){var f=i(n[a],r,o);o+=f.offset,u.push(f.path)}return u}function i(e,t,r){var i=s.glyphs[e]||s.glyphs["?"];if(!i)return;var o=new THREE.Path,u=[],a=THREE.ShapeUtils.b2,f=THREE.ShapeUtils.b3,l,c,h,p,d,v,m,g,y,b,w;if(i.o){var E=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(var S=0,x=E.length;S<x;){var T=E[S++];switch(T){case"m":l=E[S++]*t+r,c=E[S++]*t,o.moveTo(l,c);break;case"l":l=E[S++]*t+r,c=E[S++]*t,o.lineTo(l,c);break;case"q":h=E[S++]*t+r,p=E[S++]*t,m=E[S++]*t+r,g=E[S++]*t,o.quadraticCurveTo(m,g,h,p),w=u[u.length-1];if(w){d=w.x,v=w.y;for(var N=1;N<=n;N++){var C=N/n;a(C,d,m,h),a(C,v,g,p)}}break;case"b":h=E[S++]*t+r,p=E[S++]*t,m=E[S++]*t+r,g=E[S++]*t,y=E[S++]*t+r,b=E[S++]*t,o.bezierCurveTo(m,g,y,b,h,p),w=u[u.length-1];if(w){d=w.x,v=w.y;for(var N=1;N<=n;N++){var C=N/n;f(C,d,m,y,h),f(C,v,g,b,p)}}}}}return{offset:i.ha*t,path:o}}t===undefined&&(t=100),n===undefined&&(n=4);var s=this.data,o=r(e),u=[];for(var a=0,f=o.length;a<f;a++)Array.prototype.push.apply(u,o[a].toShapes());return u}},THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.Path.prototype.constructor=THREE.Path,THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(e,t){this.actions.push({action:"moveTo",args:[e,t]})},THREE.Path.prototype.lineTo=function(e,t){var n=this.actions[this.actions.length-1].args,r=n[n.length-2],i=n[n.length-1],s=new THREE.LineCurve(new THREE.Vector2(r,i),new THREE.Vector2(e,t));this.curves.push(s),this.actions.push({action:"lineTo",args:[e,t]})},THREE.Path.prototype.quadraticCurveTo=function(e,t,n,r){var i=this.actions[this.actions.length-1].args,s=i[i.length-2],o=i[i.length-1],u=new THREE.QuadraticBezierCurve(new THREE.Vector2(s,o),new THREE.Vector2(e,t),new THREE.Vector2(n,r));this.curves.push(u),this.actions.push({action:"quadraticCurveTo",args:[e,t,n,r]})},THREE.Path.prototype.bezierCurveTo=function(e,t,n,r,i,s){var o=this.actions[this.actions.length-1].args,u=o[o.length-2],a=o[o.length-1],f=new THREE.CubicBezierCurve(new THREE.Vector2(u,a),new THREE.Vector2(e,t),new THREE.Vector2(n,r),new THREE.Vector2(i,s));this.curves.push(f),this.actions.push({action:"bezierCurveTo",args:[e,t,n,r,i,s]})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,r=n[n.length-2],i=n[n.length-1],s=[new THREE.Vector2(r,i)];Array.prototype.push.apply(s,e);var o=new THREE.SplineCurve(s);this.curves.push(o),this.actions.push({action:"splineThru",args:t})},THREE.Path.prototype.arc=function(e,t,n,r,i,s){var o=this.actions[this.actions.length-1].args,u=o[o.length-2],a=o[o.length-1];this.absarc(e+u,t+a,n,r,i,s)},THREE.Path.prototype.absarc=function(e,t,n,r,i,s){this.absellipse(e,t,n,n,r,i,s)},THREE.Path.prototype.ellipse=function(e,t,n,r,i,s,o,u){var a=this.actions[this.actions.length-1].args,f=a[a.length-2],l=a[a.length-1];this.absellipse(e+f,t+l,n,r,i,s,o,u)},THREE.Path.prototype.absellipse=function(e,t,n,r,i,s,o,u){var a=[e,t,n,r,i,s,o,u||0],f=new THREE.EllipseCurve(e,t,n,r,i,s,o,u);this.curves.push(f);var l=f.getPoint(1);a.push(l.x),a.push(l.y),this.actions.push({action:"ellipse",args:a})},THREE.Path.prototype.getSpacedPoints=function(e){e||(e=40);var t=[];for(var n=0;n<e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},THREE.Path.prototype.getPoints=function(e){e=e||12;var t=THREE.ShapeUtils.b2,n=THREE.ShapeUtils.b3,r=[],i,s,o,u,a,f,l,c,h,p,d;for(var v=0,m=this.actions.length;v<m;v++){var g=this.actions[v],y=g.action,b=g.args;switch(y){case"moveTo":r.push(new THREE.Vector2(b[0],b[1]));break;case"lineTo":r.push(new THREE.Vector2(b[0],b[1]));break;case"quadraticCurveTo":i=b[2],s=b[3],a=b[0],f=b[1],r.length>0?(h=r[r.length-1],l=h.x,c=h.y):(h=this.actions[v-1].args,l=h[h.length-2],c=h[h.length-1]);for(var w=1;w<=e;w++){var E=w/e;p=t(E,l,a,i),d=t(E,c,f,s),r.push(new THREE.Vector2(p,d))}break;case"bezierCurveTo":i=b[4],s=b[5],a=b[0],f=b[1],o=b[2],u=b[3],r.length>0?(h=r[r.length-1],l=h.x,c=h.y):(h=this.actions[v-1].args,l=h[h.length-2],c=h[h.length-1]);for(var w=1;w<=e;w++){var E=w/e;p=n(E,l,a,o,i),d=n(E,c,f,u,s),r.push(new THREE.Vector2(p,d))}break;case"splineThru":h=this.actions[v-1].args;var S=new THREE.Vector2(h[h.length-2],h[h.length-1]),x=[S],T=e*b[0].length;x=x.concat(b[0]);var N=new THREE.SplineCurve(x);for(var w=1;w<=T;w++)r.push(N.getPointAt(w/T));break;case"arc":var C=b[0],k=b[1],L=b[2],A=b[3],O=b[4],M=!!b[5],_=O-A,D,P=e*2;for(var w=1;w<=P;w++){var E=w/P;M||(E=1-E),D=A+E*_,p=C+L*Math.cos(D),d=k+L*Math.sin(D),r.push(new THREE.Vector2(p,d))}break;case"ellipse":var C=b[0],k=b[1],H=b[2],B=b[3],A=b[4],O=b[5],M=!!b[6],j=b[7],_=O-A,D,P=e*2,F,I;j!==0&&(F=Math.cos(j),I=Math.sin(j));for(var w=1;w<=P;w++){var E=w/P;M||(E=1-E),D=A+E*_,p=C+H*Math.cos(D),d=k+B*Math.sin(D);if(j!==0){var q=p,R=d;p=(q-C)*F-(R-k)*I+C,d=(q-C)*I+(R-k)*F+k}r.push(new THREE.Vector2(p,d))}}}var U=r[r.length-1];return Math.abs(U.x-r[0].x)<Number.EPSILON&&Math.abs(U.y-r[0].y)<Number.EPSILON&&r.splice(r.length-1,1),this.autoClose&&r.push(r[0]),r},THREE.Path.prototype.toShapes=function(e,t){function n(e){var t=[],n=new THREE.Path;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=s.args,u=s.action;u==="moveTo"&&n.actions.length!==0&&(t.push(n),n=new THREE.Path),n[u].apply(n,o)}return n.actions.length!==0&&t.push(n),t}function r(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n],s=new THREE.Shape;s.actions=i.actions,s.curves=i.curves,t.push(s)}return t}function i(e,t){var n=t.length,r=!1;for(var i=n-1,s=0;s<n;i=s++){var o=t[i],u=t[s],a=u.x-o.x,f=u.y-o.y;if(Math.abs(f)>Number.EPSILON){f<0&&(o=t[s],a=-a,u=t[i],f=-f);if(e.y<o.y||e.y>u.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var l=f*(e.x-o.x)-a*(e.y-o.y);if(l===0)return!0;if(l<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(u.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=u.x)return!0}}return r}var s=THREE.ShapeUtils.isClockWise,o=n(this.actions);if(o.length===0)return[];if(t===!0)return r(o);var u,a,f,l=[];if(o.length===1)return a=o[0],f=new THREE.Shape,f.actions=a.actions,f.curves=a.curves,l.push(f),l;var c=!s(o[0].getPoints());c=e?!c:c;var h=[],p=[],d=[],v=0,m;p[v]=undefined,d[v]=[];for(var g=0,y=o.length;g<y;g++)a=o[g],m=a.getPoints(),u=s(m),u=e?!u:u,u?(!c&&p[v]&&v++,p[v]={s:new THREE.Shape,p:m},p[v].s.actions=a.actions,p[v].s.curves=a.curves,c&&v++,d[v]=[]):d[v].push({h:a,p:m[0]});if(!p[0])return r(o);if(p.length>1){var b=!1,w=[];for(var E=0,S=p.length;E<S;E++)h[E]=[];for(var E=0,S=p.length;E<S;E++){var x=d[E];for(var T=0;T<x.length;T++){var N=x[T],C=!0;for(var k=0;k<p.length;k++)i(N.p,p[k].p)&&(E!==k&&w.push({froms:E,tos:k,hole:T}),C?(C=!1,h[k].push(N)):b=!0);C&&h[E].push(N)}}w.length>0&&(b||(d=h))}var L;for(var g=0,A=p.length;g<A;g++){f=p[g].s,l.push(f),L=d[g];for(var O=0,M=L.length;O<M;O++)f.holes.push(L[O].h)}return l},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.constructor=THREE.Shape,THREE.Shape.prototype.extrude=function(e){return new THREE.ExtrudeGeometry(this,e)},THREE.Shape.prototype.makeGeometry=function(e){return new THREE.ShapeGeometry(this,e)},THREE.Shape.prototype.getPointsHoles=function(e){var t=[];for(var n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.extractAllPoints(e)},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.constructor=THREE.LineCurve,THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},THREE.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve,THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t=THREE.ShapeUtils.b2;return new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t=THREE.CurveUtils.tangentQuadraticBezier;return(new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))).normalize()},THREE.CubicBezierCurve=function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve,THREE.CubicBezierCurve.prototype.getPoint=function(e){var t=THREE.ShapeUtils.b3;return new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t=THREE.CurveUtils.tangentCubicBezier;return(new THREE.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))).normalize()},THREE.SplineCurve=function(e){this.points=e==undefined?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.constructor=THREE.SplineCurve,THREE.SplineCurve.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,s=t[r===0?r:r-1],o=t[r],u=t[r>t.length-2?t.length-1:r+1],a=t[r>t.length-3?t.length-1:r+2],f=THREE.CurveUtils.interpolate;return new THREE.Vector2(f(s.x,o.x,u.x,a.x,i),f(s.y,o.y,u.y,a.y,i))},THREE.EllipseCurve=function(e,t,n,r,i,s,o,u){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=u||0},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve,THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;t<0&&(t+=Math.PI*2),t>Math.PI*2&&(t-=Math.PI*2);var n;this.aClockwise===!0?n=this.aEndAngle+(1-e)*(Math.PI*2-t):n=this.aStartAngle+e*t;var r=this.aX+this.xRadius*Math.cos(n),i=this.aY+this.yRadius*Math.sin(n);if(this.aRotation!==0){var s=Math.cos(this.aRotation),o=Math.sin(this.aRotation),u=r,a=i;r=(u-this.aX)*s-(a-this.aY)*o+this.aX,i=(u-this.aX)*o+(a-this.aY)*s+this.aY}return new THREE.Vector2(r,i)},THREE.ArcCurve=function(e,t,n,r,i,s){THREE.EllipseCurve.call(this,e,t,n,n,r,i,s)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.ArcCurve.prototype.constructor=THREE.ArcCurve,THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=THREE.ShapeUtils.b2;return new THREE.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=THREE.ShapeUtils.b3;return new THREE.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),THREE.SplineCurve3=THREE.Curve.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=e==undefined?[]:e},function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,s=t[r==0?r:r-1],o=t[r],u=t[r>t.length-2?t.length-1:r+1],a=t[r>t.length-3?t.length-1:r+2],f=THREE.CurveUtils.interpolate;return new THREE.Vector3(f(s.x,o.x,u.x,a.x,i),f(s.y,o.y,u.y,a.y,i),f(s.z,o.z,u.z,a.z,i))}),THREE.CatmullRomCurve3=function(){function i(){}var e=new THREE.Vector3,t=new i,n=new i,r=new i;return i.prototype.init=function(e,t,n,r){this.c0=e,this.c1=n,this.c2=-3*e+3*t-2*n-r,this.c3=2*e-2*t+n+r},i.prototype.initNonuniformCatmullRom=function(e,t,n,r,i,s,o){var u=(t-e)/i-(n-e)/(i+s)+(n-t)/s,a=(n-t)/s-(r-t)/(s+o)+(r-n)/o;u*=s,a*=s,this.init(t,n,u,a)},i.prototype.initCatmullRom=function(e,t,n,r,i){this.init(t,n,i*(n-e),i*(r-t))},i.prototype.calc=function(e){var t=e*e,n=t*e;return this.c0+this.c1*e+this.c2*t+this.c3*n},THREE.Curve.create(function(e){this.points=e||[],this.closed=!1},function(i){var s=this.points,o,u,a,f;f=s.length,f<2&&console.log("duh, you need at least 2 points"),o=(f-(this.closed?0:1))*i,u=Math.floor(o),a=o-u,this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s.length)+1)*s.length:a===0&&u===f-1&&(u=f-2,a=1);var l,c,h,p;this.closed||u>0?l=s[(u-1)%f]:(e.subVectors(s[0],s[1]).add(s[0]),l=e),c=s[u%f],h=s[(u+1)%f],this.closed||u+2<f?p=s[(u+2)%f]:(e.subVectors(s[f-1],s[f-2]).add(s[f-1]),p=e);if(this.type===undefined||this.type==="centripetal"||this.type==="chordal"){var d=this.type==="chordal"?.5:.25,v=Math.pow(l.distanceToSquared(c),d),m=Math.pow(c.distanceToSquared(h),d),g=Math.pow(h.distanceToSquared(p),d);m<1e-4&&(m=1),v<1e-4&&(v=m),g<1e-4&&(g=m),t.initNonuniformCatmullRom(l.x,c.x,h.x,p.x,v,m,g),n.initNonuniformCatmullRom(l.y,c.y,h.y,p.y,v,m,g),r.initNonuniformCatmullRom(l.z,c.z,h.z,p.z,v,m,g)}else if(this.type==="catmullrom"){var y=this.tension!==undefined?this.tension:.5;t.initCatmullRom(l.x,c.x,h.x,p.x,y),n.initCatmullRom(l.y,c.y,h.y,p.y,y),r.initCatmullRom(l.z,c.z,h.z,p.z,y)}var b=new THREE.Vector3(t.calc(a),n.calc(a),r.calc(a));return b})}(),THREE.ClosedSplineCurve3=function(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),THREE.CatmullRomCurve3.call(this,e),this.type="catmullrom",this.closed=!0},THREE.ClosedSplineCurve3.prototype=Object.create(THREE.CatmullRomCurve3.prototype),THREE.BoxGeometry=function(e,t,n,r,i,s){function l(e,t,n,r,i,s,u,a){var f,l,c,h=o.widthSegments,p=o.heightSegments,d=i/2,v=s/2,m=o.vertices.length;if(e==="x"&&t==="y"||e==="y"&&t==="x")f="z";else if(e==="x"&&t==="z"||e==="z"&&t==="x")f="y",p=o.depthSegments;else if(e==="z"&&t==="y"||e==="y"&&t==="z")f="x",h=o.depthSegments;var g=h+1,y=p+1,b=i/h,w=s/p,E=new THREE.Vector3;E[f]=u>0?1:-1;for(c=0;c<y;c++)for(l=0;l<g;l++){var S=new THREE.Vector3;S[e]=(l*b-d)*n,S[t]=(c*w-v)*r,S[f]=u,o.vertices.push(S)}for(c=0;c<p;c++)for(l=0;l<h;l++){var x=l+g*c,T=l+g*(c+1),N=l+1+g*(c+1),C=l+1+g*c,k=new THREE.Vector2(l/h,1-c/p),L=new THREE.Vector2(l/h,1-(c+1)/p),A=new THREE.Vector2((l+1)/h,1-(c+1)/p),O=new THREE.Vector2((l+1)/h,1-c/p),M=new THREE.Face3(x+m,T+m,C+m);M.normal.copy(E),M.vertexNormals.push(E.clone(),E.clone(),E.clone()),M.materialIndex=a,o.faces.push(M),o.faceVertexUvs[0].push([k,L,O]),M=new THREE.Face3(T+m,N+m,C+m),M.normal.copy(E),M.vertexNormals.push(E.clone(),E.clone(),E.clone()),M.materialIndex=a,o.faces.push(M),o.faceVertexUvs[0].push([L.clone(),A,O.clone()])}}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s},this.widthSegments=r||1,this.heightSegments=i||1,this.depthSegments=s||1;var o=this,u=e/2,a=t/2,f=n/2;l("z","y",-1,-1,n,t,u,0),l("z","y",1,-1,n,t,-u,1),l("x","z",1,1,e,n,a,2),l("x","z",1,-1,e,n,-a,3),l("x","y",1,-1,e,t,f,4),l("x","y",-1,-1,e,t,-f,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry,THREE.CubeGeometry=THREE.BoxGeometry,THREE.CircleGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new THREE.CircleBufferGeometry(e,t,n,r))},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry,THREE.CircleBufferGeometry=function(e,t,n,r){THREE.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=t!==undefined?Math.max(3,t):8,n=n!==undefined?n:0,r=r!==undefined?r:Math.PI*2;var i=t+2,s=new Float32Array(i*3),o=new Float32Array(i*3),u=new Float32Array(i*2);o[2]=1,u[0]=.5,u[1]=.5;for(var a=0,f=3,l=2;a<=t;a++,f+=3,l+=2){var c=n+a/t*r;s[f]=e*Math.cos(c),s[f+1]=e*Math.sin(c),o[f+2]=1,u[l]=(s[f]/e+1)/2,u[l+1]=(s[f+1]/e+1)/2}var h=[];for(var f=1;f<=t;f++)h.push(f,f+1,0);this.setIndex(new THREE.BufferAttribute(new Uint16Array(h),1)),this.addAttribute("position",new THREE.BufferAttribute(s,3)),this.addAttribute("normal",new THREE.BufferAttribute(o,3)),this.addAttribute("uv",new THREE.BufferAttribute(u,2)),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.CircleBufferGeometry.prototype.constructor=THREE.CircleBufferGeometry,THREE.CylinderGeometry=function(e,t,n,r,i,s,o,u){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:u},e=e!==undefined?e:20,t=t!==undefined?t:20,n=n!==undefined?n:100,r=r||8,i=i||1,s=s!==undefined?s:!1,o=o!==undefined?o:0,u=u!==undefined?u:2*Math.PI;var a=n/2,f,l,c=[],h=[];for(l=0;l<=i;l++){var p=[],d=[],v=l/i,m=v*(t-e)+e;for(f=0;f<=r;f++){var g=f/r,y=new THREE.Vector3;y.x=m*Math.sin(g*u+o),y.y=-v*n+a,y.z=m*Math.cos(g*u+o),this.vertices.push(y),p.push(this.vertices.length-1),d.push(new THREE.Vector2(g,1-v))}c.push(p),h.push(d)}var b=(t-e)/n,w,E;for(f=0;f<r;f++){e!==0?(w=this.vertices[c[0][f]].clone(),E=this.vertices[c[0][f+1]].clone()):(w=this.vertices[c[1][f]].clone(),E=this.vertices[c[1][f+1]].clone()),w.setY(Math.sqrt(w.x*w.x+w.z*w.z)*b).normalize(),E.setY(Math.sqrt(E.x*E.x+E.z*E.z)*b).normalize();for(l=0;l<i;l++){var S=c[l][f],x=c[l+1][f],T=c[l+1][f+1],N=c[l][f+1],C=w.clone(),k=w.clone(),L=E.clone(),A=E.clone(),O=h[l][f].clone(),M=h[l+1][f].clone(),_=h[l+1][f+1].clone(),D=h[l][f+1].clone();this.faces.push(new THREE.Face3(S,x,N,[C,k,A])),this.faceVertexUvs[0].push([O,M,D]),this.faces.push(new THREE.Face3(x,T,N,[k.clone(),L,A.clone()])),this.faceVertexUvs[0].push([M.clone(),_,D.clone()])}}if(s===!1&&e>0){this.vertices.push(new THREE.Vector3(0,a,0));for(f=0;f<r;f++){var S=c[0][f],x=c[0][f+1],T=this.vertices.length-1,C=new THREE.Vector3(0,1,0),k=new THREE.Vector3(0,1,0),L=new THREE.Vector3(0,1,0),O=h[0][f].clone(),M=h[0][f+1].clone(),_=new THREE.Vector2(M.x,0);this.faces.push(new THREE.Face3(S,x,T,[C,k,L],undefined,1)),this.faceVertexUvs[0].push([O,M,_])}}if(s===!1&&t>0){this.vertices.push(new THREE.Vector3(0,-a,0));for(f=0;f<r;f++){var S=c[i][f+1],x=c[i][f],T=this.vertices.length-1,C=new THREE.Vector3(0,-1,0),k=new THREE.Vector3(0,-1,0),L=new THREE.Vector3(0,-1,0),O=h[i][f+1].clone(),M=h[i][f].clone(),_=new THREE.Vector2(M.x,1);this.faces.push(new THREE.Face3(S,x,T,[C,k,L],undefined,2)),this.faceVertexUvs[0].push([O,M,_])}}this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.EdgesGeometry=function(e,t){function s(e,t){return e-t}THREE.BufferGeometry.call(this),t=t!==undefined?t:1;var n=Math.cos(THREE.Math.degToRad(t)),r=[0,0],i={},o=["a","b","c"],u;e instanceof THREE.BufferGeometry?(u=new THREE.Geometry,u.fromBufferGeometry(e)):u=e.clone(),u.mergeVertices(),u.computeFaceNormals();var a=u.vertices,f=u.faces;for(var l=0,c=f.length;l<c;l++){var h=f[l];for(var p=0;p<3;p++){r[0]=h[o[p]],r[1]=h[o[(p+1)%3]],r.sort(s);var d=r.toString();i[d]===undefined?i[d]={vert1:r[0],vert2:r[1],face1:l,face2:undefined}:i[d].face2=l}}var v=[];for(var d in i){var m=i[d];if(m.face2===undefined||f[m.face1].normal.dot(f[m.face2].normal)<=n){var g=a[m.vert1];v.push(g.x),v.push(g.y),v.push(g.z),g=a[m.vert2],v.push(g.x),v.push(g.y),v.push(g.z)}}this.addAttribute("position",new THREE.BufferAttribute(new Float32Array(v),3))},THREE.EdgesGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.EdgesGeometry.prototype.constructor=THREE.EdgesGeometry,THREE.ExtrudeGeometry=function(e,t){if(typeof e=="undefined"){e=[];return}THREE.Geometry.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals()},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry,THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){var n=e.length;for(var r=0;r<n;r++){var i=e[r];this.addShape(i,t)}},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function L(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function j(e,t,n){var r,i,s=1,o=e.x-t.x,u=e.y-t.y,a=n.x-e.x,f=n.y-e.y,l=o*o+u*u,c=o*f-u*a;if(Math.abs(c)>Number.EPSILON){var h=Math.sqrt(l),p=Math.sqrt(a*a+f*f),d=t.x-u/h,v=t.y+o/h,m=n.x-f/p,g=n.y+a/p,y=((m-d)*f-(g-v)*a)/(o*f-u*a);r=d+o*y-e.x,i=v+u*y-e.y;var b=r*r+i*i;if(b<=2)return new THREE.Vector2(r,i);s=Math.sqrt(b/2)}else{var w=!1;o>Number.EPSILON?a>Number.EPSILON&&(w=!0):o<-Number.EPSILON?a<-Number.EPSILON&&(w=!0):Math.sign(u)===Math.sign(f)&&(w=!0),w?(r=-u,i=o,s=Math.sqrt(l)):(r=o,i=u,s=Math.sqrt(l/2))}return new THREE.Vector2(r/s,i/s)}function $(){if(o){var e=0,t=P*e;for(I=0;I<B;I++)H=C[I],G(H[2]+t,H[1]+t,H[0]+t);e=a+s*2,t=P*e;for(I=0;I<B;I++)H=C[I],G(H[0]+t,H[1]+t,H[2]+t)}else{for(I=0;I<B;I++)H=C[I],G(H[2],H[1],H[0]);for(I=0;I<B;I++)H=C[I],G(H[0]+P*a,H[1]+P*a,H[2]+P*a)}}function J(){var e=0;K(k,e),e+=k.length;for(y=0,b=T.length;y<b;y++)g=T[y],K(g,e),e+=g.length}function K(e,t){var n,r;I=e.length;while(--I>=0){n=I,r=I-1,r<0&&(r=e.length-1);var i=0,o=a+s*2;for(i=0;i<o;i++){var u=P*i,f=P*(i+1),l=t+n+u,c=t+r+u,h=t+r+f,p=t+n+f;Y(l,c,h,p,e,i,o,n,r)}}}function Q(e,t,n){w.vertices.push(new THREE.Vector3(e,t,n))}function G(e,t,n){e+=E,t+=E,n+=E,w.faces.push(new THREE.Face3(e,t,n,null,null,0));var r=h.generateTopUV(w,e,t,n);w.faceVertexUvs[0].push(r)}function Y(e,t,n,r,i,s,o,u,a){e+=E,t+=E,n+=E,r+=E,w.faces.push(new THREE.Face3(e,t,r,null,null,1)),w.faces.push(new THREE.Face3(t,n,r,null,null,1));var f=h.generateSideWallUV(w,e,t,n,r);w.faceVertexUvs[0].push([f[0],f[1],f[3]]),w.faceVertexUvs[0].push([f[1],f[2],f[3]])}var n=t.amount!==undefined?t.amount:100,r=t.bevelThickness!==undefined?t.bevelThickness:6,i=t.bevelSize!==undefined?t.bevelSize:r-2,s=t.bevelSegments!==undefined?t.bevelSegments:3,o=t.bevelEnabled!==undefined?t.bevelEnabled:!0,u=t.curveSegments!==undefined?t.curveSegments:12,a=t.steps!==undefined?t.steps:1,f=t.extrudePath,l,c=!1,h=t.UVGenerator!==undefined?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator,p,d,v,m;f&&(l=f.getSpacedPoints(a),c=!0,o=!1,p=t.frames!==undefined?t.frames:new THREE.TubeGeometry.FrenetFrames(f,a,!1),d=new THREE.Vector3,v=new THREE.Vector3,m=new THREE.Vector3),o||(s=0,r=0,i=0);var g,y,b,w=this,E=this.vertices.length,S=e.extractPoints(u),x=S.shape,T=S.holes,N=!THREE.ShapeUtils.isClockWise(x);if(N){x=x.reverse();for(y=0,b=T.length;y<b;y++)g=T[y],THREE.ShapeUtils.isClockWise(g)&&(T[y]=g.reverse());N=!1}var C=THREE.ShapeUtils.triangulateShape(x,T),k=x;for(y=0,b=T.length;y<b;y++)g=T[y],x=x.concat(g);var A,O,M,_,D,P=x.length,H,B=C.length,F=[];for(var I=0,q=k.length,R=q-1,U=I+1;I<q;I++,R++,U++)R===q&&(R=0),U===q&&(U=0),F[I]=j(k[I],k[R],k[U]);var z=[],W,X=F.concat();for(y=0,b=T.length;y<b;y++){g=T[y],W=[];for(I=0,q=g.length,R=q-1,U=I+1;I<q;I++,R++,U++)R===q&&(R=0),U===q&&(U=0),W[I]=j(g[I],g[R],g[U]);z.push(W),X=X.concat(W)}for(A=0;A<s;A++){M=A/s,_=r*(1-M),O=i*Math.sin(M*Math.PI/2);for(I=0,q=k.length;I<q;I++)D=L(k[I],F[I],O),Q(D.x,D.y,-_);for(y=0,b=T.length;y<b;y++){g=T[y],W=z[y];for(I=0,q=g.length;I<q;I++)D=L(g[I],W[I],O),Q(D.x,D.y,-_)}}O=i;for(I=0;I<P;I++)D=o?L(x[I],X[I],O):x[I],c?(v.copy(p.normals[0]).multiplyScalar(D.x),d.copy(p.binormals[0]).multiplyScalar(D.y),m.copy(l[0]).add(v).add(d),Q(m.x,m.y,m.z)):Q(D.x,D.y,0);var V;for(V=1;V<=a;V++)for(I=0;I<P;I++)D=o?L(x[I],X[I],O):x[I],c?(v.copy(p.normals[V]).multiplyScalar(D.x),d.copy(p.binormals[V]).multiplyScalar(D.y),m.copy(l[V]).add(v).add(d),Q(m.x,m.y,m.z)):Q(D.x,D.y,n/a*V);for(A=s-1;A>=0;A--){M=A/s,_=r*(1-M),O=i*Math.sin(M*Math.PI/2);for(I=0,q=k.length;I<q;I++)D=L(k[I],F[I],O),Q(D.x,D.y,n+_);for(y=0,b=T.length;y<b;y++){g=T[y],W=z[y];for(I=0,q=g.length;I<q;I++)D=L(g[I],W[I],O),c?Q(D.x,D.y+l[a-1].y,l[a-1].x+_):Q(D.x,D.y,n+_)}}$(),J()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r){var i=e.vertices,s=i[t],o=i[n],u=i[r];return[new THREE.Vector2(s.x,s.y),new THREE.Vector2(o.x,o.y),new THREE.Vector2(u.x,u.y)]},generateSideWallUV:function(e,t,n,r,i){var s=e.vertices,o=s[t],u=s[n],a=s[r],f=s[i];return Math.abs(o.y-u.y)<.01?[new THREE.Vector2(o.x,1-o.z),new THREE.Vector2(u.x,1-u.z),new THREE.Vector2(a.x,1-a.z),new THREE.Vector2(f.x,1-f.z)]:[new THREE.Vector2(o.y,1-o.z),new THREE.Vector2(u.y,1-u.z),new THREE.Vector2(a.y,1-a.z),new THREE.Vector2(f.y,1-f.z)]}},THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),this.type="ShapeGeometry",Array.isArray(e)===!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry,THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){t===undefined&&(t={});var n=t.curveSegments!==undefined?t.curveSegments:12,r=t.material,i=t.UVGenerator===undefined?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,s,o,u,a=this.vertices.length,f=e.extractPoints(n),l=f.shape,c=f.holes,h=!THREE.ShapeUtils.isClockWise(l);if(h){l=l.reverse();for(s=0,o=c.length;s<o;s++)u=c[s],THREE.ShapeUtils.isClockWise(u)&&(c[s]=u.reverse());h=!1}var p=THREE.ShapeUtils.triangulateShape(l,c);for(s=0,o=c.length;s<o;s++)u=c[s],l=l.concat(u);var d,v=l.length,m,g=p.length;for(s=0;s<v;s++)d=l[s],this.vertices.push(new THREE.Vector3(d.x,d.y,0));for(s=0;s<g;s++){m=p[s];var y=m[0]+a,b=m[1]+a,w=m[2]+a;this.faces.push(new THREE.Face3(y,b,w,null,null,r)),this.faceVertexUvs[0].push(i.generateTopUV(this,y,b,w))}},THREE.LatheGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=t||12,n=n||0,r=r||2*Math.PI;var i=1/(e.length-1),s=1/t;for(var o=0,u=t;o<=u;o++){var a=n+o*s*r,f=Math.sin(a),l=Math.cos(a);for(var c=0,h=e.length;c<h;c++){var p=e[c],d=new THREE.Vector3;d.x=p.x*f,d.y=p.y,d.z=p.x*l,this.vertices.push(d)}}var v=e.length;for(var o=0,u=t;o<u;o++)for(var c=0,h=e.length-1;c<h;c++){var m=c+v*o,g=m,y=m+v,b=m+1+v,w=m+1,E=o*s,S=c*i,x=E+s,T=S+i;this.faces.push(new THREE.Face3(g,y,w)),this.faceVertexUvs[0].push([new THREE.Vector2(E,S),new THREE.Vector2(x,S),new THREE.Vector2(E,T)]),this.faces.push(new THREE.Face3(y,b,w)),this.faceVertexUvs[0].push([new THREE.Vector2(x,S),new THREE.Vector2(x,T),new THREE.Vector2(E,T)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry,THREE.PlaneGeometry=function(e,t,n,r){THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(e,t,n,r))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.PlaneBufferGeometry=function(e,t,n,r){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i=e/2,s=t/2,o=Math.floor(n)||1,u=Math.floor(r)||1,a=o+1,f=u+1,l=e/o,c=t/u,h=new Float32Array(a*f*3),p=new Float32Array(a*f*3),d=new Float32Array(a*f*2),v=0,m=0;for(var g=0;g<f;g++){var y=g*c-s;for(var b=0;b<a;b++){var w=b*l-i;h[v]=w,h[v+1]=-y,p[v+2]=1,d[m]=b/o,d[m+1]=1-g/u,v+=3,m+=2}}v=0;var E=new(h.length/3>65535?Uint32Array:Uint16Array)(o*u*6);for(var g=0;g<u;g++)for(var b=0;b<o;b++){var S=b+a*g,x=b+a*(g+1),T=b+1+a*(g+1),N=b+1+a*g;E[v]=S,E[v+1]=x,E[v+2]=N,E[v+3]=x,E[v+4]=T,E[v+5]=N,v+=6}this.setIndex(new THREE.BufferAttribute(E,1)),this.addAttribute("position",new THREE.BufferAttribute(h,3)),this.addAttribute("normal",new THREE.BufferAttribute(p,3)),this.addAttribute("uv",new THREE.BufferAttribute(d,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry,THREE.RingGeometry=function(e,t,n,r,i,s){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},e=e||0,t=t||50,i=i!==undefined?i:0,s=s!==undefined?s:Math.PI*2,n=n!==undefined?Math.max(3,n):8,r=r!==undefined?Math.max(1,r):8;var o,u,a=[],f=e,l=(t-e)/r;for(o=0;o<r+1;o++){for(u=0;u<n+1;u++){var c=new THREE.Vector3,h=i+u/n*s;c.x=f*Math.cos(h),c.y=f*Math.sin(h),this.vertices.push(c),a.push(new THREE.Vector2((c.x/t+1)/2,(c.y/t+1)/2))}f+=l}var p=new THREE.Vector3(0,0,1);for(o=0;o<r;o++){var d=o*(n+1);for(u=0;u<n;u++){var h=u+d,v=h,m=h+n+1,g=h+n+2;this.faces.push(new THREE.Face3(v,m,g,[p.clone(),p.clone(),p.clone()])),this.faceVertexUvs[0].push([a[v].clone(),a[m].clone(),a[g].clone()]),v=h,m=h+n+2,g=h+1,this.faces.push(new THREE.Face3(v,m,g,[p.clone(),p.clone(),p.clone()])),this.faceVertexUvs[0].push([a[v].clone(),a[m].clone(),a[g].clone()])}}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,f)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry.prototype.constructor=THREE.RingGeometry,THREE.SphereGeometry=function(e,t,n,r,i,s,o){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new THREE.SphereBufferGeometry(e,t,n,r,i,s,o))},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.SphereBufferGeometry=function(e,t,n,r,i,s,o){THREE.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=r!==undefined?r:0,i=i!==undefined?i:Math.PI*2,s=s!==undefined?s:0,o=o!==undefined?o:Math.PI;var u=s+o,a=(t+1)*(n+1),f=new THREE.BufferAttribute(new Float32Array(a*3),3),l=new THREE.BufferAttribute(new Float32Array(a*3),3),c=new THREE.BufferAttribute(new Float32Array(a*2),2),h=0,p=[],d=new THREE.Vector3;for(var v=0;v<=n;v++){var m=[],g=v/n;for(var y=0;y<=t;y++){var b=y/t,w=-e*Math.cos(r+b*i)*Math.sin(s+g*o),E=e*Math.cos(s+g*o),S=e*Math.sin(r+b*i)*Math.sin(s+g*o);d.set(w,E,S).normalize(),f.setXYZ(h,w,E,S),l.setXYZ(h,d.x,d.y,d.z),c.setXY(h,b,1-g),m.push(h),h++}p.push(m)}var x=[];for(var v=0;v<n;v++)for(var y=0;y<t;y++){var T=p[v][y+1],N=p[v][y],C=p[v+1][y],k=p[v+1][y+1];(v!==0||s>0)&&x.push(T,N,k),(v!==n-1||u<Math.PI)&&x.push(N,C,k)}this.setIndex(new(f.count>65535?THREE.Uint32Attribute:THREE.Uint16Attribute)(x,1)),this.addAttribute("position",f),this.addAttribute("normal",l),this.addAttribute("uv",c),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.SphereBufferGeometry.prototype.constructor=THREE.SphereBufferGeometry,THREE.TextGeometry=function(e,t){t=t||{};var n=t.font;if(n instanceof THREE.Font==0)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new THREE.Geometry;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==undefined?t.height:50,t.bevelThickness===undefined&&(t.bevelThickness=10),t.bevelSize===undefined&&(t.bevelSize=8),t.bevelEnabled===undefined&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,r,t),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TextGeometry.prototype.constructor=THREE.TextGeometry,THREE.TorusGeometry=function(e,t,n,r,i){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=n||8,r=r||6,i=i||Math.PI*2;var s=new THREE.Vector3,o=[],u=[];for(var a=0;a<=n;a++)for(var f=0;f<=r;f++){var l=f/r*i,c=a/n*Math.PI*2;s.x=e*Math.cos(l),s.y=e*Math.sin(l);var h=new THREE.Vector3;h.x=(e+t*Math.cos(c))*Math.cos(l),h.y=(e+t*Math.cos(c))*Math.sin(l),h.z=t*Math.sin(c),this.vertices.push(h),o.push(new THREE.Vector2(f/r,a/n)),u.push(h.clone().sub(s).normalize())}for(var a=1;a<=n;a++)for(var f=1;f<=r;f++){var p=(r+1)*a+f-1,d=(r+1)*(a-1)+f-1,v=(r+1)*(a-1)+f,m=(r+1)*a+f,g=new THREE.Face3(p,d,m,[u[p].clone(),u[d].clone(),u[m].clone()]);this.faces.push(g),this.faceVertexUvs[0].push([o[p].clone(),o[d].clone(),o[m].clone()]),g=new THREE.Face3(d,v,m,[u[d].clone(),u[v].clone(),u[m].clone()]),this.faces.push(g),this.faceVertexUvs[0].push([o[d].clone(),o[v].clone(),o[m].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry,THREE.TorusKnotGeometry=function(e,t,n,r,i,s,o){function O(e,t,n,r,i){var s=Math.cos(e),o=Math.sin(e),u=t/n*e,a=Math.cos(u),f=r*(2+a)*.5*s,l=r*(2+a)*o*.5,c=i*r*Math.sin(u)*.5;return new THREE.Vector3(f,l,c)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,p:i,q:s,heightScale:o},e=e||100,t=t||40,n=n||64,r=r||8,i=i||2,s=s||3,o=o||1;var u=new Array(n),a=new THREE.Vector3,f=new THREE.Vector3,l=new THREE.Vector3;for(var c=0;c<n;++c){u[c]=new Array(r);var h=c/n*2*i*Math.PI,p=O(h,s,i,e,o),d=O(h+.01,s,i,e,o);a.subVectors(d,p),f.addVectors(d,p),l.crossVectors(a,f),f.crossVectors(l,a),l.normalize(),f.normalize();for(var v=0;v<r;++v){var m=v/r*2*Math.PI,g=-t*Math.cos(m),y=t*Math.sin(m),b=new THREE.Vector3;b.x=p.x+g*f.x+y*l.x,b.y=p.y+g*f.y+y*l.y,b.z=p.z+g*f.z+y*l.z,u[c][v]=this.vertices.push(b)-1}}for(var c=0;c<n;++c)for(var v=0;v<r;++v){var w=(c+1)%n,E=(v+1)%r,S=u[c][v],x=u[w][v],T=u[w][E],N=u[c][E],C=new THREE.Vector2(c/n,v/r),k=new THREE.Vector2((c+1)/n,v/r),L=new THREE.Vector2((c+1)/n,(v+1)/r),A=new THREE.Vector2(c/n,(v+1)/r);this.faces.push(new THREE.Face3(S,x,N)),this.faceVertexUvs[0].push([C,k,A]),this.faces.push(new THREE.Face3(x,T,N)),this.faceVertexUvs[0].push([k.clone(),L,A.clone()])}this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry,THREE.TubeGeometry=function(e,t,n,r,i,s){function H(e,t,n){return u.vertices.push(new THREE.Vector3(e,t,n))-1}THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:i,taper:s},t=t||64,n=n||1,r=r||8,i=i||!1,s=s||THREE.TubeGeometry.NoTaper;var o=[],u=this,a,f,l,c=t+1,h,p,d,v,m,g,y=new THREE.Vector3,b,w,E,S,x,T,N,C,k,L,A,O,M=new THREE.TubeGeometry.FrenetFrames(e,t,i),_=M.tangents,D=M.normals,P=M.binormals;this.tangents=_,this.normals=D,this.binormals=P;for(b=0;b<c;b++){o[b]=[],h=b/(c-1),g=e.getPointAt(h),a=_[b],f=D[b],l=P[b],d=n*s(h);for(w=0;w<r;w++)p=w/r*2*Math.PI,v=-d*Math.cos(p),m=d*Math.sin(p),y.copy(g),y.x+=v*f.x+m*l.x,y.y+=v*f.y+m*l.y,y.z+=v*f.z+m*l.z,o[b][w]=H(y.x,y.y,y.z)}for(b=0;b<t;b++)for(w=0;w<r;w++)E=i?(b+1)%t:b+1,S=(w+1)%r,x=o[b][w],T=o[E][w],N=o[E][S],C=o[b][S],k=new THREE.Vector2(b/t,w/r),L=new THREE.Vector2((b+1)/t,w/r),A=new THREE.Vector2((b+1)/t,(w+1)/r),O=new THREE.Vector2(b/t,(w+1)/r),this.faces.push(new THREE.Face3(x,T,C)),this.faceVertexUvs[0].push([k,L,O]),this.faces.push(new THREE.Face3(T,N,C)),this.faceVertexUvs[0].push([L.clone(),A,O.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry,THREE.TubeGeometry.NoTaper=function(e){return 1},THREE.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},THREE.TubeGeometry.FrenetFrames=function(e,t,n){function g(){s[0]=new THREE.Vector3,o[0]=new THREE.Vector3,c=Number.MAX_VALUE,h=Math.abs(i[0].x),p=Math.abs(i[0].y),d=Math.abs(i[0].z),h<=c&&(c=h,r.set(1,0,0)),p<=c&&(c=p,r.set(0,1,0)),d<=c&&r.set(0,0,1),u.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],u),o[0].crossVectors(i[0],s[0])}var r=new THREE.Vector3,i=[],s=[],o=[],u=new THREE.Vector3,a=new THREE.Matrix4,f=t+1,l,c,h,p,d,v,m;this.tangents=i,this.normals=s,this.binormals=o;for(v=0;v<f;v++)m=v/(f-1),i[v]=e.getTangentAt(m),i[v].normalize();g();for(v=1;v<f;v++)s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),u.crossVectors(i[v-1],i[v]),u.length()>Number.EPSILON&&(u.normalize(),l=Math.acos(THREE.Math.clamp(i[v-1].dot(i[v]),-1,1)),s[v].applyMatrix4(a.makeRotationAxis(u,l))),o[v].crossVectors(i[v],s[v]);if(n){l=Math.acos(THREE.Math.clamp(s[0].dot(s[f-1]),-1,1)),l/=f-1,i[0].dot(u.crossVectors(s[0],s[f-1]))>0&&(l=-l);for(v=1;v<f;v++)s[v].applyMatrix4(a.makeRotationAxis(i[v],l*v)),o[v].crossVectors(i[v],s[v])}},THREE.PolyhedronGeometry=function(e,t,n,r){function w(e){var t=e.normalize().clone();t.index=i.vertices.push(t)-1;var n=x(e)/2/Math.PI+.5,r=T(e)/Math.PI+.5;return t.uv=new THREE.Vector2(n,1-r),t}function E(e,t,n,r){var s=new THREE.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()],undefined,r);i.faces.push(s),p.copy(e).add(t).add(n).divideScalar(3);var o=x(p);i.faceVertexUvs[0].push([N(e.uv,e,o),N(t.uv,t,o),N(n.uv,n,o)])}function S(e,t){var n=Math.pow(2,t),r=w(i.vertices[e.a]),s=w(i.vertices[e.b]),o=w(i.vertices[e.c]),u=[],a=e.materialIndex;for(var f=0;f<=n;f++){u[f]=[];var l=w(r.clone().lerp(o,f/n)),c=w(s.clone().lerp(o,f/n)),h=n-f;for(var p=0;p<=h;p++)p===0&&f===n?u[f][p]=l:u[f][p]=w(l.clone().lerp(c,p/h))}for(var f=0;f<n;f++)for(var p=0;p<2*(n-f)-1;p++){var d=Math.floor(p/2);p%2===0?E(u[f][d+1],u[f+1][d],u[f][d],a):E(u[f][d+1],u[f+1][d+1],u[f+1][d],a)}}function x(e){return Math.atan2(e.z,-e.x)}function T(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function N(e,t,n){return n<0&&e.x===1&&(e=new THREE.Vector2(e.x-1,e.y)),t.x===0&&t.z===0&&(e=new THREE.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var i=this;for(var s=0,o=e.length;s<o;s+=3)w(new THREE.Vector3(e[s],e[s+1],e[s+2]));var u=this.vertices,a=[];for(var s=0,f=0,o=t.length;s<o;s+=3,f++){var l=u[t[s]],c=u[t[s+1]],h=u[t[s+2]];a[f]=new THREE.Face3(l.index,c.index,h.index,[l.clone(),c.clone(),h.clone()],undefined,f)}var p=new THREE.Vector3;for(var s=0,o=a.length;s<o;s++)S(a[s],r);for(var s=0,o=this.faceVertexUvs[0].length;s<o;s++){var d=this.faceVertexUvs[0][s],v=d[0].x,m=d[1].x,g=d[2].x,y=Math.max(v,m,g),b=Math.min(v,m,g);y>.9&&b<.1&&(v<.2&&(d[0].x+=1),m<.2&&(d[1].x+=1),g<.2&&(d[2].x+=1))}for(var s=0,o=this.vertices.length;s<o;s++)this.vertices[s].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,n)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.DodecahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];THREE.PolyhedronGeometry.call(this,i,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}},THREE.DodecahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry,THREE.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];THREE.PolyhedronGeometry.call(this,r,i,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,THREE.OctahedronGeometry=function(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];THREE.PolyhedronGeometry.call(this,n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},THREE.OctahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry,THREE.TetrahedronGeometry=function(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];THREE.PolyhedronGeometry.call(this,n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.PolyhedronGeometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry,THREE.ParametricGeometry=function(e,t,n){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};var r=this.vertices,i=this.faces,s=this.faceVertexUvs[0],o,u,a,f,l,c=t+1;for(o=0;o<=n;o++){l=o/n;for(u=0;u<=t;u++)f=u/t,a=e(f,l),r.push(a)}var h,p,d,v,m,g,y,b;for(o=0;o<n;o++)for(u=0;u<t;u++)h=o*c+u,p=o*c+u+1,d=(o+1)*c+u+1,v=(o+1)*c+u,m=new THREE.Vector2(u/t,o/n),g=new THREE.Vector2((u+1)/t,o/n),y=new THREE.Vector2((u+1)/t,(o+1)/n),b=new THREE.Vector2(u/t,(o+1)/n),i.push(new THREE.Face3(h,p,v)),s.push([m,g,b]),i.push(new THREE.Face3(p,d,v)),s.push([g.clone(),y,b.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry,THREE.WireframeGeometry=function(e){function r(e,t){return e-t}THREE.BufferGeometry.call(this);var t=[0,0],n={},i=["a","b","c"];if(e instanceof THREE.Geometry){var s=e.vertices,o=e.faces,u=0,a=new Uint32Array(6*o.length);for(var f=0,l=o.length;f<l;f++){var c=o[f];for(var h=0;h<3;h++){t[0]=c[i[h]],t[1]=c[i[(h+1)%3]],t.sort(r);var p=t.toString();n[p]===undefined&&(a[2*u]=t[0],a[2*u+1]=t[1],n[p]=!0,u++)}}var d=new Float32Array(u*2*3);for(var f=0,l=u;f<l;f++)for(var h=0;h<2;h++){var v=s[a[2*f+h]],m=6*f+3*h;d[m+0]=v.x,d[m+1]=v.y,d[m+2]=v.z}this.addAttribute("position",new THREE.BufferAttribute(d,3))}else if(e instanceof THREE.BufferGeometry)if(e.index!==null){var g=e.index.array,s=e.attributes.position,y=e.groups,u=0;y.length===0&&e.addGroup(0,g.length);var a=new Uint32Array(2*g.length);for(var b=0,w=y.length;b<w;++b){var E=y[b],S=E.start,x=E.count;for(var f=S,T=S+x;f<T;f+=3)for(var h=0;h<3;h++){t[0]=g[f+h],t[1]=g[f+(h+1)%3],t.sort(r);var p=t.toString();n[p]===undefined&&(a[2*u]=t[0],a[2*u+1]=t[1],n[p]=!0,u++)}}var d=new Float32Array(u*2*3);for(var f=0,l=u;f<l;f++)for(var h=0;h<2;h++){var m=6*f+3*h,N=a[2*f+h];d[m+0]=s.getX(N),d[m+1]=s.getY(N),d[m+2]=s.getZ(N)}this.addAttribute("position",new THREE.BufferAttribute(d,3))}else{var s=e.attributes.position.array,u=s.length/3,C=u/3,d=new Float32Array(u*2*3);for(var f=0,l=C;f<l;f++)for(var h=0;h<3;h++){var m=18*f+6*h,k=9*f+3*h;d[m+0]=s[k],d[m+1]=s[k+1],d[m+2]=s[k+2];var N=9*f+3*((h+1)%3);d[m+3]=s[N],d[m+4]=s[N+1],d[m+5]=s[N+2]}this.addAttribute("position",new THREE.BufferAttribute(d,3))}},THREE.WireframeGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.WireframeGeometry.prototype.constructor=THREE.WireframeGeometry,THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new THREE.BufferGeometry;r.addAttribute("position",new THREE.BufferAttribute(t,3)),r.addAttribute("color",new THREE.BufferAttribute(n,3));var i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.LineSegments.call(this,r,i)},THREE.AxisHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.AxisHelper.prototype.constructor=THREE.AxisHelper,THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);return t.translate(0,-0.5,0),function(r,i,s,o,u,a){THREE.Object3D.call(this),o===undefined&&(o=16776960),s===undefined&&(s=1),u===undefined&&(u=.2*s),a===undefined&&(a=.2*u),this.position.copy(i),this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:o})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:o})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(r),this.setLength(s,u,a)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper,THREE.ArrowHelper.prototype.setDirection=function(){var e=new THREE.Vector3,t;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-0.99999?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,n){t===undefined&&(t=.2*e),n===undefined&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},THREE.BoxHelper=function(e){var t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new THREE.BufferGeometry;r.setIndex(new THREE.BufferAttribute(t,1)),r.addAttribute("position",new THREE.BufferAttribute(n,3)),THREE.LineSegments.call(this,r,new THREE.LineBasicMaterial({color:16776960})),e!==undefined&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.BoxHelper.prototype.constructor=THREE.BoxHelper,THREE.BoxHelper.prototype.update=function(){var e=new THREE.Box3;return function(t){e.setFromObject(t);if(e.isEmpty())return;var n=e.min,r=e.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}(),THREE.BoundingBoxHelper=function(e,t){var n=t!==undefined?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:n,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper,THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function f(e,t,n){l(e,n),l(t,n)}function l(e,n){t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(n)),r[e]===undefined&&(r[e]=[]),r[e].push(t.vertices.length-1)}var t=new THREE.Geometry,n=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),r={},i=16755200,s=16711680,o=43775,u=16777215,a=3355443;f("n1","n2",i),f("n2","n4",i),f("n4","n3",i),f("n3","n1",i),f("f1","f2",i),f("f2","f4",i),f("f4","f3",i),f("f3","f1",i),f("n1","f1",i),f("n2","f2",i),f("n3","f3",i),f("n4","f4",i),f("p","n1",s),f("p","n2",s),f("p","n3",s),f("p","n4",s),f("u1","u2",o),f("u2","u3",o),f("u3","u1",o),f("c","t",u),f("p","c",a),f("cn1","cn2",a),f("cn3","cn4",a),f("cf1","cf2",a),f("cf3","cf4",a),THREE.LineSegments.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.CameraHelper.prototype.constructor=THREE.CameraHelper,THREE.CameraHelper.prototype.update=function(){function i(i,s,o,u){n.set(s,o,u).unproject(r);var a=t[i];if(a!==undefined)for(var f=0,l=a.length;f<l;f++)e.vertices[a[f]].copy(n)}var e,t,n=new THREE.Vector3,r=new THREE.Camera;return function(){e=this.geometry,t=this.pointMap;var n=1,s=1;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-n,-s,-1),i("n2",n,-s,-1),i("n3",-n,s,-1),i("n4",n,s,-1),i("f1",-n,-s,1),i("f2",n,-s,1),i("f3",-n,s,1),i("f4",n,s,1),i("u1",n*.7,s*1.1,-1),i("u2",-n*.7,s*1.1,-1),i("u3",0,s*2,-1),i("cf1",-n,0,1),i("cf2",n,0,1),i("cf3",0,-s,1),i("cf4",0,s,1),i("cn1",-n,0,-1),i("cn2",n,0,-1),i("cn3",0,-s,-1),i("cn4",0,s,-1),e.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var n=new THREE.Geometry;n.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var r=new THREE.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(n,r),this.add(this.lightPlane),n=new THREE.Geometry,n.vertices.push(new THREE.Vector3,new THREE.Vector3),r=new THREE.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(n,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper,THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(n),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t,n){var r=t!==undefined?t:16777215;THREE.LineSegments.call(this,new THREE.EdgesGeometry(e.geometry,n),new THREE.LineBasicMaterial({color:r})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper,THREE.FaceNormalsHelper=function(e,t,n,r){this.object=e,this.size=t!==undefined?t:1;var i=n!==undefined?n:16776960,s=r!==undefined?r:1,o=0,u=this.object.geometry;u instanceof THREE.Geometry?o=u.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var a=new THREE.BufferGeometry,f=new THREE.Float32Attribute(o*2*3,3);a.addAttribute("position",f),THREE.LineSegments.call(this,a,new THREE.LineBasicMaterial({color:i,linewidth:s})),this.matrixAutoUpdate=!1,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper,THREE.FaceNormalsHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,s=this.geometry.attributes.position,o=this.object.geometry,u=o.vertices,a=o.faces,f=0;for(var l=0,c=a.length;l<c;l++){var h=a[l],p=h.normal;e.copy(u[h.a]).add(u[h.b]).add(u[h.c]).divideScalar(3).applyMatrix4(i),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),s.setXYZ(f,e.x,e.y,e.z),f+=1,s.setXYZ(f,t.x,t.y,t.z),f+=1}return s.needsUpdate=!0,this}}(),THREE.GridHelper=function(e,t){var n=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var i=-e;i<=e;i+=t){n.vertices.push(new THREE.Vector3(-e,0,i),new THREE.Vector3(e,0,i),new THREE.Vector3(i,0,-e),new THREE.Vector3(i,0,e));var s=i===0?this.color1:this.color2;n.colors.push(s,s,s,s)}THREE.LineSegments.call(this,n,r)},THREE.GridHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.GridHelper.prototype.constructor=THREE.GridHelper,THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var n=new THREE.SphereGeometry(t,4,2);n.rotateX(-Math.PI/2);for(var r=0,i=8;r<i;r++)n.faces[r].color=this.colors[r<4?0:1];var s=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(n,s),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper,THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new THREE.SphereGeometry(t,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper,THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);var t=new THREE.Geometry;for(var n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent instanceof THREE.Bone&&(t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(0,0,1)),t.colors.push(new THREE.Color(0,1,0)))}t.dynamic=!0;var i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});THREE.LineSegments.call(this,t,i),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper,THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof THREE.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},THREE.SkeletonHelper.prototype.update=function(){var e=this.geometry,t=(new THREE.Matrix4).getInverse(this.root.matrixWorld),n=new THREE.Matrix4,r=0;for(var i=0;i<this.bones.length;i++){var s=this.bones[i];s.parent instanceof THREE.Bone&&(n.multiplyMatrices(t,s.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,s.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new THREE.CylinderGeometry(0,1,1,8,1,!0);t.translate(0,-0.5,0),t.rotateX(-Math.PI/2);var n=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,n),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper,THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var n=this.light.distance?this.light.distance:1e4,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,n,r){this.object=e,this.size=t!==undefined?t:1;var i=n!==undefined?n:16711680,s=r!==undefined?r:1,o=0,u=this.object.geometry;u instanceof THREE.Geometry?o=u.faces.length*3:u instanceof THREE.BufferGeometry&&(o=u.attributes.normal.count);var a=new THREE.BufferGeometry,f=new THREE.Float32Attribute(o*2*3,3);a.addAttribute("position",f),THREE.LineSegments.call(this,a,new THREE.LineBasicMaterial({color:i,linewidth:s})),this.matrixAutoUpdate=!1,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper,THREE.VertexNormalsHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,n=new THREE.Matrix3;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var s=this.object.matrixWorld,o=this.geometry.attributes.position,u=this.object.geometry;if(u instanceof THREE.Geometry){var a=u.vertices,f=u.faces,l=0;for(var c=0,h=f.length;c<h;c++){var p=f[c];for(var d=0,v=p.vertexNormals.length;d<v;d++){var m=a[p[i[d]]],g=p.vertexNormals[d];e.copy(m).applyMatrix4(s),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1}}}else if(u instanceof THREE.BufferGeometry){var y=u.attributes.position,b=u.attributes.normal,l=0;for(var d=0,v=y.count;d<v;d++)e.set(y.getX(d),y.getY(d),y.getZ(d)).applyMatrix4(s),t.set(b.getX(d),b.getY(d),b.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1}return o.needsUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var n=t!==undefined?t:16777215;THREE.LineSegments.call(this,new THREE.WireframeGeometry(e.geometry),new THREE.LineBasicMaterial({color:n})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.LineSegments.prototype),THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper,THREE.ImmediateRenderObject=function(e){THREE.Object3D.call(this),this.material=e,this.render=function(e){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject,THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",i=0,s=n-1,o=n/1;this.createAnimation(r,i,s,o),this.setAnimationWeight(r,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh,THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){var i={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){var t=/([a-z]+)_?(\d+)/i,n,r={},i=this.geometry;for(var s=0,o=i.morphTargets.length;s<o;s++){var u=i.morphTargets[s],a=u.name.match(t);if(a&&a.length>1){var f=a[1];r[f]||(r[f]={start:Infinity,end:-Infinity});var l=r[f];s<l.start&&(l.start=s),s>l.end&&(l.end=s),n||(n=f)}}for(var f in r){var l=r[f];this.createAnimation(f,l.start,l.end,e)}this.firstAnimation=n},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(!r.active)continue;var i=r.duration/r.length;r.time+=r.direction*e;if(r.mirroredLoop){if(r.time>r.duration||r.time<0)r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)}else r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration);var s=r.start+THREE.Math.clamp(Math.floor(r.time/i),0,r.length-1),o=r.weight;s!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*o,this.morphTargetInfluences[s]=0,r.lastFrame=r.currentFrame,r.currentFrame=s);var u=r.time%i/i;r.directionBackwards&&(u=1-u),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=u*o,this.morphTargetInfluences[r.lastFrame]=(1-u)*o):this.morphTargetInfluences[r.currentFrame]=o}},define("threejs",function(e){return function(){var t,n;return t||e.THREE}}(this));var Stats=function(){var e,t,n=0,r=0,i=Date.now(),s=i,o=i,u=0,a=1e3,f=0,l,c,h,p=[[16,16,48],[0,255,255]],d=0,v=1e3,m=0,g,y,b,w=[[16,48,16],[0,255,0]];e=document.createElement("div"),e.style.cursor="pointer",e.style.width="80px",e.style.opacity="0.9",e.style.zIndex="10001",e.addEventListener("mousedown",function(e){e.preventDefault(),n=(n+1)%2,n==0?(l.style.display="block",g.style.display="none"):(l.style.display="none",g.style.display="block")},!1),l=document.createElement("div"),l.style.textAlign="left",l.style.lineHeight="1.2em",l.style.backgroundColor="rgb("+Math.floor(p[0][0]/2)+","+Math.floor(p[0][1]/2)+","+Math.floor(p[0][2]/2)+")",l.style.padding="0 0 3px 3px",e.appendChild(l),c=document.createElement("div"),c.style.fontFamily="Helvetica, Arial, sans-serif",c.style.fontSize="9px",c.style.color="rgb("+p[1][0]+","+p[1][1]+","+p[1][2]+")",c.style.fontWeight="bold",c.innerHTML="FPS",l.appendChild(c),h=document.createElement("div"),h.style.position="relative",h.style.width="74px",h.style.height="30px",h.style.backgroundColor="rgb("+p[1][0]+","+p[1][1]+","+p[1][2]+")";for(l.appendChild(h);h.children.length<74;)t=document.createElement("span"),t.style.width="1px",t.style.height="30px",t.style.cssFloat="left",t.style.backgroundColor="rgb("+p[0][0]+","+p[0][1]+","+p[0][2]+")",h.appendChild(t);g=document.createElement("div"),g.style.textAlign="left",g.style.lineHeight="1.2em",g.style.backgroundColor="rgb("+Math.floor(w[0][0]/2)+","+Math.floor(w[0][1]/2)+","+Math.floor(w[0][2]/2)+")",g.style.padding="0 0 3px 3px",g.style.display="none",e.appendChild(g),y=document.createElement("div"),y.style.fontFamily="Helvetica, Arial, sans-serif",y.style.fontSize="9px",y.style.color="rgb("+w[1][0]+","+w[1][1]+","+w[1][2]+")",y.style.fontWeight="bold",y.innerHTML="MS",g.appendChild(y),b=document.createElement("div"),b.style.position="relative",b.style.width="74px",b.style.height="30px",b.style.backgroundColor="rgb("+w[1][0]+","+w[1][1]+","+w[1][2]+")";for(g.appendChild(b);b.children.length<74;)t=document.createElement("span"),t.style.width="1px",t.style.height=Math.random()*30+"px",t.style.cssFloat="left",t.style.backgroundColor="rgb("+w[0][0]+","+w[0][1]+","+w[0][2]+")",b.appendChild(t);return{domElement:e,update:function(){i=Date.now(),d=i-s,v=Math.min(v,d),m=Math.max(m,d),y.textContent=d+" MS ("+v+"-"+m+")";var e=Math.min(30,30-d/200*30);b.appendChild(b.firstChild).style.height=e+"px",s=i,r++,i>o+1e3&&(u=Math.round(r*1e3/(i-o)),a=Math.min(a,u),f=Math.max(f,u),c.textContent=u+" FPS ("+a+"-"+f+")",e=Math.min(30,30-u/100*30),h.appendChild(h.firstChild).style.height=e+"px",o=i,r=0)}}};define("stats",function(e){return function(){var t,n;return t||e.Stats}}(this)),define("lib/viz/vizStats",["stats"],function(){var e=function(e){this.item=new Stats,this.config=e,this.item.domElement.style.position="absolute",this.item.domElement.style.bottom="0",this.item.domElement.style.right="0",this.item.domElement.style.zIndex=100,this.config.elem.appendChild(this.item.domElement)};return e.prototype.update=function(){this.item.update()},e}),define("lib/viz/threeTrans",[],function(){var e=function(){this.list=[]};return e.prototype.add=function(e){this.list.push(e)},e.prototype.clear=function(){this.list.splice(0,this.list.length)},e.prototype.run=function(){for(var e=0;e<this.list.length;e++)this.list[e]()},e}),define("lib/viz/threeLights",["threejs"],function(e){var t=function(){this.ambient=new e.AmbientLight(4210752),this.point={blue:{}},this.point.blue.light=new e.PointLight(13311,3,150),this.point.blue.helper=new e.PointLightHelper(this.point.blue.light,3)};return t}),define("lib/viz/mover",[],function(){var e=function(e){this.connector=e,this.frictionOn=!0,this.friction=.001,this.pos={x:0,y:0,z:0},this.stop()};return e.prototype.stop=function(){this.frictionOn=!1,this.velo={x:0,y:0,z:0}},e.prototype.spacePush=function(e){this.frictionOn=!1,this.velo=e},e.prototype.push=function(e){this.frictionOn=!0,this.velo=e},e.prototype.moveTo=function(e){this.pos=e},e.prototype.towardZero=function(e,t){if(Math.abs(e)<t)return 0;if(e>0)return e+t*-1;if(e<0)return e+t},e.prototype.addFriction=function(){this.velo.x=this.towardZero(this.velo.x,this.friction),this.velo.y=this.towardZero(this.velo.y,this.friction),this.velo.z=this.towardZero(this.velo.z,this.friction)},e.prototype.addForces=function(){this.frictionOn&&this.addFriction()},e.prototype.update=function(){this.addForces(),this.pos.x+=this.velo.x,this.pos.y+=this.velo.y,this.pos.z+=this.velo.z,this.connector.update(this.pos)},e}),define("lib/viz/cubeMover",[],function(){var e=function(e){this.cube=e};return e.prototype.update=function(e){this.cube.mesh.position.x=e.x,this.cube.mesh.position.y=e.y,this.cube.mesh.position.z=e.z},e}),define("lib/viz/cube",["threejs","lib/viz/mover","lib/viz/cubeMover"],function(e,t,n){var r=function(){this.geometry=new e.CubeGeometry(1,1,1),this.material=new e.MeshPhongMaterial({color:65280,specular:5592405,shininess:25}),this.mesh=new e.Mesh(this.geometry,this.material),this.mover=new t(new n(this))};return r.prototype.update=function(){this.mover.update()},r}),define("lib/viz/cubeTest",["threejs","lib/viz/vizStats","lib/viz/threeTrans","lib/viz/threeLights","lib/viz/cube"],function(e,t,n,r,i){var s=function(e){this.config=e,this.transforms=new n,this.build(),this.cube(),this.default().position(),this.startLights(),this.render()};return s.prototype.build=function(){this.scene=new e.Scene,this.camera=new e.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.setupRenderer(),this.stats=new t({elem:this.config.elem})},s.prototype.setupRenderer=function(){this.renderer=new e.WebGLRenderer({antialias:!0,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight);var t=this;window.addEventListener("resize",function(){t.renderer.setSize(window.innerWidth,window.innerHeight)}),this.config.elem.appendChild(this.renderer.domElement)},s.prototype.cube=function(){this.cube=new i,this.scene.add(this.cube.mesh)},s.prototype.render=function(){var e=this;requestAnimationFrame(function(){return e.render()}),this.transforms.run(),this.renderer.render(this.scene,this.camera),this.stats.update()},s.prototype.startLights=function(){this.lights=new r,this.scene.add(this.lights.ambient),this.scene.add(this.lights.point.blue.light)},s.prototype.default=function(){var e=this;return{position:function(){e.camera.position.z=5}}},s}),define("view/canvas/canvas",["angular","lib/viz/cubeTest","angularRoute"],function(e,t){e.module("myApp.view.canvas",["ngRoute"]).config(["$routeProvider",function(e){var t={template:"<div canvas-cube-test />",controller:"viewCanvasCtrl"};e.when("/canvas",t),e.when("/canvas/:id",t)}]).controller("viewCanvasCtrl",[function(){}]).directive("canvasCubeTest",[function(){return{restrict:"EA",replace:!0,link:function(e,n){var r=new t({elem:n.get(0)})}}}])}),define("lib/version/interpolate-filter",["angular"],function(e){e.module("myApp.version.interpolate-filter",[]).filter("interpolate",["version",function(e){return function(t){return String(t).replace(/\%VERSION\%/mg,e)}}])}),define("lib/version/version-directive",["angular"],function(e){e.module("myApp.version.version-directive",[]).directive("appVersion",["version",function(e){return function(t,n,r){n.text(e)}}])}),define("lib/version/version",["angular","lib/version/interpolate-filter","lib/version/version-directive"],function(e){e.module("myApp.version",["myApp.version.interpolate-filter","myApp.version.version-directive"]).value("version","0.1")}),define("app",["angular","angularRoute","view/specierch/specierch","view/mapper/mapper","view/view2/view2","view/canvas/canvas","lib/version/version","lib/common/atCommon","lib/windowWrap/windowWrap"],function(e){e.module("myApp",["ngRoute","myApp.view.specierch","myApp.view.canvas","myApp.view.mapper","myApp.view2","myApp.version","atCommon","windowWrap"]).config(["$routeProvider",function(e){e.otherwise({redirectTo:"/specierch"})}])}),require.config({paths:{jquery:"bower_components/jquery/dist/jquery",jqueryUi:"bower_components/jquery-ui/jquery-ui.min",angular:"bower_components/angular/angular",angularRoute:"bower_components/angular-route/angular-route",angularMocks:"bower_components/angular-mocks/angular-mocks",bootstrap:"bower_components/angular-bootstrap/ui-bootstrap.min","colorpicker.module":"bower_components/angular-bootstrap-colorpicker/js/bootstrap-colorpicker-module.min",text:"bower_components/requirejs-text/text",d3:"bower_components/d3/d3",topojson:"bower_components/topojson/topojson",threejs:"bower_components/threejs/build/three",stats:"bower_components/Physijs/examples/js/stats",lodash:"bower_components/lodash/dist/lodash"},shim:{angular:{exports:"angular"},angularRoute:["angular"],angularMocks:{deps:["angular"],exports:"angular.mock"},bootstrap:{deps:["angular"]},"colorpicker.module":{deps:["bootstrap"]},topojson:{exports:"topojson"},threejs:{exports:"THREE"},stats:{exports:"Stats"},lodash:{exports:"lodash"},jqueryUi:{deps:["jquery"]}}}),require(["angular","app"],function(e,t){e.element().ready(function(){e.bootstrap(document,["myApp"])})}),define("require-build",function(){});